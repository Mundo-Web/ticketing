import{j as o}from"./ui-DOZf2yjz.js";import{B as g}from"./button-DTjxYp-e.js";import{I as d}from"./input-qvCwVpPL.js";import{r as n}from"./recharts-C_88tpBl.js";import{P as b}from"./plus-CzQ2zNVS.js";import{T as w}from"./trash-2-Cs4R96q7.js";import{U as y}from"./user-CpLSdjZ6.js";import"./utils-BJRzUxt3.js";import"./react-B1hewrmX.js";import"./createLucideIcon-BiVfa5Ur.js";const z=({tenants:a,onTenantsChange:c,errors:l,apartmentId:P,onExportMembersNinjaOne:$})=>{const[m,h]=n.useState({}),[u,v]=n.useState({});n.useEffect(()=>{const e={};a.forEach((s,t)=>{typeof s.photo=="string"&&s.photo&&(e[t]=s.photo)}),v(e)},[a]);const j=()=>{c([...a,{name:"",email:"",phone:"",photo:null,apartment_id:0}])},f=e=>{const s=[...a];s.splice(e,1),c(s),h(t=>{const r={...t};return delete r[e],r}),v(t=>{const r={...t};return delete r[e],r})},p=(e,s,t)=>{const r=[...a];r[e]={...r[e],[s]:t,photo:r[e].photo},c(r)},x=(e,s)=>{const t=[...a];if(s){const r=URL.createObjectURL(s);h(i=>({...i,[e]:r})),t[e]={...t[e],photo:s}}else t[e]={...t[e],photo:null},h(r=>{const i={...r};return delete i[e],i});c(t)},N=e=>m[e]?m[e]:u[e]?`/storage/${u[e]}`:"";return o.jsxs("div",{className:"space-y-8",children:[o.jsx("div",{className:" top-0 bg-background z-10 pb-4",children:o.jsx("div",{className:"flex gap-2",children:o.jsxs(g,{type:"button",onClick:j,className:"w-max h-12 rounded-xl shadow-sm hover:shadow-md transition-all",children:[o.jsx(b,{className:"w-5 h-5 mr-2"}),"Add Member"]})})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map((e,s)=>(N(s),o.jsxs("div",{className:"relative group border rounded-2xl p-4 shadow-sm hover:shadow-md transition-all",children:[o.jsx(g,{type:"button",variant:"ghost",size:"icon",onClick:()=>f(s),className:"absolute -top-3 -right-3 bg-destructive/90 text-white rounded-full w-8 h-8 hover:bg-destructive z-20 shadow-lg",children:o.jsx(w,{className:"w-4 h-4"})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:t=>{var r;return x(s,((r=t.target.files)==null?void 0:r[0])||null)},className:"hidden",id:`tenant-photo-${s}`}),o.jsx("label",{htmlFor:`tenant-photo-${s}`,className:"block aspect-square rounded-xl border-2 border-dashed cursor-pointer hover:border-primary overflow-hidden transition-all",children:e.photo||e!=null&&e.photoPreview?o.jsx("img",{src:e.photo?URL.createObjectURL(e.photo):`/storage/${e==null?void 0:e.photoPreview}`,alt:`Member ${s+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform",onLoad:()=>{m[s]&&URL.revokeObjectURL(m[s])}}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-4 bg-muted/20",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/40 flex items-center justify-center mb-4",children:o.jsx(y,{className:"w-8 h-8 text-muted-foreground"})}),o.jsx("p",{className:"text-sm font-medium text-muted-foreground text-center",children:"Subir foto"})]})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(d,{value:e.name||"",onChange:t=>p(s,"name",t.target.value),placeholder:"Nombre completo",className:"h-12 rounded-lg"}),l[`tenants.${s}.name`]&&o.jsx("p",{className:"text-xs text-destructive",children:l[`tenants.${s}.name`]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(d,{type:"email",value:e.email||"",onChange:t=>p(s,"email",t.target.value),placeholder:"correo@ejemplo.com",className:"h-12 rounded-lg"}),l[`tenants.${s}.email`]&&o.jsx("p",{className:"text-xs text-destructive",children:l[`tenants.${s}.email`]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(d,{value:e.phone||"",onChange:t=>p(s,"phone",t.target.value),placeholder:"+1 234 567 890",className:"h-12 rounded-lg"}),l[`tenants.${s}.phone`]&&o.jsx("p",{className:"text-xs text-destructive",children:l[`tenants.${s}.phone`]})]})]})]},s)))})]})};export{z as TenantForm};
