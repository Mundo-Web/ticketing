import{j as e}from"./ui-B_LlBPKL.js";import{A as se}from"./app-layout-Dl_2JLwh.js";import{K as re,m as ae,L as te}from"./app-BHqtn3Wb.js";import{C as G,a as F}from"./card-D2PMvY5E.js";import{B as c}from"./button-D7WChgOL.js";import{T as le,a as oe,b as ie,c as ne}from"./tooltip-CZNM2GAl.js";import{B as O}from"./badge-D8qydIEn.js";import{I}from"./input-CPYfG3NN.js";import{r as B}from"./recharts-C_88tpBl.js";import{T as de,a as ce,b as _,c as $}from"./tabs-BAby--lM.js";import{D as me,f as he,a as xe,b as ge,c as ue,e as pe,g as je}from"./dialog-Cpjj7P1V.js";import{L as D}from"./label-BFkwPYrm.js";import{T as be}from"./textarea-Cf0M5nmX.js";import{S as z,a as K,b as P,c as R,d as V}from"./select-BW9itjM_.js";import{B as ve,a as k}from"./x-DCQyXNSS.js";import{P as U}from"./plus-CzQ2zNVS.js";import{B as we}from"./building-2-BYrPcrqm.js";import{H as fe}from"./house-DLs_ngv-.js";import{S as Ne}from"./search-Du8maFVh.js";import{D as ye,S as Ce,K as Te,a as Se,C as De}from"./share-2-BX2Tzb9c.js";import{S as Le}from"./square-pen-CZ4LUS4h.js";import{T as Be}from"./trash-2-Cs4R96q7.js";import{U as _e}from"./users-BUOHIUcQ.js";import"./utils-BJRzUxt3.js";import"./chevron-up-RfB0QmaY.js";import"./createLucideIcon-BiVfa5Ur.js";import"./dropdown-menu-DMNoBHsR.js";import"./check-ei1vhWUY.js";import"./index-BwDU8Ijz.js";import"./index-D4fRSykC.js";import"./index-Cno2KWhz.js";import"./chevrons-up-down-DyCAeWvF.js";import"./circle-check-big-kRE2lEsQ.js";import"./react-B1hewrmX.js";const $e=["Hardware","Software","Conectividad","Otro"];function gs({devicesOwn:r,devicesShared:l,member:t,building:a,apartment:o}){var E,M,q,H;const{auth:m}=re().props,v=(M=(E=m.user)==null?void 0:E.roles)==null?void 0:M.includes("owner"),w=(H=(q=m.user)==null?void 0:q.roles)==null?void 0:H.includes("doorman"),[f,i]=B.useState(!1),N=[...r,...l].map(s=>({...s,name:s.name||(s.name_device?s.name_device.name:"")}));console.log("allDevices",N);const{data:y,setData:C,post:W,processing:Q,errors:d,reset:J}=ae({device_id:"",category:"",title:"",description:""}),X=s=>{s.preventDefault(),W("/tickets",{preserveScroll:!0,onSuccess:()=>{i(!1),J()}})},[n,Y]=B.useState(""),[Z,ee]=B.useState("all"),T=r.filter(s=>{var h,x,g,u,p,j,b;return((h=s.name)==null?void 0:h.toLowerCase().includes(n.toLowerCase()))||((g=(x=s.brand)==null?void 0:x.name)==null?void 0:g.toLowerCase().includes(n.toLowerCase()))||((p=(u=s.model)==null?void 0:u.name)==null?void 0:p.toLowerCase().includes(n.toLowerCase()))||((b=(j=s.system)==null?void 0:j.name)==null?void 0:b.toLowerCase().includes(n.toLowerCase()))}),S=l.filter(s=>{var h,x,g,u,p,j,b;return((h=s.name)==null?void 0:h.toLowerCase().includes(n.toLowerCase()))||((g=(x=s.brand)==null?void 0:x.name)==null?void 0:g.toLowerCase().includes(n.toLowerCase()))||((p=(u=s.model)==null?void 0:u.name)==null?void 0:p.toLowerCase().includes(n.toLowerCase()))||((b=(j=s.system)==null?void 0:j.name)==null?void 0:b.toLowerCase().includes(n.toLowerCase()))});return e.jsxs(se,{breadcrumbs:Oe,children:[e.jsx(te,{title:"Gestión de Dispositivos"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[(v||w)&&e.jsxs("a",{href:"/owner-doorman/devices",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary hover:bg-primary/90 text-primary-foreground rounded-lg transition-colors",children:[e.jsx(ve,{className:"w-4 h-4"}),"Manage Building Members & Tickets"]}),e.jsxs(me,{open:f,onOpenChange:i,children:[e.jsx(he,{asChild:!0,children:e.jsxs(c,{onClick:()=>i(!0),className:"bg-yellow-500 hover:bg-yellow-600 text-white ml-auto",children:[e.jsx(U,{className:"w-4 h-4 mr-2"})," Reportar un problema"]})}),e.jsxs(xe,{children:[e.jsx(ge,{children:e.jsx(ue,{children:"Reportar un problema"})}),e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(D,{children:"Dispositivo"}),e.jsxs(z,{value:y.device_id,onValueChange:s=>C("device_id",s),required:!0,children:[e.jsx(K,{children:e.jsx(P,{placeholder:"Selecciona un dispositivo"})}),e.jsx(R,{children:N.map(s=>e.jsx(V,{value:String(s.id),children:s.name},s.id))})]}),d.device_id&&e.jsx("div",{className:"text-red-500 text-sm",children:d.device_id})]}),e.jsxs("div",{children:[e.jsx(D,{children:"Categoría"}),e.jsxs(z,{value:y.category,onValueChange:s=>C("category",s),required:!0,children:[e.jsx(K,{children:e.jsx(P,{placeholder:"Selecciona una categoría"})}),e.jsx(R,{children:$e.map(s=>e.jsx(V,{value:s,children:s},s))})]}),d.category&&e.jsx("div",{className:"text-red-500 text-sm",children:d.category})]}),e.jsxs("div",{children:[e.jsx(D,{children:"Título"}),e.jsx(I,{type:"text",value:y.title,onChange:s=>C("title",s.target.value),required:!0}),d.title&&e.jsx("div",{className:"text-red-500 text-sm",children:d.title})]}),e.jsxs("div",{children:[e.jsx(D,{children:"Descripción"}),e.jsx(be,{value:y.description,onChange:s=>C("description",s.target.value),required:!0}),d.description&&e.jsx("div",{className:"text-red-500 text-sm",children:d.description})]}),e.jsxs(pe,{children:[e.jsx(je,{asChild:!0,children:e.jsx(c,{type:"button",variant:"outline",children:"Cancelar"})}),e.jsx(c,{type:"submit",className:"bg-blue-600 text-white",disabled:Q,children:"Enviar Ticket"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(A,{icon:e.jsx(we,{className:"w-6 h-6"}),title:a.name,subtitle:a.address,image:a.image,type:"building"}),e.jsx(A,{icon:e.jsx(fe,{className:"w-6 h-6"}),title:o.name,subtitle:`${o.ubicacion}`,image:o.image,type:"apartment"}),e.jsx(A,{title:t.name,subtitle:t.email,image:t.photo,type:"user"})]}),e.jsxs("div",{className:"relative w-full sm:w-96",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(I,{placeholder:"Search for devices...",className:"pl-9 w-full",value:n,onChange:s=>Y(s.target.value)})]}),e.jsx("div",{className:" w-full",children:e.jsx("div",{className:"flex items-center gap-2 self-end",children:e.jsxs(de,{value:Z,onValueChange:ee,className:"w-full",children:[e.jsxs(ce,{className:"grid w-full grid-cols-3",children:[e.jsx(_,{value:"all",children:"All"}),e.jsx(_,{value:"owned",children:"Owned"}),e.jsx(_,{value:"shared",children:"Shared with me"})]}),e.jsxs($,{value:"all",className:"space-y-8 mt-4",children:[e.jsx(L,{title:"Own Devices",devices:T,variant:"owned",count:T.length}),e.jsx(L,{title:"Shared With Me",devices:S,variant:"shared",count:S.length})]}),e.jsx($,{value:"owned",className:"mt-4",children:e.jsx(L,{title:"Own Devices",devices:T,variant:"owned",count:T.length})}),e.jsx($,{value:"shared",className:"mt-4",children:e.jsx(L,{title:"Shared With Me",devices:S,variant:"shared",count:S.length})})]})})})]})]})}const A=({title:r,subtitle:l,image:t,icon:a,type:o})=>e.jsx(G,{className:"rounded-xl border shadow-sm overflow-hidden hover:shadow-md transition-all duration-300 group py-2",children:e.jsx(F,{className:"p-0 relative",children:e.jsxs("div",{className:"flex items-center gap-3 p-4",children:[t?e.jsx("img",{src:`/storage/${t}`,alt:r,className:"w-12 h-12 rounded-full border border-primary object-cover"}):e.jsx("div",{className:"bg-background/80 p-3 rounded-xl backdrop-blur-sm border",children:e.jsx(ye,{className:"w-6 h-6 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:r})]})})}),L=({title:r,devices:l,variant:t,count:a})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2 text-gray-800",children:[e.jsx("span",{className:`p-2 rounded-lg ${t==="owned"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:e.jsx(k,{className:"w-5 h-5"})}),r,e.jsx(O,{variant:"outline",className:"ml-2 font-normal",children:a})]})}),l.length===0?e.jsxs("div",{className:"p-12 text-center text-gray-600 rounded-xl border-2 border-dashed bg-gray-50 transition-all hover:bg-gray-100",children:[e.jsx(k,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{className:"font-medium",children:"No devices found"}),e.jsx("p",{className:"text-sm mt-1",children:t==="owned"?"Add your first device to get startedr":"No devices have been shared with me yet"}),t==="owned"&&e.jsxs(c,{size:"sm",className:"mt-4 gap-1 bg-green-500 hover:bg-green-600 text-white shadow-sm",children:[e.jsx(U,{className:"w-4 h-4"})," Add Device"]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 w-full",children:l.map(o=>e.jsx(Ae,{device:o,variant:t},o.id))})]}),Ae=({device:r,variant:l})=>{var o,m,v,w,f;const a={owned:{iconBg:"bg-green-50",iconColor:"text-green-600",hoverBg:"hover:bg-green-50/70",borderAccent:"group-hover:border-green-200",badge:"bg-green-50 text-green-700 border-green-200"},shared:{iconBg:"bg-blue-50",iconColor:"text-blue-600",hoverBg:"hover:bg-blue-50/70",borderAccent:"group-hover:border-blue-200",badge:"bg-blue-50 text-blue-700 border-blue-200"}}[l];return e.jsx(G,{className:`group rounded-xl border hover:shadow-md transition-all duration-300 ${a.hoverBg} ${a.borderAccent} bg-white`,children:e.jsxs(F,{className:"p-5",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl ${a.iconBg} ${a.iconColor} transition-transform group-hover:scale-110 shadow-sm`,children:e.jsx(k,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-base text-gray-800",children:((o=r.name_device)==null?void 0:o.name)||"Dispositivo sin nombre"}),e.jsxs("div",{className:"flex flex-wrap gap-1 text-sm text-gray-600 mt-1",children:[((m=r.brand)==null?void 0:m.name)&&e.jsxs(O,{variant:"outline",className:`font-normal ${a.badge}`,children:[e.jsx(Ce,{}),"   ",r.brand.name]}),((v=r.model)==null?void 0:v.name)&&e.jsxs(O,{variant:"outline",className:`font-normal ${a.badge}`,children:[e.jsx(Te,{})," ",r.model.name]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(c,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-gray-100",children:e.jsx(Se,{className:"w-4 h-4 text-gray-600"})}),l==="owned"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-gray-100",children:e.jsx(Le,{className:"w-4 h-4 text-gray-600"})}),e.jsx(c,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full text-red-500 hover:bg-red-50",children:e.jsx(Be,{className:"w-4 h-4"})})]})]})]}),((w=r.system)==null?void 0:w.name)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mt-3",children:[e.jsx(De,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:r.system.name})]}),l==="owned"&&((f=r.shared_with)==null?void 0:f.length)>0&&e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(_e,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Shared with:"}),e.jsx("div",{className:"flex -space-x-2 ml-1",children:r.shared_with.map(i=>e.jsx(le,{children:e.jsxs(oe,{children:[e.jsx(ie,{children:e.jsx("img",{src:`/storage/${i.photo}`,alt:i.name,className:"w-6 h-6 rounded-full border-2 border-white object-cover hover:scale-110 transition-transform shadow-sm",onError:N=>{N.currentTarget.src="/images/default-user.png"}})}),e.jsx(ne,{children:e.jsx("p",{children:i.name})})]})},i.id))})]})}),l==="shared"&&r.owner&&e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Owner:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:`/storage/${r.owner[0].photo}`,alt:r.owner[0].name,className:"w-6 h-6 rounded-full object-cover border-2 border-white shadow-sm",onError:i=>{i.currentTarget.src="/images/default-user.png"}}),e.jsx("span",{className:"font-medium text-gray-700",children:r.owner[0].name})]})]})})]})})},Oe=[{title:"Dashboard",href:"/dashboard"},{title:"Dispositivos",href:"#"}];export{gs as default};
