import{j as e}from"./ui-D1w9Iw8H.js";import{r as p}from"./recharts-Dld1lWsf.js";import{L as X,$ as Y,S as i,t as o}from"./app-SkUV-dh8.js";import{A as Z,D as ee,a as ae,b as se,e as re,d as y}from"./app-layout-CpQee9_w.js";import{c as M}from"./utils-B66yfQja.js";import{C as d,c,a as E,b as I,d as F}from"./card-ujb193xZ.js";import{B as r,f as R}from"./format-B6Rb66cG.js";import{B as x}from"./button-BntSAybs.js";import{I as te}from"./input-CYKIjOQn.js";import{S as B,a as L,b as O,c as $,d as l}from"./select-Cexm_mQK.js";import{R as le}from"./refresh-cw-Sduo88Io.js";import{T as n}from"./triangle-alert-DrKF4AKN.js";import{S as de,A as H}from"./x-CNM1Dv5p.js";import{a as m,C as ce}from"./circle-check-big-DZU7S_eA.js";import{F as ie}from"./filter-B_U0HgPW.js";import{S as V}from"./search-BGEUGtTC.js";import{D as ne}from"./database-DZAg6xN8.js";import{S as oe}from"./server-qQX4KwzV.js";import{T as z}from"./ticket-plus-XGEhpZNc.js";import{C as P}from"./clock-BxVJL7PR.js";import{E as xe}from"./ellipsis-Dcv-ToJ_.js";import{E as me}from"./eye-CkkIptxE.js";import{e as W}from"./es-BahIIYDD.js";import"./react-B1hewrmX.js";import"./tooltip-CQHbb0yU.js";import"./check-CkciTNW-.js";import"./createLucideIcon-CR-66RMC.js";import"./index-CWijjM2R.js";import"./index-cS_AKGRi.js";import"./index-DrdTBqzy.js";import"./chevrons-up-down-BF_I81uV.js";const he=a=>{switch(a){case"critical":return e.jsxs(r,{className:"gap-1 bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800",children:[e.jsx(n,{className:"h-3 w-3"}),"Critical"]});case"warning":return e.jsxs(r,{className:"gap-1 bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-200 dark:border-yellow-800",children:[e.jsx(n,{className:"h-3 w-3"}),"Warning"]});case"info":return e.jsxs(r,{className:"gap-1 bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800",children:[e.jsx(n,{className:"h-3 w-3"}),"Info"]});default:return e.jsx(r,{variant:"outline",className:"gap-1",children:a})}},ge=a=>{switch(a){case"open":return e.jsxs(r,{className:"gap-1 bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800",children:[e.jsx(P,{className:"h-3 w-3"}),"Open"]});case"acknowledged":return e.jsxs(r,{className:"gap-1 bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-200 dark:border-yellow-800",children:[e.jsx(m,{className:"h-3 w-3"}),"Acknowledged"]});case"resolved":return e.jsxs(r,{className:"gap-1 bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800",children:[e.jsx(m,{className:"h-3 w-3"}),"Resolved"]});default:return e.jsx(r,{variant:"outline",className:"gap-1",children:a})}};function qe({alerts:a,filters:t}){var u,f,k,v,w,S,C,A,T;const[b,K]=p.useState((t==null?void 0:t.search)||""),[h,q]=p.useState((t==null?void 0:t.severity)||"all"),[g,G]=p.useState((t==null?void 0:t.status)||"all"),N=()=>{i.get("/ninjaone-alerts",{search:b||void 0,severity:h==="all"?void 0:h,status:g==="all"?void 0:g})},J=async s=>{try{await i.post(`/ninjaone-alerts/${s}/acknowledge`),o.success("Alert acknowledged successfully")}catch{o.error("Error acknowledging alert")}},Q=()=>{i.reload({only:["alerts"]})},U=async s=>{try{await i.post(`/ninjaone-alerts/${s}/create-ticket`),o.success("Ticket created successfully")}catch{o.error("Error creating ticket")}};return e.jsxs(Z,{children:[e.jsx(X,{title:"NinjaOne Alerts - Monitor & Alert Management"}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:"NinjaOne Alert Center"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mt-2",children:"Monitor and manage alerts from NinjaOne synchronized devices"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(x,{variant:"outline",size:"sm",onClick:Q,children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Refresh"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(d,{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-950/50 dark:to-red-900/50 border-red-200 dark:border-red-800",children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-600 rounded-lg",children:e.jsx(n,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Critical Alerts"}),e.jsx("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:((u=a==null?void 0:a.data)==null?void 0:u.filter(s=>s.severity==="critical").length)||0})]})]})})}),e.jsx(d,{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-950/50 dark:to-yellow-900/50 border-yellow-200 dark:border-yellow-800",children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-600 rounded-lg",children:e.jsx(de,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-300",children:"Warnings"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:((f=a==null?void 0:a.data)==null?void 0:f.filter(s=>s.severity==="warning").length)||0})]})]})})}),e.jsx(d,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/50 dark:to-green-900/50 border-green-200 dark:border-green-800",children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-600 rounded-lg",children:e.jsx(m,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:((k=a==null?void 0:a.data)==null?void 0:k.filter(s=>s.status==="resolved").length)||0})]})]})})}),e.jsx(d,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/50 dark:to-blue-900/50 border-blue-200 dark:border-blue-800",children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:e.jsx(H,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total Alerts"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:((v=a==null?void 0:a.meta)==null?void 0:v.total)||0})]})]})})})]}),e.jsxs(d,{className:"border-0 shadow-lg dark:shadow-gray-900/50",children:[e.jsxs(E,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5"}),"Filters & Search"]}),e.jsx(F,{children:"Filter and search specific alerts by criteria"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(te,{placeholder:"Search by title, description or device...",value:b,onChange:s=>K(s.target.value),className:"pl-10",onKeyPress:s=>s.key==="Enter"&&N()})]})}),e.jsxs(B,{value:h,onValueChange:q,children:[e.jsx(L,{children:e.jsx(O,{placeholder:"Severity"})}),e.jsxs($,{children:[e.jsx(l,{value:"all",children:"All severities"}),e.jsx(l,{value:"critical",children:"Critical"}),e.jsx(l,{value:"warning",children:"Warning"}),e.jsx(l,{value:"info",children:"Info"})]})]}),e.jsxs(B,{value:g,onValueChange:G,children:[e.jsx(L,{children:e.jsx(O,{placeholder:"Status"})}),e.jsxs($,{children:[e.jsx(l,{value:"all",children:"All statuses"}),e.jsx(l,{value:"open",children:"Open"}),e.jsx(l,{value:"acknowledged",children:"Acknowledged"}),e.jsx(l,{value:"resolved",children:"Resolved"})]})]}),e.jsxs(x,{onClick:N,className:"w-full",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Search"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(H,{className:"w-4 h-4"}),"Showing ",((w=a==null?void 0:a.data)==null?void 0:w.length)||0," of ",((S=a==null?void 0:a.meta)==null?void 0:S.total)||0," alerts"]})]})]}),e.jsxs(d,{className:"border-0 shadow-xl dark:shadow-gray-900/50",children:[e.jsxs(E,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5"}),"Alert List"]}),e.jsxs(F,{children:[((C=a==null?void 0:a.meta)==null?void 0:C.total)||0," alerts found"]})]}),e.jsxs(c,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/70",children:[e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Device"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Alert"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Severity"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Type"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Date"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Ticket"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Actions"})]})}),e.jsx("tbody",{children:!(a!=null&&a.data)||a.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"py-12 text-center",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{className:"h-12 w-12 text-gray-400 mx-auto"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"No alerts found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"There are no alerts matching your search criteria."})]})})}):a.data.map((s,j)=>{var D,_;return e.jsxs("tr",{className:M("border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",j%2===0?"bg-white dark:bg-gray-800/30":"bg-gray-50 dark:bg-gray-800/50"),children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"min-w-10 min-h-10 bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-900/30 dark:to-blue-800/30 rounded-lg flex items-center justify-center",children:e.jsx(oe,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:((D=s.device)==null?void 0:D.name)||"Device not found"}),((_=s.device)==null?void 0:_.ninjaone_device_id)&&e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",s.device.ninjaone_device_id]})]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:s.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate mt-1",children:s.description})]})}),e.jsx("td",{className:"py-4 px-6",children:he(s.severity)}),e.jsx("td",{className:"py-4 px-6",children:ge(s.status)}),e.jsx("td",{className:"py-4 px-6",children:e.jsx(r,{variant:"outline",className:"bg-gray-50 dark:bg-gray-800",children:s.alert_type})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100",children:R(new Date(s.created_at),"dd/MM/yyyy",{locale:W})}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:R(new Date(s.created_at),"HH:mm",{locale:W})})]})]})}),e.jsx("td",{className:"py-4 px-6",children:s.ticket_created?e.jsxs(r,{className:"gap-1 bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800",children:[e.jsx(z,{className:"h-3 w-3"}),"Created"]}):e.jsxs(r,{variant:"outline",className:"gap-1 text-gray-500",children:[e.jsx(P,{className:"h-3 w-3"}),"No ticket"]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs(ee,{children:[e.jsx(ae,{asChild:!0,children:e.jsxs(x,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(xe,{className:"h-4 w-4"})]})}),e.jsxs(se,{align:"end",className:"w-48",children:[e.jsx(re,{children:"Actions"}),e.jsx(y,{asChild:!0,children:e.jsxs(Y,{href:`/ninjaone-alerts/${s.id}`,className:"flex items-center",children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"View details"]})}),s.status==="open"&&e.jsxs(y,{onClick:()=>J(s.id),className:"flex items-center",children:[e.jsx(m,{className:"mr-2 h-4 w-4"}),"Acknowledge"]}),!s.ticket_created&&e.jsxs(y,{onClick:()=>U(s.id),className:"flex items-center",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Create Ticket"]})]})]})})]},s.id)})})]})}),((A=a==null?void 0:a.meta)==null?void 0:A.last_page)&&a.meta.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6 px-6 pb-6",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",a.meta.from||0," to ",a.meta.to||0," of ",a.meta.total||0," results"]}),e.jsx("div",{className:"flex gap-2",children:(T=a.links)==null?void 0:T.map((s,j)=>e.jsx(x,{variant:s.active?"default":"outline",size:"sm",onClick:()=>s.url&&i.get(s.url),disabled:!s.url,dangerouslySetInnerHTML:{__html:s.label},className:M("min-w-[40px]",s.active&&"bg-blue-600 hover:bg-blue-700")},j))})]})]})]})]})})]})}export{qe as default};
