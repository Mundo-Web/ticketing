import{j as e}from"./ui--9QRf85z.js";import{A as Is,D as os,a as cs,b as ds,e as ms,f as oe,d as Fe}from"./app-layout-D_YFnG60.js";import{K as zs,L as Bs,t as X,S as bs}from"./app-DMVUxRuJ.js";import{b as Re,A as js,C as Ns,X as ys,Y as vs,T as Ie,d as ye,L as ws,r as U,P as Os,e as Ls,f as Ws}from"./recharts-B16uQ_Zp.js";import{C as x,a as $,b as M,c as h,e as Ce,d as xs}from"./card-DuB4YgHF.js";import{B as O}from"./badge-CTYXlqUe.js";import{B as f}from"./button-3fVzTxZH.js";import{S as Ps,a as Hs,b as Vs,c as Gs,d as hs}from"./select-BeaewNmC.js";import{T as qs}from"./tooltip-Dm-vk6MS.js";import{D as Ys,a as Ks,b as Xs,c as Js}from"./dialog-Gizu_HUr.js";import{E as ze,F as Be}from"./FileSaver.min-BGmHM0RZ.js";import{T as Ne}from"./trending-up-iFJZgfSe.js";import{C as Te,Z as ce}from"./zap-1HMIGlWi.js";import{A as Ae}from"./activity-DiIEwa5r.js";import{R as ks,B as pe,O as De,U as Qs,C as gs,a as Zs,b as et,W as st}from"./wrench-CNpXEJdm.js";import{C as q,a as V}from"./circle-check-big-DKZvEq1H.js";import{M as Se}from"./map-pin-B6MGBFhT.js";import{E as tt}from"./eye-Bhnt7WyV.js";import{C as Q}from"./clock-rsHRdq3d.js";import{X as _e,U as de,B as Z,b as Ee,c as at}from"./x-Dwbvy68c.js";import{C as ps}from"./check-C_IBZmq_.js";import{a as ue,T as rt,M as lt,P as nt}from"./timer-DmmoSr9O.js";import{T as me}from"./triangle-alert-Dwpv9XSR.js";import{I as $e}from"./info-DjRDCVbv.js";import{T as ee}from"./ticket-NZxvcyxK.js";import{E}from"./external-link-D4kgwzSg.js";import{C as se}from"./circle-alert-BoVUSwRZ.js";import{U as he}from"./user-plus-TUxKnim4.js";import{U as xe}from"./user-B9S7Zak9.js";import{H as fe}from"./house-Csy0F4Ln.js";import{P as it}from"./plus-BdgF4T8b.js";import{C as Me}from"./chevron-left-BEER2g75.js";import{S as Ue}from"./smartphone-DjIgDxH-.js";import{M as us}from"./monitor--_KUovl-.js";import{F as fs}from"./file-spreadsheet-DP1B9Kxi.js";import{D as ot}from"./download-CRovyn-I.js";import{C as ct}from"./circle-play-Dthy1u5D.js";import{f as Fs}from"./format-CCdy9gBC.js";import"./index--i9LXxpm.js";import"./utils-DvwAYYBZ.js";import"./index-BDFBH7XS.js";import"./index-BsIecJEN.js";import"./index-Df3HipqK.js";import"./chevrons-up-down-DaqTssCh.js";import"./createLucideIcon-BBA9I-xQ.js";import"./react-B1hewrmX.js";import"./en-US-Cx6CYfeS.js";const dt=({active:a,payload:p,label:r})=>{if(a&&p&&p.length){const w=p.reduce((n,i)=>n+(i.value||0),0);return e.jsx("div",{className:"bg-white dark:bg-gray-800 border-0 rounded-2xl shadow-2xl p-6 min-w-[200px]",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-b border-gray-100 dark:border-gray-700 pb-3",children:[e.jsx("p",{className:"font-bold text-lg text-gray-900 dark:text-white",children:r}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Total: ",w," tickets"]})]}),e.jsx("div",{className:"space-y-3",children:p.map((n,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shadow-md",style:{backgroundColor:n.color}}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:n.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:n.value}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1",children:["(",w>0?Math.round(n.value/w*100):0,"%)"]})]})]},i))})]})})}return null};function mt({data:a}){return e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsxs(x,{className:"border-0 bg-gradient-to-br from-primary/5 via-background to-secondary/5 shadow-2xl overflow-hidden relative lg:col-span-2",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 to-green-50/50 dark:from-blue-950/20 dark:to-green-950/20"}),e.jsxs($,{className:"pb-8 relative",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-gradient-to-br from-blue-500 to-green-500 shadow-lg",children:e.jsx(Ne,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{children:[e.jsx(M,{className:"text-3xl font-black text-foreground",children:"Ticket Evolution"}),e.jsx("p",{className:"text-lg text-muted-foreground font-medium",children:"Created vs Resolved trends over time"})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-blue-50/80 dark:bg-blue-950/30 rounded-xl p-4 border border-blue-100 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full shadow-sm"}),e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Average Created"})]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:[a.ticketsOverTime.length>0?Math.round(a.ticketsOverTime.reduce((p,r)=>p+r.created,0)/a.ticketsOverTime.length):0," /day"]})]}),e.jsxs("div",{className:"bg-green-50/80 dark:bg-green-950/30 rounded-xl p-4 border border-green-100 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full shadow-sm"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Average Resolved"})]}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-2",children:[a.ticketsOverTime.length>0?Math.round(a.ticketsOverTime.reduce((p,r)=>p+r.resolved,0)/a.ticketsOverTime.length):0," /day"]})]})]})]}),e.jsx(h,{className:"pt-0 pb-8 relative",children:e.jsx("div",{className:"h-[450px] bg-gradient-to-b from-white/50 to-transparent dark:from-gray-900/50 rounded-2xl p-4",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(js,{data:a.ticketsOverTime,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorCreated",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:.9}),e.jsx("stop",{offset:"50%",stopColor:"#3b82f6",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorResolved",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:.9}),e.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:.1})]}),e.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx(Ns,{strokeDasharray:"2 6",stroke:"hsl(var(--muted-foreground))",opacity:.3,vertical:!1}),e.jsx(ys,{dataKey:"month",tick:{fontSize:13,fill:"hsl(var(--muted-foreground))",fontWeight:500},tickLine:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1},axisLine:{stroke:"hsl(var(--border))",strokeWidth:2},dy:10}),e.jsx(vs,{tick:{fontSize:13,fill:"hsl(var(--muted-foreground))",fontWeight:500},tickLine:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1},axisLine:{stroke:"hsl(var(--border))",strokeWidth:2},dx:-10}),e.jsx(Ie,{content:e.jsx(dt,{})}),e.jsx(ye,{type:"monotone",dataKey:"created",stackId:"1",stroke:"#3b82f6",strokeWidth:4,fill:"url(#colorCreated)",name:"Created",dot:{fill:"#3b82f6",strokeWidth:3,r:6,stroke:"#ffffff",filter:"url(#glow)"},activeDot:{r:8,stroke:"#3b82f6",strokeWidth:4,fill:"#ffffff",filter:"url(#glow)",className:"animate-pulse"}}),e.jsx(ye,{type:"monotone",dataKey:"resolved",stackId:"2",stroke:"#10b981",strokeWidth:4,fill:"url(#colorResolved)",name:"Resolved",dot:{fill:"#10b981",strokeWidth:3,r:6,stroke:"#ffffff",filter:"url(#glow)"},activeDot:{r:8,stroke:"#10b981",strokeWidth:4,fill:"#ffffff",filter:"url(#glow)",className:"animate-pulse"}}),e.jsx(ws,{verticalAlign:"top",height:50,iconType:"circle",formatter:(p,r)=>e.jsx("span",{className:"text-base font-semibold",style:{color:r.color},children:p})})]})})})})]})})}const xt=[{title:"Dashboard",href:"/dashboard"}],be=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),je=["#3B82F6","#EF4444","#F59E0B","#10B981","#8B5CF6","#F97316","#06B6D4","#84CC16","#EC4899","#6366F1"],ht=async a=>{const p=new ze.Workbook;p.creator="Ticketing System - Trend Analysis",p.created=new Date,p.company="Weekly Performance Report";const r=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),n=(u=>{const b=[],g=new Date;for(let j=6;j>=0;j--){const C=new Date(g);C.setDate(g.getDate()-j);const T=C.toLocaleDateString("en-US",{month:"short",day:"numeric"}),_=u.find(te=>te.date===T);b.push({date:T,count:_&&_.count||0})}return b})(a),i={primary:"FF2563EB",secondary:"FF1E3A8A",success:"FF059669",warning:"FFF59E0B",danger:"FFDC2626",info:"FF0891B2",light:"FFF8FAFC",dark:"FF1E293B"},o=p.addWorksheet("Weekly Trend Analysis",{pageSetup:{paperSize:9,orientation:"landscape"}});o.columns=[{width:15},{width:18},{width:18},{width:20},{width:25},{width:30}],o.mergeCells("A1:F1");const R=o.getCell("A1");R.value="WEEKLY PERFORMANCE TREND ANALYSIS",R.style={font:{name:"Segoe UI",size:20,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:i.secondary}},left:{style:"thick",color:{argb:i.secondary}},bottom:{style:"thick",color:{argb:i.secondary}},right:{style:"thick",color:{argb:i.secondary}}}},o.getRow(1).height=40,o.mergeCells("A2:D2");const N=o.getCell("A2");N.value=`Analysis Period: Last 7 Days | Generated: ${r}`,N.style={font:{name:"Segoe UI",size:11,italic:!0,color:{argb:i.dark}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.light}},alignment:{horizontal:"left",vertical:"middle"}},o.mergeCells("E2:F2");const c=n.reduce((u,b)=>u+(b.count||0),0),L=n.length>0?Math.round(c/n.length):0,S=o.getCell("E2");S.value=`Total: ${c} tickets | Daily Avg: ${L}`,S.style={font:{name:"Segoe UI",size:11,bold:!0,color:{argb:i.primary}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.light}},alignment:{horizontal:"right",vertical:"middle"}};let y=4;["Date","Tickets Created","Trend vs Avg","Performance","Volume Category","Action Needed"].forEach((u,b)=>{const g=o.getCell(y,b+1);g.value=u,g.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.secondary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:"FFFFFFFF"}},left:{style:"medium",color:{argb:"FFFFFFFF"}},bottom:{style:"medium",color:{argb:"FFFFFFFF"}},right:{style:"medium",color:{argb:"FFFFFFFF"}}}}}),o.getRow(y).height=30,y++,n.forEach((u,b)=>{const g=u.count||0,j=L||1,C=j>0?Math.round((g-j)/j*100):0,T=C>15?"â†— Above Average":C<-15?"â†˜ Below Average":"â†’ Normal Range",_=g>j*1.3?"High Volume":g<j*.7?"Low Volume":"Standard Volume",te=g>j*1.5?"Peak Day":g>j*1.2?"Busy Day":g<j*.8?"Light Day":"Normal Day",le=g>j*1.5?"Monitor capacity & resources":g<j*.5?"Review for issues":"Continue monitoring";[u.date||"Unknown",g,`${C>0?"+":""}${C}% ${T}`,_,te,le].forEach((ae,I)=>{const ne=o.getCell(y,I+1);ne.value=ae;let Y=b%2===0?"FFFFFFFF":"FFF8FAFC",K=i.dark;if(I===2&&(C>15?(Y=i.success,K="FFFFFFFF"):C<-15&&(Y=i.warning,K="FFFFFFFF")),I===3)switch(ae){case"High Volume":Y=i.info,K="FFFFFFFF";break;case"Low Volume":Y=i.warning,K="FFFFFFFF";break}if(I===4)switch(ae){case"Peak Day":Y=i.danger,K="FFFFFFFF";break;case"Busy Day":Y=i.warning,K="FFFFFFFF";break;case"Light Day":Y=i.info,K="FFFFFFFF";break}ne.style={font:{name:"Segoe UI",size:10,color:{argb:K}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:Y}},alignment:{horizontal:I===0||I===5?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),o.getRow(y).height=25,y++}),y+=2,o.mergeCells(`A${y}:F${y}`);const G=o.getCell(`A${y}`);G.value="TREND ANALYSIS & INSIGHTS",G.style={font:{name:"Segoe UI",size:14,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.info}},alignment:{horizontal:"center",vertical:"middle"}},y++;const H=a.reduce((u,b)=>b.count>u.count?b:u,a[0]),W=a.reduce((u,b)=>b.count<u.count?b:u,a[0]),B=Math.round((H.count-W.count)/L*100);[["Metric","Value","Analysis","Recommendation"],["Peak Day",`${H.date} (${H.count} tickets)`,H.count>L*1.5?"Significant spike":"Normal peak","Monitor for patterns"],["Lowest Day",`${W.date} (${W.count} tickets)`,W.count<L*.5?"Unusual low":"Normal variation","Check for issues if unusually low"],["Variance",`${B}%`,B>50?"High volatility":"Stable pattern",B>50?"Review capacity planning":"Maintain current approach"],["Trend Direction",c>L*7?"Growing":"Stable","Week over week","Adjust resources as needed"],["Consistency",Math.abs(B)<30?"Very Consistent":"Variable","Daily fluctuation","Plan for peak capacity"]].forEach((u,b)=>{u.forEach((g,j)=>{const C=o.getCell(y+b,j+1);C.value=g;let T=b===0?i.secondary:"FFFFFFFF",_=b===0?"FFFFFFFF":i.dark;b>0&&j===2&&(g.includes("spike")||g.includes("High volatility")?(T=i.warning,_="FFFFFFFF"):(g.includes("Consistent")||g.includes("Stable"))&&(T=i.success,_="FFFFFFFF")),C.style={font:{name:"Segoe UI",size:10,bold:b===0||j===0,color:{argb:_}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:T}},alignment:{horizontal:j===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),o.getRow(y+b).height=22});const A=`Weekly_Trend_Analysis_${new Date().toISOString().split("T")[0]}.xlsx`,d=await p.xlsx.writeBuffer(),v=new Blob([d],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Be.saveAs(v,A),X.success("Weekly Trend Analysis Generated!",{description:`${A} has been downloaded with comprehensive trend analysis and insights.`})},gt=async(a,p)=>{const r=new ze.Workbook;r.creator="Ticketing System - Analytics",r.created=new Date,r.company="Ticket Distribution Analysis";const w=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),n={primary:"FF2563EB",secondary:"FF1E3A8A",success:"FF059669",warning:"FFF59E0B",danger:"FFDC2626",info:"FF0891B2",light:"FFF8FAFC",dark:"FF1E293B"},i=r.addWorksheet("Ticket Distribution Analysis",{pageSetup:{paperSize:9,orientation:"portrait"}});i.columns=[{width:25},{width:15},{width:18},{width:20},{width:25}],i.mergeCells("A1:E1");const o=i.getCell("A1");o.value="TICKET DISTRIBUTION ANALYSIS REPORT",o.style={font:{name:"Segoe UI",size:18,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:n.secondary}},left:{style:"thick",color:{argb:n.secondary}},bottom:{style:"thick",color:{argb:n.secondary}},right:{style:"thick",color:{argb:n.secondary}}}},i.getRow(1).height=35,i.mergeCells("A2:C2");const R=i.getCell("A2");R.value=`Report Generated: ${w}`,R.style={font:{name:"Segoe UI",size:11,italic:!0,color:{argb:n.dark}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.light}},alignment:{horizontal:"left",vertical:"middle"}},i.mergeCells("D2:E2");const N=i.getCell("D2");N.value=`Total Tickets: ${p}`,N.style={font:{name:"Segoe UI",size:11,bold:!0,color:{argb:n.primary}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.light}},alignment:{horizontal:"right",vertical:"middle"}};let c=4;["Status","Count","Percentage","Priority Level","Action Required"].forEach((A,d)=>{const v=i.getCell(c,d+1);v.value=A,v.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.secondary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:"FFFFFFFF"}},left:{style:"medium",color:{argb:"FFFFFFFF"}},bottom:{style:"medium",color:{argb:"FFFFFFFF"}},right:{style:"medium",color:{argb:"FFFFFFFF"}}}}}),i.getRow(c).height=30,c++;const S={open:{label:"Open",priority:"Critical",action:"Immediate Assignment Required",color:n.danger},in_progress:{label:"In Progress",priority:"High",action:"Monitor Progress",color:n.warning},resolved:{label:"Resolved",priority:"Low",action:"Quality Check",color:n.success},closed:{label:"Closed",priority:"Completed",action:"Archive",color:n.info}};Object.entries(a).forEach(([A,d])=>{const v=Math.round(Number(d)/p*100),u=S[A]||{label:A,priority:"Unknown",action:"Review",color:n.dark};[u.label,d,`${v}%`,u.priority,u.action].forEach((g,j)=>{const C=i.getCell(c,j+1);C.value=g;let T="FFFFFFFF",_=n.dark;if(j===0&&(T=u.color,_="FFFFFFFF"),j===3)switch(g){case"Critical":T=n.danger,_="FFFFFFFF";break;case"High":T=n.warning,_="FFFFFFFF";break;case"Low":T=n.success,_="FFFFFFFF";break;case"Completed":T=n.info,_="FFFFFFFF";break}C.style={font:{name:"Segoe UI",size:11,bold:j===0,color:{argb:_}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:T}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),i.getRow(c).height=25,c++}),c+=2,i.mergeCells(`A${c}:E${c}`);const y=i.getCell(`A${c}`);y.value="WORKFLOW ANALYSIS & RECOMMENDATIONS",y.style={font:{name:"Segoe UI",size:14,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.info}},alignment:{horizontal:"center",vertical:"middle"}},c++;const P=Math.round(a.open/p*100),G=Math.round(a.resolved/p*100);[["Metric","Value","Status","Recommendation"],["Open Tickets Rate",`${P}%`,P>20?"High":"Normal",P>20?"Increase technical resources":"Maintain current level"],["Resolution Rate",`${G}%`,G>70?"Excellent":"Needs Improvement",G>70?"Continue best practices":"Review resolution processes"],["Workflow Efficiency",p>100?"High Volume":"Standard","Active","Monitor trends and adjust capacity"],["System Health","Operational","Good","Regular monitoring recommended"]].forEach((A,d)=>{A.forEach((v,u)=>{const b=i.getCell(c+d,u+1);b.value=v;let g=d===0?n.secondary:"FFFFFFFF",j=d===0?"FFFFFFFF":n.dark;if(d>0&&u===2)switch(v){case"High":g=n.danger,j="FFFFFFFF";break;case"Excellent":g=n.success,j="FFFFFFFF";break;case"Good":g=n.success,j="FFFFFFFF";break;case"Needs Improvement":g=n.warning,j="FFFFFFFF";break}b.style={font:{name:"Segoe UI",size:10,bold:d===0||u===0,color:{argb:j}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:g}},alignment:{horizontal:u===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),i.getRow(c+d).height=22});const W=`Ticket_Distribution_Analysis_${new Date().toISOString().split("T")[0]}.xlsx`,B=await r.xlsx.writeBuffer(),k=new Blob([B],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Be.saveAs(k,W),X.success("Ticket Distribution Analysis Generated!",{description:`${W} has been downloaded with detailed analysis and recommendations.`})},pt=async a=>{const p=new ze.Workbook;p.creator="Ticketing System - Device Management",p.created=new Date,p.company="Device Inventory Report";const r=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),w={primary:"FF2563EB",secondary:"FF1E3A8A",success:"FF059669",warning:"FFF59E0B",info:"FF0891B2",light:"FFF8FAFC",dark:"FF1E293B"},n=p.addWorksheet("Device Inventory",{pageSetup:{paperSize:9,orientation:"landscape"}});n.columns=[{width:8},{width:25},{width:18},{width:18},{width:20},{width:20},{width:15},{width:15},{width:25}],n.mergeCells("A1:H1");const i=n.getCell("A1");i.value="DEVICE INVENTORY MANAGEMENT REPORT",i.style={font:{name:"Segoe UI",size:20,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:w.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:w.secondary}},left:{style:"thick",color:{argb:w.secondary}},bottom:{style:"thick",color:{argb:w.secondary}},right:{style:"thick",color:{argb:w.secondary}}}},n.getRow(1).height=40,n.mergeCells("A2:E2");const o=n.getCell("A2");o.value=`Generated on: ${r}`,o.style={font:{name:"Segoe UI",size:12,italic:!0,color:{argb:w.dark}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:w.light}},alignment:{horizontal:"left",vertical:"middle"}},n.mergeCells("F2:H2");const R=n.getCell("F2"),N=a.length,c=a.filter(k=>k.users_count>0).length,L=new Set(a.map(k=>k.device_type)).size;R.value=`Total: ${N} | Active: ${c} | Types: ${L}`,R.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:w.primary}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:w.light}},alignment:{horizontal:"right",vertical:"middle"}};const S=["ID","Name Device","Model","Brand","System","Users","Status","Usage Level"];let y=4;S.forEach((k,A)=>{const d=n.getCell(y,A+1);d.value=k,d.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:w.secondary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:"FFFFFFFF"}},left:{style:"medium",color:{argb:"FFFFFFFF"}},bottom:{style:"medium",color:{argb:"FFFFFFFF"}},right:{style:"medium",color:{argb:"FFFFFFFF"}}}}}),n.getRow(y).height=30,y++,a.forEach((k,A)=>{const d=k.users_count===0?"Unused":k.users_count<=2?"Low Usage":k.users_count<=5?"Medium Usage":"High Usage",v=k.users_count>0?"Active":"Inactive";[k.id,k.device_type||"Unknown",k.device_name||"N/A",k.brand_name||"N/A",k.system_name||"N/A",k.users_count||0,v,d].forEach((b,g)=>{const j=n.getCell(y,g+1);j.value=b;let C=A%2===0?"FFFFFFFF":"FFF8FAFC",T=w.dark;if(g===7&&(b==="Active"?(C=w.success,T="FFFFFFFF"):(C="FFEF4444",T="FFFFFFFF")),g===8)switch(b){case"High Usage":C=w.success,T="FFFFFFFF";break;case"Medium Usage":C=w.warning,T="FFFFFFFF";break;case"Low Usage":C=w.info,T="FFFFFFFF";break;case"Unused":C="FFEF4444",T="FFFFFFFF";break}j.style={font:{name:"Segoe UI",size:10,color:{argb:T}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:C}},alignment:{horizontal:g===1?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),n.getRow(y).height=25,y++}),y+=2,n.mergeCells(`A${y}:H${y}`);const P=n.getCell(`A${y}`);P.value="INVENTORY SUMMARY",P.style={font:{name:"Segoe UI",size:14,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:w.info}},alignment:{horizontal:"center",vertical:"middle"}},y++,[["Total Devices",N,"Complete inventory count"],["Active Devices",c,`${Math.round(c/N*100)}% utilization rate`],["Inactive Devices",N-c,"Available for assignment"],["Device Types",L,"Different categories available"],["Total Users",a.reduce((k,A)=>k+A.users_count,0),"Active device users"]].forEach(k=>{k.forEach((A,d)=>{const v=n.getCell(y,d+1);v.value=A,v.style={font:{name:"Segoe UI",size:10,bold:d===0},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFFFF"}},alignment:{horizontal:d===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),y++});const H=`Device_Inventory_Report_${new Date().toISOString().split("T")[0]}.xlsx`,W=await p.xlsx.writeBuffer(),B=new Blob([W],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Be.saveAs(B,H),X.success("Device Inventory Report Generated!",{description:`${H} has been downloaded with professional formatting and detailed analysis.`})};function da({metrics:a,charts:p,lists:r,googleMapsApiKey:w,technicalInstructions:n=[],currentTechnical:i=null}){var He,Ve,Ge,qe,Ye,Ke,Xe,Je,Qe,Ze,es,ss,ts,as,rs,ls,ns;const o=zs().props;console.log("PageProps structure:",o),console.log("Auth user:",(He=o==null?void 0:o.auth)==null?void 0:He.user),console.log("Roles array:",(Ge=(Ve=o==null?void 0:o.auth)==null?void 0:Ve.user)==null?void 0:Ge.roles),console.log("First role:",(Ke=(Ye=(qe=o==null?void 0:o.auth)==null?void 0:qe.user)==null?void 0:Ye.roles)==null?void 0:Ke[0]);const R=((Je=(Xe=o==null?void 0:o.auth)==null?void 0:Xe.user)==null?void 0:Je.roles)||[],N=R.some(s=>typeof s=="string"?s==="super-admin":s.name==="super-admin")||!1,c=R.some(s=>typeof s=="string"?s==="technical":s.name==="technical")||!1,L=R.some(s=>typeof s=="string"?s==="technical-leader":s.name==="technical-leader")||!1,S=((es=(Ze=(Qe=o==null?void 0:o.auth)==null?void 0:Qe.user)==null?void 0:Ze.technical)==null?void 0:es.is_default)||!1,y=R.some(s=>typeof s=="string"?s==="doorman":s.name==="doorman")||!1,P=R.some(s=>typeof s=="string"?s==="owner":s.name==="owner")||!1,G=R.some(s=>typeof s=="string"?s==="tenant":s.name==="tenant")||!1,H=N||S,[W,B]=U.useState(!1),[k,A]=U.useState(!1),[d,v]=U.useState(null),[u,b]=U.useState(!1),g=U.useRef(null);console.log("Dashboard Props - technicalInstructions:",n),console.log("Is Technical:",c),console.log("User Roles:",(ts=(ss=o==null?void 0:o.auth)==null?void 0:ss.user)==null?void 0:ts.roles);const[j,C]=U.useState(n||[]),T=async s=>{var t;try{await fetch(route("dashboard.mark-instruction-read"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({instruction_index:s})}),C(l=>l.map((m,F)=>F===s?{...m,read:!0}:m)),X.success("Instruction marked as read")}catch(l){console.error("Error marking instruction as read:",l),X.error("Failed to mark instruction as read")}},_=()=>{try{const s=localStorage.getItem("dashboard_notifications");if(s)return JSON.parse(s).map(l=>({...l,icon:l.iconName==="AlertCircle"?se:l.iconName==="Info"?$e:l.iconName==="CheckCircle"?V:l.iconName==="AlertOctagon"?De:l.iconName==="MessageSquare"?ue:se}))}catch(s){console.log("Error loading notifications from localStorage:",s)}return[{id:1,type:"ticket",title:"New Ticket Assigned",message:"You have been assigned ticket #TCK-2024-001 for AC repair in Apt 204",time:"2 min ago",read:!1,icon:se,iconName:"AlertCircle",color:"text-red-500 bg-red-50"},{id:2,type:"system",title:"System Update",message:"Dashboard data has been refreshed with latest information",time:"15 min ago",read:!1,icon:$e,iconName:"Info",color:"text-blue-500 bg-blue-50"},{id:3,type:"resolution",title:"Ticket Resolved",message:"Ticket #TCK-2024-035 has been successfully resolved",time:"1 hour ago",read:!1,icon:V,iconName:"CheckCircle",color:"text-green-500 bg-green-50"},{id:4,type:"urgent",title:"Urgent Maintenance",message:"Emergency repair needed in Building A - Elevator malfunction",time:"2 hours ago",read:!0,icon:De,iconName:"AlertOctagon",color:"text-orange-500 bg-orange-50"},{id:5,type:"message",title:"Team Message",message:"Weekly team meeting scheduled for tomorrow at 10:00 AM",time:"1 day ago",read:!0,icon:ue,iconName:"MessageSquare",color:"text-purple-500 bg-purple-50"}]},[te,le]=U.useState(_),[ge,ae]=U.useState(()=>_().filter(t=>!t.read).length),[I,ne]=U.useState(()=>{var s,t,l,m;if(console.log("=== INITIAL APPOINTMENT DEBUG ==="),console.log("Dashboard upcomingAppointments from backend:",r.upcomingAppointments),console.log("User email from pageProps:",(t=(s=o==null?void 0:o.auth)==null?void 0:s.user)==null?void 0:t.email),console.log("Current technical from props:",i),console.log("User roles:",(m=(l=o==null?void 0:o.auth)==null?void 0:l.user)==null?void 0:m.roles),console.log("Is technical user:",c),console.log("Is default technical:",S),r.upcomingAppointments&&r.upcomingAppointments.length>0){if(console.log("Total appointments received:",r.upcomingAppointments.length),console.log("First appointment details:",r.upcomingAppointments[0]),console.log("All appointment technical assignments:",r.upcomingAppointments.map(F=>{var z,D;return{id:F.id,title:F.title,scheduled_for:F.scheduled_for,technical_id:(z=F.technical)==null?void 0:z.id,technical_name:(D=F.technical)==null?void 0:D.name,status:F.status}})),c&&!S&&i){const F=r.upcomingAppointments.filter(z=>z.technical&&z.technical.id===i.id);return console.log("Filtered appointments for technical:",F.length),console.log("My appointments details:",F),console.log("=== END INITIAL APPOINTMENT DEBUG ==="),F}console.log("=== END INITIAL APPOINTMENT DEBUG ===")}else console.log("No appointments in initial props"),console.log("=== END INITIAL APPOINTMENT DEBUG ===");return r.upcomingAppointments||[]});U.useEffect(()=>{if(r.upcomingAppointments)if(console.log("Updating appointments with new data:",r.upcomingAppointments),c&&!S&&i){const s=r.upcomingAppointments.filter(t=>t.technical&&t.technical.id===i.id);console.log("Filtered appointments for technical on update:",s.length),ne(s)}else ne(r.upcomingAppointments)},[r.upcomingAppointments,c,S,i]);const Y=U.useMemo(()=>{if(!I||I.length===0)return console.log("No appointments available in state"),0;console.log("Total appointments in state:",I.length),console.log("All appointments:",I);const s=new Date;s.setHours(0,0,0,0);const t=new Date(s);t.setDate(s.getDate()+2),t.setHours(23,59,59,999),console.log("Date range for appointments:",{today:s.toISOString(),threeDaysLater:t.toISOString()});const l=I.filter(m=>{console.log("Processing appointment:",m);const F=m.scheduled_for||m.scheduled_at||m.date||"";console.log("Date field found:",F);const z=new Date(F);if(console.log("Parsed date:",z.toISOString()),isNaN(z.getTime()))return console.log("Invalid date, skipping"),!1;const D=z>=s&&z<=t,ie=m.status!=="canceled"&&m.status!=="cancelled",J=m.status==="in_progress"&&z.toDateString()===s.toDateString(),is=(D||J)&&ie;return console.log("Is in range:",D,"Is not canceled:",ie,"Is in progress today:",J,"Should include:",is),is});return console.log("Filtered appointments count:",l.length),console.log("Filtered appointments:",l),l.length},[I]),K=s=>{const t={scheduled:{label:"Scheduled",color:"text-blue-500 bg-blue-50",icon:q},in_progress:{label:"In Progress",color:"text-yellow-500 bg-yellow-50",icon:ct},completed:{label:"Completed",color:"text-green-500 bg-green-50",icon:V},cancelled:{label:"Cancelled",color:"text-red-500 bg-red-50",icon:_e},rescheduled:{label:"Rescheduled",color:"text-gray-500 bg-gray-50",icon:Q}};return t[s]||t.scheduled},ve=s=>{const t=new Date(s);return{date:t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),time:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}},Cs=s=>{window.open(`/appointments?appointment=${s}`,"_blank")},Oe=()=>{window.open("/appointments","_blank")},Ts=s=>{b(!1),setTimeout(()=>{v(s),A(!0)},100)},we=U.useCallback(()=>{A(!1),setTimeout(()=>{v(null),document.body.classList.remove("overflow-hidden"),document.querySelectorAll("[data-radix-portal]").forEach(t=>{t.children.length===0&&t.remove()})},150)},[]);U.useEffect(()=>{const s=t=>{t.key==="Escape"&&k&&we()};if(k)return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[k,we]);const As=s=>{if(!s)return"";if(s.includes("maps.app.goo.gl"))return`https://www.google.com/maps/embed/v1/place?key=${w}&q=-10.916879,-74.883391&zoom=15`;if(s.includes("/embed"))return s;if(s.includes("google.com/maps")){const t=s.match(/@([-0-9.]+),([-0-9.]+)/);if(t)return`https://www.google.com/maps/embed/v1/view?key=${w}&center=${t[1]},${t[2]}&zoom=15`;const l=s.match(/place\/([^/]+)/);if(l)return`https://www.google.com/maps/embed/v1/place?key=${w}&q=place_id:${l[1]}`}return`https://www.google.com/maps/embed/v1/place?key=${w}&q=${encodeURIComponent(s)}`},re=s=>{var F,z;const t=(z=(F=s.ticket.device)==null?void 0:F.tenants)==null?void 0:z[0],l=t==null?void 0:t.apartment,m=l==null?void 0:l.building;return{buildingName:(m==null?void 0:m.name)||"No building",unitNumber:(l==null?void 0:l.name)||"N/A",locationLink:(m==null?void 0:m.location_link)||"",building:m}},[Le,Ds]=U.useState(new Date),[Ss,We]=U.useState("Updated just now"),Pe=s=>{const l=Math.floor((new Date().getTime()-s.getTime())/(1e3*60));if(l===0)return"Updated just now";if(l===1)return"Updated 1 min ago";if(l<60)return`Updated ${l} min ago`;{const m=Math.floor(l/60);return m===1?"Updated 1 hour ago":`Updated ${m} hours ago`}},_s=()=>{const s=new Date;Ds(s),We(Pe(s)),bs.reload()},ke=s=>{try{const t=s.map(l=>({...l,icon:void 0,iconName:l.iconName}));localStorage.setItem("dashboard_notifications",JSON.stringify(t))}catch(t){console.log("Error saving notifications to localStorage:",t)}};U.useEffect(()=>{const s=setInterval(()=>{We(Pe(Le))},6e4);return()=>clearInterval(s)},[Le]);const Es=s=>{le(t=>{const l=t.map(m=>m.id===s?{...m,read:!0}:m);return ke(l),l}),ae(t=>Math.max(0,t-1))},$s=()=>{le(s=>{const t=s.map(l=>({...l,read:!0}));return ke(t),t}),ae(0)},Ms=s=>{le(l=>{const m=l.filter(F=>F.id!==s);return ke(m),m});const t=te.find(l=>l.id===s);t&&!t.read&&ae(l=>Math.max(0,l-1))},Us=(s,t)=>{console.log(`Clicked on ${s}: ${t} tickets`),window.open(`/tickets?status=${s}`,"_blank")},Rs=p.ticketsLastWeek.map(s=>({date:Fs(new Date(s.date),"dd/MM"),tickets:s.count,average:Math.round(p.ticketsLastWeek.reduce((t,l)=>t+l.count,0)/p.ticketsLastWeek.length)}));return e.jsx(qs,{children:e.jsxs(Is,{breadcrumbs:xt,children:["                ",e.jsx(Bs,{title:"Dashboard"}),"                ",e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                        .scrollbar-hide {
                            -ms-overflow-style: none;
                            scrollbar-width: none;
                        }
                        .scrollbar-hide::-webkit-scrollbar {
                            display: none;
                        }
                        
                        /* Custom scrollbar para modales */
                        .custom-scrollbar {
                            scrollbar-width: thin;
                            scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar {
                            width: 8px;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar-track {
                            background: transparent;
                            border-radius: 4px;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar-thumb {
                            background: rgba(156, 163, 175, 0.3);
                            border-radius: 4px;
                            transition: background-color 0.2s ease;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                            background: rgba(156, 163, 175, 0.6);
                        }
                        
                        .dark .custom-scrollbar {
                            scrollbar-color: rgba(75, 85, 99, 0.5) transparent;
                        }
                        
                        .dark .custom-scrollbar::-webkit-scrollbar-thumb {
                            background: rgba(75, 85, 99, 0.3);
                        }
                        
                        .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                            background: rgba(75, 85, 99, 0.6);
                        }
                    `}}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/30 to-background",children:e.jsxs("div",{className:"container mx-auto px-8 py-16 space-y-20",children:[e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-12",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("div",{className:"h-20 w-20 rounded-3xl bg-gradient-to-br from-primary via-primary-foreground to-secondary-foreground flex items-center justify-center shadow-2xl ring-4 ring-blue-100",children:e.jsx(Te,{className:"h-10 w-10 text-white"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-6xl font-black tracking-tight text-slate-900 dark:text-white",children:c&&!N?"ADK Assist Dashboard":"Dashboard"}),e.jsx("p",{className:"text-2xl text-slate-600 font-medium",children:N?"Administrative control center of the system":c&&!N?"Your technical management control center":"Your personalized management panel"})]})]}),e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full animate-pulse shadow-lg"}),e.jsx("span",{className:"text-lg font-bold text-slate-600",children:"System Online"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ae,{className:"h-6 w-6 text-blue-500"}),e.jsx("span",{className:"text-lg font-bold text-slate-600",children:Ss})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ce,{className:"h-6 w-6 text-yellow-500"}),e.jsx("span",{className:"text-lg font-bold text-slate-600",children:"High Performance"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[e.jsx(f,{variant:"outline",size:"lg",className:"gap-4 h-14 px-4 shadow-xl",onClick:_s,children:e.jsx(ks,{className:"h-6 w-6"})}),e.jsxs(os,{open:u,onOpenChange:b,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(f,{variant:"outline",size:"lg",className:"gap-4 h-14 px-4 shadow-xl relative",children:[e.jsx(q,{className:"h-6 w-6"}),Y>0&&e.jsx(O,{className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center p-0",children:Y})]})}),e.jsxs(ds,{className:"w-96 max-h-96 mt-4",align:"end",children:[e.jsxs(ms,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-semibold",children:"All Appointments"}),I.length>0&&e.jsx(f,{variant:"ghost",size:"sm",onClick:Oe,className:"text-xs",children:"View Calendar"})]}),e.jsx(oe,{}),I.length===0?e.jsxs("div",{className:"p-4 text-center text-slate-500",children:[e.jsx(q,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No appointments found"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Schedule appointments from ticket details"})]}):e.jsx("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:I.sort((s,t)=>new Date(s.scheduled_for).getTime()-new Date(t.scheduled_for).getTime()).map(s=>{var ie;const t=K(s.status),l=ve(s.scheduled_for),m=re(s),F=new Date(s.scheduled_for),z=new Date,D=F.toDateString()===z.toDateString();return e.jsxs("div",{className:"group relative",children:[e.jsx(Fe,{className:`p-0 focus:bg-slate-50 dark:focus:bg-slate-800/50 cursor-pointer ${D?"border-2 border-red-500 rounded-lg my-1 bg-red-50/50":""}`,children:e.jsxs("div",{className:`w-full p-4 flex items-center gap-4 ${D?"bg-red-50 rounded-lg border border-red-200":""}`,children:[e.jsxs("div",{className:`flex-shrink-0 w-20 h-20 rounded-full border ${D?"border-red-400 bg-red-100":"border-slate-200 dark:border-slate-700"} flex flex-col items-center justify-center text-center`,children:[e.jsx("span",{className:`text-sm font-medium ${D?"text-red-600":"text-slate-500 dark:text-slate-400"}`,children:new Date(s.scheduled_for).toLocaleString("default",{weekday:"short"}).toLowerCase()}),e.jsx("span",{className:`text-2xl font-bold ${D?"text-red-700":"text-slate-900 dark:text-slate-100"}`,children:new Date(s.scheduled_for).getDate()}),e.jsx("span",{className:`text-xs font-medium ${D?"text-red-600":"text-slate-500 dark:text-slate-400"}`,children:new Date(s.scheduled_for).toLocaleString("default",{month:"short"})})]}),e.jsxs("div",{className:`flex-1 p-3 ${D?"bg-white border-red-200":"bg-white dark:bg-slate-800"} rounded-lg border ${D?"border-red-200":"border-slate-200 dark:border-slate-700"} shadow-sm`,children:[e.jsxs("div",{className:"space-y-1 mb-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsxs("span",{className:`text-sm font-medium ${D?"text-red-800":"text-slate-900 dark:text-slate-100"}`,children:["Technical: ",s.technical.name]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[m.locationLink&&e.jsx(f,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-blue-100 dark:hover:bg-blue-900/30",onClick:J=>{J.preventDefault(),J.stopPropagation(),Ts(s)},children:e.jsx(Se,{className:"h-3 w-3 text-blue-600 dark:text-blue-400"})}),e.jsx(f,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-slate-100 dark:hover:bg-slate-700",onClick:J=>{J.preventDefault(),J.stopPropagation(),Cs(s.id)},children:e.jsx(tt,{className:"h-3 w-3 text-slate-600 dark:text-slate-400"})})]})]}),e.jsxs("div",{className:`text-sm ${D?"text-red-700":"text-slate-700 dark:text-slate-300"}`,children:["Member: ",((ie=s.ticket.user)==null?void 0:ie.name)||"No Member"]})]}),e.jsx("div",{className:"flex items-center mb-1.5",children:e.jsxs("div",{className:"flex items-center gap-1 flex-1",children:[e.jsx(Se,{className:`h-4 w-4 ${D?"text-red-600":"text-red-500"}`}),e.jsxs("span",{className:`text-sm font-medium ${D?"text-red-800":"text-primary-foreground"} hover:text-primary-foreground`,children:["Building: ",m.buildingName," apartment ",m.unitNumber]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Q,{className:`h-3.5 w-3.5 ${D?"text-red-600":"text-slate-500"}`}),e.jsx("span",{className:`text-xs font-medium ${D?"text-red-600":"text-slate-500 dark:text-slate-400"}`,children:l.time})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[D&&e.jsx(O,{className:"text-xs px-2 py-0.5 bg-red-500 text-white animate-pulse",children:"Today"}),e.jsx(O,{variant:"outline",className:`text-xs px-2 py-0.5 ${t.color} border-current`,children:t.label})]})]})]})]})}),e.jsx(oe,{className:"my-0 last:hidden"})]},s.id)})}),e.jsx(oe,{}),e.jsx(Fe,{className:"p-0",children:e.jsxs(f,{variant:"ghost",className:"w-full justify-center py-3 text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:Oe,children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"View All Appointments"]})})]})]}),e.jsxs(os,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(f,{variant:"outline",size:"lg",className:"gap-4 h-14 px-4 shadow-xl relative",children:[e.jsx(pe,{className:"h-6 w-6"}),ge>0&&e.jsx(O,{className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-red-500 text-white text-xs flex items-center justify-center p-0",children:ge})]})}),e.jsxs(ds,{className:"w-96 max-h-96 mt-4 ",align:"end",children:[e.jsxs(ms,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Notifications"}),ge>0&&e.jsx(f,{variant:"ghost",size:"sm",onClick:$s,className:"text-xs",children:"Mark all as read"})]}),e.jsx(oe,{}),te.length===0?e.jsxs("div",{className:"p-4 text-center text-slate-500",children:[e.jsx(pe,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No notifications"})]}):e.jsx("div",{className:"max-h-80 overflow-y-auto flex flex-col gap-4",children:te.map(s=>{const t=s.icon;return e.jsx(Fe,{className:`p-0 focus:bg-slate-50 dark:!text-slate-100 ${s.read?"":"bg-blue-50/50 dark:bg-secondary/10"}`,children:e.jsxs("div",{className:"w-full p-4 flex items-start gap-3 dark:!text-slate-100",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.color} flex-shrink-0`,children:e.jsx(t,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 space-y-1 dark:!text-slate-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:`text-sm font-semibold dark:!text-slate-100 ${s.read?"text-slate-700":"text-slate-900"}`,children:s.title}),e.jsxs("div",{className:"flex items-center gap-1 dark:!text-slate-200",children:[e.jsx("span",{className:"text-xs text-slate-500",children:s.time}),e.jsx(f,{variant:"ghost",size:"sm",onClick:l=>{l.stopPropagation(),Ms(s.id)},className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(_e,{className:"h-3 w-3"})})]})]}),e.jsx("p",{className:`text-sm dark:!text-slate-100 ${s.read?"text-slate-600":"text-slate-700"}`,children:s.message}),!s.read&&e.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.jsxs(f,{variant:"outline",size:"sm",onClick:l=>{l.stopPropagation(),Es(s.id)},className:"h-7 px-3 text-xs hover:text-accent-foreground",children:[e.jsx(ps,{className:"h-3 w-3 mr-1"}),"Mark as read"]})})]}),!s.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-1"})]})},s.id)})}),e.jsx(oe,{})]})]})]})]}),console.log("Rendering instructions section - isTechnical:",c,"currentInstructions:",j),c&&j.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("h2",{className:"text-3xl font-bold text-foreground flex items-center justify-center gap-3",children:[e.jsx(ue,{className:"h-8 w-8 text-blue-500"}),"Instructions from Management"]}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Important instructions and guidelines from your supervisors"})]}),e.jsx("div",{className:"grid gap-4 max-w-4xl mx-auto",children:j.slice(0,5).map((s,t)=>{const l={low:"from-blue-500/10 to-blue-600/5 border-blue-200 text-blue-700",normal:"from-gray-500/10 to-gray-600/5 border-gray-200 text-gray-700",high:"from-orange-500/10 to-orange-600/5 border-orange-200 text-orange-700",urgent:"from-red-500/10 to-red-600/5 border-red-200 text-red-700"},F={low:$e,normal:ue,high:me,urgent:De}[s.priority];return e.jsx(x,{className:`transition-all duration-300 hover:shadow-lg border-l-4 bg-gradient-to-r ${l[s.priority]}`,children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:`p-3 rounded-xl flex-shrink-0 ${s.priority==="urgent"?"bg-red-100 animate-pulse":"bg-white/50"}`,children:e.jsx(F,{className:`h-6 w-6 ${s.priority==="urgent"?"text-red-600":"text-current"}`})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(O,{variant:"outline",className:`font-semibold uppercase text-xs ${s.priority==="urgent"?"border-red-500 text-red-700 bg-red-50":""}`,children:[s.priority," Priority"]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["From: ",e.jsx("strong",{children:s.from})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.sent_at).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsx("p",{className:"text-foreground leading-relaxed",children:s.instruction})]})]}),e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>T(t),className:"flex-shrink-0",children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"Mark as Read"]})]})})},t)})}),j.filter(s=>!s.read).length===0&&e.jsx(x,{className:"max-w-md mx-auto",children:e.jsxs(h,{className:"p-8 text-center",children:[e.jsx(V,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"All caught up!"}),e.jsx("p",{className:"text-muted-foreground",children:"You have no pending instructions."})]})})]}),e.jsxs("div",{className:"space-y-12",children:["                            ",e.jsxs("div",{className:"text-center space-y-6",children:["                                ",e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:c&&!N?"My Tickets":y?"Building Tickets":"Ticket Analytics"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:c&&!N?"Tickets assigned to you and your work summary":y?"Monitor tickets for your building residents":"Real-time monitoring of workflow and performance metrics"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:["                                ",(!c||N||S)&&e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-primary/10 via-background to-primary/5 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/20",children:e.jsx(ee,{className:"h-6 w-6 text-primary"})}),e.jsx(E,{className:"h-4 w-4 text-primary/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wider",children:c&&!N?"Mis Tickets Totales":"Total Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.total}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-primary/20 text-primary",children:"+12%"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last month"})]})]})]})}),"                                ",e.jsx(x,{className:`group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-destructive/10 via-background to-destructive/5 overflow-hidden cursor-pointer ${c&&!N&&a.tickets.open>0?"ring-2 ring-red-500 ring-opacity-50 animate-pulse":""}`,onClick:()=>window.open("/tickets?status=open","_blank"),children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-destructive/20",children:e.jsx(se,{className:"h-6 w-6 text-destructive"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[c&&!N&&a.tickets.open>0&&e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsx(E,{className:"h-4 w-4 text-destructive/60 opacity-0 group-hover:opacity-100 transition-opacity"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-destructive uppercase tracking-wider",children:c&&!N?"Assigned Tickets":"Open Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.open}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${c&&!N&&a.tickets.open>0?"bg-red-500 text-white animate-pulse":"bg-destructive/20 text-destructive"}`,children:["                                                    ",c&&!N?"URGENT!":"Priority"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:c&&!N?"Requires immediate attention":"Immediate attention"})]})]})]})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-secondary/10 via-background to-secondary/5 overflow-hidden cursor-pointer",onClick:()=>window.open("/tickets?status=in_progress","_blank"),children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-secondary/20",children:e.jsx(Q,{className:"h-6 w-6 text-secondary"})}),e.jsx(E,{className:"h-4 w-4 text-secondary/60 opacity-0 group-hover:opacity-100 transition-opacity"}),"                                        "]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-secondary uppercase tracking-wider",children:c&&!N?"In Progress - My Tickets":"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.in_progress}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-secondary/20 text-secondary",children:"+8%"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:c&&!N?"Active work":"This week"})]})]})]})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-accent/10 via-background to-accent/5 overflow-hidden cursor-pointer",onClick:()=>window.open("/tickets?status=resolved","_blank"),children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-accent/20",children:e.jsx(V,{className:"h-6 w-6 text-accent"})}),e.jsx(E,{className:"h-4 w-4 text-accent/60 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-accent uppercase tracking-wider",children:c&&!N?"My Resolved Tickets":"Resolved"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.resolved}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-accent/20 text-accent",children:"+15%"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:c&&!N?"My productivity":"vs target"})]})]})]})})]}),(!c||N||S)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-3/10 via-background to-chart-3/5 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:["                                            ",e.jsx("div",{className:"p-3 rounded-xl bg-orange-100",children:e.jsx(me,{className:"h-6 w-6 text-orange-600"})}),H&&e.jsxs(f,{size:"sm",variant:"outline",className:"h-8 px-3 text-xs hover:bg-orange-50 border-orange-200 text-orange-700",onClick:()=>window.open("/tickets/assign-unassigned","_blank"),children:[e.jsx(he,{className:"h-3 w-3 mr-1"}),"Assign"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-orange-600 uppercase tracking-wider",children:"Unassigned"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:a.tickets.unassigned||0}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-orange-100 text-orange-700",children:"Pending"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Requires assignment"})]})]})]})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-4/10 via-background to-chart-4/5 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:e.jsx(q,{className:"h-6 w-6 text-purple-600"})}),e.jsx(Ne,{className:"h-4 w-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-purple-600 uppercase tracking-wider",children:"Resolved Today"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white ",children:a.tickets.resolved_today}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-purple-100 text-purple-700",children:"Today"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Daily Productivity"})]})]})]})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-2/10 via-background to-chart-2/5 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-indigo-100",children:e.jsx(rt,{className:"h-6 w-6 text-indigo-600"})}),e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-green-100 text-green-700",children:"-2h"})]}),"                                        ",e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-indigo-600 uppercase tracking-wider",children:"Average Time"}),e.jsxs("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[a.tickets.avg_resolution_hours,"h"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-indigo-100 text-indigo-700",children:"Resolution"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Overall average"})]})]})]})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-5/10 via-background to-chart-5/5 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-teal-100",children:e.jsx(Te,{className:"h-6 w-6 text-teal-600"})}),e.jsx(Ne,{className:"h-4 w-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-teal-600 uppercase tracking-wider",children:"Efficiency"}),e.jsxs("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[a.tickets.total>0?Math.round(a.tickets.resolved/a.tickets.total*100):0,"%"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-teal-100 text-teal-700",children:"ResoluciÃ³n"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Tasa general"})]})]})]})}),"                            "]})]}),r.unassignedTickets&&r.unassignedTickets.length>0&&e.jsxs("div",{className:"space-y-8",children:["                                ",e.jsxs("div",{className:"text-center space-y-4",children:["                                    ",e.jsx("h2",{className:"text-4xl font-bold text-chart-3",children:"Unassigned Tickets"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Recent tickets awaiting technical assignment - quick actions available"})]}),e.jsxs(x,{className:"border-0 shadow-xl bg-gradient-to-br from-slate-50 via-white to-slate-50",children:["                                    ",e.jsx($,{className:"border-b border-slate-100 bg-slate-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-100",children:e.jsx(me,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx(M,{className:"text-xl text-slate-800",children:"Latest Unassigned Tickets"}),e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Showing ",r.unassignedTickets.length," most recent unassigned tickets"]})]})]}),e.jsxs(f,{variant:"outline",size:"sm",className:"bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100",onClick:()=>window.open("/tickets","_blank"),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Bulk Assign"]})]})}),e.jsx(h,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-100",children:[e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-slate-700 text-sm",children:"Ticket"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-slate-700 text-sm",children:"Location"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-slate-700 text-sm",children:"Device"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-slate-700 text-sm",children:"Category"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-slate-700 text-sm",children:"Created"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-slate-700 text-sm",children:"Actions"})]})}),"                                                ",e.jsx("tbody",{children:r.unassignedTickets.length>0?r.unassignedTickets.map((s,t)=>e.jsx(ut,{ticket:s,index:t,technicals:r.availableTechnicals},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-12 text-center",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(V,{className:"h-12 w-12 text-green-500 mx-auto"}),e.jsx("p",{className:"text-lg font-semibold text-slate-600",children:"All tickets are assigned!"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Great job keeping up with the workflow."})]})})})})]})})})]})]}),L&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:"Technical Team Dashboard"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Technical team management and performance overview"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-blue-50 via-background to-blue-100 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:e.jsx(de,{className:"h-6 w-6 text-blue-600"})}),e.jsx(E,{className:"h-4 w-4 text-blue-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wider",children:"Team Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All assigned to technical team"})]})]})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-blue-50 via-background to-blue-100 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:e.jsx(xe,{className:"h-6 w-6 text-blue-600"})}),e.jsx(E,{className:"h-4 w-4 text-blue-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?assigned=me","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wider",children:"Assigned Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.open||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tickets assigned to me"})]})]})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-orange-50 via-background to-orange-100 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-orange-100",children:e.jsx(Qs,{className:"h-6 w-6 text-orange-600"})}),e.jsx(E,{className:"h-4 w-4 text-orange-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?unassigned=1","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-orange-600 uppercase tracking-wider",children:"Unassigned"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.unassigned}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need assignment"})]})]})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-green-50 via-background to-green-100 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:e.jsx(V,{className:"h-6 w-6 text-green-600"})}),e.jsx(E,{className:"h-4 w-4 text-green-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?status=resolved&resolved_today=1","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase tracking-wider",children:"Resolved Today"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.resolved_today}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed today"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(x,{className:"col-span-1",children:[e.jsx($,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-5 w-5 text-primary"}),"Team Performance"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:r.availableTechnicals&&r.availableTechnicals.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center",children:e.jsx(Zs,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:s.name}),e.jsxs("p",{className:"text-sm text-slate-600",children:[s.tickets_count||0," tickets assigned"]})]})]}),e.jsx("div",{className:"flex flex-col items-end",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(O,{variant:"outline",className:"bg-green-100 text-green-700",children:[s.tickets_count||0," completed"]})})})]},s.id))})})]}),e.jsxs(x,{className:"col-span-1",children:[e.jsx($,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-primary"}),"Unassigned Tickets"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-3",children:r.unassignedTickets&&r.unassignedTickets.length>0?r.unassignedTickets.slice(0,5).map(s=>{var t,l;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors cursor-pointer",onClick:()=>window.open(`/tickets/${s.id}`,"_blank"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 truncate max-w-xs",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx("span",{children:((l=(t=s.device)==null?void 0:t.apartment)==null?void 0:l.name)||"No apt"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:be(s.created_at)})]})]})]}),e.jsxs(f,{variant:"outline",size:"sm",className:"flex items-center gap-1",onClick:m=>{m.stopPropagation(),window.open(`/tickets/${s.id}/assign`,"_blank")},children:[e.jsx(he,{className:"w-3 h-3"}),"Assign"]})]},s.id)}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(V,{className:"h-12 w-12 text-green-500 mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No unassigned tickets"})]})})}),e.jsx(Ce,{className:"flex justify-center border-t pt-4",children:e.jsx(f,{variant:"outline",size:"sm",className:"w-full sm:w-auto",onClick:()=>window.open("/tickets?unassigned=1","_blank"),children:"View All Unassigned"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(x,{className:"col-span-2",children:[e.jsx($,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-primary"}),"Team Appointment Calendar"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-3",children:r.upcomingAppointments&&r.upcomingAppointments.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.upcomingAppointments.slice(0,6).map(s=>{var t;return e.jsx("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors cursor-pointer",onClick:()=>window.open(`/appointments/${s.id}`,"_blank"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 truncate max-w-xs",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx("span",{children:be(s.scheduled_at||s.scheduled_for)}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:((t=s.technical)==null?void 0:t.name)||"Unassigned"})]})]})]})},s.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(q,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No upcoming appointments"})]})})}),e.jsx(Ce,{className:"flex justify-center border-t pt-4",children:e.jsx(f,{variant:"outline",size:"sm",className:"w-full sm:w-auto",onClick:()=>window.open("/appointments","_blank"),children:"View Full Calendar"})})]}),e.jsxs(x,{className:"col-span-1",children:[e.jsx($,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5 text-primary"}),"Quick Actions"]})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(f,{className:"w-full flex items-center gap-2 h-12 justify-start",onClick:()=>window.open("/tickets/unassigned","_blank"),children:[e.jsx(he,{className:"w-4 h-4"}),"Assign Tickets"]}),e.jsxs(f,{variant:"outline",className:"w-full flex items-center gap-2 h-12 justify-start",onClick:()=>window.open("/appointments/create","_blank"),children:[e.jsx(et,{className:"w-4 h-4"}),"Schedule Appointment"]}),e.jsxs(f,{variant:"outline",className:"w-full flex items-center gap-2 h-12 justify-start",onClick:()=>window.open("/reports/technicians","_blank"),children:[e.jsx(gs,{className:"w-4 h-4"}),"View Team Reports"]}),e.jsxs(f,{variant:"outline",className:"w-full flex items-center gap-2 h-12 justify-start",onClick:()=>window.open("/tickets/assigned","_blank"),children:[e.jsx(xe,{className:"w-4 h-4"}),"Manage Assigned Tickets"]})]})})]})]})]}),(y||P)&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:P?"Owner Dashboard":"Doorman Dashboard"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Building management overview and resident ticket monitoring"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-blue-50 via-background to-blue-100 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:e.jsx(q,{className:"h-6 w-6 text-blue-600"})}),e.jsx(E,{className:"h-4 w-4 text-blue-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?created_today=1","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wider",children:"Tickets Today"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.resolved_today}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"New tickets created today"})]})]})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-orange-50 via-background to-orange-100 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-orange-100",children:e.jsx(se,{className:"h-6 w-6 text-orange-600"})}),e.jsx(E,{className:"h-4 w-4 text-orange-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?status=open","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-orange-600 uppercase tracking-wider",children:"Open Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.open}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending resolution"})]})]})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-yellow-50 via-background to-yellow-100 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-yellow-100",children:e.jsx(Q,{className:"h-6 w-6 text-yellow-600"})}),e.jsx(E,{className:"h-4 w-4 text-yellow-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?status=in_progress","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-600 uppercase tracking-wider",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.in_progress}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Being worked on"})]})]})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-green-50 via-background to-green-100 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:e.jsx(V,{className:"h-6 w-6 text-green-600"})}),e.jsx(pe,{className:"h-4 w-4 text-green-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase tracking-wider",children:"Resolved Today"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.resolved}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed tickets"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(x,{className:"col-span-1",children:[e.jsx($,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-primary"}),"Tickets by Building Area"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:r.buildingsWithTickets.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center",children:e.jsx(Z,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:s.name}),e.jsxs("p",{className:"text-sm text-slate-600",children:[s.apartments_count," apartments"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-slate-900",children:s.tickets_count}),e.jsx("p",{className:"text-xs text-slate-600",children:"tickets"})]})]},s.id))})})]}),e.jsxs(x,{className:"col-span-1",children:[e.jsx($,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5 text-primary"}),"Current Ticket Status"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Open"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.tickets.open})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-yellow-600",children:"In Progress"})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:a.tickets.in_progress})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Resolved"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.tickets.resolved})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:"Unassigned"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.tickets.unassigned})]})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(x,{className:"col-span-2",children:[e.jsx($,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-primary"}),"Recent Ticket Activity"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-3",children:r.recentTickets.slice(0,5).map(s=>{var t,l,m;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors cursor-pointer",onClick:()=>window.open(`/tickets/${s.id}`,"_blank"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.status==="open"?"bg-blue-500":s.status==="in_progress"?"bg-yellow-500":s.status==="resolved"?"bg-green-500":"bg-gray-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 truncate max-w-xs",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx("span",{children:((t=s.user)==null?void 0:t.name)||"Unknown"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:((m=(l=s.device)==null?void 0:l.apartment)==null?void 0:m.name)||"No apt"})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx(O,{variant:s.status==="open"?"default":s.status==="in_progress"?"secondary":s.status==="resolved"?"default":"outline",className:`
                                                                ${s.status==="open"?"bg-blue-100 text-blue-700":""}
                                                                ${s.status==="in_progress"?"bg-yellow-100 text-yellow-700":""}
                                                                ${s.status==="resolved"?"bg-green-100 text-green-700":""}
                                                            `,children:s.status})})]},s.id)})})})]}),e.jsxs(x,{className:"col-span-1",children:[e.jsx($,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5 text-primary"}),"Notifications"]})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-3",children:[a.tickets.resolved_today>0&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium text-green-700",children:[a.tickets.resolved_today," tickets resolved today"]})]})}),a.tickets.open>5&&e.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-700",children:"High number of open tickets"})]})}),a.tickets.unassigned>0&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-red-600"}),e.jsxs("span",{className:"text-sm font-medium text-red-700",children:[a.tickets.unassigned," unassigned tickets"]})]})}),a.tickets.unassigned===0&&a.tickets.open<=5&&e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"All systems running smoothly"})]})})]})})]})]}),e.jsxs(x,{children:[e.jsx($,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5 text-primary"}),"Quick Actions"]})}),e.jsx(h,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(f,{className:"flex items-center gap-2 h-12",onClick:()=>window.open("/owner-doorman/devices","_blank"),children:[e.jsx(Z,{className:"w-4 h-4"}),"Manage Building Members"]}),e.jsxs(f,{variant:"outline",className:"flex items-center gap-2 h-12",onClick:()=>window.open("/tickets/create","_blank"),children:[e.jsx(ee,{className:"w-4 h-4"}),"Create New Ticket"]}),e.jsxs(f,{variant:"outline",className:"flex items-center gap-2 h-12",onClick:()=>window.open("/appointments","_blank"),children:[e.jsx(q,{className:"w-4 h-4"}),"View Appointments"]})]})})]})]}),G&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:"Tenant Dashboard"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Monitor your tickets and service requests"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-blue-50 via-background to-blue-100 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:e.jsx(se,{className:"h-6 w-6 text-blue-600"})}),e.jsx(E,{className:"h-4 w-4 text-blue-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?status=open","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wider",children:"Open Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.open||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting service"})]})]})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-yellow-50 via-background to-yellow-100 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-yellow-100",children:e.jsx(Q,{className:"h-6 w-6 text-yellow-600"})}),e.jsx(E,{className:"h-4 w-4 text-yellow-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?status=in_progress","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-600 uppercase tracking-wider",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.in_progress||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Being worked on"})]})]})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-green-50 via-background to-green-100 overflow-hidden",children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:e.jsx(V,{className:"h-6 w-6 text-green-600"})}),e.jsx(E,{className:"h-4 w-4 text-green-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?status=resolved","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase tracking-wider",children:"Resolved"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.tickets.resolved||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed tickets"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(x,{className:"col-span-1",children:[e.jsxs($,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5 text-primary"}),"My Recent Tickets"]}),e.jsx(xs,{children:"View the status of your recent service requests"})]}),e.jsx(h,{children:e.jsx("div",{className:"space-y-3",children:r.recentTickets&&r.recentTickets.length>0?r.recentTickets.slice(0,5).map(s=>{var t,l;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors cursor-pointer",onClick:()=>window.open(`/tickets/${s.id}`,"_blank"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.status==="open"?"bg-blue-500":s.status==="in_progress"?"bg-yellow-500":s.status==="resolved"?"bg-green-500":"bg-gray-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 truncate max-w-xs",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx("span",{children:be(s.created_at)}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:((l=(t=s.device)==null?void 0:t.apartment)==null?void 0:l.name)||"No apt"})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx(O,{variant:s.status==="open"?"default":s.status==="in_progress"?"secondary":s.status==="resolved"?"default":"outline",className:`
                                                                ${s.status==="open"?"bg-blue-100 text-blue-700":""}
                                                                ${s.status==="in_progress"?"bg-yellow-100 text-yellow-700":""}
                                                                ${s.status==="resolved"?"bg-green-100 text-green-700":""}
                                                            `,children:s.status})})]},s.id)}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(ee,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No tickets found"}),e.jsx(f,{className:"mt-4",variant:"outline",onClick:()=>window.open("/tickets/create","_blank"),children:"Create a New Ticket"})]})})}),e.jsx(Ce,{className:"flex justify-center border-t pt-4",children:e.jsx(f,{variant:"outline",size:"sm",className:"w-full sm:w-auto",onClick:()=>window.open("/tickets","_blank"),children:"View All Tickets"})})]}),e.jsxs(x,{className:"col-span-1",children:[e.jsxs($,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-primary"}),"My Apartment"]}),e.jsx(xs,{children:"Your apartment details and upcoming appointments"})]}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[(ls=(rs=(as=o==null?void 0:o.auth)==null?void 0:as.user)==null?void 0:rs.tenant)!=null&&ls.apartment?e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/20 flex items-center justify-center",children:e.jsx(Z,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:o.auth.user.tenant.apartment.name}),e.jsx("p",{className:"text-sm text-slate-600",children:((ns=o.auth.user.tenant.apartment.building)==null?void 0:ns.name)||"Building"})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(fe,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No apartment information found"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Upcoming Appointments"}),r.upcomingAppointments&&r.upcomingAppointments.filter(s=>{var t,l,m,F;return((l=(t=s.ticket)==null?void 0:t.user)==null?void 0:l.email)===((F=(m=o==null?void 0:o.auth)==null?void 0:m.user)==null?void 0:F.email)}).length>0?e.jsx("div",{className:"space-y-2",children:r.upcomingAppointments.filter(s=>{var t,l,m,F;return((l=(t=s.ticket)==null?void 0:t.user)==null?void 0:l.email)===((F=(m=o==null?void 0:o.auth)==null?void 0:m.user)==null?void 0:F.email)}).slice(0,2).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors cursor-pointer",onClick:()=>window.open(`/appointments/${s.id}`,"_blank"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-4 h-4 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-slate-600",children:be(s.scheduled_at||s.scheduled_for)})]})]}),e.jsx(O,{className:"bg-blue-100 text-blue-700",children:"Scheduled"})]},s.id))}):e.jsx("div",{className:"p-3 bg-slate-50 rounded-lg text-center",children:e.jsx("p",{className:"text-sm text-slate-600",children:"No upcoming appointments"})})]})]})})]})]}),e.jsxs(x,{children:[e.jsx($,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5 text-primary"}),"Quick Actions"]})}),e.jsx(h,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(f,{className:"flex items-center gap-2 h-12",onClick:()=>window.open("/tickets/create","_blank"),children:[e.jsx(it,{className:"w-4 h-4"}),"Create Service Request"]}),e.jsxs(f,{variant:"outline",className:"flex items-center gap-2 h-12",onClick:()=>window.open("/tickets","_blank"),children:[e.jsx(ee,{className:"w-4 h-4"}),"View My Tickets"]}),e.jsxs(f,{variant:"outline",className:"flex items-center gap-2 h-12",onClick:()=>window.open("/profile","_blank"),children:[e.jsx(xe,{className:"w-4 h-4"}),"Update Profile"]})]})})]})]}),(!c||N||S)&&a.resources.buildings>0&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:["                                    ",e.jsxs("div",{className:"flex items-center justify-center gap-4",children:["                                        ",e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:"System Resources"}),e.jsx(O,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20 px-4 py-2 text-sm font-semibold",children:"Full Access - Admin"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Comprehensive management of buildings, apartments, users and devices"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-1/10 via-background to-chart-1/5 overflow-hidden",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-violet-100 w-fit mx-auto",children:e.jsx(Z,{className:"h-8 w-8 text-violet-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-violet-600 uppercase tracking-wider",children:"Buildings"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:a.resources.buildings})]}),r.buildingsWithTickets&&r.buildingsWithTickets.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-xs font-semibold text-violet-600",children:"Buildings Overview"}),r.buildingsWithTickets.length>3&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(f,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>{const s=g.current;s&&s.scrollBy({left:-200,behavior:"smooth"})},children:e.jsx(Me,{className:"h-3 w-3"})}),e.jsx(f,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>{const s=g.current;s&&s.scrollBy({left:200,behavior:"smooth"})},children:e.jsx(Ee,{className:"h-3 w-3"})})]})]}),e.jsx("div",{ref:g,className:"flex gap-2 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:r.buildingsWithTickets.map(s=>e.jsx("div",{className:"flex-shrink-0 group/building cursor-pointer",title:`${s.name} - ${s.apartments_count} apartments, ${s.tenants_count} tenants`,onClick:()=>window.open(`/buildings/${s.id}`,"_blank"),children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-violet-200 to-violet-400 flex items-center justify-center transition-transform shadow-lg",children:s.image?e.jsx("img",{src:`/storage/${s.image}`,alt:s.name,className:"w-full h-full rounded-full object-cover",onError:t=>{t.currentTarget.src="/images/default-builder-square.png"}}):e.jsx(Z,{className:"h-6 w-6 text-white"})})},s.id))})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(E,{className:"h-3 w-3 text-violet-400"}),e.jsx("span",{className:"text-xs text-slate-500",children:"View management"})]})]})})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-2/10 via-background to-chart-2/5 overflow-hidden cursor-pointer",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-blue-100 w-fit mx-auto",children:e.jsx(fe,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wider",children:"Apartments"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:a.resources.apartments})]}),r.buildingsWithTickets&&r.buildingsWithTickets.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-xs font-semibold text-blue-600",children:"By Building"}),r.buildingsWithTickets.length>3&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(f,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:s=>{s.stopPropagation();const t=document.getElementById("apartments-container");t&&t.scrollBy({left:-200,behavior:"smooth"})},children:e.jsx(Me,{className:"h-3 w-3"})}),e.jsx(f,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:s=>{s.stopPropagation();const t=document.getElementById("apartments-container");t&&t.scrollBy({left:200,behavior:"smooth"})},children:e.jsx(Ee,{className:"h-3 w-3"})})]})]}),e.jsx("div",{id:"apartments-container",className:"flex gap-2 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:r.buildingsWithTickets.map(s=>e.jsxs("div",{className:"flex-shrink-0 group/building cursor-pointer flex flex-col items-center gap-1",title:`${s.name}: ${s.apartments_count} apartments`,onClick:t=>{t.stopPropagation(),window.open(`/buildings/${s.id}/apartments`,"_blank")},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-200 to-blue-400 flex items-center justify-center  transition-transform shadow-lg",children:s.image?e.jsx("img",{src:`/storage/${s.image}`,alt:s.name,className:"w-full h-full rounded-full object-cover",onError:t=>{t.currentTarget.src="/images/default-builder-square.png"}}):e.jsx(Z,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xs font-bold text-blue-700 min-w-0 text-center",children:s.apartments_count})]},`apt-${s.id}`))})]})]})})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-3/10 via-background to-chart-3/5 overflow-hidden cursor-pointer",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-emerald-100 w-fit mx-auto",children:e.jsx(de,{className:"h-8 w-8 text-emerald-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-600 uppercase tracking-wider",children:"Members"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:a.resources.tenants})]}),r.buildingsWithTickets&&r.buildingsWithTickets.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-xs font-semibold text-emerald-600",children:"By Building"}),r.buildingsWithTickets.length>3&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(f,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:s=>{s.stopPropagation();const t=document.getElementById("tenants-container");t&&t.scrollBy({left:-200,behavior:"smooth"})},children:e.jsx(Me,{className:"h-3 w-3"})}),e.jsx(f,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:s=>{s.stopPropagation();const t=document.getElementById("tenants-container");t&&t.scrollBy({left:200,behavior:"smooth"})},children:e.jsx(Ee,{className:"h-3 w-3"})})]})]}),e.jsx("div",{id:"tenants-container",className:"flex gap-2 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:r.buildingsWithTickets.map(s=>e.jsxs("div",{className:"flex-shrink-0 group/building cursor-pointer flex flex-col items-center gap-1",title:`${s.name}: ${s.tenants_count} tenants`,onClick:t=>{t.stopPropagation(),window.open(`/buildings/${s.id}/tenants`,"_blank")},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-200 to-emerald-400 flex items-center justify-center  transition-transform shadow-lg",children:s.image?e.jsx("img",{src:`/storage/${s.image}`,alt:s.name,className:"w-full h-full rounded-full object-cover",onError:t=>{t.currentTarget.src="/images/default-builder-square.png"}}):e.jsx(Z,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xs font-bold text-emerald-700 min-w-0 text-center",children:s.tenants_count})]},`tenant-${s.id}`))})]})]})})}),e.jsx(x,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-4/10 via-background to-chart-4/5 overflow-hidden cursor-pointer",onClick:()=>B(!0),children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-amber-100 w-fit mx-auto",children:e.jsx(Ue,{className:"h-8 w-8 text-amber-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-amber-600 uppercase tracking-wider",children:"Devices"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:a.resources.devices})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(us,{className:"h-3 w-3 text-amber-400"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Click to view details"})]})]})})})]}),N&&r.topTechnicals&&r.topTechnicals.length>0&&e.jsx("div",{className:"mt-8",children:e.jsxs(x,{className:"border-0 bg-gradient-to-br from-rose-50 via-white to-rose-50 shadow-xl",children:[e.jsx($,{className:"border-b border-rose-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-rose-100",children:e.jsx(st,{className:"h-5 w-5 text-rose-600"})}),e.jsxs("div",{children:[e.jsx(M,{className:"text-xl text-slate-800",children:"Technical Team"}),e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[r.topTechnicals.length," active technicians"]})]})]}),e.jsxs(f,{variant:"outline",size:"sm",className:"bg-rose-50 border-rose-200 text-rose-700 hover:bg-rose-100",onClick:()=>window.open("/technicals","_blank"),children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"View All"]})]})}),e.jsx(h,{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:r.topTechnicals.map(s=>e.jsx("div",{className:"bg-white rounded-xl p-4 shadow-lg border border-rose-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-rose-200 to-rose-400 flex items-center justify-center overflow-hidden",children:s.photo?e.jsx("img",{src:`/storage/${s.photo}`,alt:s.name,className:"w-full h-full object-cover"}):e.jsx(xe,{className:"h-6 w-6 text-white"})}),s.is_default===!0&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full border-2 border-white flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:"⭐"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-slate-800 text-sm truncate",children:s.name}),s.is_default===!0&&e.jsx(O,{variant:"secondary",className:"text-xs px-1 py-0",children:"Default"}),s.is_default&&e.jsx(O,{variant:"secondary",className:"text-xs px-1 py-0",children:"Default"})]}),e.jsxs("div",{className:"space-y-1",children:[s.email&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(lt,{className:"h-3 w-3 text-slate-400"}),e.jsx("span",{className:"text-xs text-slate-600 truncate",children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(nt,{className:"h-3 w-3 text-slate-400"}),e.jsx("span",{className:"text-xs text-slate-600",children:s.phone})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3 text-blue-500"}),e.jsxs("span",{className:"text-xs font-semibold text-blue-700",children:[s.tickets_count," tickets"]})]}),s.shift&&e.jsx("span",{className:"text-xs text-slate-500 capitalize",children:s.shift})]})]})]})]})},s.id))})})]})})]}),(!c||N||S)&&e.jsxs("div",{className:"space-y-16",children:["                            ",e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("h2",{className:"text-5xl font-black text-foreground",children:"Visual Analysis"}),e.jsx("p",{className:"text-2xl text-muted-foreground max-w-3xl mx-auto font-semibold",children:"Interactive charts and trends to monitor system performance"}),e.jsx("div",{className:"flex justify-center gap-6"})]}),e.jsxs("div",{className:"grid gap-20 lg:grid-cols-12",children:["                                ",e.jsx("div",{className:"lg:col-span-6",children:e.jsxs(x,{className:"h-full border-0 bg-gradient-to-br from-muted/20 via-background to-primary/5 shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-secondary/5"}),e.jsx($,{className:"pb-12 relative",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{className:"text-3xl font-black text-foreground",children:"Ticket Distribution"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Estado actual del sistema"})]}),e.jsxs("div",{className:"flex gap-4",children:["                                                    ",e.jsxs(f,{variant:"outline",size:"lg",onClick:()=>{const s=Object.values(p.ticketsByStatus).reduce((t,l)=>t+l,0);gt(p.ticketsByStatus,s)},className:"h-14 w-14 p-0 hover:bg-primary/10 shadow-xl border-primary/20 hover:scale-105 transition-all duration-300",title:"Export Professional Analysis",children:["                                                        ",e.jsx(fs,{className:"h-6 w-6 text-primary"})]}),e.jsx(f,{variant:"outline",size:"lg",onClick:()=>window.open("/tickets","_blank"),className:"h-14 w-14 p-0 hover:bg-primary/10 shadow-xl border-primary/20",children:e.jsx(E,{className:"h-6 w-6 text-primary"})})]})]})}),e.jsx(h,{className:"pt-0 pb-16 relative",children:e.jsx("div",{className:"h-[500px]",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(Os,{children:[e.jsx(Ls,{data:Object.entries(p.ticketsByStatus).map(([s,t],l)=>({name:s.replace("_"," ").toUpperCase(),value:t,color:je[l%je.length]})),cx:"50%",cy:"50%",outerRadius:160,innerRadius:80,paddingAngle:8,dataKey:"value",onClick:s=>Us(s.name.toLowerCase().replace(" ","_"),s.value),className:"cursor-pointer drop-shadow-2xl",children:Object.entries(p.ticketsByStatus).map((s,t)=>e.jsx(Ws,{fill:je[t%je.length],stroke:"#fff",strokeWidth:6,className:"hover:opacity-80 transition-all duration-500"},`cell-${t}`))}),e.jsx(Ie,{formatter:s=>[`${s} tickets (${Math.round(s/Object.values(p.ticketsByStatus).reduce((t,l)=>t+l,0)*100)}%)`,"Cantidad"],labelStyle:{color:"#374151",fontWeight:"bold",fontSize:"18px"},contentStyle:{backgroundColor:"#fff",border:"none",borderRadius:"20px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.35)",padding:"20px 24px"}}),e.jsx(ws,{verticalAlign:"bottom",height:80,formatter:s=>e.jsx("span",{className:"text-lg font-black text-slate-700",children:s})})]})})})})]})}),"                                ",e.jsx("div",{className:"lg:col-span-6",children:e.jsxs(x,{className:"h-full border-0 bg-gradient-to-br from-secondary/10 via-background to-accent/5 shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/5 to-accent/5"}),e.jsx($,{className:"pb-12 relative",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{className:"text-3xl font-black text-foreground",children:"Weekly Trend"}),e.jsx("p",{className:"text-xl text-muted-foreground font-semibold",children:"Ticket evolution over the last 7 days"})]}),e.jsxs("div",{className:"flex gap-4",children:["                                                    ",e.jsx(f,{variant:"outline",size:"lg",onClick:()=>{const s=p.ticketsLastWeek.map(t=>({date:t.date,count:t.count}));ht(s)},className:"h-14 w-14 p-0 hover:bg-secondary/10 shadow-xl border-secondary/20 hover:scale-105 transition-all duration-300",title:"Export Weekly Trend Analysis",children:e.jsx(fs,{className:"h-6 w-6 text-secondary"})})]})]})}),e.jsx(h,{className:"pt-0 pb-16 relative",children:e.jsx("div",{className:"h-[500px]",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(js,{data:Rs,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366F1",stopOpacity:.6}),e.jsx("stop",{offset:"95%",stopColor:"#6366F1",stopOpacity:.1})]})}),e.jsx(Ns,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeWidth:2}),e.jsx(ys,{dataKey:"date",tick:{fontSize:16,fill:"#475569",fontWeight:"bold"},tickLine:{stroke:"#cbd5e1"},axisLine:{stroke:"#cbd5e1"}}),e.jsx(vs,{tick:{fontSize:16,fill:"#475569",fontWeight:"bold"},tickLine:{stroke:"#cbd5e1"},axisLine:{stroke:"#cbd5e1"}}),e.jsx(Ie,{contentStyle:{backgroundColor:"#fff",border:"none",borderRadius:"20px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.35)",padding:"20px 24px"},labelFormatter:s=>`Fecha: ${s}`,formatter:(s,t)=>[`${s} tickets`,t==="tickets"?"Daily Total":"Average"]}),e.jsx(ye,{type:"monotone",dataKey:"tickets",stroke:"#6366F1",strokeWidth:5,fill:"url(#colorGradient)",dot:{fill:"#6366F1",strokeWidth:4,r:8},activeDot:{r:10,stroke:"#6366F1",strokeWidth:4,fill:"#fff"}}),e.jsx(ye,{type:"monotone",dataKey:"average",stroke:"#94A3B8",strokeWidth:4,strokeDasharray:"10 10",fill:"none",dot:!1})]})})})})]})})]})]}),(!c||N||S)&&e.jsxs("div",{className:"space-y-6 mt-4",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Advanced Analytics"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Interactive charts and visualizations"})]}),e.jsx(mt,{data:{ticketsByStatus:Object.entries(p.ticketsByStatus).map(([s,t])=>({status:s,count:t,color:s==="open"?"#ef4444":s==="in_progress"?"#f59e0b":s==="resolved"?"#10b981":"#6b7280"})),ticketsByPriority:Object.entries(p.ticketsByPriority).map(([s,t])=>({priority:s,count:t,color:s==="high"?"#dc2626":s==="medium"?"#ea580c":s==="low"?"#16a34a":"#6b7280"})),ticketsByBuilding:r.buildingsWithTickets.map(s=>({building:s.name,count:s.tickets_count})),ticketsOverTime:p.ticketsLastWeek.map((s,t)=>({month:`Day ${t+1}`,created:s.count,resolved:Math.floor(s.count*.8)})),deviceIssues:r.problematicDevices.map(s=>({device:s.device_name,count:s.tickets_count,avgResolution:24})),techniciansPerformance:r.topTechnicals.map(s=>({technician:s.name,resolved:s.tickets_count,avg_time:18}))}})]}),(!c||N)&&e.jsx("div",{className:"mt-32",children:e.jsxs(x,{className:"border-0 bg-chart-5 text-background shadow-2xl overflow-hidden relative dark:bg-white/10",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/10 dark:bg-transparent"}),e.jsx(h,{className:"p-16 relative",children:e.jsxs("div",{className:"grid gap-16 lg:grid-cols-4",children:["                                        ",e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-primary/20 w-fit mx-auto dark:bg-primary",children:e.jsx(Ae,{className:"h-10 w-10 text-primary dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-4xl font-black text-background",children:a.tickets.total+a.tickets.resolved_today}),e.jsx("p",{className:"text-primary/80 font-bold text-lg",children:"Total Processed"})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-primary/20 w-fit mx-auto dark:bg-primary",children:e.jsx(Ne,{className:"h-10 w-10 text-primary dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-4xl font-black text-background",children:"98.5%"}),e.jsx("p",{className:"text-primary/80 font-bold text-lg",children:"Uptime"})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-accent/20 w-fit mx-auto dark:bg-primary",children:e.jsx(de,{className:"h-10 w-10 text-accent dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-4xl font-black text-background",children:a.resources.tenants+a.resources.technicals}),e.jsx("p",{className:"text-accent/80 font-bold text-lg",children:"Active Users"})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-chart-1/20 w-fit mx-auto dark:bg-primary",children:e.jsx(ce,{className:"h-10 w-10 text-chart-1 dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-4xl font-black text-background",children:[Math.round(a.tickets.avg_resolution_hours*.8),"h"]}),e.jsx("p",{className:"text-chart-1/80 font-bold text-lg",children:"Response Time"})]})]})]})})]})})]})}),W&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in-0 duration-300",onClick:()=>B(!1),children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden border border-gray-200 dark:border-gray-700 animate-in zoom-in-95 slide-in-from-bottom-4 duration-500 ease-out",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-chart-4/10 to-chart-3/10 dark:from-chart-4/20 dark:to-chart-3/20",children:[e.jsxs("div",{className:"flex items-center gap-3 animate-in slide-in-from-left-4 duration-700 delay-200",children:[e.jsx("div",{className:"p-3 rounded-xl bg-chart-4/20 dark:bg-chart-4/30",children:e.jsx(Ue,{className:"h-6 w-6 text-chart-4 dark:text-chart-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-white",children:"Device Management"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-300",children:"Complete overview of all devices in the system"})]})]}),e.jsx(f,{variant:"ghost",size:"lg",onClick:()=>B(!1),className:"rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 animate-in slide-in-from-right-4 duration-700 delay-200 transition-all hover:scale-105",children:e.jsx(_e,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] bg-white dark:bg-gray-900 scroll-smooth custom-scrollbar",children:r.allDevices&&r.allDevices.length>0?e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-700 delay-300",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(x,{className:"bg-gradient-to-br from-primary/10 to-primary/5 dark:from-primary/20 dark:to-primary/10 border-primary/20 dark:border-primary/30 dark:bg-gray-800/50 animate-in slide-in-from-left-2 duration-500 delay-400 hover:scale-105 transition-transform",children:e.jsxs(h,{className:"p-4 text-center",children:[e.jsx(us,{className:"h-8 w-8 text-primary dark:text-primary mx-auto mb-2"}),e.jsx("h3",{className:"font-semibold text-primary dark:text-primary",children:"Total Devices"}),e.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-white",children:r.allDevices.length})]})}),e.jsx(x,{className:"bg-gradient-to-br from-secondary/10 to-secondary/5 dark:from-secondary/20 dark:to-secondary/10 border-secondary/20 dark:border-secondary/30 dark:bg-gray-800/50 animate-in slide-in-from-bottom-2 duration-500 delay-500 hover:scale-105 transition-transform",children:e.jsxs(h,{className:"p-4 text-center",children:[e.jsx(de,{className:"h-8 w-8 text-secondary dark:text-secondary mx-auto mb-2"}),e.jsx("h3",{className:"font-semibold text-secondary dark:text-secondary",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-white",children:r.allDevices.reduce((s,t)=>s+t.users_count,0)})]})}),e.jsx(x,{className:"bg-gradient-to-br from-accent/10 to-accent/5 dark:from-accent/20 dark:to-accent/10 border-accent/20 dark:border-accent/30 dark:bg-gray-800/50 animate-in slide-in-from-right-2 duration-500 delay-600 hover:scale-105 transition-transform",children:e.jsxs(h,{className:"p-4 text-center",children:[e.jsx(Te,{className:"h-8 w-8 text-accent dark:text-accent mx-auto mb-2"}),e.jsx("h3",{className:"font-semibold text-accent dark:text-accent",children:"Device Types"}),e.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-white",children:new Set(r.allDevices.map(s=>s.device_type)).size})]})})]}),e.jsxs(x,{className:"border-0 shadow-lg dark:bg-gray-800/50 dark:border-gray-700",children:[e.jsx($,{className:"pb-6 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:!bg-transparent",children:e.jsxs("div",{className:"flex items-center justify-between dark:!bg-transparent",children:[e.jsx(M,{className:"text-xl text-foreground dark:text-white",children:"Device Inventory"}),"                                                    ",e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>pt(r.allDevices),className:"gap-2 border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 hover:text-gray-700 dark:text-gray-300 hover:scale-105 transition-all duration-300",children:[e.jsx(ot,{className:"h-4 w-4"}),"Export"]})]})}),e.jsx(h,{className:"p-0 bg-white dark:bg-gray-800/50",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:["                                                        ",e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/70",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Device"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Model"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Brand"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"System"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Users"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Status"})]})}),e.jsx("tbody",{children:r.allDevices.map((s,t)=>e.jsxs("tr",{className:`border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${t%2===0?"bg-white dark:bg-gray-800/30":"bg-gray-50 dark:bg-gray-800/50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-chart-4/20 to-chart-3/20 dark:from-chart-4/30 dark:to-chart-3/30 flex items-center justify-center",children:e.jsx(at,{className:"h-4 w-4 text-chart-4 dark:text-chart-4"})}),e.jsx("div",{children:e.jsxs("p",{className:"font-semibold text-foreground dark:text-white text-sm",children:["  ",s.device_type||"Unknown"]})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-foreground dark:text-white",children:s.device_type||"N/A"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-foreground dark:text-white",children:s.brand_name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-muted-foreground dark:text-gray-400",children:s.system_name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4 text-accent dark:text-accent"}),e.jsx("span",{className:"font-semibold text-accent dark:text-accent",children:s.users_count})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(O,{variant:"outline",className:s.users_count>0?"bg-accent/10 dark:bg-accent/20 text-accent dark:text-accent border-accent/20 dark:border-accent/30":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600",children:s.users_count>0?"Active":"Unused"})})]},s.id))})]})})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{className:"h-16 w-16 text-muted-foreground dark:text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-muted-foreground dark:text-gray-300 mb-2",children:"No Devices Found"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-400",children:"No device data is available at the moment."})]})})]})}),e.jsx(Ys,{open:k,onOpenChange:s=>{s||we()},children:e.jsxs(Ks,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[e.jsx(Xs,{children:e.jsxs(Js,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5 text-blue-600"}),"Appointment Location - ",d?re(d).buildingName:""]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-4 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:d==null?void 0:d.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{children:d?ve(d.scheduled_for).date:""})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{children:d?ve(d.scheduled_for).time:""})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:d==null?void 0:d.technical.name})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsxs("span",{children:["#",d==null?void 0:d.ticket.code]})]})]}),e.jsxs("div",{className:"flex items-start gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(fe,{className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:d?re(d).buildingName:""}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Unit ",d?re(d).unitNumber:""," â€¢ ",d==null?void 0:d.address]})]})]})]}),e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700",children:e.jsx("iframe",{src:As(d?re(d).locationLink:""),width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"w-full h-full"})}),e.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t border-slate-200 dark:border-slate-700",children:d&&re(d).locationLink&&e.jsxs(f,{onClick:()=>{window.open(re(d).locationLink,"_blank")},className:"px-6",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Open in Google Maps"]})})]})]})})]})})}function ut({ticket:a,index:p,technicals:r}){var S,y,P,G,H,W,B,k,A,d;const[w,n]=U.useState(!1),[i,o]=U.useState(null),R=async()=>{var v;if(!i){X.error("Please select a technician");return}n(!0);try{const u=await fetch(`/tickets/${a.id}/assign-technical`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((v=document.querySelector('meta[name="csrf-token"]'))==null?void 0:v.getAttribute("content"))||""},body:JSON.stringify({technical_id:i})});if(u.ok){const b=await u.json();X.success(b.message||"Ticket assigned successfully!"),bs.reload({only:["lists"]})}else if(u.status===422){const b=await u.json(),g=Object.values(b.errors||{}).flat();X.error(g.join(", ")||"Validation error")}else{const b=await u.json().catch(()=>({message:"Unknown error"}));X.error(b.message||b.error||"Failed to assign ticket")}}catch(u){X.error("Error assigning ticket"),console.error("Assignment error:",u)}finally{n(!1)}},N=v=>{const u={open:"bg-red-100 text-red-700 border-red-200",in_progress:"bg-amber-100 text-amber-700 border-amber-200",resolved:"bg-green-100 text-green-700 border-green-200",closed:"bg-gray-100 text-gray-700 border-gray-200"};return e.jsx(O,{variant:"outline",className:`${u[v]||u.open} capitalize`,children:v.replace("_"," ")})},c=v=>{const u={Hardware:"bg-blue-100 text-blue-700",Software:"bg-purple-100 text-purple-700",Network:"bg-green-100 text-green-700",Maintenance:"bg-orange-100 text-orange-700"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u[v]||"bg-gray-100 text-gray-700"}`,children:v})},L=v=>{const u=new Date(v),g=Math.floor((new Date().getTime()-u.getTime())/(1e3*60*60));return g<24?`${g}h ago`:`${Math.floor(g/24)}d ago`};return e.jsxs("tr",{className:`border-b border-slate-50 hover:bg-slate-50/50 transition-colors ${p%2===0?"bg-white":"bg-slate-25"}`,children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-slate-800 text-sm",children:a.code}),N(a.status)]}),e.jsx("p",{className:"text-sm text-slate-600 max-w-xs truncate",title:a.title,children:a.title})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-slate-800",children:((G=(P=(y=(S=a.user)==null?void 0:S.tenant)==null?void 0:y.apartment)==null?void 0:P.building)==null?void 0:G.name)||"Unknown Building"}),e.jsx("p",{className:"text-slate-600",children:((B=(W=(H=a.user)==null?void 0:H.tenant)==null?void 0:W.apartment)==null?void 0:B.name)||"Unknown Apt"})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-slate-800",children:((A=(k=a.device)==null?void 0:k.name_device)==null?void 0:A.name)||"Unknown Device"}),e.jsx("p",{className:"text-slate-600",children:((d=a.device)==null?void 0:d.name)||"N/A"})]})}),e.jsx("td",{className:"py-4 px-6",children:c(a.category)}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-slate-800",children:L(a.created_at)}),e.jsx("p",{className:"text-slate-500 text-xs",children:Fs(new Date(a.created_at),"MMM dd, HH:mm")})]})}),e.jsxs("td",{className:"py-4 px-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Ps,{value:(i==null?void 0:i.toString())||"",onValueChange:v=>o(Number(v)),children:[e.jsx(Hs,{className:"w-32 h-8 text-xs",children:e.jsx(Vs,{placeholder:"Select tech"})}),"                        ",e.jsx(Gs,{children:r.length>0?r.map(v=>e.jsx(hs,{value:v.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:v.name}),v.is_default&&e.jsx(O,{variant:"secondary",className:"text-xs px-1 py-0",children:"Default"})]})},v.id)):e.jsx(hs,{value:"",disabled:!0,children:"No technicians available"})})]}),e.jsx(f,{size:"sm",variant:"outline",onClick:R,disabled:!i||w,className:"h-8 px-3 text-xs bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100 disabled:opacity-50",children:w?e.jsx(ks,{className:"h-3 w-3 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-3 w-3 mr-1"}),"Assign"]})})]}),"            "]})]})}export{da as default};
