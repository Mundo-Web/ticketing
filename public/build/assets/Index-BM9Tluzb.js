import{j as e}from"./ui-D1w9Iw8H.js";import{r as A}from"./recharts-Dld1lWsf.js";import{A as ve}from"./app-layout-KC_XlQnr.js";import{L as Se,t as m,c as ie}from"./app-BAypecS8.js";import{C as i,c as d,a as _,b as v}from"./card-ujb193xZ.js";import{B as j}from"./format-B6Rb66cG.js";import{B as re}from"./button-BntSAybs.js";import{I as Ce}from"./input-CYKIjOQn.js";import{S as de,a as ce,b as xe,c as me,d as L}from"./select-Cexm_mQK.js";import{D as Ae,a as Me,b as De,c as Le}from"./dialog-D75RAdkD.js";import{T as Te,a as ue,b as be,c as Ne}from"./tooltip-CQHbb0yU.js";import{c as M}from"./utils-B66yfQja.js";import{a as Oe}from"./circle-check-big-DZU7S_eA.js";import{C as we,A as ne,B as $e,c as Pe}from"./x-CNM1Dv5p.js";import{R as Ie}from"./refresh-cw-Sduo88Io.js";import{D as fe}from"./database-DZAg6xN8.js";import{T as U}from"./triangle-alert-DrKF4AKN.js";import{M as ee}from"./monitor-BMYn5xBp.js";import{W as ge}from"./wifi-dp9f5Yfk.js";import{W as je,L as le,A as ze,a as Re,b as Fe}from"./wifi-off-fPWadNe7.js";import{F as Ue}from"./filter-B_U0HgPW.js";import{S as He}from"./search-BGEUGtTC.js";import{M as Be}from"./map-pin-CGVzMw_j.js";import{C as _e}from"./clock-BxVJL7PR.js";import{E as Ee}from"./eye-CkkIptxE.js";import{D as Ve}from"./download-ovNJc7Ex.js";import{I as ye}from"./info-0IyK0BA7.js";import{C as te}from"./cpu-Dd6HIBXa.js";import{H as he,M as We}from"./memory-stick-b4zm5zHB.js";import{G as ke}from"./globe-CgCnIFno.js";import{S as Xe}from"./smartphone-D010dtY3.js";import{S as Ye}from"./server-qQX4KwzV.js";import"./react-B1hewrmX.js";import"./check-CkciTNW-.js";import"./createLucideIcon-CR-66RMC.js";import"./index-CWijjM2R.js";import"./index-cS_AKGRi.js";import"./index-DrdTBqzy.js";import"./chevrons-up-down-BF_I81uV.js";const f=a=>{if(!a)return"N/A";const o=["Bytes","KB","MB","GB","TB"],p=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a/Math.pow(1024,p)*100)/100+" "+o[p]},pe=a=>a?`${(a/1e9).toFixed(1)} GHz`:"N/A",H=a=>!a||a.length===0?0:a.reduce((o,p)=>o+(p.capacity||0),0),oe=a=>!a||a.length===0?0:a.reduce((o,p)=>o+((p.capacity||0)-(p.freeSpace||0)),0);function qe({device:a,index:o,onSync:p,onViewDetails:E}){var P,D,I,r,u,y,ae,$,V,h,W,se;const k=(N,b)=>N!=null&&N.toLowerCase().includes("mobile")||b!=null&&b.toLowerCase().includes("android")||b!=null&&b.toLowerCase().includes("ios")?e.jsx(Xe,{className:"w-5 h-5"}):N!=null&&N.toLowerCase().includes("server")||b!=null&&b.toLowerCase().includes("server")?e.jsx(Ye,{className:"w-5 h-5"}):e.jsx(Pe,{className:"w-5 h-5"}),B=N=>{switch(N==null?void 0:N.toLowerCase()){case"healthy":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/20 dark:text-green-200 dark:border-green-800";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-200 dark:border-yellow-800";case"critical":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/20 dark:text-red-200 dark:border-red-800";case"offline":return"bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600";default:return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/20 dark:text-blue-200 dark:border-blue-800"}},w=(N,b)=>{if(b)try{const S=new Date(b*1e3),O=new Date().getTime()-S.getTime(),z=Math.floor(O/(1e3*60)),R=Math.floor(O/(1e3*60*60)),s=Math.floor(O/(1e3*60*60*24));return z<60?`${z}m ago`:R<24?`${R}h ago`:`${s}d ago`}catch{return"Invalid date"}if(!N)return"Never";try{const S=new Date(N),O=new Date().getTime()-S.getTime(),z=Math.floor(O/(1e3*60)),R=Math.floor(O/(1e3*60*60)),s=Math.floor(O/(1e3*60*60*24));return z<60?`${z}m ago`:R<24?`${R}h ago`:`${s}d ago`}catch{return"Invalid date"}};return e.jsxs("tr",{className:M("border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",o%2===0?"bg-white dark:bg-gray-800/30":"bg-gray-50 dark:bg-gray-800/50"),children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:M("min-w-10 min-h-10 rounded-lg flex items-center justify-center",!a.ninjaone_data.offline&&a.ninjaone_data.online!==!1?"bg-gradient-to-br from-green-100 to-green-200 dark:from-green-900/30 dark:to-green-800/30":"bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700"),children:e.jsx("div",{className:M(!a.ninjaone_data.offline&&a.ninjaone_data.online!==!1?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400"),children:k(a.ninjaone_data.deviceType,a.ninjaone_data.operatingSystem)})}),e.jsx("div",{children:e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:a.ninjaone_data.systemName||a.ninjaone_data.hostname||a.ninjaone_data.displayName||"Unknown Device"})})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"relative group cursor-help",title:`${((P=a.ninjaone_data.os)==null?void 0:P.manufacturer)||"N/A"} | Arch: ${((D=a.ninjaone_data.os)==null?void 0:D.architecture)||"N/A"} | Build: ${((I=a.ninjaone_data.os)==null?void 0:I.buildNumber)||"N/A"} | CPU: ${a.ninjaone_data.processors&&a.ninjaone_data.processors.length>0?`${a.ninjaone_data.processors[0].numCores}c/${a.ninjaone_data.processors[0].numLogicalCores}t @ ${pe(a.ninjaone_data.processors[0].maxClockSpeed)}`:"N/A"} | RAM: ${(r=a.ninjaone_data.system)!=null&&r.totalPhysicalMemory?f(a.ninjaone_data.system.totalPhysicalMemory):"N/A"} | Storage: ${a.ninjaone_data.volumes&&a.ninjaone_data.volumes.length>0?`${f(oe(a.ninjaone_data.volumes))} / ${f(H(a.ninjaone_data.volumes))}`:"N/A"}`,children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100 font-medium",children:((u=a.ninjaone_data.os)==null?void 0:u.name)||a.ninjaone_data.operatingSystem||"Unknown OS"}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-80 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-[9999]",style:{position:"fixed",zIndex:9999},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"border-b border-gray-700 pb-2",children:[e.jsx("div",{className:"font-semibold text-blue-300 mb-1",children:"Operating System"}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"OS:"})," ",((y=a.ninjaone_data.os)==null?void 0:y.name)||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Vendor:"})," ",((ae=a.ninjaone_data.os)==null?void 0:ae.manufacturer)||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Architecture:"})," ",(($=a.ninjaone_data.os)==null?void 0:$.architecture)||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Build:"})," ",((V=a.ninjaone_data.os)==null?void 0:V.buildNumber)||"N/A"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-green-300 mb-1",children:"Hardware"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[a.ninjaone_data.processors&&a.ninjaone_data.processors.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"CPU:"})," ",a.ninjaone_data.processors[0].numCores,"c/",a.ninjaone_data.processors[0].numLogicalCores,"t @ ",pe(a.ninjaone_data.processors[0].maxClockSpeed)]}),((h=a.ninjaone_data.system)==null?void 0:h.totalPhysicalMemory)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"RAM:"})," ",f(a.ninjaone_data.system.totalPhysicalMemory)]}),a.ninjaone_data.volumes&&a.ninjaone_data.volumes.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Storage:"})," ",f(oe(a.ninjaone_data.volumes))," / ",f(H(a.ninjaone_data.volumes))]})]})]})]}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(j,{className:M("w-fit",!a.ninjaone_data.offline&&a.ninjaone_data.online!==!1?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"),children:!a.ninjaone_data.offline&&a.ninjaone_data.online!==!1?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-3 h-3 mr-1"}),"Online"]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),"Offline"]})}),a.has_local_mapping&&e.jsxs(j,{className:"w-fit bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),"Synced"]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:((W=a.organization)==null?void 0:W.name)||`Org ${a.ninjaone_data.organizationId}`||"N/A"})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:((se=a.location)==null?void 0:se.name)||`Location ${a.ninjaone_data.locationId}`||"N/A"})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(j,{className:B(a.health_status.status),children:a.health_status.status}),a.alerts_count>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3 text-red-500"}),e.jsxs("span",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:[a.alerts_count," alert",a.alerts_count>1?"s":""]})]}),a.health_status.issuesCount>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(we,{className:"w-3 h-3 text-orange-500"}),e.jsxs("span",{className:"text-xs text-orange-600 dark:text-orange-400 font-medium",children:[a.health_status.issuesCount," issue",a.health_status.issuesCount>1?"s":""]})]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:w(a.ninjaone_data.lastSeenUtc,a.ninjaone_data.lastContact)}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.ninjaone_data.lastContact?new Date(a.ninjaone_data.lastContact*1e3).toLocaleDateString():a.ninjaone_data.lastSeenUtc?new Date(a.ninjaone_data.lastSeenUtc).toLocaleDateString():"-"})]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ue,{children:[e.jsx(be,{asChild:!0,children:e.jsx(re,{variant:"ghost",size:"sm",onClick:()=>E(a),className:"h-8 w-8 p-0",children:e.jsx(Ee,{className:"w-4 h-4"})})}),e.jsx(Ne,{children:e.jsx("p",{children:"View device details"})})]}),!a.has_local_mapping&&e.jsxs(ue,{children:[e.jsx(be,{asChild:!0,children:e.jsx(re,{variant:"ghost",size:"sm",onClick:()=>p(a.ninjaone_data.id),className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20",children:e.jsx(Ve,{className:"w-4 h-4"})})}),e.jsx(Ne,{children:e.jsx("p",{children:"Sync to local database"})})]})]})})]})}function Ge({device:a}){var k,B,w,P,D,I;const[o,p]=A.useState("overview"),E=[{id:"overview",label:"Overview",icon:ye},{id:"system",label:"System",icon:te},{id:"storage",label:"Storage",icon:he},{id:"network",label:"Network",icon:ke},{id:"health",label:"Health",icon:ne},...a.alerts.length>0?[{id:"alerts",label:"Alerts",icon:U}]:[]];return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:e.jsx("div",{className:"flex overflow-x-auto",children:E.map(r=>{const u=r.icon;return e.jsxs("button",{onClick:()=>p(r.id),className:M("flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors whitespace-nowrap",o===r.id?"border-blue-500 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950/30":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"),children:[e.jsx(u,{className:"w-4 h-4"}),r.label,r.id==="alerts"&&a.alerts.length>0&&e.jsx(j,{className:"ml-1 text-xs bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300",children:a.alerts.length})]},r.id)})})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50/50 dark:bg-gray-900/50 custom-scrollbar",children:[o==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/50 dark:to-blue-900/50 border-blue-200",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"CPU"}),e.jsx("p",{className:"font-semibold text-blue-900 dark:text-blue-100",children:(k=a.ninjaone_data.processors)!=null&&k[0]?`${a.ninjaone_data.processors[0].numCores}c/${a.ninjaone_data.processors[0].numLogicalCores}t`:"N/A"})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/50 dark:to-green-900/50 border-green-200",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-700 dark:text-green-300",children:"RAM"}),e.jsx("p",{className:"font-semibold text-green-900 dark:text-green-100",children:f((B=a.ninjaone_data.system)==null?void 0:B.totalPhysicalMemory)})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950/50 dark:to-purple-900/50 border-purple-200",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(he,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-700 dark:text-purple-300",children:"Storage"}),e.jsx("p",{className:"font-semibold text-purple-900 dark:text-purple-100",children:f(H(a.ninjaone_data.volumes))})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-950/50 dark:to-orange-900/50 border-orange-200",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_e,{className:"w-8 h-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:"Last Seen"}),e.jsx("p",{className:"font-semibold text-orange-900 dark:text-orange-100 text-sm",children:a.ninjaone_data.lastContact?new Date(a.ninjaone_data.lastContact*1e3).toLocaleDateString():"Never"})]})]})})})]}),e.jsxs(i,{children:[e.jsx(_,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-5 h-5"}),"Basic Information"]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"System Name"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.systemName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Hostname"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.hostname||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Device Type"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.deviceType||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Serial Number"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.serialNumber||((w=a.ninjaone_data.system)==null?void 0:w.serialNumber)||"N/A"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Display Name"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.displayName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"DNS Name"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.dnsName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Node Class"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.nodeClass||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Approval Status"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.approvalStatus||"N/A"})]})]})]})})]}),a.ninjaone_data.os&&e.jsxs(i,{children:[e.jsx(_,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5"}),"Operating System"]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"OS Name"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.os.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Architecture"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.os.architecture||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Language"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.os.language||"N/A"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Manufacturer"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.os.manufacturer||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Build Number"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.os.buildNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Needs Reboot"}),e.jsx(j,{className:a.ninjaone_data.os.needsReboot?"bg-red-100 text-red-800":"bg-green-100 text-green-800",children:a.ninjaone_data.os.needsReboot?"Yes":"No"})]})]})]})})]})]}),o==="system"&&e.jsxs("div",{className:"space-y-6",children:[a.ninjaone_data.system&&e.jsxs(i,{children:[e.jsx(_,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"}),"Hardware Information"]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Manufacturer"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.system.manufacturer||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Model"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.system.model||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Chassis Type"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.system.chassisType||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Memory"}),e.jsx("p",{className:"text-lg font-semibold",children:f(a.ninjaone_data.system.totalPhysicalMemory)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Virtual Machine"}),e.jsx(j,{className:a.ninjaone_data.system.virtualMachine?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800",children:a.ninjaone_data.system.virtualMachine?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Processors"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.system.numberOfProcessors||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Domain"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.system.domain||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Domain Role"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.system.domainRole||"N/A"})]})]})]})})]}),a.ninjaone_data.processors&&a.ninjaone_data.processors.length>0&&e.jsxs(i,{children:[e.jsx(_,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"}),"Processor Information"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:a.ninjaone_data.processors.map((r,u)=>e.jsx("div",{className:"p-4 border rounded-lg dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Name"}),e.jsx("p",{className:"font-semibold",children:r.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Cores"}),e.jsxs("p",{className:"font-semibold",children:[r.numCores,"/",r.numLogicalCores," cores"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Max Speed"}),e.jsx("p",{className:"font-semibold",children:pe(r.maxClockSpeed)})]})]})},u))})})]})]}),o==="storage"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(i,{children:[e.jsx(_,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5"}),"Storage Overview"]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Total Capacity"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:f(H(a.ninjaone_data.volumes))})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-950/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:"Used Space"}),e.jsx("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:f(oe(a.ninjaone_data.volumes))})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Free Space"}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:f(H(a.ninjaone_data.volumes)-oe(a.ninjaone_data.volumes))})]})]})})]}),a.ninjaone_data.volumes&&a.ninjaone_data.volumes.length>0&&e.jsxs(i,{children:[e.jsx(_,{children:e.jsx(v,{children:"Volume Details"})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:a.ninjaone_data.volumes.map((r,u)=>{const y=r.capacity?Math.round((r.capacity-(r.freeSpace||0))/r.capacity*100):0;return e.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:r.name||r.label||"Unnamed Volume"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.fileSystem," â€¢ ",r.deviceType]})]}),e.jsxs(j,{className:y>90?"bg-red-100 text-red-800":y>70?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",children:[y,"% Used"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Used: ",f((r.capacity||0)-(r.freeSpace||0))]}),e.jsxs("span",{children:["Free: ",f(r.freeSpace)]}),e.jsxs("span",{children:["Total: ",f(r.capacity)]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:M("h-2 rounded-full transition-all",y>90?"bg-red-500":y>70?"bg-yellow-500":"bg-green-500"),style:{width:`${y}%`}})})]})]},u)})})})]})]}),o==="network"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(i,{children:[e.jsx(_,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5"}),"Network Information"]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Public IP Address"}),e.jsx("p",{className:"text-lg font-semibold font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded mt-1",children:a.ninjaone_data.publicIP||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"IP Addresses"}),e.jsx("div",{className:"mt-2 space-y-1",children:Array.isArray(a.ninjaone_data.ipAddresses)?a.ninjaone_data.ipAddresses.map((r,u)=>e.jsx(j,{variant:"outline",className:"mr-2 font-mono",children:r},u)):e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.ninjaone_data.ipAddresses||"N/A"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"MAC Addresses"}),e.jsx("div",{className:"mt-2 space-y-1",children:Array.isArray(a.ninjaone_data.macAddresses)?a.ninjaone_data.macAddresses.map((r,u)=>e.jsx(j,{variant:"outline",className:"mr-2 font-mono",children:r},u)):e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.ninjaone_data.macAddresses||"N/A"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Last Logged User"}),e.jsx("p",{className:"text-lg font-semibold",children:a.ninjaone_data.lastLoggedInUser||"N/A"})]})]})})]})}),o==="health"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(i,{children:[e.jsx(_,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5"}),"Health Status"]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Overall Status"}),e.jsx(j,{className:M("text-lg px-3 py-1 mt-1",a.health_status.status==="healthy"?"bg-green-100 text-green-800":a.health_status.status==="critical"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:a.health_status.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Issues"}),e.jsx("p",{className:"text-2xl font-bold",children:a.health_status.issuesCount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Is Offline"}),e.jsx(j,{className:a.health_status.isOffline?"bg-red-100 text-red-800":"bg-green-100 text-green-800",children:a.health_status.isOffline?"Yes":"No"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Critical Issues"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.health_status.criticalCount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Warning Issues"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:a.health_status.warningCount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Last Contact"}),e.jsx("p",{className:"text-lg font-semibold",children:a.health_status.lastContact?new Date(a.health_status.lastContact*1e3).toLocaleString():"N/A"})]})]})]})})]}),a.local_device&&e.jsxs(i,{children:[e.jsx(_,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5"}),"Local Device Mapping"]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Local Name"}),e.jsx("p",{className:"text-lg font-semibold",children:a.local_device.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Model"}),e.jsx("p",{className:"text-lg font-semibold",children:((P=a.local_device.model)==null?void 0:P.name)||"N/A"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Brand"}),e.jsx("p",{className:"text-lg font-semibold",children:((D=a.local_device.brand)==null?void 0:D.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"System"}),e.jsx("p",{className:"text-lg font-semibold",children:((I=a.local_device.system)==null?void 0:I.name)||"N/A"})]})]})]})})]})]}),o==="alerts"&&a.alerts.length>0&&e.jsx("div",{className:"space-y-6",children:e.jsxs(i,{children:[e.jsx(_,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),"Active Alerts (",a.alerts.length,")"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:a.alerts.map((r,u)=>e.jsx("div",{className:"p-4 border-l-4 border-red-500 bg-red-50 dark:bg-red-950/20 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(U,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-red-800 dark:text-red-200",children:r.message||"Alert"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[r.createdAt&&e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-300",children:[e.jsx("strong",{children:"Created:"})," ",new Date(r.createdAt).toLocaleString()]}),r.severity&&e.jsx(j,{className:M("text-xs",r.severity==="CRITICAL"?"bg-red-600 text-white":r.severity==="HIGH"?"bg-orange-500 text-white":r.severity==="MEDIUM"?"bg-yellow-500 text-white":"bg-blue-500 text-white"),children:r.severity})]})]})]})},u))})})]})})]})]})}function Pa({devices:a,stats:o,connection_status:p,error_message:E}){const[k,B]=A.useState(""),[w,P]=A.useState("all"),[D,I]=A.useState("all"),[r,u]=A.useState("all"),[y,ae]=A.useState("systemName"),[$,V]=A.useState("asc"),[h,W]=A.useState(null),se=A.useMemo(()=>{const s=new Map;return a.forEach(t=>{var l;if(t.ninjaone_data.organizationId){const n=t.ninjaone_data.organizationId;s.has(n)||s.set(n,{id:n,name:((l=t.organization)==null?void 0:l.name)||`Organization ${n}`,count:0}),s.get(n).count++}}),Array.from(s.values())},[a]),N=A.useMemo(()=>{const s=new Map;return a.forEach(t=>{var l;if(t.ninjaone_data.locationId){const n=t.ninjaone_data.locationId;s.has(n)||s.set(n,{id:n,name:((l=t.location)==null?void 0:l.name)||`Location ${n}`,count:0}),s.get(n).count++}}),Array.from(s.values())},[a]),b=A.useMemo(()=>{const s=a.filter(t=>{var x,g,C,X,Y,q,G,J,K,Q,Z;const l=((x=t.ninjaone_data.systemName)==null?void 0:x.toLowerCase().includes(k.toLowerCase()))||((g=t.ninjaone_data.hostname)==null?void 0:g.toLowerCase().includes(k.toLowerCase()))||((C=t.ninjaone_data.operatingSystem)==null?void 0:C.toLowerCase().includes(k.toLowerCase()))||((Y=(X=t.ninjaone_data.os)==null?void 0:X.name)==null?void 0:Y.toLowerCase().includes(k.toLowerCase()))||((G=(q=t.ninjaone_data.system)==null?void 0:q.manufacturer)==null?void 0:G.toLowerCase().includes(k.toLowerCase()))||((K=(J=t.ninjaone_data.system)==null?void 0:J.model)==null?void 0:K.toLowerCase().includes(k.toLowerCase())),n=w==="all"||w==="online"&&!t.ninjaone_data.offline&&t.ninjaone_data.online!==!1||w==="offline"&&(t.ninjaone_data.offline||t.ninjaone_data.online===!1)||w==="alerts"&&t.alerts_count>0||w==="mapped"&&t.has_local_mapping||w==="unmapped"&&!t.has_local_mapping,c=D==="all"||((Q=t.ninjaone_data.organizationId)==null?void 0:Q.toString())===D,F=r==="all"||((Z=t.ninjaone_data.locationId)==null?void 0:Z.toString())===r;return l&&n&&c&&F});return s.sort((t,l)=>{var F,x,g,C,X,Y,q,G,J,K,Q,Z;let n,c;switch(y){case"systemName":n=t.ninjaone_data.systemName||t.ninjaone_data.hostname||"",c=l.ninjaone_data.systemName||l.ninjaone_data.hostname||"";break;case"organization":n=((F=t.organization)==null?void 0:F.name)||"",c=((x=l.organization)==null?void 0:x.name)||"";break;case"location":n=((g=t.location)==null?void 0:g.name)||"",c=((C=l.location)==null?void 0:C.name)||"";break;case"status":n=!t.ninjaone_data.offline&&t.ninjaone_data.online!==!1?"online":"offline",c=!l.ninjaone_data.offline&&l.ninjaone_data.online!==!1?"online":"offline";break;case"lastSeen":n=t.ninjaone_data.lastContact?t.ninjaone_data.lastContact*1e3:t.ninjaone_data.lastSeenUtc?new Date(t.ninjaone_data.lastSeenUtc).getTime():0,c=l.ninjaone_data.lastContact?l.ninjaone_data.lastContact*1e3:l.ninjaone_data.lastSeenUtc?new Date(l.ninjaone_data.lastSeenUtc).getTime():0;break;case"deviceType":n=t.ninjaone_data.deviceType||"",c=l.ninjaone_data.deviceType||"";break;case"osName":n=((X=t.ninjaone_data.os)==null?void 0:X.name)||t.ninjaone_data.operatingSystem||"",c=((Y=l.ninjaone_data.os)==null?void 0:Y.name)||l.ninjaone_data.operatingSystem||"";break;case"processor":n=((G=(q=t.ninjaone_data.processors)==null?void 0:q[0])==null?void 0:G.name)||"",c=((K=(J=l.ninjaone_data.processors)==null?void 0:J[0])==null?void 0:K.name)||"";break;case"memory":n=((Q=t.ninjaone_data.system)==null?void 0:Q.totalPhysicalMemory)||0,c=((Z=l.ninjaone_data.system)==null?void 0:Z.totalPhysicalMemory)||0;break;case"storage":n=H(t.ninjaone_data.volumes),c=H(l.ninjaone_data.volumes);break;case"alerts":n=t.alerts_count,c=l.alerts_count;break;default:n="",c=""}return typeof n=="string"&&typeof c=="string"?$==="asc"?n.localeCompare(c):c.localeCompare(n):$==="asc"?n>c?1:-1:c>n?1:-1}),s},[a,k,w,D,r,y,$]),S=s=>{y===s?V($==="asc"?"desc":"asc"):(ae(s),V("asc"))},T=s=>y!==s?e.jsx(ze,{className:"w-4 h-4 text-gray-400"}):$==="asc"?e.jsx(Re,{className:"w-4 h-4 text-blue-600"}):e.jsx(Fe,{className:"w-4 h-4 text-blue-600"}),O=async()=>{try{m.loading("Testing connection...",{id:"test-connection"});const t=await(await fetch("/api/ninjaone/test-connection",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...ie()},credentials:"same-origin"})).json();t.status==="success"?m.success(`Connection successful! Found ${t.device_count} devices.`,{id:"test-connection"}):m.error(`Connection failed: ${t.message}`,{id:"test-connection"})}catch(s){m.error("Error testing connection",{id:"test-connection"}),console.error("Test connection error:",s)}},z=async()=>{try{m.loading("Refreshing devices from NinjaOne...",{id:"refresh-devices"});const s=await fetch("/api/ninjaone/devices/refresh",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...ie()},credentials:"same-origin"});console.log("Refresh response status:",s.status),console.log("Refresh response headers:",Object.fromEntries(s.headers.entries()));const t=await s.json();console.log("Refresh response data:",t),s.ok&&t.success?(m.success(t.message||"Devices refreshed successfully!",{id:"refresh-devices"}),setTimeout(()=>window.location.reload(),1e3)):s.status===401?(m.error("You are not authenticated. Please log in again.",{id:"refresh-devices"}),console.error("Authentication failed. User may need to log in again.")):s.status===403?m.error("You do not have permission to perform this action.",{id:"refresh-devices"}):s.status===419?m.error("CSRF token mismatch. Please refresh the page and try again.",{id:"refresh-devices"}):m.error(t.message||`Error refreshing devices (${s.status})`,{id:"refresh-devices"})}catch(s){console.error("Refresh devices error:",s),m.error("Network error while refreshing devices",{id:"refresh-devices"})}},R=async s=>{var l,n,c,F;const t=a.find(x=>x.ninjaone_data.id===s);if(!t){m.error("Device not found");return}try{m.loading("Syncing device to local database...",{id:`sync-${s}`});const x=await fetch(`/api/ninjaone/devices/${s}/sync`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...ie()},credentials:"same-origin",body:JSON.stringify({systemName:t.ninjaone_data.systemName,hostname:t.ninjaone_data.hostname,manufacturer:(l=t.ninjaone_data.system)==null?void 0:l.manufacturer,model:(n=t.ninjaone_data.system)==null?void 0:n.model,operatingSystem:t.ninjaone_data.operatingSystem||((c=t.ninjaone_data.os)==null?void 0:c.name),serialNumber:t.ninjaone_data.serialNumber||((F=t.ninjaone_data.system)==null?void 0:F.serialNumber),deviceId:s})}),g=await x.json();if(x.ok&&g.success)m.success(g.message||"Device synced successfully!",{id:`sync-${s}`}),setTimeout(()=>window.location.reload(),1e3);else if(x.status===401)m.error("You are not authenticated. Please log in again.",{id:`sync-${s}`});else if(x.status===403)m.error("You do not have permission to perform this action.",{id:`sync-${s}`});else if(x.status===404){const C=g.error||"No local device found to match with this NinjaOne device";m.error(C,{id:`sync-${s}`,duration:6e3})}else if(x.status===400){const C=g.error||"Device is already synced to local database";m.error(C,{id:`sync-${s}`,duration:4e3})}else{const C=g.message||g.error||`HTTP ${x.status}: ${x.statusText}`;m.error(C,{id:`sync-${s}`})}}catch(x){console.error("Sync error:",x);let g="Network error while syncing device";x instanceof Error&&(x.message.includes("404")?g="Sync endpoint not found. Please verify the API route exists.":x.message.includes("403")?g="Permission denied. Please check authentication.":x.message.includes("500")&&(g="Server error. Please check server logs.")),m.error(g,{id:`sync-${s}`})}};return e.jsxs(Te,{children:[e.jsxs(ve,{children:[e.jsx(Se,{title:"NinjaOne Devices Dashboard - Real-time Monitoring & Management"}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:"Device Management Center"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mt-2",children:"Monitor and manage all NinjaOne connected devices in real-time"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{variant:p==="connected"?"default":"destructive",className:M("px-3 py-1",p==="connected"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:p==="connected"?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-3 h-3 mr-1"}),"NinjaOne Connected"]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"w-3 h-3 mr-1"}),"Connection Error"]})}),e.jsxs(re,{onClick:O,variant:"outline",size:"sm",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Test Connection"]}),e.jsxs(re,{onClick:z,variant:"outline",size:"sm",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Refresh Data"]})]})]}),p==="error"&&e.jsx(i,{className:"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-950/20",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3 text-red-800 dark:text-red-200",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"NinjaOne Connection Error"}),e.jsx("p",{className:"text-sm mt-1",children:E})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[e.jsx(i,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/50 dark:to-blue-900/50 border-blue-200 dark:border-blue-800",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:e.jsx(ee,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total Devices"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:o.total_devices})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/50 dark:to-green-900/50 border-green-200 dark:border-green-800",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-600 rounded-lg",children:e.jsx(ge,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Online"}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:o.online_devices})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-950/50 dark:to-red-900/50 border-red-200 dark:border-red-800",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-600 rounded-lg",children:e.jsx(je,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Offline"}),e.jsx("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:o.offline_devices})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-950/50 dark:to-yellow-900/50 border-yellow-200 dark:border-yellow-800",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-600 rounded-lg",children:e.jsx(U,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-300",children:"With Alerts"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:o.devices_with_alerts})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950/50 dark:to-purple-900/50 border-purple-200 dark:border-purple-800",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-600 rounded-lg",children:e.jsx(le,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Synced"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:o.mapped_devices})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 border-gray-200 dark:border-gray-600",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-600 rounded-lg",children:e.jsx(fe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unsynced"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:o.unmapped_devices})]})]})})})]}),e.jsxs(i,{className:"border-0 shadow-lg dark:shadow-gray-900/50",children:[e.jsx(_,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),"Filters & Search"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Ce,{placeholder:"Search devices, models, OS...",value:k,onChange:s=>B(s.target.value),className:"pl-10"})]})}),e.jsxs(de,{value:w,onValueChange:s=>P(s),children:[e.jsx(ce,{children:e.jsx(xe,{placeholder:"Filter by status"})}),e.jsxs(me,{children:[e.jsx(L,{value:"all",children:"All Devices"}),e.jsx(L,{value:"online",children:"Online Only"}),e.jsx(L,{value:"offline",children:"Offline Only"}),e.jsx(L,{value:"alerts",children:"With Alerts"}),e.jsx(L,{value:"mapped",children:"Synced to Local"}),e.jsx(L,{value:"unmapped",children:"Not Synced"})]})]}),e.jsxs(de,{value:D,onValueChange:I,children:[e.jsx(ce,{children:e.jsx(xe,{placeholder:"Filter by organization"})}),e.jsxs(me,{children:[e.jsx(L,{value:"all",children:"All Organizations"}),se.map(s=>e.jsxs(L,{value:s.id.toString(),children:[s.name," (",s.count,")"]},s.id))]})]}),e.jsxs(de,{value:r,onValueChange:u,children:[e.jsx(ce,{children:e.jsx(xe,{placeholder:"Filter by location"})}),e.jsxs(me,{children:[e.jsx(L,{value:"all",children:"All Locations"}),N.map(s=>e.jsxs(L,{value:s.id.toString(),children:[s.name," (",s.count,")"]},s.id))]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(ne,{className:"w-4 h-4"}),"Showing ",b.length," of ",a.length," devices"]})]})]}),e.jsxs(i,{className:"border-0 shadow-xl dark:shadow-gray-900/50",children:[e.jsx(_,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5"}),"Device Inventory"]})}),e.jsx(d,{className:"p-0 ",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/70",children:[e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:e.jsxs("button",{onClick:()=>S("systemName"),className:"flex items-center gap-2 hover:text-blue-600 dark:hover:text-blue-400",children:["Device",T("systemName")]})}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:e.jsxs("button",{onClick:()=>S("osName"),className:"flex items-center gap-2 hover:text-blue-600 dark:hover:text-blue-400",children:["System Info",T("osName")]})}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:e.jsxs("button",{onClick:()=>S("status"),className:"flex items-center gap-2 hover:text-blue-600 dark:hover:text-blue-400",children:["Status",T("status")]})}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:e.jsxs("button",{onClick:()=>S("organization"),className:"flex items-center gap-2 hover:text-blue-600 dark:hover:text-blue-400",children:["Organization",T("organization")]})}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:e.jsxs("button",{onClick:()=>S("location"),className:"flex items-center gap-2 hover:text-blue-600 dark:hover:text-blue-400",children:["Location",T("location")]})}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:e.jsxs("button",{onClick:()=>S("alerts"),className:"flex items-center gap-2 hover:text-blue-600 dark:hover:text-blue-400",children:["Health",T("alerts")]})}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:e.jsxs("button",{onClick:()=>S("lastSeen"),className:"flex items-center gap-2 hover:text-blue-600 dark:hover:text-blue-400",children:["Last Seen",T("lastSeen")]})}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Actions"})]})}),e.jsx("tbody",{children:b.length>0?b.map((s,t)=>e.jsx(qe,{device:s,index:t,onSync:R,onViewDetails:W},s.ninjaone_data.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"py-12 text-center",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"No devices found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.length===0?"No devices are available in NinjaOne or there was a connection error.":"No devices match your current filters. Try adjusting your search criteria."})]})})})})]})})})]}),h&&e.jsx(Ae,{open:!!h,onOpenChange:()=>W(null),children:e.jsxs(Me,{className:"max-w-6xl w-[95vw] h-[90vh] p-0 overflow-hidden bg-white dark:bg-gray-900 border shadow-2xl",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6",children:[e.jsx(De,{children:e.jsxs(Le,{className:"flex items-center gap-4 text-xl",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(ee,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:h.ninjaone_data.systemName||h.ninjaone_data.hostname})})]})}),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsx(j,{className:M("px-3 py-1",!h.ninjaone_data.offline&&h.ninjaone_data.online!==!1?"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800":"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800"),children:!h.ninjaone_data.offline&&h.ninjaone_data.online!==!1?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-3 h-3 mr-1"}),"Online"]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),"Offline"]})}),e.jsxs(j,{className:M("px-3 py-1",h.health_status.status==="healthy"?"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800":h.health_status.status==="critical"?"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800":"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-200 dark:border-yellow-800"),children:[e.jsx(ne,{className:"w-3 h-3 mr-1"}),h.health_status.status]}),h.has_local_mapping&&e.jsxs(j,{className:"px-3 py-1 bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900/30 dark:text-purple-200 dark:border-purple-800",children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),"Synced"]}),h.alerts_count>0&&e.jsxs(j,{className:"px-3 py-1 bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800",children:[e.jsx(U,{className:"w-3 h-3 mr-1"}),h.alerts_count," Alert",h.alerts_count>1?"s":""]})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(Ge,{device:h})})]})})]})})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                    .custom-scrollbar::-webkit-scrollbar {
                        width: 8px;
                    }
                    .custom-scrollbar::-webkit-scrollbar-track {
                        background: rgba(156, 163, 175, 0.2);
                        border-radius: 4px;
                    }
                    .custom-scrollbar::-webkit-scrollbar-thumb {
                        background: rgba(156, 163, 175, 0.5);
                        border-radius: 4px;
                    }
                    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                        background: rgba(156, 163, 175, 0.7);
                    }
                    /* Firefox */
                    .custom-scrollbar {
                        scrollbar-width: thin;
                        scrollbar-color: rgba(156, 163, 175, 0.5) rgba(156, 163, 175, 0.2);
                    }
                    /* Dark mode */
                    .dark .custom-scrollbar::-webkit-scrollbar-track {
                        background: rgba(75, 85, 99, 0.2);
                    }
                    .dark .custom-scrollbar::-webkit-scrollbar-thumb {
                        background: rgba(75, 85, 99, 0.5);
                    }
                    .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                        background: rgba(75, 85, 99, 0.7);
                    }
                `}})]})}export{Pa as default};
