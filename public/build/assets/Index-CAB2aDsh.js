import{j as e}from"./ui-CGpGLG-4.js";import{A as wa,D as ae,a as re,b as te,c as Na,d as M}from"./app-layout-D4bGgrf4.js";import{m as ya,L as Fa,S as H,t as w,$ as Te}from"./app-Cog_uw4L.js";import{r as u}from"./recharts-B16uQ_Zp.js";import{e as ka,F as Ca}from"./FileSaver.min-BGmHM0RZ.js";import{D as J,a as W,b as K,c as Y,e as se,d as Sa}from"./dialog-ZN4shhb4.js";import{B as d}from"./button-Dn6xNzVS.js";import{L as F}from"./label-DWbj0nvu.js";import{T as Be}from"./textarea-BWpQj4jL.js";import{S as Ea}from"./switch-DQeDle0M.js";import{T as Da,a as _a,b as oe,c as le}from"./tabs-CNcMmO30.js";import{I as k}from"./input-CmZjduBt.js";import{u as $a,T as Aa,a as Ra,b as ne,c as za,f as Ue,d as Ma,e as Le,g as Ta,h as Ba,i as Ua}from"./table-DQdRJEck.js";import{S as La,a as Ia,b as Va,c as Pa,d as ie}from"./select-npSrfne5.js";import{L as Oa,b as N,a as X,X as Ga,B as Ie}from"./x-DaVkax-L.js";import{T as qa}from"./table-Um-mGLX3.js";import{P as de}from"./plus-BdgF4T8b.js";import{S as Ha}from"./search-BYwieh_P.js";import{F as Ja}from"./filter-C7rLzdBM.js";import{F as Wa}from"./file-spreadsheet-DP1B9Kxi.js";import{D as Ve}from"./download-CRovyn-I.js";import{C as ce}from"./chevron-left-BEER2g75.js";import{C as L}from"./cloud-upload-CUVtKsIr.js";import{T as me}from"./trash-2-DghiETJk.js";import{C as Ka}from"./circle-alert-BoVUSwRZ.js";import{E as Ya}from"./ellipsis-DD_sq3ud.js";import{S as Pe}from"./square-pen-6qCxIJZ2.js";import{A as Oe,a as Ge}from"./archive-DEiaE80P.js";import{M as qe}from"./map-pin-B6MGBFhT.js";import{U as Xa}from"./user-B9S7Zak9.js";import"./utils-DvwAYYBZ.js";import"./tooltip-B-ZChVRl.js";import"./check-C_IBZmq_.js";import"./createLucideIcon-BBA9I-xQ.js";import"./index-BbIsR65t.js";import"./index-BsIecJEN.js";import"./index-BvZAAreS.js";import"./chevrons-up-down-DaqTssCh.js";import"./circle-check-big-DKZvEq1H.js";import"./format-CAKJ62El.js";import"./react-B1hewrmX.js";function Hr({buildings:o,googleMapsApiKey:I}){var De;const[He,Je]=u.useState([]),[We,Ke]=u.useState([]),[Ye,Xe]=u.useState({}),[Qe,Ze]=u.useState({}),[he,ge]=u.useState(""),[E,pe]=u.useState("grid"),[ea,_]=u.useState(!1),[aa,V]=u.useState(!1),[ra,P]=u.useState(!1),[l,$]=u.useState(null),[ue,xe]=u.useState(null),[fe,ta]=u.useState(4),[sa,ve]=u.useState(!1),[er,je]=u.useState(!1),{data:t,setData:j,post:ar,put:rr,delete:oa,processing:be,errors:c,reset:O}=ya({id:null,name:"",managing_company:"",address:"",image:null,description:"",location_link:"",owner:{name:"",email:"",photo:null,phone:""},doormen:[]}),we=()=>{const a=t.name.trim()!==""||t.managing_company.trim()!==""||t.address.trim()!==""||t.description.trim()!==""||t.location_link.trim()!==""||t.owner.name.trim()!==""||t.owner.email.trim()!==""||t.owner.phone.trim()!==""||t.doormen.length>0||t.image!==null||t.owner.photo!==null;return je(a),a},Ne=()=>{we()?P(!0):ye()},ye=()=>{_(!1),P(!1),$(null),je(!1),O()},la=()=>{ye()},T=(a,r)=>{j(a,r),setTimeout(()=>we(),0)},Fe=[{accessorKey:"image",header:"Image",enableSorting:!1,cell:({row:a})=>{const r=a.original;return r.image?e.jsx("img",{src:`/storage/${r.image}`,alt:r.name,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(Ie,{className:"w-5 h-5 text-gray-400"})})}},{accessorKey:"name",header:({column:a})=>e.jsxs(d,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold text-left justify-start group hover:bg-transparent dark:!bg-transparent hover:text-black dark:!text-white",children:["Name",a.getIsSorted()==="asc"?e.jsx(N,{className:"ml-2 h-4 w-4 rotate-180"}):a.getIsSorted()==="desc"?e.jsx(N,{className:"ml-2 h-4 w-4"}):e.jsx(N,{className:"ml-2 h-4 w-4 opacity-20"})]}),cell:({row:a})=>e.jsx("div",{className:"font-medium",children:a.getValue("name")})},{accessorKey:"status",header:({column:a})=>e.jsxs(d,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold text-left justify-start group hover:bg-transparent dark:!bg-transparent hover:text-black dark:!text-white",children:["Status",a.getIsSorted()==="asc"?e.jsx(N,{className:"ml-2 h-4 w-4 rotate-180 dark:group-hover:!text-white"}):a.getIsSorted()==="desc"?e.jsx(N,{className:"ml-2 h-4 w-4 dark:group-hover:!text-white"}):e.jsx(N,{className:"ml-2 h-4 w-4 opacity-20 dark:group-hover:!text-white"})]}),cell:({row:a})=>{const r=a.original;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ea,{checked:r.status,onCheckedChange:()=>Q(r),className:"data-[state=checked]:bg-green-500",disabled:ue===r.id}),e.jsx(Qa,{status:r.status?"active":"inactive"})]})}},{accessorKey:"managing_company",header:"Managing Company",enableSorting:!1,cell:({row:a})=>e.jsx("div",{className:"max-w-[150px] truncate",children:a.getValue("managing_company")||"N/A"})},{accessorKey:"address",header:"Address",enableSorting:!1,cell:({row:a})=>e.jsx("div",{className:"max-w-[200px] truncate",children:a.getValue("address")||"No address"})},{accessorKey:"description",header:"Description",enableSorting:!1,cell:({row:a})=>e.jsx("div",{className:"max-w-[200px] truncate",children:a.getValue("description")||"No description"})},{accessorKey:"created_at",header:({column:a})=>e.jsxs(d,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold text-left justify-start group hover:bg-transparent dark:!bg-transparent hover:text-black dark:!text-white",children:["Created At",a.getIsSorted()==="asc"?e.jsx(N,{className:"ml-2 h-4 w-4 rotate-180"}):a.getIsSorted()==="desc"?e.jsx(N,{className:"ml-2 h-4 w-4"}):e.jsx(N,{className:"ml-2 h-4 w-4 opacity-20"})]}),cell:({row:a})=>e.jsx("div",{className:"text-sm text-gray-500",children:new Date(a.getValue("created_at")).toLocaleDateString()})},{id:"actions",enableHiding:!1,cell:({row:a})=>{const r=a.original;return e.jsxs(ae,{children:[e.jsx(re,{asChild:!0,children:e.jsx(d,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(Ya,{className:"h-4 w-4"})})}),e.jsxs(te,{align:"end",children:[e.jsxs(M,{onClick:()=>ke(r),className:"group",children:[e.jsx(Pe,{className:"mr-2 h-4 w-4 group-hover:text-white dark:group-hover:text-primary-foreground"}),"Edit"]}),e.jsx(M,{onClick:()=>Q(r),children:r.status?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"mr-2 h-4 w-4 group-hover:text-white dark:group-hover:text-primary-foreground"}),"Archive"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"mr-2 h-4 w-4 group-hover:text-white dark:group-hover:text-primary-foreground"}),"Restore"]})}),r.location_link&&e.jsxs(M,{onClick:()=>Se(r),className:"group",children:[e.jsx(qe,{className:"mr-2 h-4 w-4 group-hover:text-white dark:group-hover:text-primary-foreground"}),"View Location"]}),!r.status&&e.jsxs(M,{className:"text-red-600",onClick:()=>Ce(r),children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})}}],B=a=>{const r=window.location.pathname+window.location.search,s=new URL(r,window.location.origin);s.searchParams.set("page",a.toString()),H.visit(s.toString(),{preserveState:!0,preserveScroll:!0})},D=$a({data:o.data,columns:Fe,onSortingChange:Je,onColumnFiltersChange:Ke,getCoreRowModel:Ua(),getSortedRowModel:Ba(),getFilteredRowModel:Ta(),onColumnVisibilityChange:Xe,onRowSelectionChange:Ze,onGlobalFilterChange:ge,globalFilterFn:"includesString",manualPagination:!0,pageCount:o.meta.last_page,state:{sorting:He,columnFilters:We,columnVisibility:Ye,rowSelection:Qe,globalFilter:he,pagination:{pageIndex:o.meta.current_page-1,pageSize:o.meta.per_page}}}),na=()=>{const a=D.getAllColumns().filter(p=>p.getIsVisible()&&p.id!=="actions").map(p=>({id:p.id,header:typeof p.columnDef.header=="string"?p.columnDef.header:p.id.charAt(0).toUpperCase()+p.id.slice(1)})),r=a.map(p=>p.header).join(",")+`
`,s=D.getFilteredRowModel().rows.map(p=>a.map(i=>{const f=p.getValue(i.id);return i.id==="status"?p.original.status?"Active":"Inactive":i.id==="created_at"?new Date(p.original.created_at).toLocaleDateString():i.id==="image"?p.original.image?"Yes":"No":typeof f=="string"?`"${f.replace(/"/g,'""')}"`:f||""}).join(",")).join(`
`),n=r+s,m=new Blob([n],{type:"text/csv;charset=utf-8;"}),h=URL.createObjectURL(m),b=document.createElement("a");b.href=h,b.download=`buildings_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(h),w.success("CSV exported successfully!")},ia=async()=>{try{const a=new ka.Workbook,r=a.addWorksheet("Buildings Report"),s={primary:"FF0F172A",secondary:"FF64748B",accent:"FF06B6D4",success:"FF10B981",warning:"FFF59E0B",danger:"FFEF4444",info:"FF3B82F6",dark:"FF1E293B",light:"FFF8FAFC"},n=o.data.length,m=o.data.filter(g=>g.status).length,h=n-m,b=o.data.reduce((g,S)=>{var v;return g+(((v=S.apartments)==null?void 0:v.length)||0)},0),p=o.data.reduce((g,S)=>{var v;return g+(((v=S.doormen)==null?void 0:v.length)||0)},0),i=n>0?(b/n).toFixed(1):"0";r.mergeCells("A1:J1");const f=r.getCell("A1");f.value="BUILDINGS MANAGEMENT REPORT",f.style={font:{name:"Segoe UI",size:18,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:s.primary}},left:{style:"medium",color:{argb:s.primary}},bottom:{style:"medium",color:{argb:s.primary}},right:{style:"medium",color:{argb:s.primary}}}},r.getRow(1).height=40,r.mergeCells("A2:J2");const G=r.getCell("A2");G.value=`Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}`,G.style={font:{name:"Segoe UI",size:10,italic:!0,color:{argb:s.secondary}},alignment:{horizontal:"center",vertical:"middle"},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.light}}},r.getRow(2).height=20;const ee=[["📊 BUILDINGS OVERVIEW","","","","",""],["Total Buildings",n,"Active Buildings",m,"Archived Buildings",h],["Total Apartments",b,"Total Doormen",p,"Avg Apartments/Building",i]];let x=4;ee.forEach((g,S)=>{if(S===0){r.mergeCells(`A${x}:J${x}`);const v=r.getCell(`A${x}`);v.value=g[0],v.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.info}},alignment:{horizontal:"center",vertical:"middle"}}}else g.forEach((v,y)=>{const q=r.getCell(x,y+1);q.value=v,q.style={font:{name:"Segoe UI",size:10,bold:y%2===0,color:{argb:y%2===0?s.dark:s.info}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:y%2===0?"FFF1F5F9":"FFFFFFFF"}},alignment:{horizontal:y%2===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}});x++}),x+=2,["ID","Building Name","Managing Company","Address","Description","Status","Apartments","Doormen","Owner","Created Date"].forEach((g,S)=>{const v=r.getCell(x,S+1);v.value=g,v.style={font:{name:"Segoe UI",size:11,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.dark}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:s.dark}},left:{style:"thin",color:{argb:s.dark}},bottom:{style:"medium",color:{argb:s.dark}},right:{style:"thin",color:{argb:s.dark}}}}}),r.getRow(x).height=30,x++,o.data.forEach((g,S)=>{var $e,Ae,Re;const v=g.status?"Active":"Archived",y=(($e=g.apartments)==null?void 0:$e.length)||0,q=((Ae=g.doormen)==null?void 0:Ae.length)||0,ja=((Re=g.owner)==null?void 0:Re.name)||"N/A",ba=new Date(g.created_at).toLocaleDateString();[g.id,g.name||"N/A",g.managing_company||"N/A",g.address||"N/A",g.description||"N/A",v,y,q,ja,ba].forEach((ze,z)=>{const Me=r.getCell(x,z+1);Me.value=ze;let A=S%2===0?"FFFFFFFF":"FFF8FAFC",R=s.dark;z===3&&(ze==="Active"?(A=s.success,R="FFFFFFFF"):(A=s.warning,R="FFFFFFFF")),z===4&&(y>10?(A="FF10B981",R="FFFFFFFF"):y>5?(A="FFF59E0B",R="FFFFFFFF"):y>0?(A="FF3B82F6",R="FFFFFFFF"):(A="FFEF4444",R="FFFFFFFF")),Me.style={font:{name:"Segoe UI",size:10,color:{argb:R}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:A}},alignment:{horizontal:z===1||z===2||z===6?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),r.getRow(x).height=25,x++}),r.columns=[{width:8},{width:25},{width:20},{width:25},{width:30},{width:12},{width:12},{width:12},{width:20},{width:15}],x+=1,r.mergeCells(`A${x}:J${x}`);const _e=r.getCell(`A${x}`);_e.value=`📋 Summary: ${n} buildings total (${m} active, ${h} archived) with ${b} apartments managed by ${p} doormen`,_e.style={font:{name:"Segoe UI",size:10,italic:!0,color:{argb:s.secondary}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.light}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:"FFE2E8F0"}},left:{style:"medium",color:{argb:"FFE2E8F0"}},bottom:{style:"medium",color:{argb:"FFE2E8F0"}},right:{style:"medium",color:{argb:"FFE2E8F0"}}}};const xa=await a.xlsx.writeBuffer(),fa=new Blob([xa],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),va=new Date().toISOString().split("T")[0];Ca.saveAs(fa,`buildings_management_report_${va}.xlsx`),w.success("📊 Buildings report exported successfully!")}catch(a){console.error("Error exporting to Excel:",a),w.error("Error exporting to Excel. Please try again.")}},Q=async a=>{xe(a.id);try{await H.put(route("buildings.update-status",a.id),{status:!a.status},{preserveScroll:!0,onSuccess:()=>w.success("Status updated successfully"),onError:()=>w.error("Connection error")})}finally{xe(null)}},da=a=>{a.preventDefault();const r=new FormData;r.append("name",t.name),r.append("managing_company",t.managing_company),r.append("address",t.address),t.image&&r.append("image",t.image),r.append("description",t.description),r.append("location_link",t.location_link),r.append("owner[name]",t.owner.name),r.append("owner[email]",t.owner.email),r.append("owner[phone]",t.owner.phone),t.owner.photo&&r.append("owner[photo]",t.owner.photo),t.doormen.forEach((s,n)=>{r.append(`doormen[${n}][name]`,s.name),r.append(`doormen[${n}][email]`,s.email),r.append(`doormen[${n}][phone]`,s.phone),r.append(`doormen[${n}][shift]`,s.shift),s.id&&r.append(`doormen[${n}][id]`,s.id.toString()),s.photo&&r.append(`doormen[${n}][photo]`,s.photo)}),H.post(route("buildings.store"),r,{preserveScroll:!0,onSuccess:()=>{O(),_(!1),w.success("Building created successfully")},onError:s=>{console.error("Errors:",s),Object.values(s).forEach(n=>w.error(n))}})},ke=a=>{j({id:a.id,name:a.name,managing_company:a.managing_company||"",address:a.address||"",image:null,description:a.description,location_link:a.location_link,owner:{name:a.owner.name,email:a.owner.email,photo:null,phone:a.owner.phone||""},doormen:a.doormen.map(r=>({id:r.id,name:r.name,photo:null,email:r.email,phone:r.phone||"",shift:r.shift||"morning"}))}),$(a),_(!0)},ca=a=>{if(a.preventDefault(),!t.id)return;const r=new FormData;r.append("_method","PUT"),r.append("name",t.name),r.append("managing_company",t.managing_company),r.append("address",t.address),t.image&&r.append("image",t.image),r.append("description",t.description),r.append("location_link",t.location_link),r.append("owner[name]",t.owner.name),r.append("owner[email]",t.owner.email),r.append("owner[phone]",t.owner.phone),t.owner.photo&&r.append("owner[photo]",t.owner.photo),t.doormen.forEach((s,n)=>{r.append(`doormen[${n}][name]`,s.name),r.append(`doormen[${n}][email]`,s.email),r.append(`doormen[${n}][phone]`,s.phone),r.append(`doormen[${n}][shift]`,s.shift),s.id&&r.append(`doormen[${n}][id]`,s.id.toString()),s.photo&&r.append(`doormen[${n}][photo]`,s.photo)}),H.post(route("buildings.update",t.id),r,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{O(),_(!1),$(null),w.success("Building updated successfully")},onError:s=>{Object.values(s).forEach(n=>w.error(n))}})},Ce=a=>{$(a),V(!0)},ma=()=>{l&&oa(route("buildings.destroy",l.id),{preserveScroll:!0,onSuccess:()=>{V(!1),$(null),w.success("Building deleted successfully")},onError:()=>{w.error("Error deleting building")}})},Se=a=>{$(a),ve(!0)},ha=a=>{if(!a)return"";if(a.includes("maps.app.goo.gl"))return`https://www.google.com/maps/embed/v1/place?key=${I}&q=-10.916879,-74.883391&zoom=15`;if(a.includes("/embed"))return a;if(a.includes("google.com/maps")){const r=a.match(/@([-0-9.]+),([-0-9.]+)/);if(r)return`https://www.google.com/maps/embed/v1/view?key=${I}&center=${r[1]},${r[2]}&zoom=15`;const s=a.match(/place\/([^\/]+)/);if(s)return`https://www.google.com/maps/embed/v1/place?key=${I}&q=place_id:${s[1]}`}return`https://www.google.com/maps/embed/v1/place?key=${I}&q=${encodeURIComponent(a)}`},[C,Z]=u.useState(null),[U,Ee]=u.useState(null);u.useEffect(()=>{const a=r=>{if(U!==null){const s=r.target,n=s.closest("[data-doormen-button]"),m=s.closest("[data-doormen-list]");!n&&!m&&Ee(null)}};return U!==null&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[U]);const ga=({buildings:a,onEdit:r,onDelete:s,onToggleStatus:n,isUpdatingStatus:m,gridColumns:h,onShowLocation:b})=>{const p=()=>{switch(h){case 2:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-2";case 3:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-3";case 4:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-4";case 5:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-5";case 6:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-6";default:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"}};return e.jsx("div",{className:`grid ${p()} gap-8`,children:a.map(i=>e.jsxs("div",{className:"group relative bg-gradient-to-br from-background via-muted/20 to-background rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 border border-border/50 hover:border-primary/30 backdrop-blur-sm",style:{overflow:"visible"},children:[e.jsx("div",{className:`absolute text-primary-foreground top-4 left-4 z-10 px-3 py-1 rounded-full text-xs font-semibold backdrop-blur-md ${i.status?"bg-accent/20 text-accent border border-accent/30":"bg-muted/30 text-muted-foreground border border-muted/50"}`,children:i.status?"Active":"Archived"}),i.location_link&&e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>b(i),className:"absolute top-4 right-4 z-10 w-12 h-12 rounded-full bg-gradient-to-br from-red-500/20 to-red-600/20 backdrop-blur-md border-2 border-red-500/30 hover:bg-gradient-to-br hover:from-red-500/30 hover:to-red-600/30 hover:border-red-500/50 hover:scale-110 transition-all duration-300 shadow-lg hover:shadow-xl group/location",title:"View Location on Map",children:e.jsx("div",{className:"relative",children:e.jsx(qe,{className:"w-6 h-6 text-red-600 transition-transform duration-300 group-hover/location:scale-110 drop-shadow-sm"})})}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"aspect-[4/3] overflow-hidden",children:e.jsx("img",{src:`/storage/${i.image}`,alt:i.name,className:"w-full !rounded-t-2xl h-full object-cover transition-transform duration-700  ",onError:f=>{f.currentTarget.src="/images/default-builder-square.png"}})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground group-hover:text-primary transition-colors duration-300 line-clamp-1",children:i.name}),i.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:i.description})]}),e.jsxs("div",{className:"relative ml-4",children:[e.jsxs("button",{onClick:()=>Ee(U===i.id?null:i.id),className:"flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 hover:bg-primary/20 border border-primary/20 transition-all duration-300 hover:scale-105","data-doormen-button":!0,children:[e.jsx("span",{className:"text-sm font-semibold text-primary",children:i.doormen.length}),e.jsx(Xa,{className:"w-4 h-4 text-primary"})]}),U===i.id&&e.jsx("div",{className:"fixed top-20 right-4 z-40 space-y-3 animate-in slide-in-from-top-2 min-w-max shadow-2xl","data-doormen-list":!0,children:i.doormen.map((f,G)=>e.jsxs("div",{className:"relative group/doorman flex items-center gap-3 p-2 rounded-xl bg-background shadow-xl border border-border cursor-pointer hover:shadow-2xl transition-all duration-300 hover:scale-105",onClick:()=>Z(f),style:{animationDelay:`${G*100}ms`},children:[e.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 mr-3 opacity-0 group-hover/doorman:opacity-100 transition-all duration-300 pointer-events-none",children:e.jsxs("div",{className:"bg-foreground text-background px-3 py-2 rounded-lg text-sm whitespace-nowrap shadow-xl",children:[e.jsx("div",{className:"font-semibold",children:f.name}),e.jsxs("div",{className:"text-xs opacity-80 capitalize",children:[f.shift," shift"]}),e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-[1px] w-2 h-2 bg-foreground rotate-45"})]})}),e.jsx("img",{src:`/storage/${f.photo}`,alt:f.name,className:"w-10 h-10 rounded-full object-cover border-2 border-primary/30",onError:ee=>{ee.currentTarget.src="/images/default-user.png"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-accent absolute -bottom-1 -right-1 border-2 border-background"})]},f.id))})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.apartments&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary"}),e.jsxs("span",{children:[i.apartments.length," apartments"]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(i.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsxs(Te,{href:route("buildings.apartments",i.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary text-primary-foreground rounded-xl font-semibold transition-all duration-300 hover:scale-105 hover:shadow-lg group/admin",children:[e.jsx("span",{children:"Admin"}),e.jsx(X,{className:"w-4 h-4 transition-transform duration-300 group-hover/admin:translate-x-0.5"})]}),e.jsx("div",{className:"flex gap-2",children:i.status?e.jsxs(e.Fragment,{children:[e.jsx(d,{onClick:()=>r(i),variant:"secondary",size:"icon",className:"rounded-xl hover:scale-105 transition-all duration-300 hover:shadow-md",title:"Edit Building",children:e.jsx(Pe,{className:"w-4 h-4"})}),e.jsx(d,{onClick:()=>n(i),size:"icon",className:"rounded-xl bg-secondary hover:bg-secondary/90 hover:scale-105 transition-all duration-300 hover:shadow-md",title:"Archive Building",children:e.jsx(Oe,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{onClick:()=>n(i),size:"icon",className:"rounded-xl bg-secondary hover:bg-secondary/90 hover:scale-105 transition-all duration-300 hover:shadow-md",title:"Restore Building",children:e.jsx(Ge,{className:"w-4 h-4"})}),e.jsx(d,{onClick:()=>s(i),variant:"destructive",size:"icon",className:"rounded-xl hover:scale-105 transition-all duration-300 hover:shadow-md",title:"Delete Building",children:e.jsx(me,{className:"w-4 h-4"})})]})})]})]}),e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-primary/10 via-transparent to-secondary/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"})]},i.id))})},pa=({onAddNew:a})=>e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-secondary/5 to-accent/5"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.1),transparent)]"}),e.jsxs("div",{className:"relative bg-gradient-to-br from-background via-muted/10 to-background p-12 rounded-2xl text-center border-2 border-dashed border-primary/30 backdrop-blur-sm",children:[e.jsx("div",{className:"relative mb-6 flex justify-center",children:e.jsxs("div",{className:"relative p-6 rounded-full bg-gradient-to-br from-primary/20 to-secondary/20 border border-primary/30",children:[e.jsx(Ie,{className:"w-16 h-16 text-primary"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-accent rounded-full animate-pulse"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 bg-secondary rounded-full animate-pulse delay-300"})]})}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"No Buildings Yet"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-md mx-auto",children:"Create your first building to start managing apartments, tenants, and doormen"})]}),e.jsxs("button",{onClick:a,className:"group inline-flex items-center gap-3 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary text-primary-foreground px-8 py-4 rounded-xl font-semibold transition-all duration-300 hover:scale-105 hover:shadow-lg",children:[e.jsx(de,{className:"w-5 h-5 transition-transform duration-300 group-hover:rotate-90"}),"Create First Building"]}),e.jsx("div",{className:"absolute top-8 left-8 w-16 h-16 border-2 border-primary/20 rounded-full"}),e.jsx("div",{className:"absolute bottom-8 right-8 w-12 h-12 border-2 border-secondary/20 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 left-4 w-2 h-8 bg-gradient-to-b from-accent/30 to-transparent rounded-full"}),e.jsx("div",{className:"absolute top-1/3 right-4 w-2 h-12 bg-gradient-to-b from-primary/30 to-transparent rounded-full"})]})]}),ua=({links:a,meta:r})=>e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",r.per_page*(r.current_page-1)+1," -"," ",Math.min(r.per_page*r.current_page,r.total)," of ",r.total]}),e.jsx("div",{className:"flex gap-1",children:a.map((s,n)=>s.url&&e.jsx(Te,{href:s.url,className:`px-3 py-1 rounded-lg ${s.active?"bg-primary text-primary-foreground":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,dangerouslySetInnerHTML:{__html:s.label}},n))})]});return e.jsxs(wa,{breadcrumbs:Za,children:[e.jsx(Fa,{title:"Buildings"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"bg-gray-100 dark:!bg-transparent p-1 rounded flex",children:[e.jsx("button",{onClick:()=>pe("grid"),className:`p-2 rounded ${E==="grid"?"bg-white shadow dark:bg-card":""}`,children:e.jsx(Oa,{className:`w-5 h-5 ${E==="grid"?"text-primary":"text-gray-600"}`})}),e.jsx("button",{onClick:()=>pe("table"),className:`p-2 rounded ${E==="table"?"bg-white shadow dark:bg-card":""}`,children:e.jsx(qa,{className:`w-5 h-5 ${E==="table"?"text-primary":"text-gray-600"}`})})]}),E==="grid"&&e.jsx("select",{value:fe,onChange:a=>ta(Number(a.target.value)),className:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",children:[2,3,4,5,6].map(a=>e.jsxs("option",{value:a,children:[a," Cards"]},a))})]}),e.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:e.jsxs(d,{onClick:()=>{O(),$(null),_(!0)},className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:block",children:"New Building"})]})})]}),E==="table"&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(k,{placeholder:"Search across all columns...",value:he??"",onChange:a=>ge(a.target.value),className:"pl-10 w-64"})]}),e.jsxs("div",{className:"hidden sm:block text-sm text-muted-foreground",children:[D.getFilteredRowModel().rows.length," of ",D.getCoreRowModel().rows.length," entries"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ae,{children:[e.jsx(re,{asChild:!0,children:e.jsxs(d,{variant:"outline",size:"sm",className:"group hover:text-white",children:[e.jsx(Ja,{className:"mr-2 h-4 w-4 dark:group-hover:text-white"}),"Columns ",e.jsx(N,{className:"ml-1 h-4 w-4 dark:group-hover:text-white"})]})}),e.jsx(te,{align:"end",className:"w-48",children:D.getAllColumns().filter(a=>a.getCanHide()).map(a=>e.jsx(Na,{className:"capitalize",checked:a.getIsVisible(),onCheckedChange:r=>a.toggleVisibility(!!r),children:a.id.replace(/_/g," ")},a.id))})]}),e.jsxs(ae,{children:[e.jsx(re,{asChild:!0,children:e.jsxs(d,{variant:"outline",size:"sm",className:"group hover:text-white",children:[e.jsx(Wa,{className:"mr-2 h-4 w-4 dark:group-hover:text-white"}),"Export ",e.jsx(N,{className:"ml-1 h-4 w-4"})]})}),e.jsxs(te,{align:"end",children:[e.jsxs(M,{onClick:na,className:"group",children:[e.jsx(Ve,{className:"mr-2 h-4 w-4 group-hover:text-white dark:group-hover:text-primary-foreground"}),"Export to CSV"]}),e.jsxs(M,{onClick:ia,className:"group ",children:[e.jsx(Ve,{className:"mr-2 h-4 w-4 group-hover:text-white dark:group-hover:text-primary-foreground"}),"Export to Excel"]})]})]})]})]}),o.data.length===0?e.jsx(pa,{onAddNew:()=>_(!0)}):E==="grid"?e.jsx("div",{style:{overflow:"visible"},children:e.jsx(ga,{buildings:o.data,onEdit:ke,onDelete:Ce,onToggleStatus:Q,isUpdatingStatus:ue,onShowLocation:Se,gridColumns:fe})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(Aa,{children:[e.jsx(Ra,{children:D.getHeaderGroups().map(a=>e.jsx(ne,{children:a.headers.map(r=>e.jsx(za,{children:Ue(r.column.columnDef.header,r.getContext())},r.id))},a.id))}),e.jsx(Ma,{children:(De=D.getRowModel().rows)!=null&&De.length?D.getRowModel().rows.map(a=>e.jsx(ne,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(r=>e.jsx(Le,{children:Ue(r.column.columnDef.cell,r.getContext())},r.id))},a.id)):e.jsx(ne,{children:e.jsx(Le,{colSpan:Fe.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 p-4 border-t bg-muted/20",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:e.jsxs("span",{children:["Showing ",(o.meta.current_page-1)*o.meta.per_page+1," to"," ",Math.min(o.meta.current_page*o.meta.per_page,o.meta.total)," ","of ",o.meta.total," entries"]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>B(1),disabled:o.meta.current_page===1,className:"h-8 w-8 p-0",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx(ce,{className:"h-4 w-4 -ml-2"})]}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>B(o.meta.current_page-1),disabled:o.meta.current_page===1,className:"h-8 w-8 p-0",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Page"}),e.jsx("input",{type:"number",value:o.meta.current_page,onChange:a=>{const r=a.target.value?Number(a.target.value):1;r>=1&&r<=o.meta.last_page&&B(r)},className:"w-12 h-8 text-center border rounded text-sm bg-background",min:"1",max:o.meta.last_page}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["of ",o.meta.last_page]})]}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>B(o.meta.current_page+1),disabled:o.meta.current_page===o.meta.last_page,className:"h-8 w-8 p-0",children:e.jsx(X,{className:"h-4 w-4"})}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>B(o.meta.last_page),disabled:o.meta.current_page===o.meta.last_page,className:"h-8 w-8 p-0",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx(X,{className:"h-4 w-4 -ml-2"})]})]})})]})]}),e.jsx(J,{open:ea,onOpenChange:a=>{a?_(!0):Ne()},children:e.jsx(W,{className:"w-full max-w-none sm:max-w-4xl mx-0 sm:mx-4 p-0 overflow-hidden bg-background dark:bg-background",children:e.jsxs("div",{className:"overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 dark:scrollbar-thumb-gray-600 scrollbar-track-gray-100 dark:scrollbar-track-gray-800 px-6 py-8",style:{maxHeight:"90vh",scrollbarWidth:"thin",scrollbarColor:"rgb(156 163 175) rgb(243 244 246)"},children:[e.jsxs(K,{className:"mb-8",children:[e.jsx(Y,{className:"text-3xl font-semibold tracking-tight text-foreground dark:text-foreground",children:l?"Edit Building":"New Building"}),e.jsx(se,{className:"text-muted-foreground dark:text-muted-foreground",children:l?"Update the building information below.":"Fill in the building information below to create a new record."})]}),e.jsxs("form",{onSubmit:l?ca:da,className:"space-y-8",children:[e.jsxs(Da,{defaultValue:"building",className:"w-full",children:[e.jsxs(_a,{className:"grid w-full grid-cols-3",children:[e.jsx(oe,{value:"building",children:"Building"}),e.jsx(oe,{value:"owner",children:"Owner"}),e.jsx(oe,{value:"doorman",children:"Doorman"})]}),e.jsx(le,{value:"building",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6 p-4",children:[e.jsxs("div",{className:"col-span-12 md:col-span-5 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{htmlFor:"image",className:"text-base",children:"Building Photo"}),!l&&e.jsx("span",{className:"text-[0.8rem] text-muted-foreground",children:"Required *"})]}),e.jsxs("div",{className:`group relative w-full aspect-[4/3] rounded-lg overflow-hidden transition-all duration-300 
                            ${c.image?"ring-2 ring-destructive":"hover:ring-2 hover:ring-ring"} 
                            bg-muted/50`,children:[e.jsx("input",{id:"building-image-upload",type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:a=>{var r;return j("image",((r=a.target.files)==null?void 0:r[0])||null)},className:"hidden"}),e.jsx("label",{htmlFor:"building-image-upload",className:"flex flex-col items-center justify-center w-full h-full cursor-pointer",children:t.image||l!=null&&l.image?e.jsxs("div",{className:"relative w-full h-full group",children:[e.jsx("img",{src:t.image?URL.createObjectURL(t.image):`/storage/${l==null?void 0:l.image}`,alt:"Building preview",className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-all duration-300 flex flex-col items-center justify-center gap-2",children:[e.jsx(L,{className:"w-8 h-8 text-white"}),e.jsx("p",{className:"text-sm text-white font-medium",children:"Click to change photo"})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center h-full",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-muted/20 flex items-center justify-center mb-3",children:e.jsx(L,{className:"w-6 h-6 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Drag & drop or click to upload"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG or JPEG (max. 2MB)"})]})})]}),c.image&&e.jsx("p",{className:"text-sm text-destructive",children:c.image})]}),e.jsx("div",{className:"col-span-12 md:col-span-7 space-y-6",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{htmlFor:"name",className:"text-base",children:"Building Name"}),e.jsx("span",{className:"text-[0.8rem] text-muted-foreground",children:"Required *"})]}),e.jsx(k,{id:"name",value:t.name,onChange:a=>T("name",a.target.value),className:`h-11 ${c.name?"ring-2 ring-destructive":""}`,placeholder:"Enter building name",required:!0}),c.name&&e.jsx("p",{className:"text-sm text-destructive",children:c.name})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{htmlFor:"managing_company",className:"text-base",children:"Managing Company"}),e.jsx(k,{id:"managing_company",value:t.managing_company,onChange:a=>T("managing_company",a.target.value),className:`h-11 ${c.managing_company?"ring-2 ring-destructive":""}`,placeholder:"Enter managing company name"}),c.managing_company&&e.jsx("p",{className:"text-sm text-destructive",children:c.managing_company})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{htmlFor:"address",className:"text-base",children:"Address"}),e.jsx(Be,{id:"address",value:t.address,onChange:a=>T("address",a.target.value),rows:3,className:"resize-none",placeholder:"Enter building address..."}),c.address&&e.jsx("p",{className:"text-sm text-destructive",children:c.address})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{htmlFor:"description",className:"text-base",children:"Description"}),e.jsx(Be,{id:"description",value:t.description,onChange:a=>T("description",a.target.value),rows:4,className:"resize-none",placeholder:"Enter building description..."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{htmlFor:"location_link",className:"text-base",children:"Location (Latitude, Longitude)"}),e.jsx(k,{id:"location_link",value:t.location_link,onChange:a=>T("location_link",a.target.value),type:"text",placeholder:"40.77419417199397, -73.96557928650753",className:"h-11"})]})]})})]})}),e.jsx(le,{value:"owner",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6 p-4",children:[e.jsxs("div",{className:"col-span-12 md:col-span-5 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{htmlFor:"owner-photo",className:"text-base",children:"Owner Photo"}),!l&&e.jsx("span",{className:"text-[0.8rem] text-muted-foreground",children:"Required *"})]}),e.jsxs("div",{className:`group relative w-full aspect-[4/3] rounded-lg overflow-hidden transition-all duration-300 
                            ${c["owner.photo"]?"ring-2 ring-destructive":"hover:ring-2 hover:ring-ring"} 
                            bg-muted/50`,children:[e.jsx("input",{id:"owner-photo-upload",type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:a=>{var r;return j("owner",{...t.owner,photo:((r=a.target.files)==null?void 0:r[0])||null})},className:"hidden"}),e.jsx("label",{htmlFor:"owner-photo-upload",className:"flex flex-col items-center justify-center w-full h-full cursor-pointer",children:t.owner.photo||l!=null&&l.owner.photo?e.jsxs("div",{className:"relative w-full h-full group",children:[e.jsx("img",{src:t.owner.photo?URL.createObjectURL(t.owner.photo):`/storage/${l==null?void 0:l.owner.photo}`,alt:"Owner preview",className:"w-full h-full object-cover",onError:a=>{a.currentTarget.src="/images/default-user.png"}}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-all duration-300 flex flex-col items-center justify-center gap-2",children:[e.jsx(L,{className:"w-8 h-8 text-white"}),e.jsx("p",{className:"text-sm text-white font-medium",children:"Click to change photo"})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center h-full",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-muted/20 flex items-center justify-center mb-3",children:e.jsx(L,{className:"w-6 h-6 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Drag & drop or click to upload"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG or JPEG (max. 2MB)"})]})})]}),c["owner.photo"]&&e.jsx("p",{className:"text-sm text-destructive",children:c["owner.photo"]})]}),e.jsx("div",{className:"col-span-12 md:col-span-7 space-y-6",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{htmlFor:"owner-name",className:"text-base",children:"Owner Name"}),e.jsx("span",{className:"text-[0.8rem] text-muted-foreground",children:"Required *"})]}),e.jsx(k,{id:"owner-name",value:t.owner.name,onChange:a=>j("owner",{...t.owner,name:a.target.value}),className:`h-11 ${c["owner.name"]?"ring-2 ring-destructive":""}`,placeholder:"Enter owner name",required:!0}),c["owner.name"]&&e.jsx("p",{className:"text-sm text-destructive",children:c["owner.name"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{htmlFor:"owner-email",className:"text-base",children:"Email"}),e.jsx(k,{id:"owner-email",value:t.owner.email,onChange:a=>j("owner",{...t.owner,email:a.target.value}),type:"email",className:`h-11 ${c["owner.email"]?"ring-2 ring-destructive":""}`,placeholder:"owner@example.com",required:!0}),c["owner.email"]&&e.jsx("p",{className:"text-sm text-destructive",children:c["owner.email"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{htmlFor:"owner-phone",className:"text-base",children:"Phone Number"}),e.jsx(k,{id:"owner-phone",value:t.owner.phone,onChange:a=>j("owner",{...t.owner,phone:a.target.value}),placeholder:"+1 (555) 000-0000",className:"h-11"})]})]})})]})}),e.jsx(le,{value:"doorman",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-lg font-semibold",children:"Doormen Management"})}),e.jsxs(d,{type:"button",onClick:()=>{j("doormen",[...t.doormen,{name:"",photo:null,email:"",phone:"",shift:"morning"}])},variant:"default",className:"gap-2",children:[e.jsx(de,{className:"w-4 h-4"}),"Add Doorman"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.doormen.map((a,r)=>{var s,n;return e.jsxs("div",{className:"bg-card border rounded-lg p-4 space-y-4 shadow-sm relative",children:[e.jsx("div",{className:"absolute top-2 right-2 z-[9999]",children:e.jsx(d,{variant:"destructive",size:"icon",className:"w-8 h-8",onClick:()=>{const m=[...t.doormen];m.splice(r,1),j("doormen",m)},children:e.jsx(me,{className:"w-4 h-4 "})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:`group relative aspect-square w-full rounded-lg border-2 border-dashed ${c[`doormen.${r}.photo`]?"border-destructive":"border-muted"} transition-colors hover:border-primary`,children:[e.jsx("input",{id:`doorman-photo-${r}`,type:"file",accept:"image/*",onChange:m=>{var b;const h=[...t.doormen];h[r].photo=((b=m.target.files)==null?void 0:b[0])||null,j("doormen",h)},className:"hidden"}),e.jsx("label",{htmlFor:`doorman-photo-${r}`,className:"flex flex-col items-center justify-center h-full w-full cursor-pointer p-4",children:a.photo||(s=l==null?void 0:l.doormen[r])!=null&&s.photo?e.jsx("img",{src:a.photo?URL.createObjectURL(a.photo):`/storage/${(n=l==null?void 0:l.doormen[r])==null?void 0:n.photo}`,alt:"Preview",className:"w-full h-full object-cover rounded-md",onError:m=>{m.currentTarget.src="/images/default-user.png"}}):e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(L,{className:"w-8 h-8 mx-auto text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended: 400x400px"})]})})]}),c[`doormen.${r}.photo`]&&e.jsx("p",{className:"text-xs text-destructive",children:c[`doormen.${r}.photo`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{placeholder:"Full Name",value:a.name,onChange:m=>{const h=[...t.doormen];h[r].name=m.target.value,j("doormen",h)},className:"h-11"}),e.jsx(k,{type:"email",placeholder:"Email address",value:a.email,onChange:m=>{const h=[...t.doormen];h[r].email=m.target.value,j("doormen",h)},className:"h-11"}),e.jsx(k,{placeholder:"Phone number",value:a.phone,onChange:m=>{const h=[...t.doormen];h[r].phone=m.target.value,j("doormen",h)},className:"h-11"}),e.jsx("div",{className:"space-y-2",children:e.jsxs(La,{value:a.shift,onValueChange:m=>{const h=[...t.doormen];h[r].shift=m,j("doormen",h)},children:[e.jsx(Ia,{className:"w-full h-11",children:e.jsx(Va,{placeholder:"Select work shift"})}),e.jsxs(Pa,{children:[e.jsx(ie,{value:"morning",children:"Morning"}),e.jsx(ie,{value:"afternoon",children:"Afternoon"}),e.jsx(ie,{value:"night",children:"Night"})]})]})})]})]},r)})})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[e.jsx(d,{type:"button",variant:"outline",className:"h-11 dark:hover:text-white",onClick:Ne,children:"Cancel"}),e.jsx(d,{type:"submit",disabled:be,className:"h-11",children:be?l?"Updating...":"Creating...":l?"Update Building":"Create Building"})]})]})]})})}),e.jsx(J,{open:ra,onOpenChange:P,children:e.jsxs(W,{className:"sm:max-w-md bg-background dark:bg-background",children:[e.jsxs(K,{children:[e.jsxs(Y,{className:"flex items-center gap-2 text-foreground dark:text-foreground",children:[e.jsx(Ka,{className:"w-5 h-5 text-amber-500"}),"Unsaved Changes"]}),e.jsx(se,{className:"text-muted-foreground dark:text-muted-foreground",children:"You have unsaved changes that will be lost if you continue. Are you sure you want to close without saving?"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(d,{variant:"outline",onClick:()=>P(!1),className:"h-10 dark:hover:text-white",children:"Keep Editing"}),e.jsx(d,{variant:"destructive",onClick:la,className:"h-10",children:"Discard Changes"})]})]})}),e.jsx(J,{open:aa,onOpenChange:V,children:e.jsxs(W,{children:[e.jsxs(K,{children:[e.jsx(Y,{children:"Confirm Deletion"}),e.jsxs(se,{children:["Are you sure you want to delete the building ",e.jsx("strong",{children:l==null?void 0:l.name}),"? This action cannot be undone."]})]}),e.jsxs(Sa,{children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>V(!1),className:"dark:hover:text-white",children:"Cancel"}),e.jsx(d,{type:"button",variant:"destructive",onClick:ma,children:"Delete"})]})]})}),e.jsx(J,{open:sa,onOpenChange:ve,children:e.jsxs(W,{className:"sm:max-w-[800px]",children:[e.jsx(K,{children:e.jsxs(Y,{children:["Location of ",l==null?void 0:l.name]})}),e.jsx("div",{className:"w-full aspect-video",children:e.jsx("iframe",{src:ha((l==null?void 0:l.location_link)||""),width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})]})}),E==="grid"&&o.data.length>0&&e.jsx(ua,{links:o.links,meta:o.meta})]}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/80 backdrop-blur-md flex items-center justify-center z-50 p-4 animate-in fade-in duration-300",onClick:a=>{a.target===a.currentTarget&&Z(null)},children:e.jsxs("div",{className:"bg-background/95 dark:bg-background/95 backdrop-blur-xl rounded-3xl shadow-2xl max-w-md w-full mx-4 overflow-hidden border border-border/50 dark:border-border/30 animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",children:[e.jsx("button",{onClick:()=>Z(null),className:"absolute top-4 right-4 z-10 w-10 h-10 rounded-full bg-background dark:bg-background shadow-lg border border-border/50 dark:border-border/30 flex items-center justify-center hover:scale-110 transition-all duration-200 group",children:e.jsx(Ga,{className:"w-5 h-5 text-muted-foreground group-hover:text-foreground transition-colors"})}),e.jsxs("div",{className:"relative p-8 bg-gradient-to-br from-primary/10 via-secondary/5 to-accent/10 dark:from-primary/20 dark:via-secondary/10 dark:to-accent/20",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent dark:from-primary/10 dark:to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,rgba(255,255,255,0.1),transparent)] dark:bg-[radial-gradient(circle_at_top_right,rgba(255,255,255,0.05),transparent)]"}),e.jsxs("div",{className:"relative flex flex-col items-center",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/30 to-accent/30 rounded-full blur-lg scale-110 opacity-0 group-hover:opacity-100 transition-all duration-500"}),e.jsx("img",{src:C.photo?`/storage/${C.photo}`:"/placeholder-user.jpg",alt:C.name,className:"relative w-28 h-28 rounded-full object-cover border-4 border-primary/30 dark:border-primary/50 shadow-xl transition-transform duration-300 group-hover:scale-105",onError:a=>{a.currentTarget.src="/images/default-user.png"}}),e.jsxs("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-accent rounded-full border-4 border-background dark:border-background flex items-center justify-center shadow-lg",children:[e.jsx("div",{className:"w-3 h-3 bg-background dark:bg-background rounded-full animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-accent rounded-full animate-ping opacity-75"})]})]}),e.jsx("h4",{className:"text-2xl font-bold text-foreground dark:text-foreground mt-6 animate-in slide-in-from-bottom-2 duration-500 delay-100",children:C.name}),e.jsxs("div",{className:"px-4 py-2 bg-primary/20 dark:bg-primary/30 text-primary dark:text-primary rounded-full text-sm font-semibold mt-3 capitalize backdrop-blur-sm border border-primary/20 dark:border-primary/40 animate-in slide-in-from-bottom-2 duration-500 delay-200",children:[C.shift==="morning"?"🌅 Morning":C.shift==="afternoon"?"☀️ Afternoon":"🌙 Night"," Shift"]})]})]}),e.jsx("div",{className:"p-8 space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-2xl bg-muted/30 dark:bg-muted/20 border border-border/20 dark:border-border/10 hover:bg-muted/50 dark:hover:bg-muted/30 transition-all duration-300 animate-in slide-in-from-left duration-500 delay-300",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-primary/20 dark:bg-primary/30 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:e.jsx("svg",{className:"w-5 h-5 text-primary dark:text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground dark:text-muted-foreground uppercase tracking-wider",children:"Email"}),e.jsx("div",{className:"text-sm font-semibold text-foreground dark:text-foreground mt-1 truncate",children:C.email||"Not provided"})]})]}),e.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-2xl bg-muted/30 dark:bg-muted/20 border border-border/20 dark:border-border/10 hover:bg-muted/50 dark:hover:bg-muted/30 transition-all duration-300 animate-in slide-in-from-right duration-500 delay-400",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-secondary/20 dark:bg-secondary/30 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:e.jsx("svg",{className:"w-5 h-5 text-secondary dark:text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground dark:text-muted-foreground uppercase tracking-wider",children:"Phone"}),e.jsx("div",{className:"text-sm font-semibold text-foreground dark:text-foreground mt-1 truncate",children:C.phone||"Not provided"})]})]})]})})]})})]})}const Qa=({status:o})=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o==="active"?"Active":"Inactive"}),Za=[{title:"Buildings",href:"/buildings"}];export{Hr as default};
