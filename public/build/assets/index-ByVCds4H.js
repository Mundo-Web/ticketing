import{j as n}from"./ui-D1w9Iw8H.js";import{A as am,D as Qo,a as Vo,b as ea,d as di,c as lm}from"./app-layout-CbNIs6c8.js";import{a as xi,K as ra,m as pc,S as Pe,L as cm,c as fi,t as k}from"./app-Ruw-z2xl.js";import{r as L}from"./recharts-Dld1lWsf.js";import{e as um,F as dm}from"./FileSaver.min-BGmHM0RZ.js";import{u as fm,f as Nc,b as hm}from"./index-DSucgGxo.js";import{T as pm,a as gm,b as vi,c as mm,d as xm,e as pi}from"./table-HIdGJ2fv.js";import{D as Be,a as Fe,b as Ye,c as Ze,d as Er,e as Xr}from"./dialog-D75RAdkD.js";import{B as I}from"./button-BntSAybs.js";import{L as _e}from"./label-BbeNXW0L.js";import{I as Xe}from"./input-CYKIjOQn.js";import{T as gc}from"./textarea-CCz4b2Lj.js";import{S as vm}from"./switch-CV2ctoZl.js";import{C as Yn,a as bm,c as gi}from"./card-ujb193xZ.js";import{T as yc,a as Cc,b as Jn,c as mc}from"./tabs-DBM0OO0_.js";import{S as wm,a as _m,b as jm,c as Nm,d as Xn}from"./select-Cexm_mQK.js";import{T as ym,a as mt,b as xt,c as vt}from"./tooltip-CQHbb0yU.js";import Cm from"./ModalDispositivos-BD81zcNh.js";import{BuildingCombobox as Sm}from"./ComboBox-BfO7BEEM.js";import{TenantForm as Em}from"./TenantForm-Ms5RKuWR.js";import{f as Am,B as Rm}from"./format-B6Rb66cG.js";import{S as Dm}from"./separator-CjuZY8Fl.js";import{U as mi}from"./user-CtzshXh0.js";import{C as bi}from"./circle-alert-DMAN7II5.js";import{C as Tm,a as wi}from"./circle-check-big-DZU7S_eA.js";import{C as _i}from"./clock-BxVJL7PR.js";import{a as Sc,M as ia,P as oa}from"./timer-5hOeDT9u.js";import{E as Im}from"./eye-CkkIptxE.js";import{R as Om}from"./rotate-ccw-DuBc0qOm.js";import{C as Ec,B as km,b as Me,S as ta,a as mn,c as ji,U as Qn}from"./x-CNM1Dv5p.js";import{H as Lm}from"./house-Dzsb1MNH.js";import{M as Um}from"./monitor-BMYn5xBp.js";import{a as Pm}from"./trophy-tcWmXr7P.js";import{c as hi,g as Mm}from"./react-B1hewrmX.js";import{P as xc}from"./plus-CnwexqGC.js";import{C as Bm}from"./cloud-upload-CU05JlBv.js";import{K as aa,C as Fm,S as Wm,c as Ac}from"./DeviceIcon-DvlmkhwP.js";import{S as na}from"./square-pen-Cq7RxlXg.js";import{T as vc}from"./trash-2-s1GfykXA.js";import{M as $m}from"./map-pin-CGVzMw_j.js";import{S as Gm}from"./search-BGEUGtTC.js";import{F as Hm}from"./filter-B_U0HgPW.js";import{F as zm}from"./file-spreadsheet-qPGn0CxC.js";import{D as bc}from"./download-ovNJc7Ex.js";import{C as sa}from"./chevron-left-BbzonqSg.js";import{T as Km}from"./ticket-ChPWs-X9.js";import"./utils-B66yfQja.js";import"./check-CkciTNW-.js";import"./createLucideIcon-CR-66RMC.js";import"./index-CWijjM2R.js";import"./index-cS_AKGRi.js";import"./index-DrdTBqzy.js";import"./chevrons-up-down-BF_I81uV.js";import"./react-select-creatable.esm-BA6e64Ck.js";import"./memoize-one.esm-DMzj5eV4.js";import"./checkbox-BRNa8qdc.js";import"./share-2-BQyjrpSy.js";import"./archive-BjSQzsYx.js";import"./wifi-off-fPWadNe7.js";import"./arrow-left-DzZwtVMy.js";import"./building-2-CpD7MbFT.js";import"./package-lFtzUL5p.js";import"./refresh-ccw-jF9UPGU7.js";import"./zap-CIf7cl4Z.js";import"./circle-play-Cy8QUXnz.js";import"./code-CV9_p9AQ.js";import"./cpu-Dd6HIBXa.js";import"./database-DZAg6xN8.js";import"./ellipsis-Dcv-ToJ_.js";import"./external-link-DFS43cfb.js";import"./globe-CgCnIFno.js";import"./memory-stick-b4zm5zHB.js";import"./upload-BXAcGU9c.js";import"./info-0IyK0BA7.js";import"./loader-circle-T5S6wZvR.js";import"./sun-MF1zL1RU.js";import"./play-haxQKSD1.js";import"./refresh-cw-Sduo88Io.js";import"./server-qQX4KwzV.js";import"./smartphone-D010dtY3.js";import"./star-XcvrnBtN.js";import"./table-BOw16QX-.js";import"./ticket-plus-XGEhpZNc.js";import"./trending-up-iTRTSR-d.js";import"./triangle-alert-DrKF4AKN.js";import"./wrench-Byd--HrB.js";import"./user-plus-4uaQlw0J.js";import"./wifi-dp9f5Yfk.js";const qm=`
.custom-scrollbar::-webkit-scrollbar {
    width: 6px;
}
.custom-scrollbar::-webkit-scrollbar-track {
    background: rgb(243 244 246);
    border-radius: 6px;
}
.custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgb(209 213 219);
    border-radius: 6px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgb(156 163 175);
}
.dark .custom-scrollbar::-webkit-scrollbar-track {
    background: rgb(55 65 81);
}
.dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgb(75 85 99);
}
.dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgb(107 114 128);
}
.line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
`;if(typeof document<"u"&&!document.getElementById("ticket-history-styles")){const y=document.createElement("style");y.id="ticket-history-styles",y.textContent=qm,document.head.appendChild(y)}const wc={open:{color:"bg-blue-500",icon:bi,text:"Open"},in_progress:{color:"bg-yellow-500",icon:_i,text:"In Progress"},resolved:{color:"bg-green-500",icon:wi,text:"Resolved"},closed:{color:"bg-gray-500",icon:wi,text:"Closed"},cancelled:{color:"bg-red-500",icon:Ec,text:"Cancelled"},reopened:{color:"bg-orange-500",icon:Om,text:"Reopened"}};function Xm({status:y}){const l={open:{label:"Open",bgColor:"bg-blue-100",textColor:"text-blue-800",icon:bi},in_progress:{label:"In Progress",bgColor:"bg-amber-100",textColor:"text-amber-800",icon:_i},resolved:{label:"Resolved",bgColor:"bg-emerald-100",textColor:"text-emerald-800",icon:wi},closed:{label:"Closed",bgColor:"bg-slate-100",textColor:"text-slate-700",icon:wi},cancelled:{label:"Cancelled",bgColor:"bg-red-100",textColor:"text-red-800",icon:Ec}}[y]||{label:y,bgColor:"bg-gray-100",textColor:"text-gray-700",icon:bi},xe=l.icon;return n.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium ${l.bgColor} ${l.textColor}`,children:[n.jsx(xe,{className:"w-3 h-3"}),l.label]})}function Ym({category:y}){return n.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-purple-100 text-purple-700 text-xs font-medium",children:[n.jsx(Pm,{className:"w-3 h-3"}),y]})}function Zm({device:y}){var me;return n.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-sky-100 text-sky-700 text-xs font-medium",children:[n.jsx(Um,{className:"w-3 h-3"}),((me=y==null?void 0:y.name_device)==null?void 0:me.name)||(y==null?void 0:y.name)||"Sin dispositivo"]})}function Jm({ticket:y,showContactInfo:me=!1}){var xe,ve;if(!y.user||!y.user.tenant)return null;const l=y.user.tenant;return n.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-3 mb-3",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex-shrink-0",children:l.photo?n.jsx("img",{src:l.photo.startsWith("http")?l.photo:`/storage/${l.photo}`,alt:l.name,className:"w-12 h-12 rounded-full border-2 border-purple-300 shadow-md object-cover"}):n.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-400 to-blue-400 flex items-center justify-center text-white text-sm font-bold",children:((xe=l.name)==null?void 0:xe.substring(0,1))||"?"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(mi,{className:"w-3 h-3 text-purple-600"}),n.jsx("p",{className:"text-sm font-semibold text-purple-900 truncate",children:l.name})]}),me&&l.email&&n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(Sc,{className:"w-3 h-3 text-green-600"}),n.jsx("p",{className:"text-xs text-green-800 truncate",children:l.email})]}),l.apartment&&n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(Lm,{className:"w-3 h-3 text-blue-600"}),n.jsx("p",{className:"text-xs text-blue-800 truncate",children:l.apartment.name})]}),((ve=l.apartment)==null?void 0:ve.building)&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(km,{className:"w-3 h-3 text-gray-600"}),n.jsx("p",{className:"text-xs text-gray-700 truncate",children:l.apartment.building.name})]})]})]})})}function Qm({isOpen:y,onClose:me,tenant:l}){const[xe,ve]=L.useState([]),[je,Y]=L.useState(!1),[Ur,Pr]=L.useState("all"),[ne,Ar]=L.useState(null),Ie=L.useCallback(async($="all")=>{var J,O,or;if(l!=null&&l.id){Y(!0);try{const re=await xi.get(`/tenants/${l.id}/tickets`,{params:{status:$}});ve(re.data.tickets)}catch(re){console.error("Error fetching tickets:",re),xi.isAxiosError(re)?((J=re.response)==null?void 0:J.status)===403?console.error("Access denied to fetch tickets"):((O=re.response)==null?void 0:O.status)===404?console.error("Tenant not found"):console.error("Unexpected error:",((or=re.response)==null?void 0:or.data)||re.message):console.error("Non-axios error:",re)}finally{Y(!1)}}},[l==null?void 0:l.id]);if(L.useEffect(()=>{y&&(l!=null&&l.id)&&Ie(Ur)},[y,l==null?void 0:l.id,Ur,Ie]),!l)return n.jsx(Be,{open:y,onOpenChange:me,children:n.jsxs(Fe,{className:"max-w-md",children:[n.jsx(Ye,{children:n.jsx(Ze,{children:"Error"})}),n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No tenant selected"})}),n.jsx("div",{className:"flex justify-end pt-4 border-t",children:n.jsx(I,{onClick:me,children:"Close"})})]})});const ir=$=>{const J=wc[$]||wc.open,O=J.icon;return n.jsxs(Rm,{className:`${J.color} text-white`,children:[n.jsx(O,{className:"w-3 h-3 mr-1"}),J.text]})},be=xe.reduce(($,J)=>($[J.status]=($[J.status]||0)+1,$),{}),se=xe.length;return n.jsx(Be,{open:y,onOpenChange:me,children:n.jsxs(Fe,{className:"min-w-5xl h-[95vh] max-h-[95vh] overflow-hidden bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[n.jsx(Ye,{className:"border-b border-gray-200 dark:border-gray-700 pb-4",children:n.jsxs(Ze,{className:"flex items-center gap-3 text-xl font-bold",children:[n.jsx("div",{className:"p-2 bg-corporate-gold/10 rounded-lg",children:n.jsx(mi,{className:"w-5 h-5 text-corporate-gold"})}),n.jsx("span",{className:"text-corporate-gold",children:"Ticket History"}),n.jsx("span",{className:"text-muted-foreground text-lg",children:"•"}),n.jsx("span",{className:"text-foreground",children:(l==null?void 0:l.name)||"Unknown Tenant"})]})}),n.jsxs("div",{className:"flex h-[calc(88vh-140px)] gap-6 mt-4",children:[n.jsxs("div",{className:"w-3/5 border-r border-gray-200 dark:border-gray-700 pr-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-4 text-white text-center shadow-sm",children:[n.jsx("div",{className:"text-2xl font-bold mb-1",children:se}),n.jsx("div",{className:"text-xs text-blue-100 font-medium",children:"Total"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-4 text-white text-center shadow-sm",children:[n.jsx("div",{className:"text-2xl font-bold mb-1",children:be.resolved||0}),n.jsx("div",{className:"text-xs text-green-100 font-medium",children:"Resolved"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-4 text-white text-center shadow-sm",children:[n.jsx("div",{className:"text-2xl font-bold mb-1",children:be.open||0}),n.jsx("div",{className:"text-xs text-orange-100 font-medium",children:"Pending"})]})]}),n.jsx(yc,{value:Ur,onValueChange:Pr,children:n.jsxs(Cc,{className:"grid w-full grid-cols-3 bg-gray-50 dark:bg-gray-900 rounded-lg p-1 border-0",children:[n.jsxs(Jn,{value:"all",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-gray-900 text-sm font-medium rounded-md",children:["All (",se,")"]}),n.jsxs(Jn,{value:"open",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-gray-900 text-sm font-medium rounded-md",children:["Open (",be.open||0,")"]}),n.jsxs(Jn,{value:"resolved",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-gray-900 text-sm font-medium rounded-md",children:["Resolved (",be.resolved||0,")"]})]})})]}),n.jsx("div",{className:"h-[calc(100%-140px)] overflow-y-auto space-y-2 pr-2 custom-scrollbar",children:je?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-corporate-gold mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading tickets..."})]}):xe.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx(bi,{className:"w-6 h-6 text-gray-400"})}),n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"No tickets found"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"This member hasn't created any tickets yet"})]}):xe.map($=>n.jsxs("div",{className:`cursor-pointer transition-all duration-200 rounded-lg border p-3 hover:shadow-md ${(ne==null?void 0:ne.id)===$.id?"bg-corporate-gold/5 border-corporate-gold shadow-sm":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-corporate-gold/30"}`,onClick:()=>Ar($),children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-mono text-xs font-medium text-corporate-gold bg-corporate-gold/10 px-2 py-1 rounded",children:$.code}),n.jsx("span",{className:"text-xs text-muted-foreground",children:Am(new Date($.created_at),"MMM d")})]}),n.jsx("div",{className:"scale-75",children:ir($.status)})]}),n.jsx("h4",{className:"font-medium text-sm line-clamp-1 mb-1",children:$.title}),n.jsx("div",{className:"text-xs text-muted-foreground line-clamp-1 mb-2",children:$.description}),n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[$.device&&n.jsxs("div",{className:"flex items-center gap-1 text-corporate-gold bg-corporate-gold/10 px-2 py-1 rounded-full",children:[n.jsx("div",{className:"w-1 h-1 bg-corporate-gold rounded-full"}),n.jsx("span",{className:"font-medium truncate max-w-20",children:$.device.name})]}),$.technical&&n.jsxs("div",{className:"flex items-center gap-1 text-blue-600 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded-full",children:[n.jsx(mi,{className:"w-2.5 h-2.5"}),n.jsx("span",{className:"font-medium truncate max-w-16",children:$.technical.name})]})]})]},$.id))})]}),n.jsx("div",{className:"w-2/5 pl-6",children:ne?n.jsx("div",{className:"h-full overflow-y-auto custom-scrollbar",children:n.jsxs(Yn,{className:"shadow-xl border-0 bg-gradient-to-br from-white to-gray-50",children:[n.jsx(bm,{className:"text-black rounded-t-lg shadow pb-4",children:n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("h2",{className:"text-lg font-semibold",children:"Ticket Details"})})}),n.jsx(gi,{className:"p-0",children:n.jsx("div",{className:"max-h-[calc(100vh-200px)] overflow-y-auto",children:n.jsxs("div",{className:"px-6 pb-6",children:[n.jsx(Jm,{ticket:ne,showContactInfo:!0}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:ne.title}),n.jsx(Xm,{status:ne.status})]}),n.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:ne.description}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-500",children:"ID:"}),n.jsxs("span",{className:"ml-2 font-medium",children:["#",ne.id]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-500",children:"Code:"}),n.jsx("span",{className:"ml-2 font-medium",children:ne.code})]})]}),n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.jsx(Zm,{device:ne.device}),n.jsx(Ym,{category:ne.category})]})}),n.jsxs("div",{className:"text-xs text-slate-500 space-y-1 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Tm,{className:"w-3 h-3"}),"Created:"," ",ne.created_at?new Date(ne.created_at).toLocaleString("en-US"):"-"]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(_i,{className:"w-3 h-3"}),"Updated:"," ",ne.updated_at?new Date(ne.updated_at).toLocaleString("en-US"):"-"]})]})]}),n.jsx(Dm,{}),n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsxs("h4",{className:"font-medium text-slate-900 flex items-center gap-2",children:[n.jsx(_i,{className:"w-4 h-4 text-blue-500"}),"History"]}),n.jsx("div",{className:"space-y-3",children:!ne.histories||ne.histories.length===0?n.jsxs("div",{className:"text-center py-6 text-slate-500",children:[n.jsx(Sc,{className:"w-8 h-8 mx-auto mb-2 text-slate-300"}),n.jsx("p",{className:"text-sm",children:"No history available"})]}):[...ne.histories].slice().reverse().map(($,J,O)=>n.jsxs("div",{className:"relative pl-6 pb-4 last:pb-0",children:[n.jsx("div",{className:"absolute left-0 top-1 w-3 h-3 bg-blue-500 rounded-full border-2 border-white shadow"}),J!==O.length-1&&n.jsx("div",{className:"absolute left-1.5 top-4 w-0.5 h-full bg-slate-200"}),n.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 ml-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:$.action.replace("_"," ")}),J===0&&n.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Recent"})]}),n.jsx("p",{className:"text-sm text-slate-700 mb-2",children:$.description}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(mi,{className:"w-3 h-3"}),$.user?$.user.name:"Sistema"]}),n.jsx("span",{children:new Date($.created_at).toLocaleString("es-ES")})]})]})]},$.id))})]})]})})})]})}):n.jsx("div",{className:"h-full flex items-center justify-center",children:n.jsxs("div",{className:"text-center p-8",children:[n.jsx("div",{className:"w-16 h-16 bg-corporate-gold/10 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Im,{className:"w-8 h-8 text-corporate-gold/40"})}),n.jsx("h3",{className:"font-bold text-lg text-muted-foreground mb-2",children:"Select a Ticket"}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-xs leading-relaxed",children:"Choose a ticket from the list to view its details and activity history."})]})})})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700 mt-4 bg-white dark:bg-gray-900",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:xe.length>0&&n.jsx("div",{className:"flex items-center gap-3",children:n.jsxs("span",{children:[n.jsx("span",{className:"font-medium text-corporate-gold",children:xe.length})," ticket",xe.length!==1?"s":""," •",n.jsxs("span",{className:"text-green-600 ml-1",children:[be.resolved||0," resolved"]})," •",n.jsxs("span",{className:"text-orange-600 ml-1",children:[be.open||0," pending"]})]})})}),n.jsx(I,{onClick:me,className:"bg-corporate-gold hover:bg-corporate-warm text-white px-6 py-2 font-medium shadow-md hover:shadow-lg transition-all duration-200",children:"Close"})]})]})})}var Zn={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Vm=Zn.exports,_c;function ex(){return _c||(_c=1,function(y,me){(function(){var l,xe="4.17.21",ve=200,je="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",Y="Expected a function",Ur="Invalid `variable` option passed into `_.template`",Pr="__lodash_hash_undefined__",ne=500,Ar="__lodash_placeholder__",Ie=1,ir=2,be=4,se=1,$=2,J=1,O=2,or=4,re=8,Ee=16,We=32,Je=64,ee=128,$e=256,Yr=512,Zr=30,vr="...",bt=800,fe=16,Jr=1,Mr=2,wt=3,Ne=1/0,br=9007199254740991,Ht=17976931348623157e292,Rr=NaN,Ge=4294967295,_t=Ge-1,zt=Ge>>>1,Vn=[["ary",ee],["bind",J],["bindKey",O],["curry",re],["curryRight",Ee],["flip",Yr],["partial",We],["partialRight",Je],["rearg",$e]],Qr="[object Arguments]",Vr="[object Array]",Ni="[object AsyncFunction]",Dr="[object Boolean]",Qe="[object Date]",es="[object DOMException]",et="[object Error]",jt="[object Function]",rs="[object GeneratorFunction]",ye="[object Map]",Nt="[object Number]",Kt="[object Null]",wr="[object Object]",yt="[object Promise]",xn="[object Proxy]",rt="[object RegExp]",Oe="[object Set]",tt="[object String]",Ct="[object Symbol]",yi="[object Undefined]",St="[object WeakMap]",qt="[object WeakSet]",Et="[object ArrayBuffer]",Tr="[object DataView]",ar="[object Float32Array]",Xt="[object Float64Array]",At="[object Int8Array]",vn="[object Int16Array]",lr="[object Int32Array]",Ir="[object Uint8Array]",C="[object Uint8ClampedArray]",bn="[object Uint16Array]",_r="[object Uint32Array]",Ce=/\b__p \+= '';/g,Rt=/\b(__p \+=) '' \+/g,Ci=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ts=/&(?:amp|lt|gt|quot|#39);/g,wn=/[&<>"']/g,nt=RegExp(ts.source),Yt=RegExp(wn.source),oe=/<%-([\s\S]+?)%>/g,Zt=/<%([\s\S]+?)%>/g,ns=/<%=([\s\S]+?)%>/g,ss=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Si=/^\w*$/,Ei=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_n=/[\\^$.*+?()[\]{}|]/g,Ai=RegExp(_n.source),jn=/^\s+/,Ri=/\s/,Di=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ti=/\{\n\/\* \[wrapped with (.+)\] \*/,Ii=/,? & /,is=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Oi=/[()=,{}\[\]\/\s]/,os=/\\(\\)?/g,ki=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,as=/\w*$/,Li=/^[-+]0x[0-9a-f]+$/i,Ui=/^0b[01]+$/i,ls=/^\[object .+?Constructor\]$/,Dt=/^0o[0-7]+$/i,Pi=/^(?:0|[1-9]\d*)$/,st=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jt=/($^)/,Mi=/['\n\r\u2028\u2029\\]/g,Tt="\\ud800-\\udfff",Bi="\\u0300-\\u036f",Fi="\\ufe20-\\ufe2f",Qt="\\u20d0-\\u20ff",Ae=Bi+Fi+Qt,It="\\u2700-\\u27bf",cs="a-z\\xdf-\\xf6\\xf8-\\xff",Wi="\\xac\\xb1\\xd7\\xf7",$i="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Vt="\\u2000-\\u206f",Gi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ot="A-Z\\xc0-\\xd6\\xd8-\\xde",us="\\ufe0e\\ufe0f",kt=Wi+$i+Vt+Gi,P="['’]",Re="["+Tt+"]",cr="["+kt+"]",jr="["+Ae+"]",ds="\\d+",Hi="["+It+"]",fs="["+cs+"]",hs="[^"+Tt+kt+ds+It+cs+Ot+"]",Nn="\\ud83c[\\udffb-\\udfff]",zi="(?:"+jr+"|"+Nn+")",ps="[^"+Tt+"]",yn="(?:\\ud83c[\\udde6-\\uddff]){2}",Cn="[\\ud800-\\udbff][\\udc00-\\udfff]",it="["+Ot+"]",Sn="\\u200d",En="(?:"+fs+"|"+hs+")",gs="(?:"+it+"|"+hs+")",An="(?:"+P+"(?:d|ll|m|re|s|t|ve))?",Rn="(?:"+P+"(?:D|LL|M|RE|S|T|VE))?",Dn=zi+"?",Tn="["+us+"]?",ms="(?:"+Sn+"(?:"+[ps,yn,Cn].join("|")+")"+Tn+Dn+")*",xs="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",In=Tn+Dn+ms,bs="(?:"+[Hi,yn,Cn].join("|")+")"+In,ws="(?:"+[ps+jr+"?",jr,yn,Cn,Re].join("|")+")",_s=RegExp(P,"g"),js=RegExp(jr,"g"),en=RegExp(Nn+"(?="+Nn+")|"+ws+In,"g"),Ns=RegExp([it+"?"+fs+"+"+An+"(?="+[cr,it,"$"].join("|")+")",gs+"+"+Rn+"(?="+[cr,it+En,"$"].join("|")+")",it+"?"+En+"+"+An,it+"+"+Rn,vs,xs,ds,bs].join("|"),"g"),c=RegExp("["+Sn+Tt+Ae+us+"]"),h=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],E=-1,j={};j[ar]=j[Xt]=j[At]=j[vn]=j[lr]=j[Ir]=j[C]=j[bn]=j[_r]=!0,j[Qr]=j[Vr]=j[Et]=j[Dr]=j[Tr]=j[Qe]=j[et]=j[jt]=j[ye]=j[Nt]=j[wr]=j[rt]=j[Oe]=j[tt]=j[St]=!1;var U={};U[Qr]=U[Vr]=U[Et]=U[Tr]=U[Dr]=U[Qe]=U[ar]=U[Xt]=U[At]=U[vn]=U[lr]=U[ye]=U[Nt]=U[wr]=U[rt]=U[Oe]=U[tt]=U[Ct]=U[Ir]=U[C]=U[bn]=U[_r]=!0,U[et]=U[jt]=U[St]=!1;var M={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},z={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},de={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ys=parseFloat,Cs=parseInt,ot=typeof hi=="object"&&hi&&hi.Object===Object&&hi,rn=typeof self=="object"&&self&&self.Object===Object&&self,he=ot||rn||Function("return this")(),Ki=me&&!me.nodeType&&me,Lt=Ki&&!0&&y&&!y.nodeType&&y,la=Lt&&Lt.exports===Ki,qi=la&&ot.process,ur=function(){try{var f=Lt&&Lt.require&&Lt.require("util").types;return f||qi&&qi.binding&&qi.binding("util")}catch{}}(),ca=ur&&ur.isArrayBuffer,ua=ur&&ur.isDate,da=ur&&ur.isMap,fa=ur&&ur.isRegExp,ha=ur&&ur.isSet,pa=ur&&ur.isTypedArray;function Ve(f,m,g){switch(g.length){case 0:return f.call(m);case 1:return f.call(m,g[0]);case 2:return f.call(m,g[0],g[1]);case 3:return f.call(m,g[0],g[1],g[2])}return f.apply(m,g)}function Rc(f,m,g,N){for(var B=-1,Z=f==null?0:f.length;++B<Z;){var pe=f[B];m(N,pe,g(pe),f)}return N}function dr(f,m){for(var g=-1,N=f==null?0:f.length;++g<N&&m(f[g],g,f)!==!1;);return f}function Dc(f,m){for(var g=f==null?0:f.length;g--&&m(f[g],g,f)!==!1;);return f}function ga(f,m){for(var g=-1,N=f==null?0:f.length;++g<N;)if(!m(f[g],g,f))return!1;return!0}function at(f,m){for(var g=-1,N=f==null?0:f.length,B=0,Z=[];++g<N;){var pe=f[g];m(pe,g,f)&&(Z[B++]=pe)}return Z}function Ss(f,m){var g=f==null?0:f.length;return!!g&&tn(f,m,0)>-1}function Xi(f,m,g){for(var N=-1,B=f==null?0:f.length;++N<B;)if(g(m,f[N]))return!0;return!1}function ie(f,m){for(var g=-1,N=f==null?0:f.length,B=Array(N);++g<N;)B[g]=m(f[g],g,f);return B}function lt(f,m){for(var g=-1,N=m.length,B=f.length;++g<N;)f[B+g]=m[g];return f}function Yi(f,m,g,N){var B=-1,Z=f==null?0:f.length;for(N&&Z&&(g=f[++B]);++B<Z;)g=m(g,f[B],B,f);return g}function Tc(f,m,g,N){var B=f==null?0:f.length;for(N&&B&&(g=f[--B]);B--;)g=m(g,f[B],B,f);return g}function Zi(f,m){for(var g=-1,N=f==null?0:f.length;++g<N;)if(m(f[g],g,f))return!0;return!1}var Ic=Ji("length");function Oc(f){return f.split("")}function kc(f){return f.match(is)||[]}function ma(f,m,g){var N;return g(f,function(B,Z,pe){if(m(B,Z,pe))return N=Z,!1}),N}function Es(f,m,g,N){for(var B=f.length,Z=g+(N?1:-1);N?Z--:++Z<B;)if(m(f[Z],Z,f))return Z;return-1}function tn(f,m,g){return m===m?Kc(f,m,g):Es(f,xa,g)}function Lc(f,m,g,N){for(var B=g-1,Z=f.length;++B<Z;)if(N(f[B],m))return B;return-1}function xa(f){return f!==f}function va(f,m){var g=f==null?0:f.length;return g?Vi(f,m)/g:Rr}function Ji(f){return function(m){return m==null?l:m[f]}}function Qi(f){return function(m){return f==null?l:f[m]}}function ba(f,m,g,N,B){return B(f,function(Z,pe,te){g=N?(N=!1,Z):m(g,Z,pe,te)}),g}function Uc(f,m){var g=f.length;for(f.sort(m);g--;)f[g]=f[g].value;return f}function Vi(f,m){for(var g,N=-1,B=f.length;++N<B;){var Z=m(f[N]);Z!==l&&(g=g===l?Z:g+Z)}return g}function eo(f,m){for(var g=-1,N=Array(f);++g<f;)N[g]=m(g);return N}function Pc(f,m){return ie(m,function(g){return[g,f[g]]})}function wa(f){return f&&f.slice(0,ya(f)+1).replace(jn,"")}function er(f){return function(m){return f(m)}}function ro(f,m){return ie(m,function(g){return f[g]})}function On(f,m){return f.has(m)}function _a(f,m){for(var g=-1,N=f.length;++g<N&&tn(m,f[g],0)>-1;);return g}function ja(f,m){for(var g=f.length;g--&&tn(m,f[g],0)>-1;);return g}function Mc(f,m){for(var g=f.length,N=0;g--;)f[g]===m&&++N;return N}var Bc=Qi(M),Fc=Qi(A);function Wc(f){return"\\"+de[f]}function $c(f,m){return f==null?l:f[m]}function nn(f){return c.test(f)}function Gc(f){return h.test(f)}function Hc(f){for(var m,g=[];!(m=f.next()).done;)g.push(m.value);return g}function to(f){var m=-1,g=Array(f.size);return f.forEach(function(N,B){g[++m]=[B,N]}),g}function Na(f,m){return function(g){return f(m(g))}}function ct(f,m){for(var g=-1,N=f.length,B=0,Z=[];++g<N;){var pe=f[g];(pe===m||pe===Ar)&&(f[g]=Ar,Z[B++]=g)}return Z}function As(f){var m=-1,g=Array(f.size);return f.forEach(function(N){g[++m]=N}),g}function zc(f){var m=-1,g=Array(f.size);return f.forEach(function(N){g[++m]=[N,N]}),g}function Kc(f,m,g){for(var N=g-1,B=f.length;++N<B;)if(f[N]===m)return N;return-1}function qc(f,m,g){for(var N=g+1;N--;)if(f[N]===m)return N;return N}function sn(f){return nn(f)?Yc(f):Ic(f)}function Nr(f){return nn(f)?Zc(f):Oc(f)}function ya(f){for(var m=f.length;m--&&Ri.test(f.charAt(m)););return m}var Xc=Qi(z);function Yc(f){for(var m=en.lastIndex=0;en.test(f);)++m;return m}function Zc(f){return f.match(en)||[]}function Jc(f){return f.match(Ns)||[]}var Qc=function f(m){m=m==null?he:on.defaults(he.Object(),m,on.pick(he,_));var g=m.Array,N=m.Date,B=m.Error,Z=m.Function,pe=m.Math,te=m.Object,no=m.RegExp,Vc=m.String,fr=m.TypeError,Rs=g.prototype,eu=Z.prototype,an=te.prototype,Ds=m["__core-js_shared__"],Ts=eu.toString,V=an.hasOwnProperty,ru=0,Ca=function(){var e=/[^.]+$/.exec(Ds&&Ds.keys&&Ds.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Is=an.toString,tu=Ts.call(te),nu=he._,su=no("^"+Ts.call(V).replace(_n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Os=la?m.Buffer:l,ut=m.Symbol,ks=m.Uint8Array,Sa=Os?Os.allocUnsafe:l,Ls=Na(te.getPrototypeOf,te),Ea=te.create,Aa=an.propertyIsEnumerable,Us=Rs.splice,Ra=ut?ut.isConcatSpreadable:l,kn=ut?ut.iterator:l,Ut=ut?ut.toStringTag:l,Ps=function(){try{var e=Wt(te,"defineProperty");return e({},"",{}),e}catch{}}(),iu=m.clearTimeout!==he.clearTimeout&&m.clearTimeout,ou=N&&N.now!==he.Date.now&&N.now,au=m.setTimeout!==he.setTimeout&&m.setTimeout,Ms=pe.ceil,Bs=pe.floor,so=te.getOwnPropertySymbols,lu=Os?Os.isBuffer:l,Da=m.isFinite,cu=Rs.join,uu=Na(te.keys,te),ge=pe.max,De=pe.min,du=N.now,fu=m.parseInt,Ta=pe.random,hu=Rs.reverse,io=Wt(m,"DataView"),Ln=Wt(m,"Map"),oo=Wt(m,"Promise"),ln=Wt(m,"Set"),Un=Wt(m,"WeakMap"),Pn=Wt(te,"create"),Fs=Un&&new Un,cn={},pu=$t(io),gu=$t(Ln),mu=$t(oo),xu=$t(ln),vu=$t(Un),Ws=ut?ut.prototype:l,Mn=Ws?Ws.valueOf:l,Ia=Ws?Ws.toString:l;function o(e){if(le(e)&&!F(e)&&!(e instanceof q)){if(e instanceof hr)return e;if(V.call(e,"__wrapped__"))return Ol(e)}return new hr(e)}var un=function(){function e(){}return function(r){if(!ae(r))return{};if(Ea)return Ea(r);e.prototype=r;var t=new e;return e.prototype=l,t}}();function $s(){}function hr(e,r){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=l}o.templateSettings={escape:oe,evaluate:Zt,interpolate:ns,variable:"",imports:{_:o}},o.prototype=$s.prototype,o.prototype.constructor=o,hr.prototype=un($s.prototype),hr.prototype.constructor=hr;function q(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ge,this.__views__=[]}function bu(){var e=new q(this.__wrapped__);return e.__actions__=He(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=He(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=He(this.__views__),e}function wu(){if(this.__filtered__){var e=new q(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function _u(){var e=this.__wrapped__.value(),r=this.__dir__,t=F(e),s=r<0,i=t?e.length:0,a=Od(0,i,this.__views__),u=a.start,d=a.end,p=d-u,x=s?d:u-1,v=this.__iteratees__,b=v.length,w=0,S=De(p,this.__takeCount__);if(!t||!s&&i==p&&S==p)return tl(e,this.__actions__);var D=[];e:for(;p--&&w<S;){x+=r;for(var G=-1,T=e[x];++G<b;){var K=v[G],X=K.iteratee,nr=K.type,Ue=X(T);if(nr==Mr)T=Ue;else if(!Ue){if(nr==Jr)continue e;break e}}D[w++]=T}return D}q.prototype=un($s.prototype),q.prototype.constructor=q;function Pt(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}function ju(){this.__data__=Pn?Pn(null):{},this.size=0}function Nu(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}function yu(e){var r=this.__data__;if(Pn){var t=r[e];return t===Pr?l:t}return V.call(r,e)?r[e]:l}function Cu(e){var r=this.__data__;return Pn?r[e]!==l:V.call(r,e)}function Su(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Pn&&r===l?Pr:r,this}Pt.prototype.clear=ju,Pt.prototype.delete=Nu,Pt.prototype.get=yu,Pt.prototype.has=Cu,Pt.prototype.set=Su;function Br(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}function Eu(){this.__data__=[],this.size=0}function Au(e){var r=this.__data__,t=Gs(r,e);if(t<0)return!1;var s=r.length-1;return t==s?r.pop():Us.call(r,t,1),--this.size,!0}function Ru(e){var r=this.__data__,t=Gs(r,e);return t<0?l:r[t][1]}function Du(e){return Gs(this.__data__,e)>-1}function Tu(e,r){var t=this.__data__,s=Gs(t,e);return s<0?(++this.size,t.push([e,r])):t[s][1]=r,this}Br.prototype.clear=Eu,Br.prototype.delete=Au,Br.prototype.get=Ru,Br.prototype.has=Du,Br.prototype.set=Tu;function Fr(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}function Iu(){this.size=0,this.__data__={hash:new Pt,map:new(Ln||Br),string:new Pt}}function Ou(e){var r=ri(this,e).delete(e);return this.size-=r?1:0,r}function ku(e){return ri(this,e).get(e)}function Lu(e){return ri(this,e).has(e)}function Uu(e,r){var t=ri(this,e),s=t.size;return t.set(e,r),this.size+=t.size==s?0:1,this}Fr.prototype.clear=Iu,Fr.prototype.delete=Ou,Fr.prototype.get=ku,Fr.prototype.has=Lu,Fr.prototype.set=Uu;function Mt(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new Fr;++r<t;)this.add(e[r])}function Pu(e){return this.__data__.set(e,Pr),this}function Mu(e){return this.__data__.has(e)}Mt.prototype.add=Mt.prototype.push=Pu,Mt.prototype.has=Mu;function yr(e){var r=this.__data__=new Br(e);this.size=r.size}function Bu(){this.__data__=new Br,this.size=0}function Fu(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}function Wu(e){return this.__data__.get(e)}function $u(e){return this.__data__.has(e)}function Gu(e,r){var t=this.__data__;if(t instanceof Br){var s=t.__data__;if(!Ln||s.length<ve-1)return s.push([e,r]),this.size=++t.size,this;t=this.__data__=new Fr(s)}return t.set(e,r),this.size=t.size,this}yr.prototype.clear=Bu,yr.prototype.delete=Fu,yr.prototype.get=Wu,yr.prototype.has=$u,yr.prototype.set=Gu;function Oa(e,r){var t=F(e),s=!t&&Gt(e),i=!t&&!s&&gt(e),a=!t&&!s&&!i&&pn(e),u=t||s||i||a,d=u?eo(e.length,Vc):[],p=d.length;for(var x in e)(r||V.call(e,x))&&!(u&&(x=="length"||i&&(x=="offset"||x=="parent")||a&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||Hr(x,p)))&&d.push(x);return d}function ka(e){var r=e.length;return r?e[vo(0,r-1)]:l}function Hu(e,r){return ti(He(e),Bt(r,0,e.length))}function zu(e){return ti(He(e))}function ao(e,r,t){(t!==l&&!Cr(e[r],t)||t===l&&!(r in e))&&Wr(e,r,t)}function Bn(e,r,t){var s=e[r];(!(V.call(e,r)&&Cr(s,t))||t===l&&!(r in e))&&Wr(e,r,t)}function Gs(e,r){for(var t=e.length;t--;)if(Cr(e[t][0],r))return t;return-1}function Ku(e,r,t,s){return dt(e,function(i,a,u){r(s,i,t(i),u)}),s}function La(e,r){return e&&kr(r,we(r),e)}function qu(e,r){return e&&kr(r,Ke(r),e)}function Wr(e,r,t){r=="__proto__"&&Ps?Ps(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}function lo(e,r){for(var t=-1,s=r.length,i=g(s),a=e==null;++t<s;)i[t]=a?l:Go(e,r[t]);return i}function Bt(e,r,t){return e===e&&(t!==l&&(e=e<=t?e:t),r!==l&&(e=e>=r?e:r)),e}function pr(e,r,t,s,i,a){var u,d=r&Ie,p=r&ir,x=r&be;if(t&&(u=i?t(e,s,i,a):t(e)),u!==l)return u;if(!ae(e))return e;var v=F(e);if(v){if(u=Ld(e),!d)return He(e,u)}else{var b=Te(e),w=b==jt||b==rs;if(gt(e))return il(e,d);if(b==wr||b==Qr||w&&!i){if(u=p||w?{}:yl(e),!d)return p?yd(e,qu(u,e)):Nd(e,La(u,e))}else{if(!U[b])return i?e:{};u=Ud(e,b,d)}}a||(a=new yr);var S=a.get(e);if(S)return S;a.set(e,u),Vl(e)?e.forEach(function(T){u.add(pr(T,r,t,T,e,a))}):Jl(e)&&e.forEach(function(T,K){u.set(K,pr(T,r,t,K,e,a))});var D=x?p?Ro:Ao:p?Ke:we,G=v?l:D(e);return dr(G||e,function(T,K){G&&(K=T,T=e[K]),Bn(u,K,pr(T,r,t,K,e,a))}),u}function Xu(e){var r=we(e);return function(t){return Ua(t,e,r)}}function Ua(e,r,t){var s=t.length;if(e==null)return!s;for(e=te(e);s--;){var i=t[s],a=r[i],u=e[i];if(u===l&&!(i in e)||!a(u))return!1}return!0}function Pa(e,r,t){if(typeof e!="function")throw new fr(Y);return Kn(function(){e.apply(l,t)},r)}function Fn(e,r,t,s){var i=-1,a=Ss,u=!0,d=e.length,p=[],x=r.length;if(!d)return p;t&&(r=ie(r,er(t))),s?(a=Xi,u=!1):r.length>=ve&&(a=On,u=!1,r=new Mt(r));e:for(;++i<d;){var v=e[i],b=t==null?v:t(v);if(v=s||v!==0?v:0,u&&b===b){for(var w=x;w--;)if(r[w]===b)continue e;p.push(v)}else a(r,b,s)||p.push(v)}return p}var dt=ul(Or),Ma=ul(uo,!0);function Yu(e,r){var t=!0;return dt(e,function(s,i,a){return t=!!r(s,i,a),t}),t}function Hs(e,r,t){for(var s=-1,i=e.length;++s<i;){var a=e[s],u=r(a);if(u!=null&&(d===l?u===u&&!tr(u):t(u,d)))var d=u,p=a}return p}function Zu(e,r,t,s){var i=e.length;for(t=W(t),t<0&&(t=-t>i?0:i+t),s=s===l||s>i?i:W(s),s<0&&(s+=i),s=t>s?0:rc(s);t<s;)e[t++]=r;return e}function Ba(e,r){var t=[];return dt(e,function(s,i,a){r(s,i,a)&&t.push(s)}),t}function Se(e,r,t,s,i){var a=-1,u=e.length;for(t||(t=Md),i||(i=[]);++a<u;){var d=e[a];r>0&&t(d)?r>1?Se(d,r-1,t,s,i):lt(i,d):s||(i[i.length]=d)}return i}var co=dl(),Fa=dl(!0);function Or(e,r){return e&&co(e,r,we)}function uo(e,r){return e&&Fa(e,r,we)}function zs(e,r){return at(r,function(t){return zr(e[t])})}function Ft(e,r){r=ht(r,e);for(var t=0,s=r.length;e!=null&&t<s;)e=e[Lr(r[t++])];return t&&t==s?e:l}function Wa(e,r,t){var s=r(e);return F(e)?s:lt(s,t(e))}function ke(e){return e==null?e===l?yi:Kt:Ut&&Ut in te(e)?Id(e):zd(e)}function fo(e,r){return e>r}function Ju(e,r){return e!=null&&V.call(e,r)}function Qu(e,r){return e!=null&&r in te(e)}function Vu(e,r,t){return e>=De(r,t)&&e<ge(r,t)}function ho(e,r,t){for(var s=t?Xi:Ss,i=e[0].length,a=e.length,u=a,d=g(a),p=1/0,x=[];u--;){var v=e[u];u&&r&&(v=ie(v,er(r))),p=De(v.length,p),d[u]=!t&&(r||i>=120&&v.length>=120)?new Mt(u&&v):l}v=e[0];var b=-1,w=d[0];e:for(;++b<i&&x.length<p;){var S=v[b],D=r?r(S):S;if(S=t||S!==0?S:0,!(w?On(w,D):s(x,D,t))){for(u=a;--u;){var G=d[u];if(!(G?On(G,D):s(e[u],D,t)))continue e}w&&w.push(D),x.push(S)}}return x}function ed(e,r,t,s){return Or(e,function(i,a,u){r(s,t(i),a,u)}),s}function Wn(e,r,t){r=ht(r,e),e=Al(e,r);var s=e==null?e:e[Lr(mr(r))];return s==null?l:Ve(s,e,t)}function $a(e){return le(e)&&ke(e)==Qr}function rd(e){return le(e)&&ke(e)==Et}function td(e){return le(e)&&ke(e)==Qe}function $n(e,r,t,s,i){return e===r?!0:e==null||r==null||!le(e)&&!le(r)?e!==e&&r!==r:nd(e,r,t,s,$n,i)}function nd(e,r,t,s,i,a){var u=F(e),d=F(r),p=u?Vr:Te(e),x=d?Vr:Te(r);p=p==Qr?wr:p,x=x==Qr?wr:x;var v=p==wr,b=x==wr,w=p==x;if(w&&gt(e)){if(!gt(r))return!1;u=!0,v=!1}if(w&&!v)return a||(a=new yr),u||pn(e)?_l(e,r,t,s,i,a):Dd(e,r,p,t,s,i,a);if(!(t&se)){var S=v&&V.call(e,"__wrapped__"),D=b&&V.call(r,"__wrapped__");if(S||D){var G=S?e.value():e,T=D?r.value():r;return a||(a=new yr),i(G,T,t,s,a)}}return w?(a||(a=new yr),Td(e,r,t,s,i,a)):!1}function sd(e){return le(e)&&Te(e)==ye}function po(e,r,t,s){var i=t.length,a=i,u=!s;if(e==null)return!a;for(e=te(e);i--;){var d=t[i];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++i<a;){d=t[i];var p=d[0],x=e[p],v=d[1];if(u&&d[2]){if(x===l&&!(p in e))return!1}else{var b=new yr;if(s)var w=s(x,v,p,e,r,b);if(!(w===l?$n(v,x,se|$,s,b):w))return!1}}return!0}function Ga(e){if(!ae(e)||Fd(e))return!1;var r=zr(e)?su:ls;return r.test($t(e))}function id(e){return le(e)&&ke(e)==rt}function od(e){return le(e)&&Te(e)==Oe}function ad(e){return le(e)&&li(e.length)&&!!j[ke(e)]}function Ha(e){return typeof e=="function"?e:e==null?qe:typeof e=="object"?F(e)?qa(e[0],e[1]):Ka(e):fc(e)}function go(e){if(!zn(e))return uu(e);var r=[];for(var t in te(e))V.call(e,t)&&t!="constructor"&&r.push(t);return r}function ld(e){if(!ae(e))return Hd(e);var r=zn(e),t=[];for(var s in e)s=="constructor"&&(r||!V.call(e,s))||t.push(s);return t}function mo(e,r){return e<r}function za(e,r){var t=-1,s=ze(e)?g(e.length):[];return dt(e,function(i,a,u){s[++t]=r(i,a,u)}),s}function Ka(e){var r=To(e);return r.length==1&&r[0][2]?Sl(r[0][0],r[0][1]):function(t){return t===e||po(t,e,r)}}function qa(e,r){return Oo(e)&&Cl(r)?Sl(Lr(e),r):function(t){var s=Go(t,e);return s===l&&s===r?Ho(t,e):$n(r,s,se|$)}}function Ks(e,r,t,s,i){e!==r&&co(r,function(a,u){if(i||(i=new yr),ae(a))cd(e,r,u,t,Ks,s,i);else{var d=s?s(Lo(e,u),a,u+"",e,r,i):l;d===l&&(d=a),ao(e,u,d)}},Ke)}function cd(e,r,t,s,i,a,u){var d=Lo(e,t),p=Lo(r,t),x=u.get(p);if(x){ao(e,t,x);return}var v=a?a(d,p,t+"",e,r,u):l,b=v===l;if(b){var w=F(p),S=!w&&gt(p),D=!w&&!S&&pn(p);v=p,w||S||D?F(d)?v=d:ce(d)?v=He(d):S?(b=!1,v=il(p,!0)):D?(b=!1,v=ol(p,!0)):v=[]:qn(p)||Gt(p)?(v=d,Gt(d)?v=tc(d):(!ae(d)||zr(d))&&(v=yl(p))):b=!1}b&&(u.set(p,v),i(v,p,s,a,u),u.delete(p)),ao(e,t,v)}function Xa(e,r){var t=e.length;if(t)return r+=r<0?t:0,Hr(r,t)?e[r]:l}function Ya(e,r,t){r.length?r=ie(r,function(a){return F(a)?function(u){return Ft(u,a.length===1?a[0]:a)}:a}):r=[qe];var s=-1;r=ie(r,er(R()));var i=za(e,function(a,u,d){var p=ie(r,function(x){return x(a)});return{criteria:p,index:++s,value:a}});return Uc(i,function(a,u){return jd(a,u,t)})}function ud(e,r){return Za(e,r,function(t,s){return Ho(e,s)})}function Za(e,r,t){for(var s=-1,i=r.length,a={};++s<i;){var u=r[s],d=Ft(e,u);t(d,u)&&Gn(a,ht(u,e),d)}return a}function dd(e){return function(r){return Ft(r,e)}}function xo(e,r,t,s){var i=s?Lc:tn,a=-1,u=r.length,d=e;for(e===r&&(r=He(r)),t&&(d=ie(e,er(t)));++a<u;)for(var p=0,x=r[a],v=t?t(x):x;(p=i(d,v,p,s))>-1;)d!==e&&Us.call(d,p,1),Us.call(e,p,1);return e}function Ja(e,r){for(var t=e?r.length:0,s=t-1;t--;){var i=r[t];if(t==s||i!==a){var a=i;Hr(i)?Us.call(e,i,1):_o(e,i)}}return e}function vo(e,r){return e+Bs(Ta()*(r-e+1))}function fd(e,r,t,s){for(var i=-1,a=ge(Ms((r-e)/(t||1)),0),u=g(a);a--;)u[s?a:++i]=e,e+=t;return u}function bo(e,r){var t="";if(!e||r<1||r>br)return t;do r%2&&(t+=e),r=Bs(r/2),r&&(e+=e);while(r);return t}function H(e,r){return Uo(El(e,r,qe),e+"")}function hd(e){return ka(gn(e))}function pd(e,r){var t=gn(e);return ti(t,Bt(r,0,t.length))}function Gn(e,r,t,s){if(!ae(e))return e;r=ht(r,e);for(var i=-1,a=r.length,u=a-1,d=e;d!=null&&++i<a;){var p=Lr(r[i]),x=t;if(p==="__proto__"||p==="constructor"||p==="prototype")return e;if(i!=u){var v=d[p];x=s?s(v,p,d):l,x===l&&(x=ae(v)?v:Hr(r[i+1])?[]:{})}Bn(d,p,x),d=d[p]}return e}var Qa=Fs?function(e,r){return Fs.set(e,r),e}:qe,gd=Ps?function(e,r){return Ps(e,"toString",{configurable:!0,enumerable:!1,value:Ko(r),writable:!0})}:qe;function md(e){return ti(gn(e))}function gr(e,r,t){var s=-1,i=e.length;r<0&&(r=-r>i?0:i+r),t=t>i?i:t,t<0&&(t+=i),i=r>t?0:t-r>>>0,r>>>=0;for(var a=g(i);++s<i;)a[s]=e[s+r];return a}function xd(e,r){var t;return dt(e,function(s,i,a){return t=r(s,i,a),!t}),!!t}function qs(e,r,t){var s=0,i=e==null?s:e.length;if(typeof r=="number"&&r===r&&i<=zt){for(;s<i;){var a=s+i>>>1,u=e[a];u!==null&&!tr(u)&&(t?u<=r:u<r)?s=a+1:i=a}return i}return wo(e,r,qe,t)}function wo(e,r,t,s){var i=0,a=e==null?0:e.length;if(a===0)return 0;r=t(r);for(var u=r!==r,d=r===null,p=tr(r),x=r===l;i<a;){var v=Bs((i+a)/2),b=t(e[v]),w=b!==l,S=b===null,D=b===b,G=tr(b);if(u)var T=s||D;else x?T=D&&(s||w):d?T=D&&w&&(s||!S):p?T=D&&w&&!S&&(s||!G):S||G?T=!1:T=s?b<=r:b<r;T?i=v+1:a=v}return De(a,_t)}function Va(e,r){for(var t=-1,s=e.length,i=0,a=[];++t<s;){var u=e[t],d=r?r(u):u;if(!t||!Cr(d,p)){var p=d;a[i++]=u===0?0:u}}return a}function el(e){return typeof e=="number"?e:tr(e)?Rr:+e}function rr(e){if(typeof e=="string")return e;if(F(e))return ie(e,rr)+"";if(tr(e))return Ia?Ia.call(e):"";var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}function ft(e,r,t){var s=-1,i=Ss,a=e.length,u=!0,d=[],p=d;if(t)u=!1,i=Xi;else if(a>=ve){var x=r?null:Ad(e);if(x)return As(x);u=!1,i=On,p=new Mt}else p=r?[]:d;e:for(;++s<a;){var v=e[s],b=r?r(v):v;if(v=t||v!==0?v:0,u&&b===b){for(var w=p.length;w--;)if(p[w]===b)continue e;r&&p.push(b),d.push(v)}else i(p,b,t)||(p!==d&&p.push(b),d.push(v))}return d}function _o(e,r){return r=ht(r,e),e=Al(e,r),e==null||delete e[Lr(mr(r))]}function rl(e,r,t,s){return Gn(e,r,t(Ft(e,r)),s)}function Xs(e,r,t,s){for(var i=e.length,a=s?i:-1;(s?a--:++a<i)&&r(e[a],a,e););return t?gr(e,s?0:a,s?a+1:i):gr(e,s?a+1:0,s?i:a)}function tl(e,r){var t=e;return t instanceof q&&(t=t.value()),Yi(r,function(s,i){return i.func.apply(i.thisArg,lt([s],i.args))},t)}function jo(e,r,t){var s=e.length;if(s<2)return s?ft(e[0]):[];for(var i=-1,a=g(s);++i<s;)for(var u=e[i],d=-1;++d<s;)d!=i&&(a[i]=Fn(a[i]||u,e[d],r,t));return ft(Se(a,1),r,t)}function nl(e,r,t){for(var s=-1,i=e.length,a=r.length,u={};++s<i;){var d=s<a?r[s]:l;t(u,e[s],d)}return u}function No(e){return ce(e)?e:[]}function yo(e){return typeof e=="function"?e:qe}function ht(e,r){return F(e)?e:Oo(e,r)?[e]:Il(Q(e))}var vd=H;function pt(e,r,t){var s=e.length;return t=t===l?s:t,!r&&t>=s?e:gr(e,r,t)}var sl=iu||function(e){return he.clearTimeout(e)};function il(e,r){if(r)return e.slice();var t=e.length,s=Sa?Sa(t):new e.constructor(t);return e.copy(s),s}function Co(e){var r=new e.constructor(e.byteLength);return new ks(r).set(new ks(e)),r}function bd(e,r){var t=r?Co(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}function wd(e){var r=new e.constructor(e.source,as.exec(e));return r.lastIndex=e.lastIndex,r}function _d(e){return Mn?te(Mn.call(e)):{}}function ol(e,r){var t=r?Co(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function al(e,r){if(e!==r){var t=e!==l,s=e===null,i=e===e,a=tr(e),u=r!==l,d=r===null,p=r===r,x=tr(r);if(!d&&!x&&!a&&e>r||a&&u&&p&&!d&&!x||s&&u&&p||!t&&p||!i)return 1;if(!s&&!a&&!x&&e<r||x&&t&&i&&!s&&!a||d&&t&&i||!u&&i||!p)return-1}return 0}function jd(e,r,t){for(var s=-1,i=e.criteria,a=r.criteria,u=i.length,d=t.length;++s<u;){var p=al(i[s],a[s]);if(p){if(s>=d)return p;var x=t[s];return p*(x=="desc"?-1:1)}}return e.index-r.index}function ll(e,r,t,s){for(var i=-1,a=e.length,u=t.length,d=-1,p=r.length,x=ge(a-u,0),v=g(p+x),b=!s;++d<p;)v[d]=r[d];for(;++i<u;)(b||i<a)&&(v[t[i]]=e[i]);for(;x--;)v[d++]=e[i++];return v}function cl(e,r,t,s){for(var i=-1,a=e.length,u=-1,d=t.length,p=-1,x=r.length,v=ge(a-d,0),b=g(v+x),w=!s;++i<v;)b[i]=e[i];for(var S=i;++p<x;)b[S+p]=r[p];for(;++u<d;)(w||i<a)&&(b[S+t[u]]=e[i++]);return b}function He(e,r){var t=-1,s=e.length;for(r||(r=g(s));++t<s;)r[t]=e[t];return r}function kr(e,r,t,s){var i=!t;t||(t={});for(var a=-1,u=r.length;++a<u;){var d=r[a],p=s?s(t[d],e[d],d,t,e):l;p===l&&(p=e[d]),i?Wr(t,d,p):Bn(t,d,p)}return t}function Nd(e,r){return kr(e,Io(e),r)}function yd(e,r){return kr(e,jl(e),r)}function Ys(e,r){return function(t,s){var i=F(t)?Rc:Ku,a=r?r():{};return i(t,e,R(s,2),a)}}function dn(e){return H(function(r,t){var s=-1,i=t.length,a=i>1?t[i-1]:l,u=i>2?t[2]:l;for(a=e.length>3&&typeof a=="function"?(i--,a):l,u&&Le(t[0],t[1],u)&&(a=i<3?l:a,i=1),r=te(r);++s<i;){var d=t[s];d&&e(r,d,s,a)}return r})}function ul(e,r){return function(t,s){if(t==null)return t;if(!ze(t))return e(t,s);for(var i=t.length,a=r?i:-1,u=te(t);(r?a--:++a<i)&&s(u[a],a,u)!==!1;);return t}}function dl(e){return function(r,t,s){for(var i=-1,a=te(r),u=s(r),d=u.length;d--;){var p=u[e?d:++i];if(t(a[p],p,a)===!1)break}return r}}function Cd(e,r,t){var s=r&J,i=Hn(e);function a(){var u=this&&this!==he&&this instanceof a?i:e;return u.apply(s?t:this,arguments)}return a}function fl(e){return function(r){r=Q(r);var t=nn(r)?Nr(r):l,s=t?t[0]:r.charAt(0),i=t?pt(t,1).join(""):r.slice(1);return s[e]()+i}}function fn(e){return function(r){return Yi(uc(cc(r).replace(_s,"")),e,"")}}function Hn(e){return function(){var r=arguments;switch(r.length){case 0:return new e;case 1:return new e(r[0]);case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[1],r[2]);case 4:return new e(r[0],r[1],r[2],r[3]);case 5:return new e(r[0],r[1],r[2],r[3],r[4]);case 6:return new e(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new e(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var t=un(e.prototype),s=e.apply(t,r);return ae(s)?s:t}}function Sd(e,r,t){var s=Hn(e);function i(){for(var a=arguments.length,u=g(a),d=a,p=hn(i);d--;)u[d]=arguments[d];var x=a<3&&u[0]!==p&&u[a-1]!==p?[]:ct(u,p);if(a-=x.length,a<t)return xl(e,r,Zs,i.placeholder,l,u,x,l,l,t-a);var v=this&&this!==he&&this instanceof i?s:e;return Ve(v,this,u)}return i}function hl(e){return function(r,t,s){var i=te(r);if(!ze(r)){var a=R(t,3);r=we(r),t=function(d){return a(i[d],d,i)}}var u=e(r,t,s);return u>-1?i[a?r[u]:u]:l}}function pl(e){return Gr(function(r){var t=r.length,s=t,i=hr.prototype.thru;for(e&&r.reverse();s--;){var a=r[s];if(typeof a!="function")throw new fr(Y);if(i&&!u&&ei(a)=="wrapper")var u=new hr([],!0)}for(s=u?s:t;++s<t;){a=r[s];var d=ei(a),p=d=="wrapper"?Do(a):l;p&&ko(p[0])&&p[1]==(ee|re|We|$e)&&!p[4].length&&p[9]==1?u=u[ei(p[0])].apply(u,p[3]):u=a.length==1&&ko(a)?u[d]():u.thru(a)}return function(){var x=arguments,v=x[0];if(u&&x.length==1&&F(v))return u.plant(v).value();for(var b=0,w=t?r[b].apply(this,x):v;++b<t;)w=r[b].call(this,w);return w}})}function Zs(e,r,t,s,i,a,u,d,p,x){var v=r&ee,b=r&J,w=r&O,S=r&(re|Ee),D=r&Yr,G=w?l:Hn(e);function T(){for(var K=arguments.length,X=g(K),nr=K;nr--;)X[nr]=arguments[nr];if(S)var Ue=hn(T),sr=Mc(X,Ue);if(s&&(X=ll(X,s,i,S)),a&&(X=cl(X,a,u,S)),K-=sr,S&&K<x){var ue=ct(X,Ue);return xl(e,r,Zs,T.placeholder,t,X,ue,d,p,x-K)}var Sr=b?t:this,qr=w?Sr[e]:e;return K=X.length,d?X=Kd(X,d):D&&K>1&&X.reverse(),v&&p<K&&(X.length=p),this&&this!==he&&this instanceof T&&(qr=G||Hn(qr)),qr.apply(Sr,X)}return T}function gl(e,r){return function(t,s){return ed(t,e,r(s),{})}}function Js(e,r){return function(t,s){var i;if(t===l&&s===l)return r;if(t!==l&&(i=t),s!==l){if(i===l)return s;typeof t=="string"||typeof s=="string"?(t=rr(t),s=rr(s)):(t=el(t),s=el(s)),i=e(t,s)}return i}}function So(e){return Gr(function(r){return r=ie(r,er(R())),H(function(t){var s=this;return e(r,function(i){return Ve(i,s,t)})})})}function Qs(e,r){r=r===l?" ":rr(r);var t=r.length;if(t<2)return t?bo(r,e):r;var s=bo(r,Ms(e/sn(r)));return nn(r)?pt(Nr(s),0,e).join(""):s.slice(0,e)}function Ed(e,r,t,s){var i=r&J,a=Hn(e);function u(){for(var d=-1,p=arguments.length,x=-1,v=s.length,b=g(v+p),w=this&&this!==he&&this instanceof u?a:e;++x<v;)b[x]=s[x];for(;p--;)b[x++]=arguments[++d];return Ve(w,i?t:this,b)}return u}function ml(e){return function(r,t,s){return s&&typeof s!="number"&&Le(r,t,s)&&(t=s=l),r=Kr(r),t===l?(t=r,r=0):t=Kr(t),s=s===l?r<t?1:-1:Kr(s),fd(r,t,s,e)}}function Vs(e){return function(r,t){return typeof r=="string"&&typeof t=="string"||(r=xr(r),t=xr(t)),e(r,t)}}function xl(e,r,t,s,i,a,u,d,p,x){var v=r&re,b=v?u:l,w=v?l:u,S=v?a:l,D=v?l:a;r|=v?We:Je,r&=~(v?Je:We),r&or||(r&=-4);var G=[e,r,i,S,b,D,w,d,p,x],T=t.apply(l,G);return ko(e)&&Rl(T,G),T.placeholder=s,Dl(T,e,r)}function Eo(e){var r=pe[e];return function(t,s){if(t=xr(t),s=s==null?0:De(W(s),292),s&&Da(t)){var i=(Q(t)+"e").split("e"),a=r(i[0]+"e"+(+i[1]+s));return i=(Q(a)+"e").split("e"),+(i[0]+"e"+(+i[1]-s))}return r(t)}}var Ad=ln&&1/As(new ln([,-0]))[1]==Ne?function(e){return new ln(e)}:Yo;function vl(e){return function(r){var t=Te(r);return t==ye?to(r):t==Oe?zc(r):Pc(r,e(r))}}function $r(e,r,t,s,i,a,u,d){var p=r&O;if(!p&&typeof e!="function")throw new fr(Y);var x=s?s.length:0;if(x||(r&=-97,s=i=l),u=u===l?u:ge(W(u),0),d=d===l?d:W(d),x-=i?i.length:0,r&Je){var v=s,b=i;s=i=l}var w=p?l:Do(e),S=[e,r,t,s,i,v,b,a,u,d];if(w&&Gd(S,w),e=S[0],r=S[1],t=S[2],s=S[3],i=S[4],d=S[9]=S[9]===l?p?0:e.length:ge(S[9]-x,0),!d&&r&(re|Ee)&&(r&=-25),!r||r==J)var D=Cd(e,r,t);else r==re||r==Ee?D=Sd(e,r,d):(r==We||r==(J|We))&&!i.length?D=Ed(e,r,t,s):D=Zs.apply(l,S);var G=w?Qa:Rl;return Dl(G(D,S),e,r)}function bl(e,r,t,s){return e===l||Cr(e,an[t])&&!V.call(s,t)?r:e}function wl(e,r,t,s,i,a){return ae(e)&&ae(r)&&(a.set(r,e),Ks(e,r,l,wl,a),a.delete(r)),e}function Rd(e){return qn(e)?l:e}function _l(e,r,t,s,i,a){var u=t&se,d=e.length,p=r.length;if(d!=p&&!(u&&p>d))return!1;var x=a.get(e),v=a.get(r);if(x&&v)return x==r&&v==e;var b=-1,w=!0,S=t&$?new Mt:l;for(a.set(e,r),a.set(r,e);++b<d;){var D=e[b],G=r[b];if(s)var T=u?s(G,D,b,r,e,a):s(D,G,b,e,r,a);if(T!==l){if(T)continue;w=!1;break}if(S){if(!Zi(r,function(K,X){if(!On(S,X)&&(D===K||i(D,K,t,s,a)))return S.push(X)})){w=!1;break}}else if(!(D===G||i(D,G,t,s,a))){w=!1;break}}return a.delete(e),a.delete(r),w}function Dd(e,r,t,s,i,a,u){switch(t){case Tr:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Et:return!(e.byteLength!=r.byteLength||!a(new ks(e),new ks(r)));case Dr:case Qe:case Nt:return Cr(+e,+r);case et:return e.name==r.name&&e.message==r.message;case rt:case tt:return e==r+"";case ye:var d=to;case Oe:var p=s&se;if(d||(d=As),e.size!=r.size&&!p)return!1;var x=u.get(e);if(x)return x==r;s|=$,u.set(e,r);var v=_l(d(e),d(r),s,i,a,u);return u.delete(e),v;case Ct:if(Mn)return Mn.call(e)==Mn.call(r)}return!1}function Td(e,r,t,s,i,a){var u=t&se,d=Ao(e),p=d.length,x=Ao(r),v=x.length;if(p!=v&&!u)return!1;for(var b=p;b--;){var w=d[b];if(!(u?w in r:V.call(r,w)))return!1}var S=a.get(e),D=a.get(r);if(S&&D)return S==r&&D==e;var G=!0;a.set(e,r),a.set(r,e);for(var T=u;++b<p;){w=d[b];var K=e[w],X=r[w];if(s)var nr=u?s(X,K,w,r,e,a):s(K,X,w,e,r,a);if(!(nr===l?K===X||i(K,X,t,s,a):nr)){G=!1;break}T||(T=w=="constructor")}if(G&&!T){var Ue=e.constructor,sr=r.constructor;Ue!=sr&&"constructor"in e&&"constructor"in r&&!(typeof Ue=="function"&&Ue instanceof Ue&&typeof sr=="function"&&sr instanceof sr)&&(G=!1)}return a.delete(e),a.delete(r),G}function Gr(e){return Uo(El(e,l,Ul),e+"")}function Ao(e){return Wa(e,we,Io)}function Ro(e){return Wa(e,Ke,jl)}var Do=Fs?function(e){return Fs.get(e)}:Yo;function ei(e){for(var r=e.name+"",t=cn[r],s=V.call(cn,r)?t.length:0;s--;){var i=t[s],a=i.func;if(a==null||a==e)return i.name}return r}function hn(e){var r=V.call(o,"placeholder")?o:e;return r.placeholder}function R(){var e=o.iteratee||qo;return e=e===qo?Ha:e,arguments.length?e(arguments[0],arguments[1]):e}function ri(e,r){var t=e.__data__;return Bd(r)?t[typeof r=="string"?"string":"hash"]:t.map}function To(e){for(var r=we(e),t=r.length;t--;){var s=r[t],i=e[s];r[t]=[s,i,Cl(i)]}return r}function Wt(e,r){var t=$c(e,r);return Ga(t)?t:l}function Id(e){var r=V.call(e,Ut),t=e[Ut];try{e[Ut]=l;var s=!0}catch{}var i=Is.call(e);return s&&(r?e[Ut]=t:delete e[Ut]),i}var Io=so?function(e){return e==null?[]:(e=te(e),at(so(e),function(r){return Aa.call(e,r)}))}:Zo,jl=so?function(e){for(var r=[];e;)lt(r,Io(e)),e=Ls(e);return r}:Zo,Te=ke;(io&&Te(new io(new ArrayBuffer(1)))!=Tr||Ln&&Te(new Ln)!=ye||oo&&Te(oo.resolve())!=yt||ln&&Te(new ln)!=Oe||Un&&Te(new Un)!=St)&&(Te=function(e){var r=ke(e),t=r==wr?e.constructor:l,s=t?$t(t):"";if(s)switch(s){case pu:return Tr;case gu:return ye;case mu:return yt;case xu:return Oe;case vu:return St}return r});function Od(e,r,t){for(var s=-1,i=t.length;++s<i;){var a=t[s],u=a.size;switch(a.type){case"drop":e+=u;break;case"dropRight":r-=u;break;case"take":r=De(r,e+u);break;case"takeRight":e=ge(e,r-u);break}}return{start:e,end:r}}function kd(e){var r=e.match(Ti);return r?r[1].split(Ii):[]}function Nl(e,r,t){r=ht(r,e);for(var s=-1,i=r.length,a=!1;++s<i;){var u=Lr(r[s]);if(!(a=e!=null&&t(e,u)))break;e=e[u]}return a||++s!=i?a:(i=e==null?0:e.length,!!i&&li(i)&&Hr(u,i)&&(F(e)||Gt(e)))}function Ld(e){var r=e.length,t=new e.constructor(r);return r&&typeof e[0]=="string"&&V.call(e,"index")&&(t.index=e.index,t.input=e.input),t}function yl(e){return typeof e.constructor=="function"&&!zn(e)?un(Ls(e)):{}}function Ud(e,r,t){var s=e.constructor;switch(r){case Et:return Co(e);case Dr:case Qe:return new s(+e);case Tr:return bd(e,t);case ar:case Xt:case At:case vn:case lr:case Ir:case C:case bn:case _r:return ol(e,t);case ye:return new s;case Nt:case tt:return new s(e);case rt:return wd(e);case Oe:return new s;case Ct:return _d(e)}}function Pd(e,r){var t=r.length;if(!t)return e;var s=t-1;return r[s]=(t>1?"& ":"")+r[s],r=r.join(t>2?", ":" "),e.replace(Di,`{
/* [wrapped with `+r+`] */
`)}function Md(e){return F(e)||Gt(e)||!!(Ra&&e&&e[Ra])}function Hr(e,r){var t=typeof e;return r=r??br,!!r&&(t=="number"||t!="symbol"&&Pi.test(e))&&e>-1&&e%1==0&&e<r}function Le(e,r,t){if(!ae(t))return!1;var s=typeof r;return(s=="number"?ze(t)&&Hr(r,t.length):s=="string"&&r in t)?Cr(t[r],e):!1}function Oo(e,r){if(F(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||tr(e)?!0:Si.test(e)||!ss.test(e)||r!=null&&e in te(r)}function Bd(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function ko(e){var r=ei(e),t=o[r];if(typeof t!="function"||!(r in q.prototype))return!1;if(e===t)return!0;var s=Do(t);return!!s&&e===s[0]}function Fd(e){return!!Ca&&Ca in e}var Wd=Ds?zr:Jo;function zn(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||an;return e===t}function Cl(e){return e===e&&!ae(e)}function Sl(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==l||e in te(t))}}function $d(e){var r=oi(e,function(s){return t.size===ne&&t.clear(),s}),t=r.cache;return r}function Gd(e,r){var t=e[1],s=r[1],i=t|s,a=i<(J|O|ee),u=s==ee&&t==re||s==ee&&t==$e&&e[7].length<=r[8]||s==(ee|$e)&&r[7].length<=r[8]&&t==re;if(!(a||u))return e;s&J&&(e[2]=r[2],i|=t&J?0:or);var d=r[3];if(d){var p=e[3];e[3]=p?ll(p,d,r[4]):d,e[4]=p?ct(e[3],Ar):r[4]}return d=r[5],d&&(p=e[5],e[5]=p?cl(p,d,r[6]):d,e[6]=p?ct(e[5],Ar):r[6]),d=r[7],d&&(e[7]=d),s&ee&&(e[8]=e[8]==null?r[8]:De(e[8],r[8])),e[9]==null&&(e[9]=r[9]),e[0]=r[0],e[1]=i,e}function Hd(e){var r=[];if(e!=null)for(var t in te(e))r.push(t);return r}function zd(e){return Is.call(e)}function El(e,r,t){return r=ge(r===l?e.length-1:r,0),function(){for(var s=arguments,i=-1,a=ge(s.length-r,0),u=g(a);++i<a;)u[i]=s[r+i];i=-1;for(var d=g(r+1);++i<r;)d[i]=s[i];return d[r]=t(u),Ve(e,this,d)}}function Al(e,r){return r.length<2?e:Ft(e,gr(r,0,-1))}function Kd(e,r){for(var t=e.length,s=De(r.length,t),i=He(e);s--;){var a=r[s];e[s]=Hr(a,t)?i[a]:l}return e}function Lo(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}var Rl=Tl(Qa),Kn=au||function(e,r){return he.setTimeout(e,r)},Uo=Tl(gd);function Dl(e,r,t){var s=r+"";return Uo(e,Pd(s,qd(kd(s),t)))}function Tl(e){var r=0,t=0;return function(){var s=du(),i=fe-(s-t);if(t=s,i>0){if(++r>=bt)return arguments[0]}else r=0;return e.apply(l,arguments)}}function ti(e,r){var t=-1,s=e.length,i=s-1;for(r=r===l?s:r;++t<r;){var a=vo(t,i),u=e[a];e[a]=e[t],e[t]=u}return e.length=r,e}var Il=$d(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(Ei,function(t,s,i,a){r.push(i?a.replace(os,"$1"):s||t)}),r});function Lr(e){if(typeof e=="string"||tr(e))return e;var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}function $t(e){if(e!=null){try{return Ts.call(e)}catch{}try{return e+""}catch{}}return""}function qd(e,r){return dr(Vn,function(t){var s="_."+t[0];r&t[1]&&!Ss(e,s)&&e.push(s)}),e.sort()}function Ol(e){if(e instanceof q)return e.clone();var r=new hr(e.__wrapped__,e.__chain__);return r.__actions__=He(e.__actions__),r.__index__=e.__index__,r.__values__=e.__values__,r}function Xd(e,r,t){(t?Le(e,r,t):r===l)?r=1:r=ge(W(r),0);var s=e==null?0:e.length;if(!s||r<1)return[];for(var i=0,a=0,u=g(Ms(s/r));i<s;)u[a++]=gr(e,i,i+=r);return u}function Yd(e){for(var r=-1,t=e==null?0:e.length,s=0,i=[];++r<t;){var a=e[r];a&&(i[s++]=a)}return i}function Zd(){var e=arguments.length;if(!e)return[];for(var r=g(e-1),t=arguments[0],s=e;s--;)r[s-1]=arguments[s];return lt(F(t)?He(t):[t],Se(r,1))}var Jd=H(function(e,r){return ce(e)?Fn(e,Se(r,1,ce,!0)):[]}),Qd=H(function(e,r){var t=mr(r);return ce(t)&&(t=l),ce(e)?Fn(e,Se(r,1,ce,!0),R(t,2)):[]}),Vd=H(function(e,r){var t=mr(r);return ce(t)&&(t=l),ce(e)?Fn(e,Se(r,1,ce,!0),l,t):[]});function ef(e,r,t){var s=e==null?0:e.length;return s?(r=t||r===l?1:W(r),gr(e,r<0?0:r,s)):[]}function rf(e,r,t){var s=e==null?0:e.length;return s?(r=t||r===l?1:W(r),r=s-r,gr(e,0,r<0?0:r)):[]}function tf(e,r){return e&&e.length?Xs(e,R(r,3),!0,!0):[]}function nf(e,r){return e&&e.length?Xs(e,R(r,3),!0):[]}function sf(e,r,t,s){var i=e==null?0:e.length;return i?(t&&typeof t!="number"&&Le(e,r,t)&&(t=0,s=i),Zu(e,r,t,s)):[]}function kl(e,r,t){var s=e==null?0:e.length;if(!s)return-1;var i=t==null?0:W(t);return i<0&&(i=ge(s+i,0)),Es(e,R(r,3),i)}function Ll(e,r,t){var s=e==null?0:e.length;if(!s)return-1;var i=s-1;return t!==l&&(i=W(t),i=t<0?ge(s+i,0):De(i,s-1)),Es(e,R(r,3),i,!0)}function Ul(e){var r=e==null?0:e.length;return r?Se(e,1):[]}function of(e){var r=e==null?0:e.length;return r?Se(e,Ne):[]}function af(e,r){var t=e==null?0:e.length;return t?(r=r===l?1:W(r),Se(e,r)):[]}function lf(e){for(var r=-1,t=e==null?0:e.length,s={};++r<t;){var i=e[r];s[i[0]]=i[1]}return s}function Pl(e){return e&&e.length?e[0]:l}function cf(e,r,t){var s=e==null?0:e.length;if(!s)return-1;var i=t==null?0:W(t);return i<0&&(i=ge(s+i,0)),tn(e,r,i)}function uf(e){var r=e==null?0:e.length;return r?gr(e,0,-1):[]}var df=H(function(e){var r=ie(e,No);return r.length&&r[0]===e[0]?ho(r):[]}),ff=H(function(e){var r=mr(e),t=ie(e,No);return r===mr(t)?r=l:t.pop(),t.length&&t[0]===e[0]?ho(t,R(r,2)):[]}),hf=H(function(e){var r=mr(e),t=ie(e,No);return r=typeof r=="function"?r:l,r&&t.pop(),t.length&&t[0]===e[0]?ho(t,l,r):[]});function pf(e,r){return e==null?"":cu.call(e,r)}function mr(e){var r=e==null?0:e.length;return r?e[r-1]:l}function gf(e,r,t){var s=e==null?0:e.length;if(!s)return-1;var i=s;return t!==l&&(i=W(t),i=i<0?ge(s+i,0):De(i,s-1)),r===r?qc(e,r,i):Es(e,xa,i,!0)}function mf(e,r){return e&&e.length?Xa(e,W(r)):l}var xf=H(Ml);function Ml(e,r){return e&&e.length&&r&&r.length?xo(e,r):e}function vf(e,r,t){return e&&e.length&&r&&r.length?xo(e,r,R(t,2)):e}function bf(e,r,t){return e&&e.length&&r&&r.length?xo(e,r,l,t):e}var wf=Gr(function(e,r){var t=e==null?0:e.length,s=lo(e,r);return Ja(e,ie(r,function(i){return Hr(i,t)?+i:i}).sort(al)),s});function _f(e,r){var t=[];if(!(e&&e.length))return t;var s=-1,i=[],a=e.length;for(r=R(r,3);++s<a;){var u=e[s];r(u,s,e)&&(t.push(u),i.push(s))}return Ja(e,i),t}function Po(e){return e==null?e:hu.call(e)}function jf(e,r,t){var s=e==null?0:e.length;return s?(t&&typeof t!="number"&&Le(e,r,t)?(r=0,t=s):(r=r==null?0:W(r),t=t===l?s:W(t)),gr(e,r,t)):[]}function Nf(e,r){return qs(e,r)}function yf(e,r,t){return wo(e,r,R(t,2))}function Cf(e,r){var t=e==null?0:e.length;if(t){var s=qs(e,r);if(s<t&&Cr(e[s],r))return s}return-1}function Sf(e,r){return qs(e,r,!0)}function Ef(e,r,t){return wo(e,r,R(t,2),!0)}function Af(e,r){var t=e==null?0:e.length;if(t){var s=qs(e,r,!0)-1;if(Cr(e[s],r))return s}return-1}function Rf(e){return e&&e.length?Va(e):[]}function Df(e,r){return e&&e.length?Va(e,R(r,2)):[]}function Tf(e){var r=e==null?0:e.length;return r?gr(e,1,r):[]}function If(e,r,t){return e&&e.length?(r=t||r===l?1:W(r),gr(e,0,r<0?0:r)):[]}function Of(e,r,t){var s=e==null?0:e.length;return s?(r=t||r===l?1:W(r),r=s-r,gr(e,r<0?0:r,s)):[]}function kf(e,r){return e&&e.length?Xs(e,R(r,3),!1,!0):[]}function Lf(e,r){return e&&e.length?Xs(e,R(r,3)):[]}var Uf=H(function(e){return ft(Se(e,1,ce,!0))}),Pf=H(function(e){var r=mr(e);return ce(r)&&(r=l),ft(Se(e,1,ce,!0),R(r,2))}),Mf=H(function(e){var r=mr(e);return r=typeof r=="function"?r:l,ft(Se(e,1,ce,!0),l,r)});function Bf(e){return e&&e.length?ft(e):[]}function Ff(e,r){return e&&e.length?ft(e,R(r,2)):[]}function Wf(e,r){return r=typeof r=="function"?r:l,e&&e.length?ft(e,l,r):[]}function Mo(e){if(!(e&&e.length))return[];var r=0;return e=at(e,function(t){if(ce(t))return r=ge(t.length,r),!0}),eo(r,function(t){return ie(e,Ji(t))})}function Bl(e,r){if(!(e&&e.length))return[];var t=Mo(e);return r==null?t:ie(t,function(s){return Ve(r,l,s)})}var $f=H(function(e,r){return ce(e)?Fn(e,r):[]}),Gf=H(function(e){return jo(at(e,ce))}),Hf=H(function(e){var r=mr(e);return ce(r)&&(r=l),jo(at(e,ce),R(r,2))}),zf=H(function(e){var r=mr(e);return r=typeof r=="function"?r:l,jo(at(e,ce),l,r)}),Kf=H(Mo);function qf(e,r){return nl(e||[],r||[],Bn)}function Xf(e,r){return nl(e||[],r||[],Gn)}var Yf=H(function(e){var r=e.length,t=r>1?e[r-1]:l;return t=typeof t=="function"?(e.pop(),t):l,Bl(e,t)});function Fl(e){var r=o(e);return r.__chain__=!0,r}function Zf(e,r){return r(e),e}function ni(e,r){return r(e)}var Jf=Gr(function(e){var r=e.length,t=r?e[0]:0,s=this.__wrapped__,i=function(a){return lo(a,e)};return r>1||this.__actions__.length||!(s instanceof q)||!Hr(t)?this.thru(i):(s=s.slice(t,+t+(r?1:0)),s.__actions__.push({func:ni,args:[i],thisArg:l}),new hr(s,this.__chain__).thru(function(a){return r&&!a.length&&a.push(l),a}))});function Qf(){return Fl(this)}function Vf(){return new hr(this.value(),this.__chain__)}function eh(){this.__values__===l&&(this.__values__=ec(this.value()));var e=this.__index__>=this.__values__.length,r=e?l:this.__values__[this.__index__++];return{done:e,value:r}}function rh(){return this}function th(e){for(var r,t=this;t instanceof $s;){var s=Ol(t);s.__index__=0,s.__values__=l,r?i.__wrapped__=s:r=s;var i=s;t=t.__wrapped__}return i.__wrapped__=e,r}function nh(){var e=this.__wrapped__;if(e instanceof q){var r=e;return this.__actions__.length&&(r=new q(this)),r=r.reverse(),r.__actions__.push({func:ni,args:[Po],thisArg:l}),new hr(r,this.__chain__)}return this.thru(Po)}function sh(){return tl(this.__wrapped__,this.__actions__)}var ih=Ys(function(e,r,t){V.call(e,t)?++e[t]:Wr(e,t,1)});function oh(e,r,t){var s=F(e)?ga:Yu;return t&&Le(e,r,t)&&(r=l),s(e,R(r,3))}function ah(e,r){var t=F(e)?at:Ba;return t(e,R(r,3))}var lh=hl(kl),ch=hl(Ll);function uh(e,r){return Se(si(e,r),1)}function dh(e,r){return Se(si(e,r),Ne)}function fh(e,r,t){return t=t===l?1:W(t),Se(si(e,r),t)}function Wl(e,r){var t=F(e)?dr:dt;return t(e,R(r,3))}function $l(e,r){var t=F(e)?Dc:Ma;return t(e,R(r,3))}var hh=Ys(function(e,r,t){V.call(e,t)?e[t].push(r):Wr(e,t,[r])});function ph(e,r,t,s){e=ze(e)?e:gn(e),t=t&&!s?W(t):0;var i=e.length;return t<0&&(t=ge(i+t,0)),ci(e)?t<=i&&e.indexOf(r,t)>-1:!!i&&tn(e,r,t)>-1}var gh=H(function(e,r,t){var s=-1,i=typeof r=="function",a=ze(e)?g(e.length):[];return dt(e,function(u){a[++s]=i?Ve(r,u,t):Wn(u,r,t)}),a}),mh=Ys(function(e,r,t){Wr(e,t,r)});function si(e,r){var t=F(e)?ie:za;return t(e,R(r,3))}function xh(e,r,t,s){return e==null?[]:(F(r)||(r=r==null?[]:[r]),t=s?l:t,F(t)||(t=t==null?[]:[t]),Ya(e,r,t))}var vh=Ys(function(e,r,t){e[t?0:1].push(r)},function(){return[[],[]]});function bh(e,r,t){var s=F(e)?Yi:ba,i=arguments.length<3;return s(e,R(r,4),t,i,dt)}function wh(e,r,t){var s=F(e)?Tc:ba,i=arguments.length<3;return s(e,R(r,4),t,i,Ma)}function _h(e,r){var t=F(e)?at:Ba;return t(e,ai(R(r,3)))}function jh(e){var r=F(e)?ka:hd;return r(e)}function Nh(e,r,t){(t?Le(e,r,t):r===l)?r=1:r=W(r);var s=F(e)?Hu:pd;return s(e,r)}function yh(e){var r=F(e)?zu:md;return r(e)}function Ch(e){if(e==null)return 0;if(ze(e))return ci(e)?sn(e):e.length;var r=Te(e);return r==ye||r==Oe?e.size:go(e).length}function Sh(e,r,t){var s=F(e)?Zi:xd;return t&&Le(e,r,t)&&(r=l),s(e,R(r,3))}var Eh=H(function(e,r){if(e==null)return[];var t=r.length;return t>1&&Le(e,r[0],r[1])?r=[]:t>2&&Le(r[0],r[1],r[2])&&(r=[r[0]]),Ya(e,Se(r,1),[])}),ii=ou||function(){return he.Date.now()};function Ah(e,r){if(typeof r!="function")throw new fr(Y);return e=W(e),function(){if(--e<1)return r.apply(this,arguments)}}function Gl(e,r,t){return r=t?l:r,r=e&&r==null?e.length:r,$r(e,ee,l,l,l,l,r)}function Hl(e,r){var t;if(typeof r!="function")throw new fr(Y);return e=W(e),function(){return--e>0&&(t=r.apply(this,arguments)),e<=1&&(r=l),t}}var Bo=H(function(e,r,t){var s=J;if(t.length){var i=ct(t,hn(Bo));s|=We}return $r(e,s,r,t,i)}),zl=H(function(e,r,t){var s=J|O;if(t.length){var i=ct(t,hn(zl));s|=We}return $r(r,s,e,t,i)});function Kl(e,r,t){r=t?l:r;var s=$r(e,re,l,l,l,l,l,r);return s.placeholder=Kl.placeholder,s}function ql(e,r,t){r=t?l:r;var s=$r(e,Ee,l,l,l,l,l,r);return s.placeholder=ql.placeholder,s}function Xl(e,r,t){var s,i,a,u,d,p,x=0,v=!1,b=!1,w=!0;if(typeof e!="function")throw new fr(Y);r=xr(r)||0,ae(t)&&(v=!!t.leading,b="maxWait"in t,a=b?ge(xr(t.maxWait)||0,r):a,w="trailing"in t?!!t.trailing:w);function S(ue){var Sr=s,qr=i;return s=i=l,x=ue,u=e.apply(qr,Sr),u}function D(ue){return x=ue,d=Kn(K,r),v?S(ue):u}function G(ue){var Sr=ue-p,qr=ue-x,hc=r-Sr;return b?De(hc,a-qr):hc}function T(ue){var Sr=ue-p,qr=ue-x;return p===l||Sr>=r||Sr<0||b&&qr>=a}function K(){var ue=ii();if(T(ue))return X(ue);d=Kn(K,G(ue))}function X(ue){return d=l,w&&s?S(ue):(s=i=l,u)}function nr(){d!==l&&sl(d),x=0,s=p=i=d=l}function Ue(){return d===l?u:X(ii())}function sr(){var ue=ii(),Sr=T(ue);if(s=arguments,i=this,p=ue,Sr){if(d===l)return D(p);if(b)return sl(d),d=Kn(K,r),S(p)}return d===l&&(d=Kn(K,r)),u}return sr.cancel=nr,sr.flush=Ue,sr}var Rh=H(function(e,r){return Pa(e,1,r)}),Dh=H(function(e,r,t){return Pa(e,xr(r)||0,t)});function Th(e){return $r(e,Yr)}function oi(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new fr(Y);var t=function(){var s=arguments,i=r?r.apply(this,s):s[0],a=t.cache;if(a.has(i))return a.get(i);var u=e.apply(this,s);return t.cache=a.set(i,u)||a,u};return t.cache=new(oi.Cache||Fr),t}oi.Cache=Fr;function ai(e){if(typeof e!="function")throw new fr(Y);return function(){var r=arguments;switch(r.length){case 0:return!e.call(this);case 1:return!e.call(this,r[0]);case 2:return!e.call(this,r[0],r[1]);case 3:return!e.call(this,r[0],r[1],r[2])}return!e.apply(this,r)}}function Ih(e){return Hl(2,e)}var Oh=vd(function(e,r){r=r.length==1&&F(r[0])?ie(r[0],er(R())):ie(Se(r,1),er(R()));var t=r.length;return H(function(s){for(var i=-1,a=De(s.length,t);++i<a;)s[i]=r[i].call(this,s[i]);return Ve(e,this,s)})}),Fo=H(function(e,r){var t=ct(r,hn(Fo));return $r(e,We,l,r,t)}),Yl=H(function(e,r){var t=ct(r,hn(Yl));return $r(e,Je,l,r,t)}),kh=Gr(function(e,r){return $r(e,$e,l,l,l,r)});function Lh(e,r){if(typeof e!="function")throw new fr(Y);return r=r===l?r:W(r),H(e,r)}function Uh(e,r){if(typeof e!="function")throw new fr(Y);return r=r==null?0:ge(W(r),0),H(function(t){var s=t[r],i=pt(t,0,r);return s&&lt(i,s),Ve(e,this,i)})}function Ph(e,r,t){var s=!0,i=!0;if(typeof e!="function")throw new fr(Y);return ae(t)&&(s="leading"in t?!!t.leading:s,i="trailing"in t?!!t.trailing:i),Xl(e,r,{leading:s,maxWait:r,trailing:i})}function Mh(e){return Gl(e,1)}function Bh(e,r){return Fo(yo(r),e)}function Fh(){if(!arguments.length)return[];var e=arguments[0];return F(e)?e:[e]}function Wh(e){return pr(e,be)}function $h(e,r){return r=typeof r=="function"?r:l,pr(e,be,r)}function Gh(e){return pr(e,Ie|be)}function Hh(e,r){return r=typeof r=="function"?r:l,pr(e,Ie|be,r)}function zh(e,r){return r==null||Ua(e,r,we(r))}function Cr(e,r){return e===r||e!==e&&r!==r}var Kh=Vs(fo),qh=Vs(function(e,r){return e>=r}),Gt=$a(function(){return arguments}())?$a:function(e){return le(e)&&V.call(e,"callee")&&!Aa.call(e,"callee")},F=g.isArray,Xh=ca?er(ca):rd;function ze(e){return e!=null&&li(e.length)&&!zr(e)}function ce(e){return le(e)&&ze(e)}function Yh(e){return e===!0||e===!1||le(e)&&ke(e)==Dr}var gt=lu||Jo,Zh=ua?er(ua):td;function Jh(e){return le(e)&&e.nodeType===1&&!qn(e)}function Qh(e){if(e==null)return!0;if(ze(e)&&(F(e)||typeof e=="string"||typeof e.splice=="function"||gt(e)||pn(e)||Gt(e)))return!e.length;var r=Te(e);if(r==ye||r==Oe)return!e.size;if(zn(e))return!go(e).length;for(var t in e)if(V.call(e,t))return!1;return!0}function Vh(e,r){return $n(e,r)}function ep(e,r,t){t=typeof t=="function"?t:l;var s=t?t(e,r):l;return s===l?$n(e,r,l,t):!!s}function Wo(e){if(!le(e))return!1;var r=ke(e);return r==et||r==es||typeof e.message=="string"&&typeof e.name=="string"&&!qn(e)}function rp(e){return typeof e=="number"&&Da(e)}function zr(e){if(!ae(e))return!1;var r=ke(e);return r==jt||r==rs||r==Ni||r==xn}function Zl(e){return typeof e=="number"&&e==W(e)}function li(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=br}function ae(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}function le(e){return e!=null&&typeof e=="object"}var Jl=da?er(da):sd;function tp(e,r){return e===r||po(e,r,To(r))}function np(e,r,t){return t=typeof t=="function"?t:l,po(e,r,To(r),t)}function sp(e){return Ql(e)&&e!=+e}function ip(e){if(Wd(e))throw new B(je);return Ga(e)}function op(e){return e===null}function ap(e){return e==null}function Ql(e){return typeof e=="number"||le(e)&&ke(e)==Nt}function qn(e){if(!le(e)||ke(e)!=wr)return!1;var r=Ls(e);if(r===null)return!0;var t=V.call(r,"constructor")&&r.constructor;return typeof t=="function"&&t instanceof t&&Ts.call(t)==tu}var $o=fa?er(fa):id;function lp(e){return Zl(e)&&e>=-9007199254740991&&e<=br}var Vl=ha?er(ha):od;function ci(e){return typeof e=="string"||!F(e)&&le(e)&&ke(e)==tt}function tr(e){return typeof e=="symbol"||le(e)&&ke(e)==Ct}var pn=pa?er(pa):ad;function cp(e){return e===l}function up(e){return le(e)&&Te(e)==St}function dp(e){return le(e)&&ke(e)==qt}var fp=Vs(mo),hp=Vs(function(e,r){return e<=r});function ec(e){if(!e)return[];if(ze(e))return ci(e)?Nr(e):He(e);if(kn&&e[kn])return Hc(e[kn]());var r=Te(e),t=r==ye?to:r==Oe?As:gn;return t(e)}function Kr(e){if(!e)return e===0?e:0;if(e=xr(e),e===Ne||e===-1/0){var r=e<0?-1:1;return r*Ht}return e===e?e:0}function W(e){var r=Kr(e),t=r%1;return r===r?t?r-t:r:0}function rc(e){return e?Bt(W(e),0,Ge):0}function xr(e){if(typeof e=="number")return e;if(tr(e))return Rr;if(ae(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=ae(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=wa(e);var t=Ui.test(e);return t||Dt.test(e)?Cs(e.slice(2),t?2:8):Li.test(e)?Rr:+e}function tc(e){return kr(e,Ke(e))}function pp(e){return e?Bt(W(e),-9007199254740991,br):e===0?e:0}function Q(e){return e==null?"":rr(e)}var gp=dn(function(e,r){if(zn(r)||ze(r)){kr(r,we(r),e);return}for(var t in r)V.call(r,t)&&Bn(e,t,r[t])}),nc=dn(function(e,r){kr(r,Ke(r),e)}),ui=dn(function(e,r,t,s){kr(r,Ke(r),e,s)}),mp=dn(function(e,r,t,s){kr(r,we(r),e,s)}),xp=Gr(lo);function vp(e,r){var t=un(e);return r==null?t:La(t,r)}var bp=H(function(e,r){e=te(e);var t=-1,s=r.length,i=s>2?r[2]:l;for(i&&Le(r[0],r[1],i)&&(s=1);++t<s;)for(var a=r[t],u=Ke(a),d=-1,p=u.length;++d<p;){var x=u[d],v=e[x];(v===l||Cr(v,an[x])&&!V.call(e,x))&&(e[x]=a[x])}return e}),wp=H(function(e){return e.push(l,wl),Ve(sc,l,e)});function _p(e,r){return ma(e,R(r,3),Or)}function jp(e,r){return ma(e,R(r,3),uo)}function Np(e,r){return e==null?e:co(e,R(r,3),Ke)}function yp(e,r){return e==null?e:Fa(e,R(r,3),Ke)}function Cp(e,r){return e&&Or(e,R(r,3))}function Sp(e,r){return e&&uo(e,R(r,3))}function Ep(e){return e==null?[]:zs(e,we(e))}function Ap(e){return e==null?[]:zs(e,Ke(e))}function Go(e,r,t){var s=e==null?l:Ft(e,r);return s===l?t:s}function Rp(e,r){return e!=null&&Nl(e,r,Ju)}function Ho(e,r){return e!=null&&Nl(e,r,Qu)}var Dp=gl(function(e,r,t){r!=null&&typeof r.toString!="function"&&(r=Is.call(r)),e[r]=t},Ko(qe)),Tp=gl(function(e,r,t){r!=null&&typeof r.toString!="function"&&(r=Is.call(r)),V.call(e,r)?e[r].push(t):e[r]=[t]},R),Ip=H(Wn);function we(e){return ze(e)?Oa(e):go(e)}function Ke(e){return ze(e)?Oa(e,!0):ld(e)}function Op(e,r){var t={};return r=R(r,3),Or(e,function(s,i,a){Wr(t,r(s,i,a),s)}),t}function kp(e,r){var t={};return r=R(r,3),Or(e,function(s,i,a){Wr(t,i,r(s,i,a))}),t}var Lp=dn(function(e,r,t){Ks(e,r,t)}),sc=dn(function(e,r,t,s){Ks(e,r,t,s)}),Up=Gr(function(e,r){var t={};if(e==null)return t;var s=!1;r=ie(r,function(a){return a=ht(a,e),s||(s=a.length>1),a}),kr(e,Ro(e),t),s&&(t=pr(t,Ie|ir|be,Rd));for(var i=r.length;i--;)_o(t,r[i]);return t});function Pp(e,r){return ic(e,ai(R(r)))}var Mp=Gr(function(e,r){return e==null?{}:ud(e,r)});function ic(e,r){if(e==null)return{};var t=ie(Ro(e),function(s){return[s]});return r=R(r),Za(e,t,function(s,i){return r(s,i[0])})}function Bp(e,r,t){r=ht(r,e);var s=-1,i=r.length;for(i||(i=1,e=l);++s<i;){var a=e==null?l:e[Lr(r[s])];a===l&&(s=i,a=t),e=zr(a)?a.call(e):a}return e}function Fp(e,r,t){return e==null?e:Gn(e,r,t)}function Wp(e,r,t,s){return s=typeof s=="function"?s:l,e==null?e:Gn(e,r,t,s)}var oc=vl(we),ac=vl(Ke);function $p(e,r,t){var s=F(e),i=s||gt(e)||pn(e);if(r=R(r,4),t==null){var a=e&&e.constructor;i?t=s?new a:[]:ae(e)?t=zr(a)?un(Ls(e)):{}:t={}}return(i?dr:Or)(e,function(u,d,p){return r(t,u,d,p)}),t}function Gp(e,r){return e==null?!0:_o(e,r)}function Hp(e,r,t){return e==null?e:rl(e,r,yo(t))}function zp(e,r,t,s){return s=typeof s=="function"?s:l,e==null?e:rl(e,r,yo(t),s)}function gn(e){return e==null?[]:ro(e,we(e))}function Kp(e){return e==null?[]:ro(e,Ke(e))}function qp(e,r,t){return t===l&&(t=r,r=l),t!==l&&(t=xr(t),t=t===t?t:0),r!==l&&(r=xr(r),r=r===r?r:0),Bt(xr(e),r,t)}function Xp(e,r,t){return r=Kr(r),t===l?(t=r,r=0):t=Kr(t),e=xr(e),Vu(e,r,t)}function Yp(e,r,t){if(t&&typeof t!="boolean"&&Le(e,r,t)&&(r=t=l),t===l&&(typeof r=="boolean"?(t=r,r=l):typeof e=="boolean"&&(t=e,e=l)),e===l&&r===l?(e=0,r=1):(e=Kr(e),r===l?(r=e,e=0):r=Kr(r)),e>r){var s=e;e=r,r=s}if(t||e%1||r%1){var i=Ta();return De(e+i*(r-e+ys("1e-"+((i+"").length-1))),r)}return vo(e,r)}var Zp=fn(function(e,r,t){return r=r.toLowerCase(),e+(t?lc(r):r)});function lc(e){return zo(Q(e).toLowerCase())}function cc(e){return e=Q(e),e&&e.replace(st,Bc).replace(js,"")}function Jp(e,r,t){e=Q(e),r=rr(r);var s=e.length;t=t===l?s:Bt(W(t),0,s);var i=t;return t-=r.length,t>=0&&e.slice(t,i)==r}function Qp(e){return e=Q(e),e&&Yt.test(e)?e.replace(wn,Fc):e}function Vp(e){return e=Q(e),e&&Ai.test(e)?e.replace(_n,"\\$&"):e}var eg=fn(function(e,r,t){return e+(t?"-":"")+r.toLowerCase()}),rg=fn(function(e,r,t){return e+(t?" ":"")+r.toLowerCase()}),tg=fl("toLowerCase");function ng(e,r,t){e=Q(e),r=W(r);var s=r?sn(e):0;if(!r||s>=r)return e;var i=(r-s)/2;return Qs(Bs(i),t)+e+Qs(Ms(i),t)}function sg(e,r,t){e=Q(e),r=W(r);var s=r?sn(e):0;return r&&s<r?e+Qs(r-s,t):e}function ig(e,r,t){e=Q(e),r=W(r);var s=r?sn(e):0;return r&&s<r?Qs(r-s,t)+e:e}function og(e,r,t){return t||r==null?r=0:r&&(r=+r),fu(Q(e).replace(jn,""),r||0)}function ag(e,r,t){return(t?Le(e,r,t):r===l)?r=1:r=W(r),bo(Q(e),r)}function lg(){var e=arguments,r=Q(e[0]);return e.length<3?r:r.replace(e[1],e[2])}var cg=fn(function(e,r,t){return e+(t?"_":"")+r.toLowerCase()});function ug(e,r,t){return t&&typeof t!="number"&&Le(e,r,t)&&(r=t=l),t=t===l?Ge:t>>>0,t?(e=Q(e),e&&(typeof r=="string"||r!=null&&!$o(r))&&(r=rr(r),!r&&nn(e))?pt(Nr(e),0,t):e.split(r,t)):[]}var dg=fn(function(e,r,t){return e+(t?" ":"")+zo(r)});function fg(e,r,t){return e=Q(e),t=t==null?0:Bt(W(t),0,e.length),r=rr(r),e.slice(t,t+r.length)==r}function hg(e,r,t){var s=o.templateSettings;t&&Le(e,r,t)&&(r=l),e=Q(e),r=ui({},r,s,bl);var i=ui({},r.imports,s.imports,bl),a=we(i),u=ro(i,a),d,p,x=0,v=r.interpolate||Jt,b="__p += '",w=no((r.escape||Jt).source+"|"+v.source+"|"+(v===ns?ki:Jt).source+"|"+(r.evaluate||Jt).source+"|$","g"),S="//# sourceURL="+(V.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++E+"]")+`
`;e.replace(w,function(T,K,X,nr,Ue,sr){return X||(X=nr),b+=e.slice(x,sr).replace(Mi,Wc),K&&(d=!0,b+=`' +
__e(`+K+`) +
'`),Ue&&(p=!0,b+=`';
`+Ue+`;
__p += '`),X&&(b+=`' +
((__t = (`+X+`)) == null ? '' : __t) +
'`),x=sr+T.length,T}),b+=`';
`;var D=V.call(r,"variable")&&r.variable;if(!D)b=`with (obj) {
`+b+`
}
`;else if(Oi.test(D))throw new B(Ur);b=(p?b.replace(Ce,""):b).replace(Rt,"$1").replace(Ci,"$1;"),b="function("+(D||"obj")+`) {
`+(D?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(d?", __e = _.escape":"")+(p?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+b+`return __p
}`;var G=dc(function(){return Z(a,S+"return "+b).apply(l,u)});if(G.source=b,Wo(G))throw G;return G}function pg(e){return Q(e).toLowerCase()}function gg(e){return Q(e).toUpperCase()}function mg(e,r,t){if(e=Q(e),e&&(t||r===l))return wa(e);if(!e||!(r=rr(r)))return e;var s=Nr(e),i=Nr(r),a=_a(s,i),u=ja(s,i)+1;return pt(s,a,u).join("")}function xg(e,r,t){if(e=Q(e),e&&(t||r===l))return e.slice(0,ya(e)+1);if(!e||!(r=rr(r)))return e;var s=Nr(e),i=ja(s,Nr(r))+1;return pt(s,0,i).join("")}function vg(e,r,t){if(e=Q(e),e&&(t||r===l))return e.replace(jn,"");if(!e||!(r=rr(r)))return e;var s=Nr(e),i=_a(s,Nr(r));return pt(s,i).join("")}function bg(e,r){var t=Zr,s=vr;if(ae(r)){var i="separator"in r?r.separator:i;t="length"in r?W(r.length):t,s="omission"in r?rr(r.omission):s}e=Q(e);var a=e.length;if(nn(e)){var u=Nr(e);a=u.length}if(t>=a)return e;var d=t-sn(s);if(d<1)return s;var p=u?pt(u,0,d).join(""):e.slice(0,d);if(i===l)return p+s;if(u&&(d+=p.length-d),$o(i)){if(e.slice(d).search(i)){var x,v=p;for(i.global||(i=no(i.source,Q(as.exec(i))+"g")),i.lastIndex=0;x=i.exec(v);)var b=x.index;p=p.slice(0,b===l?d:b)}}else if(e.indexOf(rr(i),d)!=d){var w=p.lastIndexOf(i);w>-1&&(p=p.slice(0,w))}return p+s}function wg(e){return e=Q(e),e&&nt.test(e)?e.replace(ts,Xc):e}var _g=fn(function(e,r,t){return e+(t?" ":"")+r.toUpperCase()}),zo=fl("toUpperCase");function uc(e,r,t){return e=Q(e),r=t?l:r,r===l?Gc(e)?Jc(e):kc(e):e.match(r)||[]}var dc=H(function(e,r){try{return Ve(e,l,r)}catch(t){return Wo(t)?t:new B(t)}}),jg=Gr(function(e,r){return dr(r,function(t){t=Lr(t),Wr(e,t,Bo(e[t],e))}),e});function Ng(e){var r=e==null?0:e.length,t=R();return e=r?ie(e,function(s){if(typeof s[1]!="function")throw new fr(Y);return[t(s[0]),s[1]]}):[],H(function(s){for(var i=-1;++i<r;){var a=e[i];if(Ve(a[0],this,s))return Ve(a[1],this,s)}})}function yg(e){return Xu(pr(e,Ie))}function Ko(e){return function(){return e}}function Cg(e,r){return e==null||e!==e?r:e}var Sg=pl(),Eg=pl(!0);function qe(e){return e}function qo(e){return Ha(typeof e=="function"?e:pr(e,Ie))}function Ag(e){return Ka(pr(e,Ie))}function Rg(e,r){return qa(e,pr(r,Ie))}var Dg=H(function(e,r){return function(t){return Wn(t,e,r)}}),Tg=H(function(e,r){return function(t){return Wn(e,t,r)}});function Xo(e,r,t){var s=we(r),i=zs(r,s);t==null&&!(ae(r)&&(i.length||!s.length))&&(t=r,r=e,e=this,i=zs(r,we(r)));var a=!(ae(t)&&"chain"in t)||!!t.chain,u=zr(e);return dr(i,function(d){var p=r[d];e[d]=p,u&&(e.prototype[d]=function(){var x=this.__chain__;if(a||x){var v=e(this.__wrapped__),b=v.__actions__=He(this.__actions__);return b.push({func:p,args:arguments,thisArg:e}),v.__chain__=x,v}return p.apply(e,lt([this.value()],arguments))})}),e}function Ig(){return he._===this&&(he._=nu),this}function Yo(){}function Og(e){return e=W(e),H(function(r){return Xa(r,e)})}var kg=So(ie),Lg=So(ga),Ug=So(Zi);function fc(e){return Oo(e)?Ji(Lr(e)):dd(e)}function Pg(e){return function(r){return e==null?l:Ft(e,r)}}var Mg=ml(),Bg=ml(!0);function Zo(){return[]}function Jo(){return!1}function Fg(){return{}}function Wg(){return""}function $g(){return!0}function Gg(e,r){if(e=W(e),e<1||e>br)return[];var t=Ge,s=De(e,Ge);r=R(r),e-=Ge;for(var i=eo(s,r);++t<e;)r(t);return i}function Hg(e){return F(e)?ie(e,Lr):tr(e)?[e]:He(Il(Q(e)))}function zg(e){var r=++ru;return Q(e)+r}var Kg=Js(function(e,r){return e+r},0),qg=Eo("ceil"),Xg=Js(function(e,r){return e/r},1),Yg=Eo("floor");function Zg(e){return e&&e.length?Hs(e,qe,fo):l}function Jg(e,r){return e&&e.length?Hs(e,R(r,2),fo):l}function Qg(e){return va(e,qe)}function Vg(e,r){return va(e,R(r,2))}function em(e){return e&&e.length?Hs(e,qe,mo):l}function rm(e,r){return e&&e.length?Hs(e,R(r,2),mo):l}var tm=Js(function(e,r){return e*r},1),nm=Eo("round"),sm=Js(function(e,r){return e-r},0);function im(e){return e&&e.length?Vi(e,qe):0}function om(e,r){return e&&e.length?Vi(e,R(r,2)):0}return o.after=Ah,o.ary=Gl,o.assign=gp,o.assignIn=nc,o.assignInWith=ui,o.assignWith=mp,o.at=xp,o.before=Hl,o.bind=Bo,o.bindAll=jg,o.bindKey=zl,o.castArray=Fh,o.chain=Fl,o.chunk=Xd,o.compact=Yd,o.concat=Zd,o.cond=Ng,o.conforms=yg,o.constant=Ko,o.countBy=ih,o.create=vp,o.curry=Kl,o.curryRight=ql,o.debounce=Xl,o.defaults=bp,o.defaultsDeep=wp,o.defer=Rh,o.delay=Dh,o.difference=Jd,o.differenceBy=Qd,o.differenceWith=Vd,o.drop=ef,o.dropRight=rf,o.dropRightWhile=tf,o.dropWhile=nf,o.fill=sf,o.filter=ah,o.flatMap=uh,o.flatMapDeep=dh,o.flatMapDepth=fh,o.flatten=Ul,o.flattenDeep=of,o.flattenDepth=af,o.flip=Th,o.flow=Sg,o.flowRight=Eg,o.fromPairs=lf,o.functions=Ep,o.functionsIn=Ap,o.groupBy=hh,o.initial=uf,o.intersection=df,o.intersectionBy=ff,o.intersectionWith=hf,o.invert=Dp,o.invertBy=Tp,o.invokeMap=gh,o.iteratee=qo,o.keyBy=mh,o.keys=we,o.keysIn=Ke,o.map=si,o.mapKeys=Op,o.mapValues=kp,o.matches=Ag,o.matchesProperty=Rg,o.memoize=oi,o.merge=Lp,o.mergeWith=sc,o.method=Dg,o.methodOf=Tg,o.mixin=Xo,o.negate=ai,o.nthArg=Og,o.omit=Up,o.omitBy=Pp,o.once=Ih,o.orderBy=xh,o.over=kg,o.overArgs=Oh,o.overEvery=Lg,o.overSome=Ug,o.partial=Fo,o.partialRight=Yl,o.partition=vh,o.pick=Mp,o.pickBy=ic,o.property=fc,o.propertyOf=Pg,o.pull=xf,o.pullAll=Ml,o.pullAllBy=vf,o.pullAllWith=bf,o.pullAt=wf,o.range=Mg,o.rangeRight=Bg,o.rearg=kh,o.reject=_h,o.remove=_f,o.rest=Lh,o.reverse=Po,o.sampleSize=Nh,o.set=Fp,o.setWith=Wp,o.shuffle=yh,o.slice=jf,o.sortBy=Eh,o.sortedUniq=Rf,o.sortedUniqBy=Df,o.split=ug,o.spread=Uh,o.tail=Tf,o.take=If,o.takeRight=Of,o.takeRightWhile=kf,o.takeWhile=Lf,o.tap=Zf,o.throttle=Ph,o.thru=ni,o.toArray=ec,o.toPairs=oc,o.toPairsIn=ac,o.toPath=Hg,o.toPlainObject=tc,o.transform=$p,o.unary=Mh,o.union=Uf,o.unionBy=Pf,o.unionWith=Mf,o.uniq=Bf,o.uniqBy=Ff,o.uniqWith=Wf,o.unset=Gp,o.unzip=Mo,o.unzipWith=Bl,o.update=Hp,o.updateWith=zp,o.values=gn,o.valuesIn=Kp,o.without=$f,o.words=uc,o.wrap=Bh,o.xor=Gf,o.xorBy=Hf,o.xorWith=zf,o.zip=Kf,o.zipObject=qf,o.zipObjectDeep=Xf,o.zipWith=Yf,o.entries=oc,o.entriesIn=ac,o.extend=nc,o.extendWith=ui,Xo(o,o),o.add=Kg,o.attempt=dc,o.camelCase=Zp,o.capitalize=lc,o.ceil=qg,o.clamp=qp,o.clone=Wh,o.cloneDeep=Gh,o.cloneDeepWith=Hh,o.cloneWith=$h,o.conformsTo=zh,o.deburr=cc,o.defaultTo=Cg,o.divide=Xg,o.endsWith=Jp,o.eq=Cr,o.escape=Qp,o.escapeRegExp=Vp,o.every=oh,o.find=lh,o.findIndex=kl,o.findKey=_p,o.findLast=ch,o.findLastIndex=Ll,o.findLastKey=jp,o.floor=Yg,o.forEach=Wl,o.forEachRight=$l,o.forIn=Np,o.forInRight=yp,o.forOwn=Cp,o.forOwnRight=Sp,o.get=Go,o.gt=Kh,o.gte=qh,o.has=Rp,o.hasIn=Ho,o.head=Pl,o.identity=qe,o.includes=ph,o.indexOf=cf,o.inRange=Xp,o.invoke=Ip,o.isArguments=Gt,o.isArray=F,o.isArrayBuffer=Xh,o.isArrayLike=ze,o.isArrayLikeObject=ce,o.isBoolean=Yh,o.isBuffer=gt,o.isDate=Zh,o.isElement=Jh,o.isEmpty=Qh,o.isEqual=Vh,o.isEqualWith=ep,o.isError=Wo,o.isFinite=rp,o.isFunction=zr,o.isInteger=Zl,o.isLength=li,o.isMap=Jl,o.isMatch=tp,o.isMatchWith=np,o.isNaN=sp,o.isNative=ip,o.isNil=ap,o.isNull=op,o.isNumber=Ql,o.isObject=ae,o.isObjectLike=le,o.isPlainObject=qn,o.isRegExp=$o,o.isSafeInteger=lp,o.isSet=Vl,o.isString=ci,o.isSymbol=tr,o.isTypedArray=pn,o.isUndefined=cp,o.isWeakMap=up,o.isWeakSet=dp,o.join=pf,o.kebabCase=eg,o.last=mr,o.lastIndexOf=gf,o.lowerCase=rg,o.lowerFirst=tg,o.lt=fp,o.lte=hp,o.max=Zg,o.maxBy=Jg,o.mean=Qg,o.meanBy=Vg,o.min=em,o.minBy=rm,o.stubArray=Zo,o.stubFalse=Jo,o.stubObject=Fg,o.stubString=Wg,o.stubTrue=$g,o.multiply=tm,o.nth=mf,o.noConflict=Ig,o.noop=Yo,o.now=ii,o.pad=ng,o.padEnd=sg,o.padStart=ig,o.parseInt=og,o.random=Yp,o.reduce=bh,o.reduceRight=wh,o.repeat=ag,o.replace=lg,o.result=Bp,o.round=nm,o.runInContext=f,o.sample=jh,o.size=Ch,o.snakeCase=cg,o.some=Sh,o.sortedIndex=Nf,o.sortedIndexBy=yf,o.sortedIndexOf=Cf,o.sortedLastIndex=Sf,o.sortedLastIndexBy=Ef,o.sortedLastIndexOf=Af,o.startCase=dg,o.startsWith=fg,o.subtract=sm,o.sum=im,o.sumBy=om,o.template=hg,o.times=Gg,o.toFinite=Kr,o.toInteger=W,o.toLength=rc,o.toLower=pg,o.toNumber=xr,o.toSafeInteger=pp,o.toString=Q,o.toUpper=gg,o.trim=mg,o.trimEnd=xg,o.trimStart=vg,o.truncate=bg,o.unescape=wg,o.uniqueId=zg,o.upperCase=_g,o.upperFirst=zo,o.each=Wl,o.eachRight=$l,o.first=Pl,Xo(o,function(){var e={};return Or(o,function(r,t){V.call(o.prototype,t)||(e[t]=r)}),e}(),{chain:!1}),o.VERSION=xe,dr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){o[e].placeholder=o}),dr(["drop","take"],function(e,r){q.prototype[e]=function(t){t=t===l?1:ge(W(t),0);var s=this.__filtered__&&!r?new q(this):this.clone();return s.__filtered__?s.__takeCount__=De(t,s.__takeCount__):s.__views__.push({size:De(t,Ge),type:e+(s.__dir__<0?"Right":"")}),s},q.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),dr(["filter","map","takeWhile"],function(e,r){var t=r+1,s=t==Jr||t==wt;q.prototype[e]=function(i){var a=this.clone();return a.__iteratees__.push({iteratee:R(i,3),type:t}),a.__filtered__=a.__filtered__||s,a}}),dr(["head","last"],function(e,r){var t="take"+(r?"Right":"");q.prototype[e]=function(){return this[t](1).value()[0]}}),dr(["initial","tail"],function(e,r){var t="drop"+(r?"":"Right");q.prototype[e]=function(){return this.__filtered__?new q(this):this[t](1)}}),q.prototype.compact=function(){return this.filter(qe)},q.prototype.find=function(e){return this.filter(e).head()},q.prototype.findLast=function(e){return this.reverse().find(e)},q.prototype.invokeMap=H(function(e,r){return typeof e=="function"?new q(this):this.map(function(t){return Wn(t,e,r)})}),q.prototype.reject=function(e){return this.filter(ai(R(e)))},q.prototype.slice=function(e,r){e=W(e);var t=this;return t.__filtered__&&(e>0||r<0)?new q(t):(e<0?t=t.takeRight(-e):e&&(t=t.drop(e)),r!==l&&(r=W(r),t=r<0?t.dropRight(-r):t.take(r-e)),t)},q.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},q.prototype.toArray=function(){return this.take(Ge)},Or(q.prototype,function(e,r){var t=/^(?:filter|find|map|reject)|While$/.test(r),s=/^(?:head|last)$/.test(r),i=o[s?"take"+(r=="last"?"Right":""):r],a=s||/^find/.test(r);i&&(o.prototype[r]=function(){var u=this.__wrapped__,d=s?[1]:arguments,p=u instanceof q,x=d[0],v=p||F(u),b=function(K){var X=i.apply(o,lt([K],d));return s&&w?X[0]:X};v&&t&&typeof x=="function"&&x.length!=1&&(p=v=!1);var w=this.__chain__,S=!!this.__actions__.length,D=a&&!w,G=p&&!S;if(!a&&v){u=G?u:new q(this);var T=e.apply(u,d);return T.__actions__.push({func:ni,args:[b],thisArg:l}),new hr(T,w)}return D&&G?e.apply(this,d):(T=this.thru(b),D?s?T.value()[0]:T.value():T)})}),dr(["pop","push","shift","sort","splice","unshift"],function(e){var r=Rs[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",s=/^(?:pop|shift)$/.test(e);o.prototype[e]=function(){var i=arguments;if(s&&!this.__chain__){var a=this.value();return r.apply(F(a)?a:[],i)}return this[t](function(u){return r.apply(F(u)?u:[],i)})}}),Or(q.prototype,function(e,r){var t=o[r];if(t){var s=t.name+"";V.call(cn,s)||(cn[s]=[]),cn[s].push({name:r,func:t})}}),cn[Zs(l,O).name]=[{name:"wrapper",func:l}],q.prototype.clone=bu,q.prototype.reverse=wu,q.prototype.value=_u,o.prototype.at=Jf,o.prototype.chain=Qf,o.prototype.commit=Vf,o.prototype.next=eh,o.prototype.plant=th,o.prototype.reverse=nh,o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=sh,o.prototype.first=o.prototype.head,kn&&(o.prototype[kn]=rh),o},on=Qc();Lt?((Lt.exports=on)._=on,Ki._=on):he._=on}).call(Vm)}(Zn,Zn.exports)),Zn.exports}var rx=ex();const jc=Mm(rx),tx=`
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideRight {
    from {
        transform: translateX(-100%);
    }
    to {
        transform: translateX(100%);
    }
}

.border-3 {
    border-width: 3px;
}

.animate-pulse-soft {
    animation: pulse-soft 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes pulse-soft {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.8;
    }
}

/* Animación de entrada suave para las cards */
@keyframes cardEntrance {
    from {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.card-entrance {
    animation: cardEntrance 0.5s ease-out forwards;
}

/* Tooltip styles */
.tooltip-trigger {
    position: relative;
}

.tooltip-trigger::before {
    content: attr(data-tooltip);
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    background-color: #1f2937;
    color: white;
    padding: 6px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s, visibility 0.2s;
    z-index: 50;
    pointer-events: none;
}

.tooltip-trigger::after {
    content: '';
    position: absolute;
    bottom: calc(100% + 2px);
    left: 50%;
    transform: translateX(-50%);
    border: 4px solid transparent;
    border-top-color: #1f2937;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s, visibility 0.2s;
    z-index: 50;
    pointer-events: none;
}

.tooltip-trigger:hover::before,
.tooltip-trigger:hover::after {
    opacity: 1;
    visibility: visible;
}

/* Custom tooltip animations */
@keyframes tooltipSlideIn {
    from {
        opacity: 0;
        transform: translateY(5px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.custom-tooltip-enter {
    animation: tooltipSlideIn 0.2s ease-out forwards;
}

/* Enhanced button hover effects */
.action-button {
    transition: all 0.2s ease-in-out;
    position: relative;
    overflow: hidden;
}

.action-button::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.3s ease, height 0.3s ease;
}

.action-button:hover::before {
    width: 100px;
    height: 100px;
}

.action-button:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}
`;if(typeof document<"u"){const y=document.createElement("style");y.type="text/css",y.innerText=tx,document.head.appendChild(y)}function B0({apartments:y,brands:me,models:l,systems:xe,name_devices:ve,filters:je}){var Sn,En,gs,An,Rn,Dn,Tn,ms,xs,vs,In,bs,ws,_s,js,en,Ns;const{auth:Y}=ra().props;console.log("=== COMPONENT RENDERED ==="),console.log("Apartments data:",y),console.log("Building info:",ra().props),console.log("USER ROLE DEBUG:",(Sn=Y.user)==null?void 0:Sn.role),console.log("USER ROLES ARRAY:",(En=Y.user)==null?void 0:En.roles),console.log("IS OWNER OR DOORMAN (role):",((gs=Y.user)==null?void 0:gs.role)==="owner"||((An=Y.user)==null?void 0:An.role)==="doorman"),console.log("IS OWNER OR DOORMAN (roles array):",((Dn=(Rn=Y.user)==null?void 0:Rn.roles)==null?void 0:Dn.includes("owner"))||((ms=(Tn=Y.user)==null?void 0:Tn.roles)==null?void 0:ms.includes("doorman"))),console.log("=== END COMPONENT DEBUG ===");const[Ur,Pr]=L.useState([]),[ne,Ar]=L.useState({}),[Ie,ir]=L.useState({}),[be,se]=L.useState((je==null?void 0:je.search)||""),[$,J]=L.useState(!1),[O,or]=L.useState(()=>{if(typeof window<"u"){const c=new URLSearchParams(window.location.search),h=c.get("sort_by"),_=c.get("sort_dir");if(h&&_)return[{id:h,desc:_==="desc"}]}return[{id:"order",desc:!1}]}),[re,Ee]=L.useState(!1),[We,Je]=L.useState(!1),[ee,$e]=L.useState(null),[Yr,Zr]=L.useState(null),[vr,bt]=L.useState(null),[fe,Jr]=L.useState(null),[Mr,wt]=L.useState([]),[Ne,br]=L.useState([]),[Ht,Rr]=L.useState(!1),[Ge,_t]=L.useState(!1),[zt,Vn]=L.useState(null),[Qr,Vr]=L.useState(!1),[Ni,Dr]=L.useState(!1),[Qe,es]=L.useState(null),[et,jt]=L.useState(null),[rs,ye]=L.useState(),[Nt,Kt]=L.useState(!1),[wr,yt]=L.useState(!1),[xn,rt]=L.useState(null),[Oe,tt]=L.useState(!1),[Ct,yi]=L.useState(0),[St,qt]=L.useState(!1),[Et,Tr]=L.useState(!1),[ar,Xt]=L.useState(null),[At,vn]=L.useState([]),[lr,Ir]=L.useState(!1),{building:C,all_buildings:bn,googleMapsApiKey:_r}=ra().props,{data:Ce,setData:Rt,post:Ci,delete:ts,processing:wn,errors:nt,reset:Yt}=pc({id:null,name:"",ubicacion:"",order:0,tenants:[]}),oe=pc({device_id:"",category:"",title:"",description:"",member_id:"",tenant_id:"",priority:"medium"}),Zt=L.useRef(null);L.useEffect(()=>{console.log("=== BUILDING CHANGED IN USEEFFECT ==="),console.log("Building ID:",C.id),console.log("Building name:",C.name),console.log("Building location_link:",C.location_link),console.log("Full building object:",C),yi(c=>(console.log("MapKey changed from",c,"to",c+1),c+1)),console.log("=== END BUILDING CHANGE ===")},[C]);const ns=L.useCallback(jc.debounce(c=>{J(!0);const h=window.location.pathname+window.location.search,_=new URL(h,window.location.origin),E=document.activeElement===Zt.current;c.trim()?_.searchParams.set("search",c.trim()):_.searchParams.delete("search"),_.searchParams.set("page","1"),Pe.visit(_.toString(),{preserveState:!0,preserveScroll:!0,onFinish:()=>{J(!1),E&&Zt.current&&Zt.current.focus()}})},500),[]),ss=c=>{se(c),ns(c)},Si=()=>!jc.isEqual(Ce,rs),Ei=c=>{c.preventDefault();const h=new FormData,_=fi();_["X-CSRF-TOKEN"]&&h.append("_token",_["X-CSRF-TOKEN"]),h.append("name",Ce.name),h.append("ubicacion",Ce.ubicacion),h.append("order",Ce.order.toString()),Ce.tenants.forEach((E,j)=>{h.append(`tenants[${j}][name]`,E.name),h.append(`tenants[${j}][email]`,E.email),h.append(`tenants[${j}][phone]`,E.phone),E.photo&&h.append(`tenants[${j}][photo]`,E.photo),E.id&&h.append(`tenants[${j}][id]`,E.id.toString())}),Ci(route("buildings.apartments.store",C.id),{forceFormData:!0,preserveScroll:!0,preserveState:!1,onSuccess:()=>{Yt(),ye(void 0),Ee(!1),k.success("Apartment created successfully")},onError:E=>{Object.values(E).forEach(j=>k.error(j))}})},_n=c=>{var _;const h={id:c.id,name:c.name,ubicacion:c.ubicacion,order:c.order||0,tenants:((_=c.tenants)==null?void 0:_.map(E=>({id:E.id,name:E.name||"",email:E.email||"",phone:E.phone||"",photo:null,photoPreview:E.photo||""})))||[]};Rt(h),ye(h),$e(c),Ee(!0)},Ai=c=>{if(c.preventDefault(),!Ce.id)return;const h=new FormData,_=fi();_["X-CSRF-TOKEN"]&&h.append("_token",_["X-CSRF-TOKEN"]),h.append("_method","PUT"),h.append("name",Ce.name),h.append("ubicacion",Ce.ubicacion),h.append("order",Ce.order.toString()),Ce.tenants.forEach((E,j)=>{E.id&&h.append(`tenants[${j}][id]`,E.id.toString()),h.append(`tenants[${j}][name]`,E.name),h.append(`tenants[${j}][email]`,E.email),h.append(`tenants[${j}][phone]`,E.phone),E.photo&&h.append(`tenants[${j}][photo]`,E.photo)}),Pe.post(route("apartments.update",Ce.id),h,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{Yt(),ye(void 0),Ee(!1),$e(null),k.success("Apartment updated successfully")},onError:E=>{Object.values(E).forEach(j=>k.error(j))}})},jn=()=>{const c={id:null,name:"",ubicacion:"",order:0,tenants:[]};Yt(),ye(c),$e(null),Ee(!0)},Ri=c=>{$e(c),Je(!0)},Di=()=>{if(!ee){k.error("No apartment selected for deletion");return}console.log("=== APARTMENT DELETE DEBUG ==="),console.log("Attempting to delete apartment:",ee),console.log("Route:",route("apartments.destroy",ee.id)),console.log("=== END APARTMENT DELETE DEBUG ==="),ts(route("apartments.destroy",ee.id),{preserveScroll:!0,onSuccess:c=>{console.log("Apartment delete success:",c),Je(!1),$e(null),k.success("Apartment deleted successfully")},onError:c=>{if(console.error("=== APARTMENT DELETION ERROR DETAILS ==="),console.error("Full error object:",c),console.error("Error type:",typeof c),console.error("Error keys:",Object.keys(c||{})),c&&typeof c=="object"){const h=[];c.error&&h.push(c.error),c.message&&h.push(c.message),c.errors&&Object.values(c.errors).forEach(_=>{Array.isArray(_)?h.push(..._):h.push(_)}),h.length>0?k.error(`Error deleting apartment: ${h.join(", ")}`):k.error("Error deleting apartment. Unknown error format.")}else typeof c=="string"?k.error(`Error deleting apartment: ${c}`):k.error("Error deleting apartment. Check console for details.");console.error("=== END APARTMENT DELETION ERROR ===")},onFinish:()=>{console.log("Apartment deletion request finished")}})},Ti=(c,h)=>{bt(c),Jr(h),wt(h.devices||[]),br(h.shared_devices||[]),Rr(!0)},Ii=c=>{Vn(c),_t(!0)},is=c=>{var _,E,j,U,M;console.log("=== DEVICE SELECTED ==="),console.log("Selected device:",c),console.log("Selected tenant:",fe),console.log("Selected apartment for ticket creation:",Qe),console.log("User roles:",(_=Y.user)==null?void 0:_.roles),console.log("=== END DEVICE SELECTED ==="),jt(c),oe.setData("device_id",c.id.toString()),((j=(E=Y.user)==null?void 0:E.roles)==null?void 0:j.includes("super-admin"))||((M=(U=Y.user)==null?void 0:U.roles)==null?void 0:M.includes("technical"))?(oe.setData("tenant_id",(fe==null?void 0:fe.id.toString())||""),oe.setData("member_id","")):(oe.setData("member_id",(fe==null?void 0:fe.id.toString())||""),oe.setData("tenant_id","")),Vr(!1),Dr(!0)},Oi=c=>{c.preventDefault(),oe.post("/tickets",{preserveScroll:!0,onSuccess:()=>{Dr(!1),oe.reset(),es(null),jt(null),k.success("Ticket created successfully!")},onError:()=>{k.error("Error creating ticket. Please try again.")}})},os=c=>{if(console.log("=== GENERATING EMBED URL ==="),console.log("Input location_link:",c),console.log("Building ID:",C==null?void 0:C.id),console.log("Google Maps API Key:",_r?"Present":"Missing"),!(c!=null&&c.trim()))return console.warn("No location link provided"),"";if(!_r)return console.warn("No Google Maps API Key provided"),"";const h=c.trim();if(h.includes("/embed"))return console.log("Using existing embed URL:",h),h;const _=h.match(/^(-?\d+\.?\d*),\s*(-?\d+\.?\d*)$/);if(_){const j=parseFloat(_[1]),U=parseFloat(_[2]);if(j>=-90&&j<=90&&U>=-180&&U<=180){const M=`https://www.google.com/maps/embed/v1/place?key=${_r}&q=${j},${U}&zoom=17`;return console.log("Generated embed URL for coordinates WITH PIN:",M),M}else console.warn("Invalid coordinates:",{lat:j,lng:U})}if(/maps\.app\.goo\.gl|goo\.gl\/maps/.test(h)){const j=`https://www.google.com/maps/embed/v1/place?key=${_r}&q=${encodeURIComponent(h)}`;return console.log("Generated embed URL for short link (fallback as search):",j),j}if(h.includes("google.com/maps")){const j=h.match(/pb=([^&]+)/);if(j){const A=`https://www.google.com/maps/embed?pb=${j[1]}`;return console.log("Generated embed URL from pb parameter:",A),A}const U=h.match(/@(-?\d+\.?\d*),(-?\d+\.?\d*)/);if(U){const A=parseFloat(U[1]),z=parseFloat(U[2]);if(A>=-90&&A<=90&&z>=-180&&z<=180){const de=`https://www.google.com/maps/embed/v1/place?key=${_r}&q=${A},${z}&zoom=17`;return console.log("Generated embed URL from @ coordinates WITH PIN:",de),de}}const M=h.match(/place\/([^/?#]+)/);if(M){const A=M[1],z=`https://www.google.com/maps/embed/v1/place?key=${_r}&place_id=${A}`;return console.log("Generated embed URL for place ID:",z),z}}const E=`https://www.google.com/maps/embed/v1/place?key=${_r}&q=${encodeURIComponent(h)}`;return console.log("Fallback embed URL (address or query):",E),E},ki=async c=>{Zr(c.id);try{Pe.put(route("apartments.update-status",c.id),{status:!c.status},{preserveScroll:!0,onSuccess:()=>{k.success("Status updated successfully")},onError:h=>{console.error("Error updating status:",h),k.error("Error updating status")},onFinish:()=>{Zr(null)}})}catch(h){console.error("Connection error:",h),k.error("Connection error"),Zr(null)}},as=c=>{if(c.preventDefault(),!xn){k.error("Please select a file");return}const h=new FormData,_=fi();_["X-CSRF-TOKEN"]&&h.append("_token",_["X-CSRF-TOKEN"]),h.append("file",xn),tt(!0),Pe.post(route("buildings.apartments.bulk-upload",C.id),h,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{yt(!1),rt(null),k.success("Apartments uploaded successfully")},onError:E=>{Object.values(E).forEach(j=>k.error(j))},onFinish:()=>{tt(!1)}})},Li=c=>{var _;const h=(_=c.target.files)==null?void 0:_[0];if(h){if(!h.name.endsWith(".xlsx")&&!h.name.endsWith(".xls")){k.error("Please select an Excel file (.xlsx or .xls)");return}rt(h)}},Ui=()=>{const c=document.createElement("a");c.href="/resources/apartments_template.xlsx",c.download="apartments_template.xlsx",c.target="_blank",document.body.appendChild(c),c.click(),document.body.removeChild(c)},ls=[{accessorKey:"order",header:({column:c})=>n.jsxs(I,{variant:"ghost",onClick:()=>c.toggleSorting(c.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold text-left justify-start hover:bg-transparent hover:text-primary-foreground",children:["Order",c.getIsSorted()==="asc"?n.jsx(Me,{className:"ml-2 h-4 w-4 rotate-180"}):c.getIsSorted()==="desc"?n.jsx(Me,{className:"ml-2 h-4 w-4"}):n.jsx(Me,{className:"ml-2 h-4 w-4 opacity-20"})]}),cell:({row:c})=>{const h=c.getValue("order");return n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full text-primary-foreground font-medium text-xs",children:h||0})})}},{accessorKey:"name",header:({column:c})=>n.jsxs(I,{variant:"ghost",onClick:()=>c.toggleSorting(c.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold text-left justify-start hover:bg-transparent hover:text-primary-foreground",children:["Apartment",c.getIsSorted()==="asc"?n.jsx(Me,{className:"ml-2 h-4 w-4 rotate-180"}):c.getIsSorted()==="desc"?n.jsx(Me,{className:"ml-2 h-4 w-4"}):n.jsx(Me,{className:"ml-2 h-4 w-4 opacity-20"})]}),cell:({row:c})=>n.jsx("div",{className:"font-medium",children:c.getValue("name")})},{id:"tenants_count",accessorFn:c=>{var h;return((h=c.tenants)==null?void 0:h.length)||0},header:({column:c})=>n.jsxs(I,{variant:"ghost",onClick:()=>c.toggleSorting(c.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold text-left justify-start hover:bg-transparent  hover:text-primary-foreground",children:[n.jsx(Qn,{className:"mr-2 h-4 w-4"}),"Members",c.getIsSorted()==="asc"?n.jsx(Me,{className:"ml-2 h-4 w-4 rotate-180"}):c.getIsSorted()==="desc"?n.jsx(Me,{className:"ml-2 h-4 w-4"}):n.jsx(Me,{className:"ml-2 h-4 w-4 opacity-20"})]}),cell:({row:c})=>{var _;const h=c.original;return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-corporate-gold/10 text-corporate-gold",children:n.jsx(Qn,{className:"w-4 h-4"})}),n.jsx("span",{className:"font-medium",children:((_=h.tenants)==null?void 0:_.length)||0}),n.jsx("span",{className:"text-muted-foreground text-sm",children:"members"})]})}},{accessorKey:"status",header:({column:c})=>n.jsxs(I,{variant:"ghost",onClick:()=>c.toggleSorting(c.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold text-left justify-start hover:bg-transparent  hover:text-primary-foreground",children:["Status",c.getIsSorted()==="asc"?n.jsx(Me,{className:"ml-2 h-4 w-4 rotate-180"}):c.getIsSorted()==="desc"?n.jsx(Me,{className:"ml-2 h-4 w-4"}):n.jsx(Me,{className:"ml-2 h-4 w-4 opacity-20"})]}),cell:({row:c})=>{const h=c.original;return n.jsx(vm,{checked:h.status,disabled:Yr===h.id,onCheckedChange:()=>ki(h),className:"data-[state=checked]:bg-green-500"})}},{id:"actions",enableHiding:!1,cell:({row:c})=>{const h=c.original;return n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(mt,{children:[n.jsx(xt,{asChild:!0,children:n.jsx(I,{variant:"ghost",size:"icon",className:"action-button hover:bg-green-50 hover:text-green-600 transition-all duration-200 h-8 w-8",onClick:()=>Tt("apartment"),children:n.jsx(Ac,{className:"h-3.5 w-3.5"})})}),n.jsx(vt,{children:n.jsx("p",{children:"Export NinjaOne devices"})})]}),n.jsxs(mt,{children:[n.jsx(xt,{asChild:!0,children:n.jsx(I,{variant:"ghost",size:"icon",className:"action-button hover:bg-amber-50 hover:text-amber-600 transition-all duration-200 h-8 w-8",onClick:()=>_n(h),children:n.jsx(na,{className:"h-3.5 w-3.5"})})}),n.jsx(vt,{children:n.jsx("p",{children:"Edit apartment"})})]}),n.jsxs(mt,{children:[n.jsx(xt,{asChild:!0,children:n.jsx(I,{variant:"ghost",size:"icon",className:"action-button hover:bg-red-50 hover:text-red-600 transition-all duration-200 h-8 w-8",onClick:()=>Ri(h),children:n.jsx(vc,{className:"h-3.5 w-3.5"})})}),n.jsx(vt,{children:n.jsx("p",{children:"Delete apartment"})})]})]})}}],Dt=c=>{const h=window.location.pathname+window.location.search,_=new URL(h,window.location.origin);_.searchParams.set("page",c.toString()),Pe.visit(_.toString(),{preserveState:!0,preserveScroll:!0})},Pi=c=>{const h=typeof c=="function"?c(O):c;or(h);const _=window.location.pathname+window.location.search,E=new URL(_,window.location.origin);if(h.length>0){const j=h[0];E.searchParams.set("sort_by",j.id),E.searchParams.set("sort_dir",j.desc?"desc":"asc")}else E.searchParams.set("sort_by","order"),E.searchParams.set("sort_dir","asc");E.searchParams.set("page","1"),Pe.visit(E.toString(),{preserveState:!0,preserveScroll:!0})},st=fm({data:y.data,columns:ls,onSortingChange:Pi,onColumnFiltersChange:Pr,getCoreRowModel:hm(),manualSorting:!0,onColumnVisibilityChange:Ar,onRowSelectionChange:ir,manualPagination:!0,pageCount:y.meta.last_page,state:{sorting:O,columnFilters:Ur,columnVisibility:ne,rowSelection:Ie,pagination:{pageIndex:y.meta.current_page-1,pageSize:y.meta.per_page}}}),Jt=()=>{const c=st.getAllColumns().filter(A=>A.getIsVisible()&&A.id!=="actions").map(A=>({id:A.id,header:typeof A.columnDef.header=="string"?A.columnDef.header:A.id.charAt(0).toUpperCase()+A.id.slice(1)})),h=c.map(A=>A.header).join(",")+`
`,_=y.data.map(A=>c.map(z=>{var de;return z.id==="status"?A.status?"Active":"Inactive":z.id==="tenants_count"?((de=A.tenants)==null?void 0:de.length)||0:z.id==="name"?A.name:z.id==="ubicacion"&&A.ubicacion||""}).join(",")).join(`
`),E=h+_,j=new Blob([E],{type:"text/csv;charset=utf-8;"}),U=URL.createObjectURL(j),M=document.createElement("a");M.href=U,M.download=`apartments_${new Date().toISOString().split("T")[0]}${je!=null&&je.search?`_${je.search}`:""}.csv`,document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(U),k.success("CSV exported successfully!")},Mi=async()=>{try{const c=new um.Workbook,h=c.addWorksheet("Apartments"),_=st.getAllColumns().filter(M=>M.getIsVisible()&&M.id!=="actions").map(M=>({id:M.id,header:typeof M.columnDef.header=="string"?M.columnDef.header:M.id.charAt(0).toUpperCase()+M.id.slice(1)})),E=h.addRow(_.map(M=>M.header));E.font={bold:!0},E.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE0E0E0"}},y.data.forEach(M=>{const A=_.map(z=>{var de;return z.id==="status"?M.status?"Active":"Inactive":z.id==="tenants_count"?((de=M.tenants)==null?void 0:de.length)||0:z.id==="name"?M.name:z.id==="ubicacion"&&M.ubicacion||""});h.addRow(A)}),h.columns.forEach(M=>{M.header&&(M.width=Math.max(M.header.toString().length,...h.getColumn(M.number).values.slice(1).map(A=>(A==null?void 0:A.toString().length)||0))+2)}),h.eachRow({includeEmpty:!1},M=>{M.eachCell({includeEmpty:!1},A=>{A.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})});const j=await c.xlsx.writeBuffer(),U=new Blob([j],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});dm.saveAs(U,`apartments_${new Date().toISOString().split("T")[0]}${je!=null&&je.search?`_${je.search}`:""}.xlsx`),k.success("Excel file exported successfully!")}catch(c){console.error("Error exporting to Excel:",c),k.error("Error exporting to Excel. Please try again.")}},Tt=async c=>{var h,_,E,j,U,M;try{let A="",z={};switch(c){case"all":A=route("devices.export.ninjaone.all"),z={},k.info("Exporting all NinjaOne devices...");break;case"building":A=route("devices.export.ninjaone.building"),z={building_id:C.id},k.info(`Exporting NinjaOne devices for building: ${C.name}...`);break;case"apartment":A=route("devices.export.ninjaone.apartments"),z={building_id:C.id,apartment_ids:y.data.map(he=>he.id)},k.info(`Exporting NinjaOne devices by apartments for building: ${C.name}...`);break}console.log("=== EXPORT NINJAONE DEBUG ==="),console.log("Export type:",c),console.log("URL:",A),console.log("Data:",z),console.log("Building:",C),console.log("=== END DEBUG ===");const de=await xi.post(A,z,{responseType:"blob",headers:{"Content-Type":"application/json",Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),ys=new Blob([de.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Cs=window.URL.createObjectURL(ys),ot=document.createElement("a");ot.href=Cs;let rn="";switch(c){case"all":rn=`ninjaone-devices-all-${new Date().toISOString().split("T")[0]}.xlsx`;break;case"building":rn=`ninjaone-devices-building-${C.name.replace(/\s+/g,"-")}-${new Date().toISOString().split("T")[0]}.xlsx`;break;case"apartment":rn=`ninjaone-devices-apartments-${C.name.replace(/\s+/g,"-")}-${new Date().toISOString().split("T")[0]}.xlsx`;break}ot.setAttribute("download",rn),document.body.appendChild(ot),ot.click(),ot.remove(),window.URL.revokeObjectURL(Cs),k.success("NinjaOne devices exported successfully!")}catch(A){console.error("=== EXPORT ERROR DEBUG ==="),console.error("Full error:",A),console.error("Error response:",A.response),console.error("Error data:",(h=A.response)==null?void 0:h.data),console.error("Error status:",(_=A.response)==null?void 0:_.status),console.error("Error message:",A.message),console.error("=== END ERROR DEBUG ===");let z="Error exporting NinjaOne devices. Please try again.";if(((E=A.response)==null?void 0:E.status)===404)z="Export route not found. Please contact support.";else if(((j=A.response)==null?void 0:j.status)===403)z="You do not have permission to export NinjaOne devices.";else if(((U=A.response)==null?void 0:U.status)===500)z="Server error occurred while exporting. Please try again later.";else if((M=A.response)!=null&&M.data)try{const de=await A.response.data.text();z=JSON.parse(de).message||z}catch(de){console.error("Could not parse error response:",de)}k.error(z)}},Bi=async(c,h)=>{try{let _="",E={},j="";h||(c?(_=route("devices.export.ninjaone.apartment.members"),E={apartment_id:c},j="Exporting NinjaOne devices for apartment members..."):(_=route("devices.export.ninjaone.building.members"),E={building_id:C.id},j=`Exporting NinjaOne devices for all members in building: ${C.name}...`)),k.info(j);const U=await xi.post(_,E,{responseType:"blob"}),M=new Blob([U.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),A=window.URL.createObjectURL(M),z=document.createElement("a");z.href=A;let de="";h||(c?de=`ninjaone-devices-apartment-${c}-members-${new Date().toISOString().split("T")[0]}.xlsx`:de=`ninjaone-devices-building-${C.name.replace(/\s+/g,"-")}-members-${new Date().toISOString().split("T")[0]}.xlsx`),z.setAttribute("download",de),document.body.appendChild(z),z.click(),z.remove(),window.URL.revokeObjectURL(A),k.success("Members NinjaOne devices exported successfully!")}catch(_){console.error("Error exporting members NinjaOne devices:",_),k.error("Error exporting members NinjaOne devices. Please try again.")}},[Fi,Qt]=L.useState(!1),[Ae,It]=L.useState(null),cs=c=>{It(c),Qt(!0)},Wi=c=>{c.preventDefault();const h=new FormData,_=fi();_["X-CSRF-TOKEN"]&&h.append("_token",_["X-CSRF-TOKEN"]),h.append("_method","PUT"),h.append("owner[id]",Ae.id.toString()),h.append("owner[name]",Ae.name),h.append("owner[email]",Ae.email),h.append("owner[phone]",Ae.phone),Pe.post(route("buildings.update-owner",C.id),h,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{Qt(!1),k.success("Superintendent updated!")},onError:()=>{k.error("Error updating superintendent")}})},[$i,Vt]=L.useState(!1),[Gi,Ot]=L.useState(!1),[us,kt]=L.useState(!1),[P,Re]=L.useState(null),[cr,jr]=L.useState(!1),ds=()=>{Re({id:0,name:"",email:"",phone:"",shift:""}),Vt(!0)},Hi=c=>{Re(c),Ot(!0)},fs=c=>{Re(c),kt(!0)},hs=c=>{c.preventDefault(),jr(!0),console.log("=== DOORMAN CREATION DEBUG ==="),console.log("doormanData:",P),console.log("Building ID:",C.id);const h={_method:"PUT",action:"create_doorman",doorman:{name:P.name,email:P.email,phone:P.phone||"",shift:P.shift}};console.log("Post data:",h),console.log("=== END DEBUG ==="),Pe.post(route("buildings.update",C.id),h,{preserveScroll:!0,onSuccess:()=>{Vt(!1),Re(null),k.success("Doorman created successfully!")},onError:_=>{console.error("Doorman creation errors:",_),k.error("Error creating doorman")},onFinish:()=>{jr(!1)}})},Nn=c=>{c.preventDefault(),jr(!0),console.log("=== DOORMAN UPDATE DEBUG ==="),console.log("doormanData:",P),console.log("Building ID:",C.id);const h={_method:"PUT",action:"update_doorman",doorman:{id:P.id,name:P.name,email:P.email,phone:P.phone||"",shift:P.shift}};console.log("Update data:",h),console.log("=== END UPDATE DEBUG ==="),Pe.post(route("buildings.update",C.id),h,{preserveScroll:!0,onSuccess:()=>{Ot(!1),Re(null),k.success("Doorman updated successfully!")},onError:_=>{console.error("Doorman update errors:",_),k.error("Error updating doorman")},onFinish:()=>{jr(!1)}})},zi=()=>{if(!P){k.error("No doorman selected for deletion");return}jr(!0),console.log("=== DOORMAN DELETE DEBUG ==="),console.log("doormanData:",P),console.log("Building ID:",C.id);const c={_method:"PUT",action:"delete_doorman",doorman:{id:P.id}};console.log("Delete data:",c),console.log("Route:",route("buildings.update",C.id)),console.log("=== END DELETE DEBUG ==="),Pe.post(route("buildings.update",C.id),c,{preserveScroll:!0,onSuccess:h=>{console.log("Delete success response:",h),kt(!1),Re(null),k.success("Doorman deleted successfully!")},onError:h=>{console.error("Doorman deletion errors:",h),h.message?k.error(`Error deleting doorman: ${h.message}`):h["doorman.id"]?k.error(`Validation error: ${h["doorman.id"]}`):typeof h=="string"?k.error(`Error deleting doorman: ${h}`):k.error("Error deleting doorman. Check console for details.")},onFinish:()=>{jr(!1)}})},ps=c=>{Xt(c),qt(!0)},yn=()=>{ar&&(Ir(!0),Pe.post(route("tenants.reset-password",ar.id),{},{preserveScroll:!0,onSuccess:()=>{qt(!1),Xt(null),k.success("Password reset successfully! Email notification sent.")},onError:c=>{console.error("Password reset errors:",c),k.error("Error resetting password. Please try again.")},onFinish:()=>{Ir(!1)}}))},Cn=()=>{if(At.length===0){k.error("Please select at least one tenant");return}Ir(!0),Pe.post(route("tenants.bulk-reset-passwords"),{tenant_ids:At},{preserveScroll:!0,onSuccess:()=>{Tr(!1),vn([]),k.success("Bulk password reset completed!")},onError:c=>{console.error("Bulk reset errors:",c),k.error("Error in bulk password reset. Please try again.")},onFinish:()=>{Ir(!1)}})},it=()=>{Ir(!0),Pe.post(route("buildings.reset-passwords",C.id),{},{preserveScroll:!0,onSuccess:()=>{k.success("All building passwords reset successfully!")},onError:c=>{console.error("Building reset errors:",c),k.error("Error resetting building passwords. Please try again.")},onFinish:()=>{Ir(!1)}})};return n.jsx(ym,{children:n.jsxs(am,{breadcrumbs:sx,children:[n.jsx(cm,{title:"Apartments"}),n.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[n.jsx(Yn,{className:"w-full border-none py-0 shadow-none",children:n.jsx(gi,{className:"p-0",children:n.jsx(Sm,{buildings:bn,selectedId:C.id,onChange:c=>{console.log("=== BUILDING COMBOBOX ONCHANGE CALLED ==="),console.log("New building ID:",c),console.log("Current building ID:",C.id),console.log("Route that will be called:",route("buildings.apartments",c)),console.log("=== CALLING ROUTER.VISIT ==="),Pe.visit(route("buildings.apartments",c))}})})}),n.jsx("div",{className:"flex flex-col sm:flex-row justify-end items-start sm:items-center gap-4",children:n.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[n.jsxs(I,{onClick:jn,className:"flex items-center gap-2",children:[n.jsx(xc,{className:"w-5 h-5"}),n.jsx("span",{className:"hidden sm:block",children:"New Apartment"})]}),n.jsxs(I,{onClick:()=>yt(!0),variant:"outline",className:"flex items-center gap-2",children:[n.jsx(Bm,{className:"w-5 h-5"}),n.jsx("span",{className:"hidden sm:block",children:"Bulk Upload"})]}),(((vs=(xs=Y.user)==null?void 0:xs.roles)==null?void 0:vs.includes("super-admin"))||((bs=(In=Y.user)==null?void 0:In.roles)==null?void 0:bs.includes("owner"))||((_s=(ws=Y.user)==null?void 0:ws.roles)==null?void 0:_s.includes("doorman")))&&n.jsxs(Qo,{children:[n.jsx(Vo,{asChild:!0,children:n.jsxs(I,{variant:"outline",className:"flex items-center gap-2 border-orange-300 hover:bg-orange-500 hover:text-white",disabled:lr,children:[n.jsx(aa,{className:"w-5 h-5"}),n.jsx("span",{className:"hidden sm:block",children:"Reset Passwords"}),n.jsx(Me,{className:"ml-1 h-4 w-4"})]})}),n.jsx(ea,{align:"end",children:n.jsxs(di,{onClick:it,children:[n.jsx(aa,{className:"mr-2 h-4 w-4"}),"Reset All Building Passwords"]})})]})]})}),n.jsxs(Be,{open:re,onOpenChange:c=>{!c&&Si()?Kt(!0):Ee(c)},children:[n.jsx(Fe,{className:"w-full max-w-none sm:max-w-2xl mx-0 sm:mx-4 p-0 overflow-hidden",children:n.jsxs("div",{className:"overflow-y-auto px-6 py-8",style:{maxHeight:"90vh"},children:[n.jsxs(Ye,{className:"mb-6",children:[n.jsx(Ze,{className:"text-2xl",children:ee?"Edit Apartment":"Create New Apartment"}),n.jsx(Er,{children:ee?"Update the apartment information":"Fill in the required fields to create a new apartment"})]}),n.jsxs(yc,{defaultValue:"apartment",className:"w-full",children:[n.jsxs(Cc,{className:"grid w-full grid-cols-2",children:[n.jsx(Jn,{value:"apartment",children:"Apartment"}),n.jsx(Jn,{value:"tenant",children:"Members"})]}),n.jsxs("form",{onSubmit:ee?Ai:Ei,children:[n.jsxs(mc,{value:"apartment",className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_e,{htmlFor:"name",children:["Apartment Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Xe,{id:"name",value:Ce.name,onChange:c=>Rt("name",c.target.value),className:`h-11 mt-2 ${nt.name?"border-red-500":""}`,required:!0}),nt.name&&n.jsx("p",{className:"text-sm text-red-500",children:nt.name})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_e,{htmlFor:"ubicacion",children:"Location"}),n.jsx(gc,{id:"ubicacion",value:Ce.ubicacion,onChange:c=>Rt("ubicacion",c.target.value),rows:3,className:"mt-2"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_e,{htmlFor:"order",children:["Order ",n.jsx("span",{className:"text-muted-foreground",children:"(optional)"})]}),n.jsx(Xe,{id:"order",type:"number",min:"0",value:Ce.order,onChange:c=>Rt("order",parseInt(c.target.value)||0),className:"h-11 mt-2",placeholder:"Enter display order (0 = first)"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Use this to control the order in which apartments are displayed. Lower numbers appear first."}),nt.order&&n.jsx("p",{className:"text-sm text-red-500",children:nt.order})]})]}),n.jsx(mc,{value:"tenant",className:"space-y-6",children:n.jsx("div",{className:"h-[400px] max-h-[400px] overflow-y-auto",children:n.jsx(Em,{tenants:Ce.tenants,onTenantsChange:c=>Rt("tenants",c),errors:nt,apartmentId:ee==null?void 0:ee.id,onExportMembersNinjaOne:c=>Bi(c)})})}),n.jsxs("div",{className:" px-6 py-4 bg-card flex justify-end gap-4",children:[n.jsx(I,{type:"button",variant:"outline",className:"h-12",onClick:()=>Ee(!1),children:"Cancel"}),n.jsx(I,{type:"submit",disabled:wn,className:"h-12",children:wn?ee?"Updating...":"Creating...":ee?"Update Apartment":"Create Apartment"})]})]})]})]})}),n.jsx(Be,{open:Nt,onOpenChange:Kt,children:n.jsxs(Fe,{children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Do you have unsaved changes?"}),n.jsx(Er,{children:"You have pending changes to the form. Are you sure you want to exit without saving?"})]}),n.jsxs(Xr,{children:[n.jsx(I,{variant:"outline",onClick:()=>Kt(!1),children:"Cancel"}),n.jsx(I,{variant:"destructive",onClick:()=>{Ee(!1),Kt(!1),Yt(),ye(void 0)},children:"Discard changes"})]})]})})]}),n.jsx(Be,{open:We,onOpenChange:Je,children:n.jsxs(Fe,{children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Confirm Deletion"}),n.jsxs(Er,{children:["Are you sure you want to delete the apartment ",n.jsx("strong",{children:ee==null?void 0:ee.name}),"? This action cannot be undone."]})]}),n.jsxs(Xr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>Je(!1),children:"Cancel"}),n.jsx(I,{type:"button",variant:"destructive",onClick:Di,children:"Delete"})]})]})}),n.jsx(Be,{open:Ht,onOpenChange:Rr,children:n.jsx(Fe,{className:"min-w-3xl",children:n.jsx(Cm,{onClose:()=>{Rr(!1),Pe.reload()},visible:Ht,tenantName:fe||void 0,devices:Mr,shareDevice:Ne,brands:me,models:l,systems:xe,name_devices:ve,apartmentId:(vr==null?void 0:vr.id)||0,tenantId:(fe==null?void 0:fe.id)||0,tenants:(vr==null?void 0:vr.tenants)||[]})})}),n.jsx(Qm,{isOpen:Ge,onClose:()=>{_t(!1),Vn(null)},tenant:zt}),n.jsx(Be,{open:wr,onOpenChange:yt,children:n.jsxs(Fe,{className:"w-full max-w-md",children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Bulk Upload Apartments"}),n.jsx(Er,{children:"Upload an Excel file with apartments and their members information"})]}),n.jsxs("form",{onSubmit:as,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_e,{htmlFor:"excel-file",children:["Excel File ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Xe,{id:"excel-file",type:"file",accept:".xlsx,.xls",onChange:Li,className:"h-11 mt-2",required:!0}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Supported formats: .xlsx, .xls"})]}),n.jsxs("div",{className:"bg-corporate-gold/10 dark:bg-corporate-gold/20 border border-corporate-gold/20 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-corporate-gold dark:text-corporate-gold-light mb-2",children:"Excel Format Required:"}),n.jsxs("ul",{className:"text-sm text-corporate-dark-brown dark:text-corporate-gold-light/80 space-y-1",children:[n.jsxs("li",{children:["• ",n.jsx("strong",{children:"apartment:"})," Apartment name"]}),n.jsxs("li",{children:["• ",n.jsx("strong",{children:"order:"})," Apartment order (optional, default: 0)"]}),n.jsxs("li",{children:["• ",n.jsx("strong",{children:"name:"})," Member name"]}),n.jsxs("li",{children:["• ",n.jsx("strong",{children:"email:"})," Member email"]}),n.jsxs("li",{children:["• ",n.jsx("strong",{children:"phone:"})," Member phone"]})]}),n.jsx("div",{className:"mt-3 p-2 bg-corporate-warm/10 border border-corporate-warm/20 rounded text-sm",children:n.jsxs("p",{className:"text-corporate-dark-brown dark:text-corporate-gold-light/80",children:[n.jsx("strong",{children:"Limitations:"})," Maximum 1000 rows, 10MB file size"]})}),n.jsx(I,{type:"button",variant:"link",className:"text-corporate-gold p-0 h-auto mt-2 hover:text-corporate-warm",onClick:Ui,children:"Download Template"})]}),n.jsxs(Xr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>yt(!1),disabled:Oe,children:"Cancel"}),n.jsx(I,{type:"submit",disabled:Oe||!xn,children:Oe?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):"Upload"})]})]})]})}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[n.jsxs("div",{className:"w-full lg:w-4/12 space-y-6",children:[C.owner&&n.jsx(Yn,{className:"overflow-hidden !p-0 border-2 border-corporate-gold/20 hover:border-corporate-gold/40 transition-all duration-300 hover:shadow-xl group bg-gradient-to-br from-white to-corporate-gold/5 dark:from-dark-brown to-corporate-gold/10",children:n.jsxs(gi,{className:"p-0",children:[n.jsxs("div",{className:"bg-gradient-to-r from-corporate-gold/15 via-corporate-gold/10 to-corporate-gold/5 dark:from-corporate-gold/25 dark:via-corporate-gold/15 dark:to-corporate-gold/10 p-4 border-b border-corporate-gold/20 relative overflow-hidden flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 text-corporate-gold dark:text-corporate-gold-light relative z-10",children:[n.jsx(ta,{className:"w-4 h-4"}),n.jsx("span",{className:"font-bold text-sm",children:"Superintendent"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsx(I,{size:"icon",variant:"ghost",onClick:()=>C.owner&&cs({id:1,name:C.owner.name,email:C.owner.email,phone:C.owner.phone}),children:n.jsx(na,{className:"w-4 h-4"})})})]}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-start gap-5",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:`/storage/${C.owner.photo}`,alt:C.owner.name,className:"w-20 h-20 rounded-full object-cover border-3 border-corporate-gold/30 shadow-lg group-hover:border-corporate-gold/50 transition-all duration-300 group-hover:shadow-xl",onError:c=>{c.currentTarget.src="/images/default-user.png"}}),n.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-corporate-gold/40 opacity-0 group-hover:opacity-100 group-hover:scale-110 transition-all duration-300"})]}),n.jsx("div",{className:"absolute -bottom-2 -right-2 w-7 h-7 bg-gradient-to-br from-corporate-warm via-corporate-gold to-corporate-dark-brown rounded-full border-3 border-background shadow-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:n.jsx(Fm,{className:"w-4 h-4 text-white"})})]}),n.jsxs("div",{className:"flex-1 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-foreground group-hover:text-corporate-gold transition-colors",children:C.owner.name}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("div",{className:"w-2 h-2 bg-corporate-gold rounded-full animate-pulse"}),n.jsx("p",{className:"text-sm text-muted-foreground font-semibold",children:"Property Owner"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("a",{href:`mailto:${C.owner.email}`,className:"flex items-center gap-3 text-sm group/item hover:bg-corporate-gold/5 px-3 rounded-lg transition-all duration-300 cursor-pointer border border-transparent hover:border-corporate-gold/20",children:[n.jsx("a",{href:`mailto:${C.owner.email}`,className:"w-8 h-8 rounded-full bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 flex items-center justify-center group-hover/item:from-corporate-gold/30 group-hover/item:to-corporate-warm/30 transition-all duration-300 group-hover/item:scale-110",children:n.jsx(ia,{className:"w-4 h-4 text-corporate-gold dark:text-corporate-gold-light"})}),n.jsx("span",{className:"text-muted-foreground group-hover/item:text-foreground font-medium flex-1",children:C.owner.email})]}),n.jsxs("a",{href:`tel:${C.owner.phone}`,className:"flex items-center gap-3 text-sm group/item hover:bg-corporate-gold/5 px-3 rounded-lg transition-all duration-300 cursor-pointer border border-transparent hover:border-corporate-gold/20",children:[n.jsx("a",{href:`tel:${C.owner.phone}`,className:"w-8 h-8 rounded-full bg-gradient-to-br from-corporate-warm/20 to-corporate-gold/20 flex items-center justify-center group-hover/item:from-corporate-warm/30 group-hover/item:to-corporate-gold/30 transition-all duration-300 group-hover/item:scale-110",children:n.jsx(oa,{className:"w-4 h-4 text-corporate-warm dark:text-corporate-gold-light"})}),n.jsx("span",{className:"text-muted-foreground group-hover/item:text-foreground font-medium flex-1",children:C.owner.phone})]})]})]})]})})]})}),n.jsx(Be,{open:Fi,onOpenChange:Qt,children:n.jsxs(Fe,{children:[n.jsx(Ye,{children:n.jsx(Ze,{children:"Edit Superintendent"})}),n.jsxs("form",{onSubmit:Wi,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(_e,{children:"Name"}),n.jsx(Xe,{value:(Ae==null?void 0:Ae.name)||"",onChange:c=>It(h=>h?{...h,name:c.target.value}:null),placeholder:"Name"})]}),n.jsxs("div",{children:[n.jsx(_e,{children:"Email"}),n.jsx(Xe,{value:(Ae==null?void 0:Ae.email)||"",onChange:c=>It(h=>h?{...h,email:c.target.value}:null),placeholder:"Email"})]}),n.jsxs("div",{children:[n.jsx(_e,{children:"Phone"}),n.jsx(Xe,{value:(Ae==null?void 0:Ae.phone)||"",onChange:c=>It(h=>h?{...h,phone:c.target.value}:null),placeholder:"Phone"})]}),n.jsxs(Xr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>Qt(!1),children:"Cancel"}),n.jsx(I,{type:"submit",children:"Save"})]})]})]})}),n.jsx(Be,{open:$i,onOpenChange:Vt,children:n.jsxs(Fe,{children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Add New Doorman"}),n.jsx(Er,{children:"Fill in the information for the new doorman"})]}),n.jsxs("form",{onSubmit:hs,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(_e,{htmlFor:"doorman-name",children:["Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Xe,{id:"doorman-name",value:(P==null?void 0:P.name)||"",onChange:c=>Re(h=>h?{...h,name:c.target.value}:null),placeholder:"Enter doorman's name",required:!0})]}),n.jsxs("div",{children:[n.jsxs(_e,{htmlFor:"doorman-email",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Xe,{id:"doorman-email",type:"email",value:(P==null?void 0:P.email)||"",onChange:c=>Re(h=>h?{...h,email:c.target.value}:null),placeholder:"Enter doorman's email",required:!0})]}),n.jsxs("div",{children:[n.jsx(_e,{htmlFor:"doorman-phone",children:"Phone"}),n.jsx(Xe,{id:"doorman-phone",value:(P==null?void 0:P.phone)||"",onChange:c=>Re(h=>h?{...h,phone:c.target.value}:null),placeholder:"Enter doorman's phone"})]}),n.jsxs("div",{children:[n.jsxs(_e,{htmlFor:"doorman-shift",children:["Shift ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{id:"doorman-shift",value:(P==null?void 0:P.shift)||"",onChange:c=>Re(h=>h?{...h,shift:c.target.value}:null),className:"w-full h-11 px-3 rounded-md border border-input bg-background text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",required:!0,children:[n.jsx("option",{value:"",children:"Select shift"}),n.jsx("option",{value:"morning",children:"Morning"}),n.jsx("option",{value:"afternoon",children:"Afternoon"}),n.jsx("option",{value:"night",children:"Night"})]})]}),n.jsxs(Xr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>Vt(!1),disabled:cr,children:"Cancel"}),n.jsx(I,{type:"submit",disabled:cr,children:cr?"Creating...":"Create Doorman"})]})]})]})}),n.jsx(Be,{open:Gi,onOpenChange:Ot,children:n.jsxs(Fe,{children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Edit Doorman"}),n.jsx(Er,{children:"Update the doorman's information"})]}),n.jsxs("form",{onSubmit:Nn,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(_e,{htmlFor:"edit-doorman-name",children:["Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Xe,{id:"edit-doorman-name",value:(P==null?void 0:P.name)||"",onChange:c=>Re(h=>h?{...h,name:c.target.value}:null),placeholder:"Enter doorman's name",required:!0})]}),n.jsxs("div",{children:[n.jsxs(_e,{htmlFor:"edit-doorman-email",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Xe,{id:"edit-doorman-email",type:"email",value:(P==null?void 0:P.email)||"",onChange:c=>Re(h=>h?{...h,email:c.target.value}:null),placeholder:"Enter doorman's email",required:!0})]}),n.jsxs("div",{children:[n.jsx(_e,{htmlFor:"edit-doorman-phone",children:"Phone"}),n.jsx(Xe,{id:"edit-doorman-phone",value:(P==null?void 0:P.phone)||"",onChange:c=>Re(h=>h?{...h,phone:c.target.value}:null),placeholder:"Enter doorman's phone"})]}),n.jsxs("div",{children:[n.jsxs(_e,{htmlFor:"edit-doorman-shift",children:["Shift ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{id:"edit-doorman-shift",value:(P==null?void 0:P.shift)||"",onChange:c=>Re(h=>h?{...h,shift:c.target.value}:null),className:"w-full h-11 px-3 rounded-md border border-input bg-background text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",required:!0,children:[n.jsx("option",{value:"",children:"Select shift"}),n.jsx("option",{value:"morning",children:"Morning"}),n.jsx("option",{value:"afternoon",children:"Afternoon"}),n.jsx("option",{value:"night",children:"Night"})]})]}),n.jsxs(Xr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>Ot(!1),disabled:cr,children:"Cancel"}),n.jsx(I,{type:"submit",disabled:cr,children:cr?"Updating...":"Update Doorman"})]})]})]})}),n.jsx(Be,{open:us,onOpenChange:kt,children:n.jsxs(Fe,{children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Delete Doorman"}),n.jsxs(Er,{children:["Are you sure you want to delete ",n.jsx("strong",{children:P==null?void 0:P.name}),"? This action cannot be undone."]})]}),n.jsxs(Xr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>kt(!1),disabled:cr,children:"Cancel"}),n.jsx(I,{type:"button",variant:"destructive",onClick:zi,disabled:cr,children:cr?"Deleting...":"Delete Doorman"})]})]})}),n.jsxs("div",{className:"space-y-4 w-full",children:[n.jsxs("div",{className:"flex items-center gap-3 px-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-corporate-gold dark:text-corporate-gold-light",children:[n.jsx(ta,{className:"w-5 h-5"}),n.jsx("h3",{className:"text-lg font-bold",children:"Doormen"})]}),n.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-corporate-gold/30 to-transparent"}),n.jsxs("span",{className:"text-xs text-muted-foreground bg-corporate-gold/10 border border-corporate-gold/20 px-2 py-1 rounded-full font-medium",children:[((js=C.doormen)==null?void 0:js.length)||0," ",(((en=C.doormen)==null?void 0:en.length)||0)===1?"Guard":"Guards"]}),n.jsxs(I,{size:"sm",variant:"outline",onClick:ds,className:"ml-2",children:[n.jsx(xc,{className:"w-4 h-4"})," Add Doorman"]})]}),C.doormen&&C.doormen.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.doormen.map((c,h)=>n.jsxs(Yn,{className:"group !p-0 overflow-hidden border-2 border-corporate-gold/20 hover:border-corporate-gold/40 transition-all duration-300 hover:-translate-y-1 bg-gradient-to-br from-white to-corporate-gold/5 dark:from-dark-brown dark:to-corporate-gold/10 relative",style:{animationDelay:`${h*150}ms`},children:[n.jsxs("div",{className:"absolute top-3 right-3 z-10 flex gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity duration-200",children:[n.jsx(I,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 bg-white/80 hover:bg-white hover:text-primary-foreground shadow-sm border border-corporate-gold/20 hover:border-corporate-gold/40",onClick:()=>Hi(c),children:n.jsx(na,{className:"w-3.5 h-3.5 text-corporate-gold"})}),n.jsx(I,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 bg-white/80 hover:bg-red-50 shadow-sm border border-red-200 hover:border-red-300",onClick:()=>fs(c),children:n.jsx(vc,{className:"w-3.5 h-3.5 text-red-500"})})]}),n.jsxs(gi,{className:"p-4",children:[n.jsx("div",{className:"relative mb-4",children:n.jsxs("div",{className:"relative mx-auto w-20 h-20",children:[n.jsx("img",{src:`/storage/${c.photo}`,alt:c.name,className:"w-full h-full rounded-full object-cover border-3 border-corporate-gold/20 group-hover:border-corporate-gold/50 transition-all duration-300 shadow-lg group-hover:shadow-xl",onError:_=>{_.currentTarget.src="/images/default-user.png"}}),n.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-corporate-gold/30 opacity-0 group-hover:opacity-100 group-hover:scale-110 transition-all duration-300"}),n.jsx("div",{className:"absolute -bottom-1 -right-1",children:n.jsx("div",{className:`w-5 h-5 rounded-full border-2 border-white shadow-sm ${c.shift.toLowerCase().includes("morning")?"bg-yellow-400":c.shift.toLowerCase().includes("night")?"bg-blue-900":"bg-orange-500"}`})})]})}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h4",{className:"text-sm font-bold text-corporate-gold dark:text-corporate-gold-light line-clamp-1 group-hover:text-corporate-warm transition-colors",children:c.name}),n.jsx("div",{className:"flex items-center justify-center gap-2",children:n.jsxs("span",{className:"text-xs font-medium text-muted-foreground capitalize",children:[c.shift," Shift"]})}),c.email&&n.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-muted-foreground",children:[n.jsx(ia,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate max-w-[120px]",children:c.email})]}),c.phone&&n.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-muted-foreground",children:[n.jsx(oa,{className:"w-3 h-3"}),n.jsx("span",{children:c.phone})]})]})]})]},c.id))}):n.jsxs("div",{className:"text-center py-8 px-4 bg-corporate-gold/5 border border-corporate-gold/20 rounded-lg",children:[n.jsx(ta,{className:"w-12 h-12 mx-auto text-corporate-gold/40 mb-3"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"No doormen assigned to this building"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:'Click "Add Doorman" to assign security personnel'})]})]}),C.location_link&&n.jsxs(Yn,{className:"overflow-hidden !p-0 border-2 border-corporate-gold/20 hover:border-corporate-gold/40 transition-all duration-300 hover:shadow-xl group bg-gradient-to-br from-white to-corporate-gold/5 dark:from-dark-brown dark:to-corporate-gold/10",children:[n.jsxs("div",{className:"bg-gradient-to-r from-corporate-gold/10 via-corporate-gold/15 to-corporate-gold/10 dark:from-corporate-gold/20 dark:via-corporate-gold/25 dark:to-corporate-gold/20 p-4 border-b border-corporate-gold/20 relative overflow-hidden",children:[n.jsxs("div",{className:"flex items-center gap-2 text-corporate-gold dark:text-corporate-gold-light relative z-10",children:[n.jsx("div",{className:"p-2 bg-corporate-gold/10 rounded-full group-hover:bg-corporate-gold/20 transition-colors duration-300",children:n.jsx($m,{className:"w-4 h-4"})}),n.jsx("span",{className:"font-bold text-sm",children:"Building Location"})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-corporate-gold/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 transform -translate-x-full group-hover:translate-x-full duration-1000"})]}),n.jsxs("div",{className:"relative overflow-hidden",children:[n.jsxs("div",{className:"aspect-video relative",children:[(console.log("=== RENDERING IFRAME ==="),console.log("Building location_link:",C.location_link),console.log("Generated iframe src:",os((C==null?void 0:C.location_link)||"")),console.log("Iframe key:",`map-${C.id}-${Ct}`),console.log("=== END IFRAME RENDER ==="),null),n.jsx("iframe",{src:os((C==null?void 0:C.location_link)||""),width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"group-hover:scale-105 transition-transform duration-700 ease-out",onLoad:()=>console.log("Iframe loaded successfully"),onError:()=>console.log("Iframe failed to load")},`map-${C.id}-${Ct}`)]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-transparent pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),n.jsx("div",{className:"absolute top-3 right-3 w-3 h-3 bg-corporate-gold/60 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-300 group-hover:scale-150"}),n.jsx("div",{className:"absolute bottom-3 left-3 w-2 h-2 bg-corporate-warm/60 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-500 group-hover:scale-125"})]})]})]}),n.jsxs("div",{className:"lg:w-8/12 flex flex-col",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 p-4 bg-corporate-gold/5 dark:bg-corporate-gold/10 border border-corporate-gold/20 rounded-lg",children:[n.jsx("div",{className:"flex items-center gap-4 flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gm,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${$?"text-corporate-gold animate-pulse":"text-corporate-gold/60"}`}),n.jsx(Xe,{ref:Zt,placeholder:"Search apartments, members, locations...",value:be,onChange:c=>ss(c.target.value),className:"pl-10 w-80 border-corporate-gold/20 focus:border-corporate-gold focus:ring-corporate-gold/20",disabled:$}),$&&n.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-corporate-gold"})}),be&&!$&&n.jsx("button",{onClick:()=>ss(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-corporate-gold/60 hover:text-corporate-gold transition-colors",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Qo,{children:[n.jsx(Vo,{asChild:!0,children:n.jsxs(I,{variant:"outline",size:"sm",className:"border-corporate-gold/20 hover:bg-primary hover:border-corporate-gold",children:[n.jsx(Hm,{className:"mr-2 h-4 w-4"}),"Columns ",n.jsx(Me,{className:"ml-1 h-4 w-4"})]})}),n.jsx(ea,{align:"end",className:"w-48",children:st.getAllColumns().filter(c=>c.getCanHide()).map(c=>n.jsx(lm,{className:"capitalize",checked:c.getIsVisible(),onCheckedChange:h=>c.toggleVisibility(!!h),children:c.id.replace(/_/g," ")},c.id))})]}),n.jsxs(Qo,{children:[n.jsx(Vo,{asChild:!0,children:n.jsxs(I,{variant:"outline",size:"sm",className:"border-corporate-gold/20 hover:bg-primary hover:border-corporate-gold",children:[n.jsx(zm,{className:"mr-2 h-4 w-4"}),"Export ",n.jsx(Me,{className:"ml-1 h-4 w-4"})]})}),n.jsxs(ea,{align:"end",children:[n.jsxs(di,{onClick:Jt,children:[n.jsx(bc,{className:"mr-2 h-4 w-4"}),"Export to CSV"]}),n.jsxs(di,{onClick:Mi,children:[n.jsx(bc,{className:"mr-2 h-4 w-4"}),"Export to Excel"]}),n.jsxs(di,{onClick:()=>Tt("building"),children:[n.jsx(Wm,{className:"mr-2 h-4 w-4 "}),"Export NinjaOne"]})]})]})]})]}),n.jsx("div",{className:"rounded-md border mt-4",children:n.jsxs(pm,{children:[n.jsx(gm,{children:st.getHeaderGroups().map(c=>n.jsx(vi,{children:c.headers.map(h=>n.jsx(mm,{children:Nc(h.column.columnDef.header,h.getContext())},h.id))},c.id))}),n.jsx(xm,{children:(Ns=st.getRowModel().rows)!=null&&Ns.length?st.getRowModel().rows.map(c=>n.jsx(nx,{row:c,handleShowDevices:Ti,handleShowTicketHistory:Ii,handleResetPassword:ps,auth:Y,setSelectedTenantForTicketCreation:es,setShowCreateTicketDevicesModal:Vr,setSelectedApartment:bt,setSelectedTenant:Jr,setSelectedDevices:wt,setSelectedShareDevices:br,isResettingPassword:lr},c.id)):n.jsx(vi,{children:n.jsx(pi,{colSpan:ls.length,className:"h-24 text-center",children:"No results found."})})})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 p-4 border-t border-corporate-gold/20 bg-corporate-gold/5 dark:bg-corporate-gold/10",children:[n.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:n.jsxs("span",{children:["Showing ",(y.meta.current_page-1)*y.meta.per_page+1," to"," ",Math.min(y.meta.current_page*y.meta.per_page,y.meta.total)," ","of ",y.meta.total," entries"]})}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs(I,{variant:"outline",size:"sm",onClick:()=>Dt(1),disabled:y.meta.current_page===1,className:"h-8 w-8 p-0",children:[n.jsx(sa,{className:"h-4 w-4"}),n.jsx(sa,{className:"h-4 w-4 -ml-2"})]}),n.jsx(I,{variant:"outline",size:"sm",onClick:()=>Dt(y.meta.current_page-1),disabled:y.meta.current_page===1,className:"h-8 w-8 p-0",children:n.jsx(sa,{className:"h-4 w-4"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Page"}),n.jsx("input",{type:"number",value:y.meta.current_page,onChange:c=>{const h=c.target.value?Number(c.target.value):1;h>=1&&h<=y.meta.last_page&&Dt(h)},className:"w-12 h-8 text-center border rounded text-sm bg-background",min:"1",max:y.meta.last_page}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["of ",y.meta.last_page]})]}),n.jsx(I,{variant:"outline",size:"sm",onClick:()=>Dt(y.meta.current_page+1),disabled:y.meta.current_page===y.meta.last_page,className:"h-8 w-8 p-0",children:n.jsx(mn,{className:"h-4 w-4"})}),n.jsxs(I,{variant:"outline",size:"sm",onClick:()=>Dt(y.meta.last_page),disabled:y.meta.current_page===y.meta.last_page,className:"h-8 w-8 p-0",children:[n.jsx(mn,{className:"h-4 w-4"}),n.jsx(mn,{className:"h-4 w-4 -ml-2"})]})]})})]})]})]})]}),n.jsx(Be,{open:Qr,onOpenChange:Vr,children:n.jsxs(Fe,{className:"sm:max-w-[600px]",children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Select Device"}),n.jsxs(Er,{children:["Choose a device for apartment ",Qe==null?void 0:Qe.name," to create a ticket."]})]}),n.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[Mr.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-2",children:"Personal Devices"}),n.jsx("div",{className:"space-y-2",children:Mr.map(c=>{var h,_,E;return n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>is(c),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-corporate-gold/10 flex items-center justify-center",children:n.jsx(ji,{className:"w-5 h-5 text-corporate-gold"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:c.name||((h=c==null?void 0:c.name_device)==null?void 0:h.name)}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[(_=c.brand)==null?void 0:_.name," - ",(E=c.model)==null?void 0:E.name]})]})]}),n.jsx(mn,{className:"h-4 w-4 text-gray-400"})]},c.id)})})]}),Ne.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-2",children:"Shared Devices"}),n.jsx("div",{className:"space-y-2",children:Ne.map(c=>{var h,_;return n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",onClick:()=>is(c),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(Qn,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:c.name||"Unknown Device"}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[(h=c.brand)==null?void 0:h.name," - ",(_=c.model)==null?void 0:_.name," (Shared)"]})]})]}),n.jsx(mn,{className:"h-4 w-4 text-gray-400"})]},c.id)})})]}),Mr.length===0&&Ne.length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(ji,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{className:"font-medium",children:"No devices available"}),n.jsx("p",{className:"text-sm",children:"This member doesn't have any devices assigned."})]})]})]})}),n.jsx(Be,{open:Ni,onOpenChange:Dr,children:n.jsxs(Fe,{className:"sm:max-w-[500px]",children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Create Ticket"}),n.jsxs(Er,{children:["Creating ticket for ",fe==null?void 0:fe.name," in apartment ",Qe==null?void 0:Qe.name," - ",et==null?void 0:et.name]})]}),n.jsxs("form",{onSubmit:Oi,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(_e,{htmlFor:"category",children:"Category *"}),n.jsxs(wm,{value:oe.data.category,onValueChange:c=>oe.setData("category",c),children:[n.jsx(_m,{children:n.jsx(jm,{placeholder:"Select category"})}),n.jsxs(Nm,{children:[n.jsx(Xn,{value:"Hardware",children:"Hardware"}),n.jsx(Xn,{value:"Software",children:"Software"}),n.jsx(Xn,{value:"Red",children:"Network"}),n.jsx(Xn,{value:"Soporte",children:"Support"}),n.jsx(Xn,{value:"Otro",children:"Other"})]})]}),oe.errors.category&&n.jsx("p",{className:"text-sm text-red-600 mt-1",children:oe.errors.category})]}),n.jsxs("div",{children:[n.jsx(_e,{htmlFor:"title",children:"Title *"}),n.jsx(Xe,{id:"title",value:oe.data.title,onChange:c=>oe.setData("title",c.target.value),placeholder:"Enter ticket title",required:!0}),oe.errors.title&&n.jsx("p",{className:"text-sm text-red-600 mt-1",children:oe.errors.title})]}),n.jsxs("div",{children:[n.jsx(_e,{htmlFor:"description",children:"Description"}),n.jsx(gc,{id:"description",value:oe.data.description,onChange:c=>oe.setData("description",c.target.value),placeholder:"Describe the issue...",rows:4}),oe.errors.description&&n.jsx("p",{className:"text-sm text-red-600 mt-1",children:oe.errors.description})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>Dr(!1),children:"Cancel"}),n.jsx(I,{type:"submit",disabled:oe.processing,children:oe.processing?"Creating...":"Create Ticket"})]})]})]})}),n.jsx(Be,{open:St,onOpenChange:qt,children:n.jsxs(Fe,{children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Reset Password"}),n.jsxs(Er,{children:["Are you sure you want to reset the password for ",n.jsx("strong",{children:ar==null?void 0:ar.name}),"?",n.jsx("br",{}),n.jsx("br",{}),"The password will be changed to their email address: ",n.jsx("strong",{children:ar==null?void 0:ar.email}),n.jsx("br",{}),"An email notification will be sent to them with their new credentials."]})]}),n.jsxs(Xr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>qt(!1),disabled:lr,children:"Cancel"}),n.jsx(I,{type:"button",variant:"destructive",onClick:yn,disabled:lr,children:lr?"Resetting...":"Reset Password"})]})]})}),n.jsx(Be,{open:Et,onOpenChange:Tr,children:n.jsxs(Fe,{children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Bulk Password Reset"}),n.jsxs(Er,{children:["Are you sure you want to reset passwords for ",n.jsx("strong",{children:At.length})," selected members?",n.jsx("br",{}),n.jsx("br",{}),"Each member's password will be changed to their email address and they will receive email notifications with their new credentials."]})]}),n.jsxs(Xr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>Tr(!1),disabled:lr,children:"Cancel"}),n.jsx(I,{type:"button",variant:"destructive",onClick:Cn,disabled:lr,children:lr?"Resetting...":"Reset All Passwords"})]})]})})]})})}const nx=({row:y,handleShowDevices:me,handleShowTicketHistory:l,handleResetPassword:xe,auth:ve,setSelectedTenantForTicketCreation:je,setShowCreateTicketDevicesModal:Y,setSelectedApartment:Ur,setSelectedTenant:Pr,setSelectedDevices:ne,setSelectedShareDevices:Ar,isResettingPassword:Ie})=>{var $,J;const[ir,be]=L.useState(!1),se=y.original;return n.jsxs(n.Fragment,{children:[n.jsx(vi,{"data-state":y.getIsSelected()&&"selected",className:"hover:bg-muted/50 transition-colors group",children:y.getVisibleCells().map(O=>{var or,re;return O.column.id==="tenants_count"?n.jsx(pi,{children:n.jsx("div",{className:"cursor-pointer hover:bg-muted/70 p-3 rounded-lg transition-all duration-200 group-hover:bg-muted/30",onClick:()=>be(!ir),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`
                                            flex items-center justify-center w-8 h-8 rounded-full 
                                            bg-gradient-to-br from-corporate-gold/10 to-corporate-gold/20 
                                            border border-corporate-gold/20 transition-all duration-300 
                                            hover:from-corporate-gold/20 hover:to-corporate-gold/30 hover:border-corporate-gold/30
                                            hover:scale-110 hover:shadow-md
                                            ${ir?"bg-gradient-to-br from-corporate-gold/20 to-corporate-gold/30 border-corporate-gold/40 shadow-sm":""}
                                        `,children:n.jsx(mn,{className:`
                                                w-4 h-4 text-corporate-gold transition-all duration-300 ease-in-out
                                                ${ir?"rotate-90 scale-110":"hover:scale-105"}
                                            `})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`
                                                flex items-center justify-center w-6 h-6 rounded-full 
                                                bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 text-corporate-gold
                                                transition-all duration-200 hover:from-corporate-gold/30 hover:to-corporate-warm/30
                                            `,children:n.jsx(Qn,{className:"w-3 h-3"})}),n.jsx("span",{className:"font-semibold text-corporate-gold dark:text-corporate-gold-light",children:((or=se.tenants)==null?void 0:or.length)||0}),n.jsx("span",{className:"text-muted-foreground text-sm font-medium",children:((re=se.tenants)==null?void 0:re.length)===1?"member":"members"})]}),se.tenants&&se.tenants.length>0&&n.jsx("div",{className:"ml-auto opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:n.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-1 rounded-full",children:ir?"Click to collapse":"Click to expand"})})]})})},O.id):n.jsx(pi,{children:O.column.columnDef.cell?Nc(O.column.columnDef.cell,O.getContext()):null},O.id)})}),ir&&se.tenants&&se.tenants.length>0&&n.jsx(vi,{className:"border-b bg-gradient-to-r from-corporate-gold/5 to-corporate-gold/10 dark:from-corporate-gold/10 dark:to-corporate-gold/15",children:n.jsx(pi,{colSpan:5,className:"p-6",children:n.jsxs("div",{className:"animate-in slide-in-from-top-2 duration-300",children:[n.jsxs("div",{className:"text-sm font-semibold text-muted-foreground mb-4 flex items-center gap-2",children:[n.jsx("div",{className:"w-1 h-4 bg-corporate-gold rounded-full"}),n.jsx(Qn,{className:"w-4 h-4 text-corporate-gold"}),n.jsxs("span",{children:["Apartment Members (",(($=se.tenants)==null?void 0:$.length)||0,")"]})]}),n.jsx("div",{className:"grid gap-4",children:(J=se.tenants)==null?void 0:J.map((O,or)=>{var re,Ee,We,Je,ee,$e,Yr,Zr,vr,bt,fe,Jr,Mr,wt;return n.jsxs("div",{className:"flex items-center justify-between gap-4 p-5 bg-background border border-corporate-gold/20 rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 hover:border-corporate-gold/40 group/member",style:{animationDelay:`${or*100}ms`,animation:"fadeInUp 0.4s ease-out forwards"},children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"relative",children:n.jsx("img",{src:`/storage/${O.photo}`,alt:O.name,className:"w-14 h-14 rounded-full object-cover border-2 border-corporate-gold/20 shadow-sm group-hover/member:border-corporate-gold/40 transition-all duration-200",onError:Ne=>{Ne.currentTarget.src="/images/default-user.png"}})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h4",{className:"font-bold text-corporate-gold dark:text-corporate-gold-light text-lg",children:O.name}),n.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-corporate-gold/10 to-corporate-gold/20 text-corporate-gold border border-corporate-gold/20 text-xs font-medium rounded-full",children:"Member"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-1 gap-2 text-sm",children:[n.jsxs("a",{href:`mailto:${O.email}`,className:"flex items-center gap-2 text-muted-foreground hover:text-corporate-gold transition-colors",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-corporate-gold/20 flex items-center justify-center",children:n.jsx(ia,{className:"w-3 h-3 text-corporate-gold"})}),n.jsx("span",{className:"font-medium",children:O.email})]}),n.jsxs("a",{href:`tel:${O.phone}`,className:"flex items-center gap-2 text-muted-foreground hover:text-corporate-gold transition-colors",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-corporate-warm/20 flex items-center justify-center",children:n.jsx(oa,{className:"w-3 h-3 text-corporate-warm"})}),n.jsx("span",{className:"font-medium",children:O.phone})]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(mt,{children:[n.jsx(xt,{asChild:!0,children:n.jsxs(I,{variant:"outline",size:"sm",className:"flex items-center gap-2 hover:bg-corporate-gold hover:text-primary-foreground transition-all duration-300 border-corporate-gold/20 hover:border-corporate-gold group-hover/member:border-corporate-gold/40",onClick:()=>{var _t,zt;console.log("=== CREATE TICKET BUTTON CLICKED ==="),console.log("User roles array:",(_t=ve.user)==null?void 0:_t.roles),console.log("Tenant:",O),console.log("Tenant devices:",O.devices),console.log("Tenant shared devices:",O.shared_devices),console.log("Apartment:",se),console.log("=== END CREATE TICKET BUTTON DEBUG ===");const Ne=((zt=ve.user)==null?void 0:zt.roles)||[],br=Ne.includes("superadmin")||Ne.includes("super-admin"),Ht=Ne.includes("owner"),Rr=Ne.includes("doorman"),Ge=Ne.includes("technical");(br||Ht||Rr||Ge)&&(Ur(se),Pr(O),ne(O.devices||[]),Ar(O.shared_devices||[]),je(se),Y(!0))},children:[n.jsx(ji,{className:"w-4 h-4"}),n.jsx("span",{className:"font-bold text-base",children:Number(((re=O.devices)==null?void 0:re.length)||0)+Number(((Ee=O.shared_devices)==null?void 0:Ee.length)||0)})]})}),n.jsx(vt,{children:n.jsxs("p",{children:["Create ticket - ",Number(((We=O.devices)==null?void 0:We.length)||0)+Number(((Je=O.shared_devices)==null?void 0:Je.length)||0)," devices"]})})]}),((($e=(ee=ve.user)==null?void 0:ee.roles)==null?void 0:$e.includes("super-admin"))||((Zr=(Yr=ve.user)==null?void 0:Yr.roles)==null?void 0:Zr.includes("superadmin")))&&n.jsxs(mt,{children:[n.jsx(xt,{asChild:!0,children:n.jsx(I,{variant:"outline",size:"sm",className:"flex items-center gap-2 hover:bg-purple-500 hover:text-white transition-all duration-300 border-purple-300 hover:border-purple-500",onClick:()=>{console.log("=== MANAGE DEVICES BUTTON CLICKED ==="),console.log("Super admin managing devices for tenant:",O),console.log("Apartment:",se),me(se,O)},children:n.jsx(ji,{className:"w-4 h-4"})})}),n.jsx(vt,{children:n.jsx("p",{children:"Manage devices"})})]}),n.jsxs(mt,{children:[n.jsx(xt,{asChild:!0,children:n.jsxs(I,{variant:"outline",size:"sm",className:"flex items-center gap-2 hover:bg-blue-500 hover:text-white transition-all duration-300 border-blue-300 hover:border-blue-500",onClick:()=>l(O),children:[n.jsx(Km,{className:"w-4 h-4"}),n.jsx("span",{className:"font-bold text-base",children:O.tickets_count||0})]})}),n.jsx(vt,{children:n.jsxs("p",{children:["View ticket history - ",O.tickets_count||0," tickets"]})})]}),(((bt=(vr=ve.user)==null?void 0:vr.roles)==null?void 0:bt.includes("super-admin"))||((Jr=(fe=ve.user)==null?void 0:fe.roles)==null?void 0:Jr.includes("owner"))||((wt=(Mr=ve.user)==null?void 0:Mr.roles)==null?void 0:wt.includes("doorman")))&&n.jsxs(mt,{children:[n.jsx(xt,{asChild:!0,children:n.jsx(I,{variant:"outline",size:"sm",className:"flex items-center gap-2 hover:bg-orange-500 hover:text-white transition-all duration-300 border-orange-300 hover:border-orange-500",onClick:()=>xe(O),disabled:Ie,children:n.jsx(aa,{className:"w-4 h-4"})})}),n.jsx(vt,{children:n.jsx("p",{children:"Reset password"})})]}),n.jsxs(mt,{children:[n.jsx(xt,{asChild:!0,children:n.jsx(I,{variant:"ghost",size:"icon",onClick:()=>exportMembersNinjaOneDevices(void 0,O.id),children:n.jsx(Ac,{className:"h-4 w-4"})})}),n.jsx(vt,{children:n.jsx("p",{children:"Export member devices"})})]})]})]},O.id)})})]})})})]})},sx=[{title:"Apartments",href:"/apartments"}];export{B0 as default};
