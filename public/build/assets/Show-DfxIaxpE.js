import{j as e}from"./ui-B_LlBPKL.js";import{r as w}from"./recharts-C_88tpBl.js";import{L as y,$ as C,S as j,t as l}from"./app-BkZ4iYDj.js";import{C as i,b as c,c as t,a as r,d as h}from"./card-D2PMvY5E.js";import{B as a}from"./badge-D8qydIEn.js";import{B as o}from"./button-D7WChgOL.js";import{S as k}from"./separator-2eYOZDPc.js";import{A as _}from"./arrow-left-CPDhjXak.js";import{C as m}from"./circle-check-big-kRE2lEsQ.js";import{T as p}from"./ticket-plus-DMc59eOu.js";import{W as b}from"./wifi-CRwhCiWI.js";import{C as D}from"./calendar-B5ENoLvU.js";import{M as f}from"./monitor-DC-EX0Dh.js";import{C as T,T as x}from"./triangle-alert-x0pEFkjL.js";import{f as u}from"./format-CCdy9gBC.js";import{e as N}from"./es-uH15eYUh.js";import"./react-B1hewrmX.js";import"./utils-BJRzUxt3.js";import"./index-Cno2KWhz.js";import"./createLucideIcon-BiVfa5Ur.js";import"./en-US-Cx6CYfeS.js";const S=s=>{switch(s){case"critical":return e.jsxs(a,{variant:"destructive",className:"gap-1",children:[e.jsx(x,{className:"h-4 w-4"}),"Crítico"]});case"warning":return e.jsxs(a,{variant:"secondary",className:"gap-1",children:[e.jsx(x,{className:"h-4 w-4"}),"Advertencia"]});case"info":return e.jsxs(a,{variant:"outline",className:"gap-1",children:[e.jsx(x,{className:"h-4 w-4"}),"Información"]});default:return e.jsx(a,{variant:"outline",children:s})}},A=s=>{switch(s){case"open":return e.jsxs(a,{variant:"destructive",className:"gap-1",children:[e.jsx(T,{className:"h-4 w-4"}),"Abierto"]});case"acknowledged":return e.jsxs(a,{variant:"secondary",className:"gap-1",children:[e.jsx(m,{className:"h-4 w-4"}),"Reconocido"]});case"resolved":return e.jsxs(a,{variant:"default",className:"gap-1",children:[e.jsx(m,{className:"h-4 w-4"}),"Resuelto"]});default:return e.jsx(a,{variant:"outline",children:s})}};function Y({alert:s}){const[n,d]=w.useState(!1),v=async()=>{if(!n){d(!0);try{await j.post(`/ninjaone-alerts/${s.id}/acknowledge`),l.success("Alerta reconocida correctamente")}catch{l.error("Error al reconocer la alerta")}finally{d(!1)}}},g=async()=>{if(!n){d(!0);try{await j.post(`/ninjaone-alerts/${s.id}/create-ticket`),l.success("Ticket creado correctamente")}catch{l.error("Error al crear el ticket")}finally{d(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx(y,{title:`Alerta: ${s.title}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(C,{href:"/ninjaone-alerts",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Volver a alertas"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:s.title}),e.jsx("p",{className:"text-muted-foreground",children:"Detalles de la alerta NinjaOne"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="open"&&e.jsxs(o,{onClick:v,disabled:n,className:"gap-2",children:[e.jsx(m,{className:"h-4 w-4"}),"Reconocer"]}),!s.ticket_created&&e.jsxs(o,{onClick:g,disabled:n,className:"gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),"Crear Ticket"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"Información de la Alerta"]})}),e.jsxs(r,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Estado:"}),A(s.status)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Severidad:"}),S(s.severity)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Tipo:"}),e.jsx(a,{variant:"outline",children:s.alert_type})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Ticket creado:"}),s.ticket_created?e.jsxs(a,{variant:"default",className:"gap-1",children:[e.jsx(p,{className:"h-3 w-3"}),"Sí"]}):e.jsx(a,{variant:"outline",children:"No"})]})]}),e.jsx(k,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(D,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium",children:"Fecha de creación:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:u(new Date(s.created_at),"dd/MM/yyyy HH:mm:ss",{locale:N})})]})]}),s.acknowledged_at&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(m,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium",children:"Fecha de reconocimiento:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:u(new Date(s.acknowledged_at),"dd/MM/yyyy HH:mm:ss",{locale:N})})]})]})]})]})]}),e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),"Dispositivo Afectado"]})}),e.jsx(r,{children:s.device?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-lg font-semibold",children:s.device.name}),s.device.ninjaone_device_id&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID NinjaOne: ",s.device.ninjaone_device_id]})]}),s.device.device_type&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Tipo:"}),e.jsx(a,{variant:"outline",children:s.device.device_type})]}),s.device.status&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Estado:"}),e.jsx(a,{variant:s.device.status==="active"?"default":"secondary",children:s.device.status})]})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(f,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Dispositivo no encontrado"}),e.jsx("p",{className:"text-sm",children:"Es posible que el dispositivo haya sido eliminado"})]})})]})]}),e.jsxs(i,{children:[e.jsxs(c,{children:[e.jsx(t,{children:"Descripción"}),e.jsx(h,{children:"Detalles específicos de la alerta"})]}),e.jsx(r,{children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("p",{className:"whitespace-pre-wrap",children:s.description})})})]}),s.raw_data&&e.jsxs(i,{children:[e.jsxs(c,{children:[e.jsx(t,{children:"Datos Técnicos"}),e.jsx(h,{children:"Información técnica completa de la alerta"})]}),e.jsx(r,{children:e.jsx("div",{className:"bg-muted rounded-md p-4",children:e.jsx("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(s.raw_data,null,2)})})})]}),e.jsxs(i,{children:[e.jsx(c,{children:e.jsx(t,{children:"Información de Referencia"})}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"ID Interno"}),e.jsx("div",{className:"font-mono text-sm",children:s.id})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"ID NinjaOne"}),e.jsx("div",{className:"font-mono text-sm",children:s.ninjaone_alert_id})]})]})})]})]})]})}export{Y as default};
