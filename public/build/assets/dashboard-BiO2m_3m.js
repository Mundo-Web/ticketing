import{j as e}from"./ui-D1w9Iw8H.js";import{A as pr,D as as,a as ns,b as is,e as fr,f as st,d as rt}from"./app-layout-aweXgbFr.js";import{K as br,L as yr,t as L,S as _e}from"./app-vg6vUKH9.js";import{f as vr,g as os,h as jr,j as ls,k as Nr,l as wr,r as z,m as kr,n as Fr,o as _r,p as Cr,q as Ar,s as Tr,u as ks,A as Fs,C as _s,X as Cs,Y as As,T as Ts,v as Ve,L as Sr}from"./recharts-Dld1lWsf.js";import{C as A,a as P,b as W,c as T,d as cs,e as Dr}from"./card-ujb193xZ.js";import{f as Ss,B as H}from"./format-Drb4gU7T.js";import{B as R}from"./button-BntSAybs.js";import{S as Er,a as $r,b as Mr,c as Rr,d as ds}from"./select-CxBJ8inH.js";import{D as Ds,a as Es,b as $s,c as Ms,e as Ir}from"./dialog-B7MJj1P1.js";import{E as vt,F as jt}from"./FileSaver.min-BGmHM0RZ.js";import{T as ve}from"./trending-up-iTRTSR-d.js";import{C as Me,Z as Re}from"./zap-CIf7cl4Z.js";import{A as Ie}from"./activity-CyEVeyhP.js";import{R as Rs,U as zr,O as Ur,C as Or,W as Br}from"./wrench-Bst5b212.js";import{C as le,a as te}from"./circle-check-big-DZU7S_eA.js";import{M as ze}from"./map-pin-CGVzMw_j.js";import{E as Lr}from"./eye-CkkIptxE.js";import{C as K}from"./clock-BxVJL7PR.js";import{f as Ue,U as ce,X as at,B as de,a as nt,c as Pr}from"./x-BL7C5EPd.js";import{U as Le}from"./user-plus-4uaQlw0J.js";import{C as Oe}from"./circle-alert-DMAN7II5.js";import{I as ms}from"./info-0IyK0BA7.js";import{C as it}from"./check-CkciTNW-.js";import{a as hs,T as Wr,M as Hr,P as Vr}from"./timer-5hOeDT9u.js";import{T as ke}from"./triangle-alert-DrKF4AKN.js";import{T as pe}from"./ticket-ChPWs-X9.js";import{E as J}from"./external-link-DFS43cfb.js";import{S as ot}from"./search-BGEUGtTC.js";import{P as us}from"./plus-CnwexqGC.js";import{M as Be}from"./monitor-BMYn5xBp.js";import{H as me}from"./house-Dzsb1MNH.js";import{U as lt}from"./user-CtzshXh0.js";import{C as ct}from"./chevron-left-BbzonqSg.js";import{S as dt}from"./smartphone-D010dtY3.js";import{F as xs}from"./file-spreadsheet-qPGn0CxC.js";import{D as qr}from"./download-ovNJc7Ex.js";import{C as Gr}from"./circle-play-Cy8QUXnz.js";import"./utils-B66yfQja.js";import"./tooltip-CQHbb0yU.js";import"./index-CWijjM2R.js";import"./index-cS_AKGRi.js";import"./index-DrdTBqzy.js";import"./chevrons-up-down-BF_I81uV.js";import"./createLucideIcon-CR-66RMC.js";import"./react-B1hewrmX.js";function Yr(t){return t}var mt=1,ht=2,gt=3,Ce=4,gs=1e-6;function Xr(t){return"translate("+t+",0)"}function Kr(t){return"translate(0,"+t+")"}function Jr(t){return s=>+t(s)}function Qr(t,s){return s=Math.max(0,t.bandwidth()-s*2)/2,t.round()&&(s=Math.round(s)),r=>+t(r)+s}function Zr(){return!this.__axis}function Is(t,s){var r=[],n=null,i=null,l=6,o=6,m=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,h=t===mt||t===Ce?-1:1,u=t===Ce||t===ht?"x":"y",v=t===mt||t===gt?Xr:Kr;function x(g){var E=n??(s.ticks?s.ticks.apply(s,r):s.domain()),I=i??(s.tickFormat?s.tickFormat.apply(s,r):Yr),N=Math.max(l,0)+m,S=s.range(),k=+S[0]+c,f=+S[S.length-1]+c,F=(s.bandwidth?Qr:Jr)(s.copy(),c),_=g.selection?g.selection():g,y=_.selectAll(".domain").data([null]),j=_.selectAll(".tick").data(E,s).order(),b=j.exit(),C=j.enter().append("g").attr("class","tick"),$=j.select("line"),M=j.select("text");y=y.merge(y.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),j=j.merge(C),$=$.merge(C.append("line").attr("stroke","currentColor").attr(u+"2",h*l)),M=M.merge(C.append("text").attr("fill","currentColor").attr(u,h*N).attr("dy",t===mt?"0em":t===gt?"0.71em":"0.32em")),g!==_&&(y=y.transition(g),j=j.transition(g),$=$.transition(g),M=M.transition(g),b=b.transition(g).attr("opacity",gs).attr("transform",function(U){return isFinite(U=F(U))?v(U+c):this.getAttribute("transform")}),C.attr("opacity",gs).attr("transform",function(U){var X=this.parentNode.__axis;return v((X&&isFinite(X=X(U))?X:F(U))+c)})),b.remove(),y.attr("d",t===Ce||t===ht?o?"M"+h*o+","+k+"H"+c+"V"+f+"H"+h*o:"M"+c+","+k+"V"+f:o?"M"+k+","+h*o+"V"+c+"H"+f+"V"+h*o:"M"+k+","+c+"H"+f),j.attr("opacity",1).attr("transform",function(U){return v(F(U)+c)}),$.attr(u+"2",h*l),M.attr(u,h*N).text(I),_.filter(Zr).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ht?"start":t===Ce?"end":"middle"),_.each(function(){this.__axis=F})}return x.scale=function(g){return arguments.length?(s=g,x):s},x.ticks=function(){return r=Array.from(arguments),x},x.tickArguments=function(g){return arguments.length?(r=g==null?[]:Array.from(g),x):r.slice()},x.tickValues=function(g){return arguments.length?(n=g==null?null:Array.from(g),x):n&&n.slice()},x.tickFormat=function(g){return arguments.length?(i=g,x):i},x.tickSize=function(g){return arguments.length?(l=o=+g,x):l},x.tickSizeInner=function(g){return arguments.length?(l=+g,x):l},x.tickSizeOuter=function(g){return arguments.length?(o=+g,x):o},x.tickPadding=function(g){return arguments.length?(m=+g,x):m},x.offset=function(g){return arguments.length?(c=+g,x):c},x}function ps(t){return Is(gt,t)}function ea(t){return Is(Ce,t)}var ta={value:()=>{}};function zs(){for(var t=0,s=arguments.length,r={},n;t<s;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Pe(r)}function Pe(t){this._=t}function sa(t,s){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!s.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Pe.prototype=zs.prototype={constructor:Pe,on:function(t,s){var r=this._,n=sa(t+"",r),i,l=-1,o=n.length;if(arguments.length<2){for(;++l<o;)if((i=(t=n[l]).type)&&(i=ra(r[i],t.name)))return i;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++l<o;)if(i=(t=n[l]).type)r[i]=fs(r[i],t.name,s);else if(s==null)for(i in r)r[i]=fs(r[i],t.name,null);return this},copy:function(){var t={},s=this._;for(var r in s)t[r]=s[r].slice();return new Pe(t)},call:function(t,s){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,l;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],n=0,i=l.length;n<i;++n)l[n].value.apply(s,r)},apply:function(t,s,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,l=n.length;i<l;++i)n[i].value.apply(s,r)}};function ra(t,s){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===s)return i.value}function fs(t,s,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===s){t[n]=ta,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:s,value:r}),t}var pt="http://www.w3.org/1999/xhtml";const bs={svg:"http://www.w3.org/2000/svg",xhtml:pt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ke(t){var s=t+="",r=s.indexOf(":");return r>=0&&(s=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),bs.hasOwnProperty(s)?{space:bs[s],local:t}:t}function aa(t){return function(){var s=this.ownerDocument,r=this.namespaceURI;return r===pt&&s.documentElement.namespaceURI===pt?s.createElement(t):s.createElementNS(r,t)}}function na(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Us(t){var s=Ke(t);return(s.local?na:aa)(s)}function ia(){}function Nt(t){return t==null?ia:function(){return this.querySelector(t)}}function oa(t){typeof t!="function"&&(t=Nt(t));for(var s=this._groups,r=s.length,n=new Array(r),i=0;i<r;++i)for(var l=s[i],o=l.length,m=n[i]=new Array(o),c,h,u=0;u<o;++u)(c=l[u])&&(h=t.call(c,c.__data__,u,l))&&("__data__"in c&&(h.__data__=c.__data__),m[u]=h);return new V(n,this._parents)}function la(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ca(){return[]}function Os(t){return t==null?ca:function(){return this.querySelectorAll(t)}}function da(t){return function(){return la(t.apply(this,arguments))}}function ma(t){typeof t=="function"?t=da(t):t=Os(t);for(var s=this._groups,r=s.length,n=[],i=[],l=0;l<r;++l)for(var o=s[l],m=o.length,c,h=0;h<m;++h)(c=o[h])&&(n.push(t.call(c,c.__data__,h,o)),i.push(c));return new V(n,i)}function Bs(t){return function(){return this.matches(t)}}function Ls(t){return function(s){return s.matches(t)}}var ha=Array.prototype.find;function ua(t){return function(){return ha.call(this.children,t)}}function xa(){return this.firstElementChild}function ga(t){return this.select(t==null?xa:ua(typeof t=="function"?t:Ls(t)))}var pa=Array.prototype.filter;function fa(){return Array.from(this.children)}function ba(t){return function(){return pa.call(this.children,t)}}function ya(t){return this.selectAll(t==null?fa:ba(typeof t=="function"?t:Ls(t)))}function va(t){typeof t!="function"&&(t=Bs(t));for(var s=this._groups,r=s.length,n=new Array(r),i=0;i<r;++i)for(var l=s[i],o=l.length,m=n[i]=[],c,h=0;h<o;++h)(c=l[h])&&t.call(c,c.__data__,h,l)&&m.push(c);return new V(n,this._parents)}function Ps(t){return new Array(t.length)}function ja(){return new V(this._enter||this._groups.map(Ps),this._parents)}function qe(t,s){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=s}qe.prototype={constructor:qe,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,s){return this._parent.insertBefore(t,s)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Na(t){return function(){return t}}function wa(t,s,r,n,i,l){for(var o=0,m,c=s.length,h=l.length;o<h;++o)(m=s[o])?(m.__data__=l[o],n[o]=m):r[o]=new qe(t,l[o]);for(;o<c;++o)(m=s[o])&&(i[o]=m)}function ka(t,s,r,n,i,l,o){var m,c,h=new Map,u=s.length,v=l.length,x=new Array(u),g;for(m=0;m<u;++m)(c=s[m])&&(x[m]=g=o.call(c,c.__data__,m,s)+"",h.has(g)?i[m]=c:h.set(g,c));for(m=0;m<v;++m)g=o.call(t,l[m],m,l)+"",(c=h.get(g))?(n[m]=c,c.__data__=l[m],h.delete(g)):r[m]=new qe(t,l[m]);for(m=0;m<u;++m)(c=s[m])&&h.get(x[m])===c&&(i[m]=c)}function Fa(t){return t.__data__}function _a(t,s){if(!arguments.length)return Array.from(this,Fa);var r=s?ka:wa,n=this._parents,i=this._groups;typeof t!="function"&&(t=Na(t));for(var l=i.length,o=new Array(l),m=new Array(l),c=new Array(l),h=0;h<l;++h){var u=n[h],v=i[h],x=v.length,g=Ca(t.call(u,u&&u.__data__,h,n)),E=g.length,I=m[h]=new Array(E),N=o[h]=new Array(E),S=c[h]=new Array(x);r(u,v,I,N,S,g,s);for(var k=0,f=0,F,_;k<E;++k)if(F=I[k]){for(k>=f&&(f=k+1);!(_=N[f])&&++f<E;);F._next=_||null}}return o=new V(o,n),o._enter=m,o._exit=c,o}function Ca(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Aa(){return new V(this._exit||this._groups.map(Ps),this._parents)}function Ta(t,s,r){var n=this.enter(),i=this,l=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),s!=null&&(i=s(i),i&&(i=i.selection())),r==null?l.remove():r(l),n&&i?n.merge(i).order():i}function Sa(t){for(var s=t.selection?t.selection():t,r=this._groups,n=s._groups,i=r.length,l=n.length,o=Math.min(i,l),m=new Array(i),c=0;c<o;++c)for(var h=r[c],u=n[c],v=h.length,x=m[c]=new Array(v),g,E=0;E<v;++E)(g=h[E]||u[E])&&(x[E]=g);for(;c<i;++c)m[c]=r[c];return new V(m,this._parents)}function Da(){for(var t=this._groups,s=-1,r=t.length;++s<r;)for(var n=t[s],i=n.length-1,l=n[i],o;--i>=0;)(o=n[i])&&(l&&o.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(o,l),l=o);return this}function Ea(t){t||(t=$a);function s(v,x){return v&&x?t(v.__data__,x.__data__):!v-!x}for(var r=this._groups,n=r.length,i=new Array(n),l=0;l<n;++l){for(var o=r[l],m=o.length,c=i[l]=new Array(m),h,u=0;u<m;++u)(h=o[u])&&(c[u]=h);c.sort(s)}return new V(i,this._parents).order()}function $a(t,s){return t<s?-1:t>s?1:t>=s?0:NaN}function Ma(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ra(){return Array.from(this)}function Ia(){for(var t=this._groups,s=0,r=t.length;s<r;++s)for(var n=t[s],i=0,l=n.length;i<l;++i){var o=n[i];if(o)return o}return null}function za(){let t=0;for(const s of this)++t;return t}function Ua(){return!this.node()}function Oa(t){for(var s=this._groups,r=0,n=s.length;r<n;++r)for(var i=s[r],l=0,o=i.length,m;l<o;++l)(m=i[l])&&t.call(m,m.__data__,l,i);return this}function Ba(t){return function(){this.removeAttribute(t)}}function La(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Pa(t,s){return function(){this.setAttribute(t,s)}}function Wa(t,s){return function(){this.setAttributeNS(t.space,t.local,s)}}function Ha(t,s){return function(){var r=s.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function Va(t,s){return function(){var r=s.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function qa(t,s){var r=Ke(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((s==null?r.local?La:Ba:typeof s=="function"?r.local?Va:Ha:r.local?Wa:Pa)(r,s))}function Ws(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ga(t){return function(){this.style.removeProperty(t)}}function Ya(t,s,r){return function(){this.style.setProperty(t,s,r)}}function Xa(t,s,r){return function(){var n=s.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function Ka(t,s,r){return arguments.length>1?this.each((s==null?Ga:typeof s=="function"?Xa:Ya)(t,s,r??"")):je(this.node(),t)}function je(t,s){return t.style.getPropertyValue(s)||Ws(t).getComputedStyle(t,null).getPropertyValue(s)}function Ja(t){return function(){delete this[t]}}function Qa(t,s){return function(){this[t]=s}}function Za(t,s){return function(){var r=s.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function en(t,s){return arguments.length>1?this.each((s==null?Ja:typeof s=="function"?Za:Qa)(t,s)):this.node()[t]}function Hs(t){return t.trim().split(/^|\s+/)}function wt(t){return t.classList||new Vs(t)}function Vs(t){this._node=t,this._names=Hs(t.getAttribute("class")||"")}Vs.prototype={add:function(t){var s=this._names.indexOf(t);s<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var s=this._names.indexOf(t);s>=0&&(this._names.splice(s,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function qs(t,s){for(var r=wt(t),n=-1,i=s.length;++n<i;)r.add(s[n])}function Gs(t,s){for(var r=wt(t),n=-1,i=s.length;++n<i;)r.remove(s[n])}function tn(t){return function(){qs(this,t)}}function sn(t){return function(){Gs(this,t)}}function rn(t,s){return function(){(s.apply(this,arguments)?qs:Gs)(this,t)}}function an(t,s){var r=Hs(t+"");if(arguments.length<2){for(var n=wt(this.node()),i=-1,l=r.length;++i<l;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof s=="function"?rn:s?tn:sn)(r,s))}function nn(){this.textContent=""}function on(t){return function(){this.textContent=t}}function ln(t){return function(){var s=t.apply(this,arguments);this.textContent=s??""}}function cn(t){return arguments.length?this.each(t==null?nn:(typeof t=="function"?ln:on)(t)):this.node().textContent}function dn(){this.innerHTML=""}function mn(t){return function(){this.innerHTML=t}}function hn(t){return function(){var s=t.apply(this,arguments);this.innerHTML=s??""}}function un(t){return arguments.length?this.each(t==null?dn:(typeof t=="function"?hn:mn)(t)):this.node().innerHTML}function xn(){this.nextSibling&&this.parentNode.appendChild(this)}function gn(){return this.each(xn)}function pn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function fn(){return this.each(pn)}function bn(t){var s=typeof t=="function"?t:Us(t);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}function yn(){return null}function vn(t,s){var r=typeof t=="function"?t:Us(t),n=s==null?yn:typeof s=="function"?s:Nt(s);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function jn(){var t=this.parentNode;t&&t.removeChild(this)}function Nn(){return this.each(jn)}function wn(){var t=this.cloneNode(!1),s=this.parentNode;return s?s.insertBefore(t,this.nextSibling):t}function kn(){var t=this.cloneNode(!0),s=this.parentNode;return s?s.insertBefore(t,this.nextSibling):t}function Fn(t){return this.select(t?kn:wn)}function _n(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Cn(t){return function(s){t.call(this,s,this.__data__)}}function An(t){return t.trim().split(/^|\s+/).map(function(s){var r="",n=s.indexOf(".");return n>=0&&(r=s.slice(n+1),s=s.slice(0,n)),{type:s,name:r}})}function Tn(t){return function(){var s=this.__on;if(s){for(var r=0,n=-1,i=s.length,l;r<i;++r)l=s[r],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):s[++n]=l;++n?s.length=n:delete this.__on}}}function Sn(t,s,r){return function(){var n=this.__on,i,l=Cn(s);if(n){for(var o=0,m=n.length;o<m;++o)if((i=n[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=l,i.options=r),i.value=s;return}}this.addEventListener(t.type,l,r),i={type:t.type,name:t.name,value:s,listener:l,options:r},n?n.push(i):this.__on=[i]}}function Dn(t,s,r){var n=An(t+""),i,l=n.length,o;if(arguments.length<2){var m=this.node().__on;if(m){for(var c=0,h=m.length,u;c<h;++c)for(i=0,u=m[c];i<l;++i)if((o=n[i]).type===u.type&&o.name===u.name)return u.value}return}for(m=s?Sn:Tn,i=0;i<l;++i)this.each(m(n[i],s,r));return this}function Ys(t,s,r){var n=Ws(t),i=n.CustomEvent;typeof i=="function"?i=new i(s,r):(i=n.document.createEvent("Event"),r?(i.initEvent(s,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(s,!1,!1)),t.dispatchEvent(i)}function En(t,s){return function(){return Ys(this,t,s)}}function $n(t,s){return function(){return Ys(this,t,s.apply(this,arguments))}}function Mn(t,s){return this.each((typeof s=="function"?$n:En)(t,s))}function*Rn(){for(var t=this._groups,s=0,r=t.length;s<r;++s)for(var n=t[s],i=0,l=n.length,o;i<l;++i)(o=n[i])&&(yield o)}var Xs=[null];function V(t,s){this._groups=t,this._parents=s}function Ee(){return new V([[document.documentElement]],Xs)}function In(){return this}V.prototype=Ee.prototype={constructor:V,select:oa,selectAll:ma,selectChild:ga,selectChildren:ya,filter:va,data:_a,enter:ja,exit:Aa,join:Ta,merge:Sa,selection:In,order:Da,sort:Ea,call:Ma,nodes:Ra,node:Ia,size:za,empty:Ua,each:Oa,attr:qa,style:Ka,property:en,classed:an,text:cn,html:un,raise:gn,lower:fn,append:bn,insert:vn,remove:Nn,clone:Fn,datum:_n,on:Dn,dispatch:Mn,[Symbol.iterator]:Rn};function he(t){return typeof t=="string"?new V([[document.querySelector(t)]],[document.documentElement]):new V([[t]],Xs)}function Ks(t){return new V([document.querySelectorAll(t)],[document.documentElement])}var Ne=0,Ae=0,Fe=0,Js=1e3,Ge,Te,Ye=0,fe=0,Je=0,De=typeof performance=="object"&&performance.now?performance:Date,Qs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function kt(){return fe||(Qs(zn),fe=De.now()+Je)}function zn(){fe=0}function Xe(){this._call=this._time=this._next=null}Xe.prototype=Zs.prototype={constructor:Xe,restart:function(t,s,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?kt():+r)+(s==null?0:+s),!this._next&&Te!==this&&(Te?Te._next=this:Ge=this,Te=this),this._call=t,this._time=r,ft()},stop:function(){this._call&&(this._call=null,this._time=1/0,ft())}};function Zs(t,s,r){var n=new Xe;return n.restart(t,s,r),n}function Un(){kt(),++Ne;for(var t=Ge,s;t;)(s=fe-t._time)>=0&&t._call.call(void 0,s),t=t._next;--Ne}function ys(){fe=(Ye=De.now())+Je,Ne=Ae=0;try{Un()}finally{Ne=0,Bn(),fe=0}}function On(){var t=De.now(),s=t-Ye;s>Js&&(Je-=s,Ye=t)}function Bn(){for(var t,s=Ge,r,n=1/0;s;)s._call?(n>s._time&&(n=s._time),t=s,s=s._next):(r=s._next,s._next=null,s=t?t._next=r:Ge=r);Te=t,ft(n)}function ft(t){if(!Ne){Ae&&(Ae=clearTimeout(Ae));var s=t-fe;s>24?(t<1/0&&(Ae=setTimeout(ys,t-De.now()-Je)),Fe&&(Fe=clearInterval(Fe))):(Fe||(Ye=De.now(),Fe=setInterval(On,Js)),Ne=1,Qs(ys))}}function vs(t,s,r){var n=new Xe;return s=s==null?0:+s,n.restart(i=>{n.stop(),t(i+s)},s,r),n}var Ln=zs("start","end","cancel","interrupt"),Pn=[],er=0,js=1,bt=2,We=3,Ns=4,yt=5,He=6;function Qe(t,s,r,n,i,l){var o=t.__transition;if(!o)t.__transition={};else if(r in o)return;Wn(t,r,{name:s,index:n,group:i,on:Ln,tween:Pn,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:er})}function Ft(t,s){var r=Q(t,s);if(r.state>er)throw new Error("too late; already scheduled");return r}function se(t,s){var r=Q(t,s);if(r.state>We)throw new Error("too late; already running");return r}function Q(t,s){var r=t.__transition;if(!r||!(r=r[s]))throw new Error("transition not found");return r}function Wn(t,s,r){var n=t.__transition,i;n[s]=r,r.timer=Zs(l,0,r.time);function l(h){r.state=js,r.timer.restart(o,r.delay,r.time),r.delay<=h&&o(h-r.delay)}function o(h){var u,v,x,g;if(r.state!==js)return c();for(u in n)if(g=n[u],g.name===r.name){if(g.state===We)return vs(o);g.state===Ns?(g.state=He,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete n[u]):+u<s&&(g.state=He,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete n[u])}if(vs(function(){r.state===We&&(r.state=Ns,r.timer.restart(m,r.delay,r.time),m(h))}),r.state=bt,r.on.call("start",t,t.__data__,r.index,r.group),r.state===bt){for(r.state=We,i=new Array(x=r.tween.length),u=0,v=-1;u<x;++u)(g=r.tween[u].value.call(t,t.__data__,r.index,r.group))&&(i[++v]=g);i.length=v+1}}function m(h){for(var u=h<r.duration?r.ease.call(null,h/r.duration):(r.timer.restart(c),r.state=yt,1),v=-1,x=i.length;++v<x;)i[v].call(t,u);r.state===yt&&(r.on.call("end",t,t.__data__,r.index,r.group),c())}function c(){r.state=He,r.timer.stop(),delete n[s];for(var h in n)return;delete t.__transition}}function Hn(t,s){var r=t.__transition,n,i,l=!0,o;if(r){s=s==null?null:s+"";for(o in r){if((n=r[o]).name!==s){l=!1;continue}i=n.state>bt&&n.state<yt,n.state=He,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[o]}l&&delete t.__transition}}function Vn(t){return this.each(function(){Hn(this,t)})}function qn(t,s){var r,n;return function(){var i=se(this,t),l=i.tween;if(l!==r){n=r=l;for(var o=0,m=n.length;o<m;++o)if(n[o].name===s){n=n.slice(),n.splice(o,1);break}}i.tween=n}}function Gn(t,s,r){var n,i;if(typeof r!="function")throw new Error;return function(){var l=se(this,t),o=l.tween;if(o!==n){i=(n=o).slice();for(var m={name:s,value:r},c=0,h=i.length;c<h;++c)if(i[c].name===s){i[c]=m;break}c===h&&i.push(m)}l.tween=i}}function Yn(t,s){var r=this._id;if(t+="",arguments.length<2){for(var n=Q(this.node(),r).tween,i=0,l=n.length,o;i<l;++i)if((o=n[i]).name===t)return o.value;return null}return this.each((s==null?qn:Gn)(r,t,s))}function _t(t,s,r){var n=t._id;return t.each(function(){var i=se(this,n);(i.value||(i.value={}))[s]=r.apply(this,arguments)}),function(i){return Q(i,n).value[s]}}function tr(t,s){var r;return(typeof s=="number"?vr:s instanceof ls?os:(r=ls(s))?(s=r,os):jr)(t,s)}function Xn(t){return function(){this.removeAttribute(t)}}function Kn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Jn(t,s,r){var n,i=r+"",l;return function(){var o=this.getAttribute(t);return o===i?null:o===n?l:l=s(n=o,r)}}function Qn(t,s,r){var n,i=r+"",l;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===n?l:l=s(n=o,r)}}function Zn(t,s,r){var n,i,l;return function(){var o,m=r(this),c;return m==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=m+"",o===c?null:o===n&&c===i?l:(i=c,l=s(n=o,m)))}}function ei(t,s,r){var n,i,l;return function(){var o,m=r(this),c;return m==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=m+"",o===c?null:o===n&&c===i?l:(i=c,l=s(n=o,m)))}}function ti(t,s){var r=Ke(t),n=r==="transform"?Nr:tr;return this.attrTween(t,typeof s=="function"?(r.local?ei:Zn)(r,n,_t(this,"attr."+t,s)):s==null?(r.local?Kn:Xn)(r):(r.local?Qn:Jn)(r,n,s))}function si(t,s){return function(r){this.setAttribute(t,s.call(this,r))}}function ri(t,s){return function(r){this.setAttributeNS(t.space,t.local,s.call(this,r))}}function ai(t,s){var r,n;function i(){var l=s.apply(this,arguments);return l!==n&&(r=(n=l)&&ri(t,l)),r}return i._value=s,i}function ni(t,s){var r,n;function i(){var l=s.apply(this,arguments);return l!==n&&(r=(n=l)&&si(t,l)),r}return i._value=s,i}function ii(t,s){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(s==null)return this.tween(r,null);if(typeof s!="function")throw new Error;var n=Ke(t);return this.tween(r,(n.local?ai:ni)(n,s))}function oi(t,s){return function(){Ft(this,t).delay=+s.apply(this,arguments)}}function li(t,s){return s=+s,function(){Ft(this,t).delay=s}}function ci(t){var s=this._id;return arguments.length?this.each((typeof t=="function"?oi:li)(s,t)):Q(this.node(),s).delay}function di(t,s){return function(){se(this,t).duration=+s.apply(this,arguments)}}function mi(t,s){return s=+s,function(){se(this,t).duration=s}}function hi(t){var s=this._id;return arguments.length?this.each((typeof t=="function"?di:mi)(s,t)):Q(this.node(),s).duration}function ui(t,s){if(typeof s!="function")throw new Error;return function(){se(this,t).ease=s}}function xi(t){var s=this._id;return arguments.length?this.each(ui(s,t)):Q(this.node(),s).ease}function gi(t,s){return function(){var r=s.apply(this,arguments);if(typeof r!="function")throw new Error;se(this,t).ease=r}}function pi(t){if(typeof t!="function")throw new Error;return this.each(gi(this._id,t))}function fi(t){typeof t!="function"&&(t=Bs(t));for(var s=this._groups,r=s.length,n=new Array(r),i=0;i<r;++i)for(var l=s[i],o=l.length,m=n[i]=[],c,h=0;h<o;++h)(c=l[h])&&t.call(c,c.__data__,h,l)&&m.push(c);return new ie(n,this._parents,this._name,this._id)}function bi(t){if(t._id!==this._id)throw new Error;for(var s=this._groups,r=t._groups,n=s.length,i=r.length,l=Math.min(n,i),o=new Array(n),m=0;m<l;++m)for(var c=s[m],h=r[m],u=c.length,v=o[m]=new Array(u),x,g=0;g<u;++g)(x=c[g]||h[g])&&(v[g]=x);for(;m<n;++m)o[m]=s[m];return new ie(o,this._parents,this._name,this._id)}function yi(t){return(t+"").trim().split(/^|\s+/).every(function(s){var r=s.indexOf(".");return r>=0&&(s=s.slice(0,r)),!s||s==="start"})}function vi(t,s,r){var n,i,l=yi(s)?Ft:se;return function(){var o=l(this,t),m=o.on;m!==n&&(i=(n=m).copy()).on(s,r),o.on=i}}function ji(t,s){var r=this._id;return arguments.length<2?Q(this.node(),r).on.on(t):this.each(vi(r,t,s))}function Ni(t){return function(){var s=this.parentNode;for(var r in this.__transition)if(+r!==t)return;s&&s.removeChild(this)}}function wi(){return this.on("end.remove",Ni(this._id))}function ki(t){var s=this._name,r=this._id;typeof t!="function"&&(t=Nt(t));for(var n=this._groups,i=n.length,l=new Array(i),o=0;o<i;++o)for(var m=n[o],c=m.length,h=l[o]=new Array(c),u,v,x=0;x<c;++x)(u=m[x])&&(v=t.call(u,u.__data__,x,m))&&("__data__"in u&&(v.__data__=u.__data__),h[x]=v,Qe(h[x],s,r,x,h,Q(u,r)));return new ie(l,this._parents,s,r)}function Fi(t){var s=this._name,r=this._id;typeof t!="function"&&(t=Os(t));for(var n=this._groups,i=n.length,l=[],o=[],m=0;m<i;++m)for(var c=n[m],h=c.length,u,v=0;v<h;++v)if(u=c[v]){for(var x=t.call(u,u.__data__,v,c),g,E=Q(u,r),I=0,N=x.length;I<N;++I)(g=x[I])&&Qe(g,s,r,I,x,E);l.push(x),o.push(u)}return new ie(l,o,s,r)}var _i=Ee.prototype.constructor;function Ci(){return new _i(this._groups,this._parents)}function Ai(t,s){var r,n,i;return function(){var l=je(this,t),o=(this.style.removeProperty(t),je(this,t));return l===o?null:l===r&&o===n?i:i=s(r=l,n=o)}}function sr(t){return function(){this.style.removeProperty(t)}}function Ti(t,s,r){var n,i=r+"",l;return function(){var o=je(this,t);return o===i?null:o===n?l:l=s(n=o,r)}}function Si(t,s,r){var n,i,l;return function(){var o=je(this,t),m=r(this),c=m+"";return m==null&&(c=m=(this.style.removeProperty(t),je(this,t))),o===c?null:o===n&&c===i?l:(i=c,l=s(n=o,m))}}function Di(t,s){var r,n,i,l="style."+s,o="end."+l,m;return function(){var c=se(this,t),h=c.on,u=c.value[l]==null?m||(m=sr(s)):void 0;(h!==r||i!==u)&&(n=(r=h).copy()).on(o,i=u),c.on=n}}function Ei(t,s,r){var n=(t+="")=="transform"?wr:tr;return s==null?this.styleTween(t,Ai(t,n)).on("end.style."+t,sr(t)):typeof s=="function"?this.styleTween(t,Si(t,n,_t(this,"style."+t,s))).each(Di(this._id,t)):this.styleTween(t,Ti(t,n,s),r).on("end.style."+t,null)}function $i(t,s,r){return function(n){this.style.setProperty(t,s.call(this,n),r)}}function Mi(t,s,r){var n,i;function l(){var o=s.apply(this,arguments);return o!==i&&(n=(i=o)&&$i(t,o,r)),n}return l._value=s,l}function Ri(t,s,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(s==null)return this.tween(n,null);if(typeof s!="function")throw new Error;return this.tween(n,Mi(t,s,r??""))}function Ii(t){return function(){this.textContent=t}}function zi(t){return function(){var s=t(this);this.textContent=s??""}}function Ui(t){return this.tween("text",typeof t=="function"?zi(_t(this,"text",t)):Ii(t==null?"":t+""))}function Oi(t){return function(s){this.textContent=t.call(this,s)}}function Bi(t){var s,r;function n(){var i=t.apply(this,arguments);return i!==r&&(s=(r=i)&&Oi(i)),s}return n._value=t,n}function Li(t){var s="text";if(arguments.length<1)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,Bi(t))}function Pi(){for(var t=this._name,s=this._id,r=rr(),n=this._groups,i=n.length,l=0;l<i;++l)for(var o=n[l],m=o.length,c,h=0;h<m;++h)if(c=o[h]){var u=Q(c,s);Qe(c,t,r,h,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ie(n,this._parents,t,r)}function Wi(){var t,s,r=this,n=r._id,i=r.size();return new Promise(function(l,o){var m={value:o},c={value:function(){--i===0&&l()}};r.each(function(){var h=se(this,n),u=h.on;u!==t&&(s=(t=u).copy(),s._.cancel.push(m),s._.interrupt.push(m),s._.end.push(c)),h.on=s}),i===0&&l()})}var Hi=0;function ie(t,s,r,n){this._groups=t,this._parents=s,this._name=r,this._id=n}function rr(){return++Hi}var ne=Ee.prototype;ie.prototype={constructor:ie,select:ki,selectAll:Fi,selectChild:ne.selectChild,selectChildren:ne.selectChildren,filter:fi,merge:bi,selection:Ci,transition:Pi,call:ne.call,nodes:ne.nodes,node:ne.node,size:ne.size,empty:ne.empty,each:ne.each,on:ji,attr:ti,attrTween:ii,style:Ei,styleTween:Ri,text:Ui,textTween:Li,remove:wi,tween:Yn,delay:ci,duration:hi,ease:xi,easeVarying:pi,end:Wi,[Symbol.iterator]:ne[Symbol.iterator]};function Vi(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ct=1.70158;(function t(s){s=+s;function r(n){return(n=+n)*n*(s*(n-1)+n)}return r.overshoot=t,r})(Ct);var ar=function t(s){s=+s;function r(n){return--n*n*((n+1)*s+n)+1}return r.overshoot=t,r}(Ct);(function t(s){s=+s;function r(n){return((n*=2)<1?n*n*((s+1)*n-s):(n-=2)*n*((s+1)*n+s)+2)/2}return r.overshoot=t,r})(Ct);var qi={time:null,delay:0,duration:250,ease:Vi};function Gi(t,s){for(var r;!(r=t.__transition)||!(r=r[s]);)if(!(t=t.parentNode))throw new Error(`transition ${s} not found`);return r}function Yi(t){var s,r;t instanceof ie?(s=t._id,t=t._name):(s=rr(),(r=qi).time=kt(),t=t==null?null:t+"");for(var n=this._groups,i=n.length,l=0;l<i;++l)for(var o=n[l],m=o.length,c,h=0;h<m;++h)(c=o[h])&&Qe(c,t,s,h,o,r||Gi(c,s));return new ie(n,this._parents,t,s)}Ee.prototype.interrupt=Vn;Ee.prototype.transition=Yi;function Se(t,s,r){this.k=t,this.x=s,this.y=r}Se.prototype={constructor:Se,scale:function(t){return t===1?this:new Se(this.k*t,this.x,this.y)},translate:function(t,s){return t===0&s===0?this:new Se(this.k,this.x+this.k*t,this.y+this.k*s)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Se.prototype;const ut=({data:t,width:s=400,height:r=300,color:n="#3B82F6",title:i="Chart",valueLabel:l="Value",barHeight:o=24,barSpacing:m=.1})=>{const c=z.useRef(null);return z.useEffect(()=>{if(!t||t.length===0)return;const h=he(c.current);h.selectAll("*").remove();const u={top:20,right:30,bottom:60,left:120},v=s-u.left-u.right,x=r-u.top-u.bottom,g=h.append("g").attr("transform",`translate(${u.left},${u.top})`),E=kr().domain([0,Fr(t,b=>b.value)||0]).range([0,v]),I=t.length<=2?m*.3:t.length<=3?m*.6:m,N=t.length<=3,S=N?Math.min(x,t.length*60):x,k=0,f=N?S:x,F=_r().domain(t.map(b=>b.name)).range([k,f]).paddingInner(I).paddingOuter(I/2),y=t.length<=2?Math.min(o*1.3,F.bandwidth()):t.length<=3?Math.min(o*1.1,F.bandwidth()):Math.min(o,F.bandwidth()),j=h.append("defs").append("linearGradient").attr("id",`gradient-${i.replace(/\s+/g,"-")}`).attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("y1",0).attr("x2",v).attr("y2",0);j.append("stop").attr("offset","0%").attr("stop-color",n).attr("stop-opacity",.8),j.append("stop").attr("offset","100%").attr("stop-color",n).attr("stop-opacity",1),g.selectAll(".bar").data(t).enter().append("rect").attr("class","bar").attr("x",0).attr("y",b=>(F(b.name)||0)+(F.bandwidth()-y)/2).attr("height",y).attr("fill",`url(#gradient-${i.replace(/\s+/g,"-")})`).attr("rx",4).attr("ry",4).style("cursor","pointer").on("mouseover",function(b,C){he(this).transition().duration(200).attr("opacity",.8),he("body").append("div").attr("class","tooltip").style("position","absolute").style("background","rgba(0, 0, 0, 0.8)").style("color","white").style("padding","8px 12px").style("border-radius","8px").style("font-size","14px").style("pointer-events","none").style("opacity",0).html(`<strong>${C.name}</strong><br/>${l}: ${C.value}`).style("left",b.pageX+10+"px").style("top",b.pageY-10+"px").transition().duration(200).style("opacity",1)}).on("mouseout",function(){he(this).transition().duration(200).attr("opacity",1),Ks(".tooltip").remove()}).transition().duration(800).ease(ar).attr("width",b=>E(b.value)),g.selectAll(".value-label").data(t).enter().append("text").attr("class","value-label").attr("x",b=>E(b.value)+5).attr("y",b=>(F(b.name)||0)+F.bandwidth()/2).attr("dy","0.35em").style("font-size","12px").style("font-weight","bold").style("fill","#374151").style("opacity",0).text(b=>b.value).transition().delay(400).duration(400).style("opacity",1),g.append("g").call(ea(F)).selectAll("text").style("font-size","12px").style("font-weight","500").style("fill","#374151"),g.append("g").attr("transform",`translate(0,${x})`).call(ps(E).ticks(5)).selectAll("text").style("font-size","11px").style("fill","#6B7280"),g.append("g").attr("class","grid").call(ps(E).ticks(5).tickSize(-x).tickFormat(()=>"")).style("opacity",.1),g.selectAll(".domain").remove()},[t,s,r,n,i,l,o,m]),e.jsx("svg",{ref:c,width:s,height:r,style:{overflow:"visible"}})},Xi=({data:t,width:s=500,height:r=500,innerRadius:n=80,outerRadius:i=160,onSliceClick:l})=>{const o=z.useRef(null);return z.useEffect(()=>{if(!t||t.length===0)return;const m=he(o.current);m.selectAll("*").remove();const c=m.append("g").attr("transform",`translate(${s/2},${r/2})`),h=Cr().value(N=>N.value).sort(null).padAngle(.02),u=Ar().innerRadius(n).outerRadius(i).cornerRadius(4),v=c.selectAll(".arc").data(h(t)).enter().append("g").attr("class","arc");v.append("path").attr("d",u).attr("fill",N=>N.data.color).attr("stroke","#fff").attr("stroke-width",3).style("cursor","pointer").style("filter","drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1))").on("mouseover",function(N,S){he(this).transition().duration(200).style("opacity",.8).style("transform","scale(1.05)");const k=t.reduce((_,y)=>_+y.value,0),f=Math.round(S.data.value/k*100);he("body").append("div").attr("class","tooltip").style("position","absolute").style("background","rgba(0, 0, 0, 0.9)").style("color","white").style("padding","12px 16px").style("border-radius","12px").style("font-size","14px").style("font-weight","500").style("pointer-events","none").style("opacity",0).style("box-shadow","0 8px 32px rgba(0, 0, 0, 0.3)").html(`
                        <div style="text-align: center;">
                            <div style="font-size: 16px; font-weight: bold; margin-bottom: 4px;">
                                ${S.data.name}
                            </div>
                            <div style="color: #E5E7EB;">
                                ${S.data.value} tickets (${f}%)
                            </div>
                        </div>
                    `).style("left",N.pageX+10+"px").style("top",N.pageY-10+"px").transition().duration(200).style("opacity",1)}).on("mouseout",function(){he(this).transition().duration(200).style("opacity",1).style("transform","scale(1)"),Ks(".tooltip").remove()}).on("click",function(N,S){l&&l(S.data)}).transition().duration(800).ease(ar).attrTween("d",function(N){const S=Tr({startAngle:0,endAngle:0},N);return function(k){return u(S(k))||""}}),v.append("text").attr("transform",N=>`translate(${u.centroid(N)})`).attr("dy","0.35em").style("text-anchor","middle").style("font-size","14px").style("font-weight","bold").style("fill","#fff").style("text-shadow","1px 1px 2px rgba(0, 0, 0, 0.7)").style("pointer-events","none").style("opacity",0).text(N=>{const S=t.reduce((f,F)=>f+F.value,0),k=Math.round(N.data.value/S*100);return k>5?`${k}%`:""}).transition().delay(600).duration(400).style("opacity",1);const x=t.reduce((N,S)=>N+S.value,0);c.append("text").attr("text-anchor","middle").attr("dy","-0.5em").style("font-size","32px").style("font-weight","bold").style("fill","#1F2937").style("opacity",0).text(x).transition().delay(800).duration(400).style("opacity",1),c.append("text").attr("text-anchor","middle").attr("dy","1.2em").style("font-size","14px").style("font-weight","500").style("fill","#6B7280").style("opacity",0).text("Total Tickets").transition().delay(800).duration(400).style("opacity",1);const g=t.filter(N=>N.value>0),I=m.append("g").attr("class","legend").attr("transform",`translate(20, ${r-(g.length*25+20)})`).selectAll(".legend-item").data(g).enter().append("g").attr("class","legend-item").attr("transform",(N,S)=>`translate(0, ${S*25})`).style("cursor","pointer").on("click",function(N,S){l&&l(S)});I.append("rect").attr("width",16).attr("height",16).attr("rx",3).attr("fill",N=>N.color).style("opacity",0).transition().delay(1e3).duration(400).style("opacity",1),I.append("text").attr("x",24).attr("y",8).attr("dy","0.35em").style("font-size","14px").style("font-weight","500").style("fill","#374151").style("opacity",0).text(N=>`${N.name} (${N.value})`).transition().delay(1e3).duration(400).style("opacity",1)},[t,s,r,n,i,l]),e.jsx("svg",{ref:o,width:s,height:r,style:{overflow:"visible"}})},Ki=({active:t,payload:s,label:r})=>{if(t&&s&&s.length){const n=s.reduce((i,l)=>i+(l.value||0),0);return e.jsx("div",{className:"bg-white dark:bg-gray-800 border-0 rounded-2xl shadow-2xl p-6 min-w-[200px]",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-b border-gray-100 dark:border-gray-700 pb-3",children:[e.jsx("p",{className:"font-bold text-lg text-gray-900 dark:text-white",children:r}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Total: ",n," tickets"]})]}),e.jsx("div",{className:"space-y-3",children:s.map((i,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shadow-md",style:{backgroundColor:i.color}}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:i.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:i.value}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1",children:["(",n>0?Math.round(i.value/n*100):0,"%)"]})]})]},l))})]})})}return null};function Ji({data:t}){return e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsxs(A,{className:"border-0 bg-gradient-to-br from-primary/5 via-background to-secondary/5 shadow-2xl overflow-hidden relative lg:col-span-2",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 to-green-50/50 dark:from-blue-950/20 dark:to-green-950/20"}),e.jsxs(P,{className:"pb-8 relative",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-gradient-to-br from-blue-500 to-green-500 shadow-lg",children:e.jsx(ve,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{children:[e.jsx(W,{className:"text-3xl font-black text-foreground",children:"Ticket Evolution"}),e.jsx("p",{className:"text-lg text-muted-foreground font-medium",children:"Created vs Resolved trends over time"})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-blue-50/80 dark:bg-blue-950/30 rounded-xl p-4 border border-blue-100 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full shadow-sm"}),e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Average Created"})]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:[t.ticketsOverTime.length>0?Math.round(t.ticketsOverTime.reduce((s,r)=>s+r.created,0)/t.ticketsOverTime.length):0," /day"]})]}),e.jsxs("div",{className:"bg-green-50/80 dark:bg-green-950/30 rounded-xl p-4 border border-green-100 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full shadow-sm"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Average Resolved"})]}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-2",children:[t.ticketsOverTime.length>0?Math.round(t.ticketsOverTime.reduce((s,r)=>s+r.resolved,0)/t.ticketsOverTime.length):0," /day"]})]})]})]}),e.jsx(T,{className:"pt-0 pb-8 relative",children:e.jsx("div",{className:"h-[450px] bg-gradient-to-b from-white/50 to-transparent dark:from-gray-900/50 rounded-2xl p-4",children:e.jsx(ks,{width:"100%",height:"100%",children:e.jsxs(Fs,{data:t.ticketsOverTime,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorCreated",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:.9}),e.jsx("stop",{offset:"50%",stopColor:"#3b82f6",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorResolved",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:.9}),e.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:.1})]}),e.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx(_s,{strokeDasharray:"2 6",stroke:"hsl(var(--muted-foreground))",opacity:.3,vertical:!1}),e.jsx(Cs,{dataKey:"month",tick:{fontSize:13,fill:"hsl(var(--muted-foreground))",fontWeight:500},tickLine:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1},axisLine:{stroke:"hsl(var(--border))",strokeWidth:2},dy:10}),e.jsx(As,{tick:{fontSize:13,fill:"hsl(var(--muted-foreground))",fontWeight:500},tickLine:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1},axisLine:{stroke:"hsl(var(--border))",strokeWidth:2},dx:-10}),e.jsx(Ts,{content:e.jsx(Ki,{})}),e.jsx(Ve,{type:"monotone",dataKey:"created",stackId:"1",stroke:"#3b82f6",strokeWidth:4,fill:"url(#colorCreated)",name:"Created",dot:{fill:"#3b82f6",strokeWidth:3,r:6,stroke:"#ffffff",filter:"url(#glow)"},activeDot:{r:8,stroke:"#3b82f6",strokeWidth:4,fill:"#ffffff",filter:"url(#glow)",className:"animate-pulse"}}),e.jsx(Ve,{type:"monotone",dataKey:"resolved",stackId:"2",stroke:"#10b981",strokeWidth:4,fill:"url(#colorResolved)",name:"Resolved",dot:{fill:"#10b981",strokeWidth:3,r:6,stroke:"#ffffff",filter:"url(#glow)"},activeDot:{r:8,stroke:"#10b981",strokeWidth:4,fill:"#ffffff",filter:"url(#glow)",className:"animate-pulse"}}),e.jsx(Sr,{verticalAlign:"top",height:50,iconType:"circle",formatter:(s,r)=>e.jsx("span",{className:"text-base font-semibold",style:{color:r.color},children:s})})]})})})})]})})}const Qi=[{title:"Dashboard",href:"/dashboard"}],ws=["#3B82F6","#EF4444","#F59E0B","#10B981","#8B5CF6","#F97316","#06B6D4","#84CC16","#EC4899","#6366F1"],Zi=async t=>{const s=new vt.Workbook;s.creator="Ticketing System - Trend Analysis",s.created=new Date,s.company="Weekly Performance Report";const r=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),i=(y=>{const j=[],b=new Date;for(let C=6;C>=0;C--){const $=new Date(b);$.setDate(b.getDate()-C);const M=$.toLocaleDateString("en-US",{month:"short",day:"numeric"}),U=y.find(X=>X.date===M);j.push({date:M,count:U&&U.count||0})}return j})(t),l={primary:"FF2563EB",secondary:"FF1E3A8A",success:"FF059669",warning:"FFF59E0B",danger:"FFDC2626",info:"FF0891B2",light:"FFF8FAFC",dark:"FF1E293B"},o=s.addWorksheet("Weekly Trend Analysis",{pageSetup:{paperSize:9,orientation:"landscape"}});o.columns=[{width:15},{width:18},{width:18},{width:20},{width:25},{width:30}],o.mergeCells("A1:F1");const m=o.getCell("A1");m.value="WEEKLY PERFORMANCE TREND ANALYSIS",m.style={font:{name:"Segoe UI",size:20,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:l.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:l.secondary}},left:{style:"thick",color:{argb:l.secondary}},bottom:{style:"thick",color:{argb:l.secondary}},right:{style:"thick",color:{argb:l.secondary}}}},o.getRow(1).height=40,o.mergeCells("A2:D2");const c=o.getCell("A2");c.value=`Analysis Period: Last 7 Days | Generated: ${r}`,c.style={font:{name:"Segoe UI",size:11,italic:!0,color:{argb:l.dark}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:l.light}},alignment:{horizontal:"left",vertical:"middle"}},o.mergeCells("E2:F2");const h=i.reduce((y,j)=>y+(j.count||0),0),u=i.length>0?Math.round(h/i.length):0,v=o.getCell("E2");v.value=`Total: ${h} tickets | Daily Avg: ${u}`,v.style={font:{name:"Segoe UI",size:11,bold:!0,color:{argb:l.primary}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:l.light}},alignment:{horizontal:"right",vertical:"middle"}};let x=4;["Date","Tickets Created","Trend vs Avg","Performance","Volume Category","Action Needed"].forEach((y,j)=>{const b=o.getCell(x,j+1);b.value=y,b.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:l.secondary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:"FFFFFFFF"}},left:{style:"medium",color:{argb:"FFFFFFFF"}},bottom:{style:"medium",color:{argb:"FFFFFFFF"}},right:{style:"medium",color:{argb:"FFFFFFFF"}}}}}),o.getRow(x).height=30,x++,i.forEach((y,j)=>{const b=y.count||0,C=u||1,$=C>0?Math.round((b-C)/C*100):0,M=$>15?"â†— Above Average":$<-15?"â†˜ Below Average":"â†’ Normal Range",U=b>C*1.3?"High Volume":b<C*.7?"Low Volume":"Standard Volume",X=b>C*1.5?"Peak Day":b>C*1.2?"Busy Day":b<C*.8?"Light Day":"Normal Day",we=b>C*1.5?"Monitor capacity & resources":b<C*.5?"Review for issues":"Continue monitoring";[y.date||"Unknown",b,`${$>0?"+":""}${$}% ${M}`,U,X,we].forEach((be,q)=>{const $e=o.getCell(x,q+1);$e.value=be;let Z=j%2===0?"FFFFFFFF":"FFF8FAFC",G=l.dark;if(q===2&&($>15?(Z=l.success,G="FFFFFFFF"):$<-15&&(Z=l.warning,G="FFFFFFFF")),q===3)switch(be){case"High Volume":Z=l.info,G="FFFFFFFF";break;case"Low Volume":Z=l.warning,G="FFFFFFFF";break}if(q===4)switch(be){case"Peak Day":Z=l.danger,G="FFFFFFFF";break;case"Busy Day":Z=l.warning,G="FFFFFFFF";break;case"Light Day":Z=l.info,G="FFFFFFFF";break}$e.style={font:{name:"Segoe UI",size:10,color:{argb:G}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:Z}},alignment:{horizontal:q===0||q===5?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),o.getRow(x).height=25,x++}),x+=2,o.mergeCells(`A${x}:F${x}`);const E=o.getCell(`A${x}`);E.value="TREND ANALYSIS & INSIGHTS",E.style={font:{name:"Segoe UI",size:14,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:l.info}},alignment:{horizontal:"center",vertical:"middle"}},x++;const I=t.reduce((y,j)=>j.count>y.count?j:y,t[0]),N=t.reduce((y,j)=>j.count<y.count?j:y,t[0]),S=Math.round((I.count-N.count)/u*100);[["Metric","Value","Analysis","Recommendation"],["Peak Day",`${I.date} (${I.count} tickets)`,I.count>u*1.5?"Significant spike":"Normal peak","Monitor for patterns"],["Lowest Day",`${N.date} (${N.count} tickets)`,N.count<u*.5?"Unusual low":"Normal variation","Check for issues if unusually low"],["Variance",`${S}%`,S>50?"High volatility":"Stable pattern",S>50?"Review capacity planning":"Maintain current approach"],["Trend Direction",h>u*7?"Growing":"Stable","Week over week","Adjust resources as needed"],["Consistency",Math.abs(S)<30?"Very Consistent":"Variable","Daily fluctuation","Plan for peak capacity"]].forEach((y,j)=>{y.forEach((b,C)=>{const $=o.getCell(x+j,C+1);$.value=b;let M=j===0?l.secondary:"FFFFFFFF",U=j===0?"FFFFFFFF":l.dark;j>0&&C===2&&(b.includes("spike")||b.includes("High volatility")?(M=l.warning,U="FFFFFFFF"):(b.includes("Consistent")||b.includes("Stable"))&&(M=l.success,U="FFFFFFFF")),$.style={font:{name:"Segoe UI",size:10,bold:j===0||C===0,color:{argb:U}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:M}},alignment:{horizontal:C===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),o.getRow(x+j).height=22});const f=`Weekly_Trend_Analysis_${new Date().toISOString().split("T")[0]}.xlsx`,F=await s.xlsx.writeBuffer(),_=new Blob([F],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});jt.saveAs(_,f),L.success("Weekly Trend Analysis Generated!",{description:`${f} has been downloaded with comprehensive trend analysis and insights.`})},eo=async(t,s)=>{const r=new vt.Workbook;r.creator="Ticketing System - Analytics",r.created=new Date,r.company="Ticket Distribution Analysis";const n=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),i={primary:"FF2563EB",secondary:"FF1E3A8A",success:"FF059669",warning:"FFF59E0B",danger:"FFDC2626",info:"FF0891B2",light:"FFF8FAFC",dark:"FF1E293B"},l=r.addWorksheet("Ticket Distribution Analysis",{pageSetup:{paperSize:9,orientation:"portrait"}});l.columns=[{width:25},{width:15},{width:18},{width:20},{width:25}],l.mergeCells("A1:E1");const o=l.getCell("A1");o.value="TICKET DISTRIBUTION ANALYSIS REPORT",o.style={font:{name:"Segoe UI",size:18,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:i.secondary}},left:{style:"thick",color:{argb:i.secondary}},bottom:{style:"thick",color:{argb:i.secondary}},right:{style:"thick",color:{argb:i.secondary}}}},l.getRow(1).height=35,l.mergeCells("A2:C2");const m=l.getCell("A2");m.value=`Report Generated: ${n}`,m.style={font:{name:"Segoe UI",size:11,italic:!0,color:{argb:i.dark}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.light}},alignment:{horizontal:"left",vertical:"middle"}},l.mergeCells("D2:E2");const c=l.getCell("D2");c.value=`Total Tickets: ${s}`,c.style={font:{name:"Segoe UI",size:11,bold:!0,color:{argb:i.primary}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.light}},alignment:{horizontal:"right",vertical:"middle"}};let h=4;["Status","Count","Percentage","Priority Level","Action Required"].forEach((f,F)=>{const _=l.getCell(h,F+1);_.value=f,_.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.secondary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:"FFFFFFFF"}},left:{style:"medium",color:{argb:"FFFFFFFF"}},bottom:{style:"medium",color:{argb:"FFFFFFFF"}},right:{style:"medium",color:{argb:"FFFFFFFF"}}}}}),l.getRow(h).height=30,h++;const v={open:{label:"Open",priority:"Critical",action:"Immediate Assignment Required",color:i.danger},in_progress:{label:"In Progress",priority:"High",action:"Monitor Progress",color:i.warning},resolved:{label:"Resolved",priority:"Low",action:"Quality Check",color:i.success},closed:{label:"Closed",priority:"Completed",action:"Archive",color:i.info}};Object.entries(t).forEach(([f,F])=>{const _=Math.round(Number(F)/s*100),y=v[f]||{label:f,priority:"Unknown",action:"Review",color:i.dark};[y.label,F,`${_}%`,y.priority,y.action].forEach((b,C)=>{const $=l.getCell(h,C+1);$.value=b;let M="FFFFFFFF",U=i.dark;if(C===0&&(M=y.color,U="FFFFFFFF"),C===3)switch(b){case"Critical":M=i.danger,U="FFFFFFFF";break;case"High":M=i.warning,U="FFFFFFFF";break;case"Low":M=i.success,U="FFFFFFFF";break;case"Completed":M=i.info,U="FFFFFFFF";break}$.style={font:{name:"Segoe UI",size:11,bold:C===0,color:{argb:U}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:M}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),l.getRow(h).height=25,h++}),h+=2,l.mergeCells(`A${h}:E${h}`);const x=l.getCell(`A${h}`);x.value="WORKFLOW ANALYSIS & RECOMMENDATIONS",x.style={font:{name:"Segoe UI",size:14,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.info}},alignment:{horizontal:"center",vertical:"middle"}},h++;const g=Math.round(t.open/s*100),E=Math.round(t.resolved/s*100);[["Metric","Value","Status","Recommendation"],["Open Tickets Rate",`${g}%`,g>20?"High":"Normal",g>20?"Increase technical resources":"Maintain current level"],["Resolution Rate",`${E}%`,E>70?"Excellent":"Needs Improvement",E>70?"Continue best practices":"Review resolution processes"],["Workflow Efficiency",s>100?"High Volume":"Standard","Active","Monitor trends and adjust capacity"],["System Health","Operational","Good","Regular monitoring recommended"]].forEach((f,F)=>{f.forEach((_,y)=>{const j=l.getCell(h+F,y+1);j.value=_;let b=F===0?i.secondary:"FFFFFFFF",C=F===0?"FFFFFFFF":i.dark;if(F>0&&y===2)switch(_){case"High":b=i.danger,C="FFFFFFFF";break;case"Excellent":b=i.success,C="FFFFFFFF";break;case"Good":b=i.success,C="FFFFFFFF";break;case"Needs Improvement":b=i.warning,C="FFFFFFFF";break}j.style={font:{name:"Segoe UI",size:10,bold:F===0||y===0,color:{argb:C}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:b}},alignment:{horizontal:y===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),l.getRow(h+F).height=22});const N=`Ticket_Distribution_Analysis_${new Date().toISOString().split("T")[0]}.xlsx`,S=await r.xlsx.writeBuffer(),k=new Blob([S],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});jt.saveAs(k,N),L.success("Ticket Distribution Analysis Generated!",{description:`${N} has been downloaded with detailed analysis and recommendations.`})},to=async t=>{const s=new vt.Workbook;s.creator="Ticketing System - Device Management",s.created=new Date,s.company="Device Inventory Report";const r=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),n={primary:"FF2563EB",secondary:"FF1E3A8A",success:"FF059669",warning:"FFF59E0B",info:"FF0891B2",light:"FFF8FAFC",dark:"FF1E293B"},i=s.addWorksheet("Device Inventory",{pageSetup:{paperSize:9,orientation:"landscape"}});i.columns=[{width:8},{width:25},{width:18},{width:18},{width:20},{width:20},{width:15},{width:15},{width:25}],i.mergeCells("A1:H1");const l=i.getCell("A1");l.value="DEVICE INVENTORY MANAGEMENT REPORT",l.style={font:{name:"Segoe UI",size:20,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:n.secondary}},left:{style:"thick",color:{argb:n.secondary}},bottom:{style:"thick",color:{argb:n.secondary}},right:{style:"thick",color:{argb:n.secondary}}}},i.getRow(1).height=40,i.mergeCells("A2:E2");const o=i.getCell("A2");o.value=`Generated on: ${r}`,o.style={font:{name:"Segoe UI",size:12,italic:!0,color:{argb:n.dark}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.light}},alignment:{horizontal:"left",vertical:"middle"}},i.mergeCells("F2:H2");const m=i.getCell("F2"),c=t.length,h=t.filter(k=>k.users_count>0).length,u=new Set(t.map(k=>k.device_type)).size;m.value=`Total: ${c} | Active: ${h} | Types: ${u}`,m.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:n.primary}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.light}},alignment:{horizontal:"right",vertical:"middle"}};const v=["ID","Name Device","Model","Brand","System","Users","Status","Usage Level"];let x=4;v.forEach((k,f)=>{const F=i.getCell(x,f+1);F.value=k,F.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.secondary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:"FFFFFFFF"}},left:{style:"medium",color:{argb:"FFFFFFFF"}},bottom:{style:"medium",color:{argb:"FFFFFFFF"}},right:{style:"medium",color:{argb:"FFFFFFFF"}}}}}),i.getRow(x).height=30,x++,t.forEach((k,f)=>{const F=k.users_count===0?"Unused":k.users_count<=2?"Low Usage":k.users_count<=5?"Medium Usage":"High Usage",_=k.users_count>0?"Active":"Inactive";[k.id,k.device_type||"Unknown",k.device_name||"N/A",k.brand_name||"N/A",k.system_name||"N/A",k.users_count||0,_,F].forEach((j,b)=>{const C=i.getCell(x,b+1);C.value=j;let $=f%2===0?"FFFFFFFF":"FFF8FAFC",M=n.dark;if(b===7&&(j==="Active"?($=n.success,M="FFFFFFFF"):($="FFEF4444",M="FFFFFFFF")),b===8)switch(j){case"High Usage":$=n.success,M="FFFFFFFF";break;case"Medium Usage":$=n.warning,M="FFFFFFFF";break;case"Low Usage":$=n.info,M="FFFFFFFF";break;case"Unused":$="FFEF4444",M="FFFFFFFF";break}C.style={font:{name:"Segoe UI",size:10,color:{argb:M}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:$}},alignment:{horizontal:b===1?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),i.getRow(x).height=25,x++}),x+=2,i.mergeCells(`A${x}:H${x}`);const g=i.getCell(`A${x}`);g.value="INVENTORY SUMMARY",g.style={font:{name:"Segoe UI",size:14,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.info}},alignment:{horizontal:"center",vertical:"middle"}},x++,[["Total Devices",c,"Complete inventory count"],["Active Devices",h,`${Math.round(h/c*100)}% utilization rate`],["Inactive Devices",c-h,"Available for assignment"],["Device Types",u,"Different categories available"],["Total Users",t.reduce((k,f)=>k+f.users_count,0),"Active device users"]].forEach(k=>{k.forEach((f,F)=>{const _=i.getCell(x,F+1);_.value=f,_.style={font:{name:"Segoe UI",size:10,bold:F===0},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFFFF"}},alignment:{horizontal:F===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),x++});const I=`Device_Inventory_Report_${new Date().toISOString().split("T")[0]}.xlsx`,N=await s.xlsx.writeBuffer(),S=new Blob([N],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});jt.saveAs(S,I),L.success("Device Inventory Report Generated!",{description:`${I} has been downloaded with professional formatting and detailed analysis.`})},xt=({isOpen:t,onClose:s,tickets:r,title:n})=>{const i=o=>new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),l=o=>({open:"bg-red-100 text-red-800 border border-red-200",in_progress:"bg-blue-100 text-blue-800 border border-blue-200",resolved:"bg-green-100 text-green-800 border border-green-200",closed:"bg-gray-100 text-gray-800 border border-gray-200",cancelled:"bg-red-100 text-red-800 border border-red-200",reopened:"bg-purple-100 text-purple-800 border border-purple-200"})[o]||"bg-gray-100 text-gray-800";return e.jsx(Ds,{open:t,onOpenChange:s,children:e.jsxs(Es,{className:"max-w-6xl max-h-[90vh] overflow-hidden",children:[e.jsxs($s,{children:[e.jsx(Ms,{className:"text-2xl font-bold",children:n}),e.jsxs(Ir,{className:"text-lg",children:[r.length," ticket",r.length!==1?"s":""," found"]})]}),e.jsx("div",{className:"overflow-y-auto custom-scrollbar",style:{maxHeight:"calc(90vh - 200px)"},children:r.length>0?e.jsx("div",{className:"space-y-4",children:r.map(o=>{var m;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm font-mono text-blue-600 bg-blue-50 px-2 py-1 rounded",children:["#",o.code]}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${l(o.status)}`,children:o.status.toUpperCase().replace("_"," ")})]}),e.jsx("div",{className:"text-xs text-gray-500",children:i(o.created_at)})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3 line-clamp-2",children:o.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[o.user&&e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-400 to-blue-400 flex items-center justify-center text-white text-sm font-bold",children:((m=o.user.name)==null?void 0:m.substring(0,1))||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-purple-900 truncate",children:o.user.name}),o.user.email&&e.jsx("p",{className:"text-xs text-purple-700 truncate",children:o.user.email})]})]})}),o.device&&e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-green-400 to-emerald-400 flex items-center justify-center text-white",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-green-900 truncate",children:o.device.name_device.name||"Device"}),o.device.apartment&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),e.jsxs("p",{className:"text-xs text-green-700 truncate",children:[o.device.apartment.name,o.device.apartment.building&&` - ${o.device.apartment.building.name}`]})]})]})]})})]}),e.jsx("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",children:e.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:["ID: ",o.id]})})]},o.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No tickets found"}),e.jsx("p",{className:"text-gray-500",children:"There are no tickets in this category at the moment."})]})})]})})};function Xo({metrics:t,charts:s,lists:r,googleMapsApiKey:n,technicalInstructions:i=[],currentTechnical:l=null}){var zt,Ut,Ot,Bt,Lt,Pt,Wt,Ht,Vt,qt,Gt,Yt,Xt,Kt,Jt,Qt,Zt,es,ts,ss,rs;const o=br().props;console.log("PageProps structure:",o),console.log("Auth user:",(zt=o==null?void 0:o.auth)==null?void 0:zt.user),console.log("Roles array:",(Ot=(Ut=o==null?void 0:o.auth)==null?void 0:Ut.user)==null?void 0:Ot.roles),console.log("First role:",(Pt=(Lt=(Bt=o==null?void 0:o.auth)==null?void 0:Bt.user)==null?void 0:Lt.roles)==null?void 0:Pt[0]);const m=((Ht=(Wt=o==null?void 0:o.auth)==null?void 0:Wt.user)==null?void 0:Ht.roles)||[],c=m.some(a=>typeof a=="string"?a==="super-admin":a.name==="super-admin")||!1,h=m.some(a=>typeof a=="string"?a==="technical":a.name==="technical")||!1,u=((Gt=(qt=(Vt=o==null?void 0:o.auth)==null?void 0:Vt.user)==null?void 0:qt.technical)==null?void 0:Gt.is_default)||!1,v=m.some(a=>typeof a=="string"?a==="doorman":a.name==="doorman")||!1,x=m.some(a=>typeof a=="string"?a==="owner":a.name==="owner")||!1,g=m.some(a=>typeof a=="string"?a==="tenant":a.name==="tenant")||!1,E=c||u,[I,N]=z.useState(!1),[S,k]=z.useState(!1),[f,F]=z.useState(null),[_,y]=z.useState(!1),j=z.useRef(null),[b,C]=z.useState(!1),[$,M]=z.useState(!1),[U,X]=z.useState(!1),[we,At]=z.useState([]),be=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});console.log("Dashboard Props - technicalInstructions:",i),console.log("Is Technical:",h),console.log("User Roles:",(Xt=(Yt=o==null?void 0:o.auth)==null?void 0:Yt.user)==null?void 0:Xt.roles);const[q,$e]=z.useState(i||[]),Z=async a=>{var d;try{await fetch(route("dashboard.mark-instruction-read"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:JSON.stringify({instruction_index:a})}),$e(p=>p.map((w,D)=>D===a?{...w,read:!0}:w)),L.success("Instruction marked as read")}catch(p){console.error("Error marking instruction as read:",p),L.error("Failed to mark instruction as read")}},[G,ue]=z.useState([]),[ye,xe]=z.useState(0),Tt=async()=>{try{console.log("🔔 Dashboard: Fetching notifications...");const a=await fetch("/notifications/api");if(a.ok){const d=await a.json();if(console.log("🔔 Dashboard: Notifications response:",d),d.success){const p=d.notifications||[],w=d.unread_count||0;console.log("🔔 Dashboard: Setting notifications:",p.length),console.log("🔔 Dashboard: Setting unread count:",w),ue(p),xe(w)}else console.error("🔔 Dashboard: API returned success=false:",d),ue([]),xe(0)}else console.error("🔔 Dashboard: Error loading notifications:",a.status),ue([]),xe(0)}catch(a){console.error("🔔 Dashboard: Error fetching notifications:",a),ue([]),xe(0)}},St=async a=>{try{console.log("🔔 Marking notification as read:",a),_e.post(`/notifications/${a}/read`,{},{onSuccess:()=>{ue(d=>d.map(p=>p.id===a?{...p,read_at:new Date().toISOString()}:p)),xe(d=>Math.max(0,d-1)),console.log("🔔 Notification marked as read successfully"),L.success("Notification marked as read")},onError:d=>{console.error("🔔 Error marking notification as read:",d),L.error("Failed to mark notification as read")}})}catch(d){console.error("🔔 Error marking notification as read:",d),L.error("Network error occurred")}},nr=async()=>{try{const a=G.filter(p=>!p.read_at).map(p=>p.id);if(console.log("🔔 Marking all notifications as read:",a.length,"notifications"),a.length===0){L.info("No unread notifications to mark");return}const d=a.map(p=>new Promise((w,D)=>{_e.post(`/notifications/${p}/read`,{},{onSuccess:()=>w(),onError:()=>D(new Error(`Failed to mark notification ${p} as read`))})}));await Promise.all(d),ue(p=>p.map(w=>({...w,read_at:w.read_at||new Date().toISOString()}))),xe(0),console.log("🔔 All notifications marked as read successfully"),L.success(`${a.length} notifications marked as read`)}catch(a){console.error("🔔 Error marking all notifications as read:",a),L.error("Failed to mark all notifications as read")}},ir=async a=>{try{_e.delete(`/notifications/${a}`,{onSuccess:()=>{ue(p=>p.filter(w=>w.id!==a)),G.find(p=>p.id===a&&!p.read_at)&&xe(p=>Math.max(0,p-1)),L.success("Notification deleted")},onError:d=>{console.error("Error deleting notification:",d),L.error("Failed to delete notification")}})}catch(d){console.error("Error deleting notification:",d),L.error("Network error occurred")}};z.useEffect(()=>{Tt();const a=setInterval(Tt,3e4);return()=>clearInterval(a)},[]);const[re,Dt]=z.useState(()=>{var a,d,p,w;if(console.log("=== INITIAL APPOINTMENT DEBUG ==="),console.log("Dashboard upcomingAppointments from backend:",r.upcomingAppointments),console.log("User email from pageProps:",(d=(a=o==null?void 0:o.auth)==null?void 0:a.user)==null?void 0:d.email),console.log("Current technical from props:",l),console.log("User roles:",(w=(p=o==null?void 0:o.auth)==null?void 0:p.user)==null?void 0:w.roles),console.log("Is technical user:",h),console.log("Is default technical:",u),r.upcomingAppointments&&r.upcomingAppointments.length>0){if(console.log("Total appointments received:",r.upcomingAppointments.length),console.log("First appointment details:",r.upcomingAppointments[0]),console.log("All appointment technical assignments:",r.upcomingAppointments.map(D=>{var O,ee;return{id:D.id,title:D.title,scheduled_for:D.scheduled_for,technical_id:(O=D.technical)==null?void 0:O.id,technical_name:(ee=D.technical)==null?void 0:ee.name,status:D.status}})),h&&!u&&l){const D=r.upcomingAppointments.filter(O=>O.technical&&O.technical.id===l.id);return console.log("Filtered appointments for technical:",D.length),console.log("My appointments details:",D),console.log("=== END INITIAL APPOINTMENT DEBUG ==="),D}console.log("=== END INITIAL APPOINTMENT DEBUG ===")}else console.log("No appointments in initial props"),console.log("=== END INITIAL APPOINTMENT DEBUG ===");return r.upcomingAppointments||[]});z.useEffect(()=>{if(r.upcomingAppointments)if(console.log("Updating appointments with new data:",r.upcomingAppointments),h&&!u&&l){const a=r.upcomingAppointments.filter(d=>d.technical&&d.technical.id===l.id);console.log("Filtered appointments for technical on update:",a.length),Dt(a)}else Dt(r.upcomingAppointments)},[r.upcomingAppointments,h,u,l]);const Et=z.useMemo(()=>{if(!re||re.length===0)return console.log("No appointments available in state"),0;console.log("Total appointments in state:",re.length),console.log("All appointments:",re);const a=new Date;a.setHours(0,0,0,0);const d=new Date(a);d.setDate(a.getDate()+2),d.setHours(23,59,59,999),console.log("Date range for appointments:",{today:a.toISOString(),threeDaysLater:d.toISOString()});const p=re.filter(w=>{console.log("Processing appointment:",w);const D=w.scheduled_for||w.scheduled_at||w.date||"";console.log("Date field found:",D);const O=new Date(D);if(console.log("Parsed date:",O.toISOString()),isNaN(O.getTime()))return console.log("Invalid date, skipping"),!1;const ee=O>=a&&O<=d,ae=w.status!=="canceled"&&w.status!=="cancelled",B=w.status==="in_progress"&&O.toDateString()===a.toDateString(),oe=(ee||B)&&ae;return console.log("Is in range:",ee,"Is not canceled:",ae,"Is in progress today:",B,"Should include:",oe),oe});return console.log("Filtered appointments count:",p.length),console.log("Filtered appointments:",p),p.length},[re]),or=a=>{const d={scheduled:{label:"Scheduled",color:"text-blue-500 bg-blue-50",icon:le},in_progress:{label:"In Progress",color:"text-yellow-500 bg-yellow-50",icon:Gr},completed:{label:"Completed",color:"text-green-500 bg-green-50",icon:te},cancelled:{label:"Cancelled",color:"text-red-500 bg-red-50",icon:at},rescheduled:{label:"Rescheduled",color:"text-gray-500 bg-gray-50",icon:K}};return d[a]||d.scheduled},Ze=a=>{const d=new Date(a);return{date:d.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),time:d.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}},lr=a=>{window.open(`/appointments?appointment=${a}`,"_blank")},$t=()=>{window.open("/appointments","_blank")},cr=a=>{y(!1),setTimeout(()=>{F(a),k(!0)},100)},et=z.useCallback(()=>{k(!1),setTimeout(()=>{F(null),document.body.classList.remove("overflow-hidden"),document.querySelectorAll("[data-radix-portal]").forEach(d=>{d.children.length===0&&d.remove()})},150)},[]);z.useEffect(()=>{const a=d=>{d.key==="Escape"&&S&&et()};if(S)return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[S,et]);const dr=a=>{if(!a)return"";if(a.includes("maps.app.goo.gl"))return`https://www.google.com/maps/embed/v1/place?key=${n}&q=-10.916879,-74.883391&zoom=15`;if(a.includes("/embed"))return a;if(a.includes("google.com/maps")){const d=a.match(/@([-0-9.]+),([-0-9.]+)/);if(d)return`https://www.google.com/maps/embed/v1/view?key=${n}&center=${d[1]},${d[2]}&zoom=15`;const p=a.match(/place\/([^/]+)/);if(p)return`https://www.google.com/maps/embed/v1/place?key=${n}&q=place_id:${p[1]}`}return`https://www.google.com/maps/embed/v1/place?key=${n}&q=${encodeURIComponent(a)}`},ge=a=>{var D,O;const d=(O=(D=a.ticket.device)==null?void 0:D.tenants)==null?void 0:O[0],p=d==null?void 0:d.apartment,w=p==null?void 0:p.building;return{buildingName:(w==null?void 0:w.name)||"No building",unitNumber:(p==null?void 0:p.name)||"N/A",locationLink:(w==null?void 0:w.location_link)||"",building:w}},[Mt,mr]=z.useState(new Date),[hr,Rt]=z.useState("Updated just now"),It=a=>{const p=Math.floor((new Date().getTime()-a.getTime())/(1e3*60));if(p===0)return"Updated just now";if(p===1)return"Updated 1 min ago";if(p<60)return`Updated ${p} min ago`;{const w=Math.floor(p/60);return w===1?"Updated 1 hour ago":`Updated ${w} hours ago`}},ur=()=>{const a=new Date;mr(a),Rt(It(a)),_e.reload()},tt=async a=>{try{const d=await fetch(`/api/tickets?status=${a}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const p=await d.json();At(p.tickets||[]),a==="open"?C(!0):a==="in_progress"?M(!0):a==="resolved"&&X(!0)}catch(d){console.error("Error fetching tickets:",d),L.error("Failed to load tickets. Please try again.")}};z.useEffect(()=>{const a=setInterval(()=>{Rt(It(Mt))},6e4);return()=>clearInterval(a)},[Mt]);const xr=(a,d)=>{console.log(`Clicked on ${a}: ${d} tickets`),window.open(`/tickets?status=${a}`,"_blank")},gr=s.ticketsLastWeek.map(a=>({date:Ss(new Date(a.date),"dd/MM"),tickets:a.count,average:Math.round(s.ticketsLastWeek.reduce((d,p)=>d+p.count,0)/s.ticketsLastWeek.length)}));return e.jsxs(pr,{breadcrumbs:Qi,children:["                ",e.jsx(yr,{title:"Dashboard"}),"                ",e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                        .scrollbar-hide {
                            -ms-overflow-style: none;
                            scrollbar-width: none;
                        }
                        .scrollbar-hide::-webkit-scrollbar {
                            display: none;
                        }
                        
                        /* Custom scrollbar para modales */
                        .custom-scrollbar {
                            scrollbar-width: thin;
                            scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar {
                            width: 8px;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar-track {
                            background: transparent;
                            border-radius: 4px;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar-thumb {
                            background: rgba(156, 163, 175, 0.3);
                            border-radius: 4px;
                            transition: background-color 0.2s ease;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                            background: rgba(156, 163, 175, 0.6);
                        }
                        
                        .dark .custom-scrollbar {
                            scrollbar-color: rgba(75, 85, 99, 0.5) transparent;
                        }
                        
                        .dark .custom-scrollbar::-webkit-scrollbar-thumb {
                            background: rgba(75, 85, 99, 0.3);
                        }
                        
                        .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                            background: rgba(75, 85, 99, 0.6);
                        }
                    `}}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/30 to-background",children:e.jsxs("div",{className:"mx-auto px-4 py-16 space-y-20",children:[e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-12",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("div",{className:"h-20 w-20 rounded-3xl bg-gradient-to-br from-primary via-primary-foreground to-secondary-foreground flex items-center justify-center shadow-2xl ring-4 ring-blue-100",children:e.jsx(Me,{className:"h-10 w-10 text-white"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-6xl font-black tracking-tight text-slate-900 dark:text-white",children:h&&!c?"ADK Assist Dashboard":"Dashboard"}),e.jsx("p",{className:"text-2xl text-slate-600 font-medium",children:c?"Administrative control center of the system":h&&!c?"Your technical management control center":"Your personalized management panel"})]})]}),e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full animate-pulse shadow-lg"}),e.jsx("span",{className:"text-lg font-bold text-slate-600",children:"System Online"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ie,{className:"h-6 w-6 text-blue-500"}),e.jsx("span",{className:"text-lg font-bold text-slate-600",children:hr})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Re,{className:"h-6 w-6 text-yellow-500"}),e.jsx("span",{className:"text-lg font-bold text-slate-600",children:"High Performance"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[e.jsx(R,{variant:"outline",size:"lg",className:"gap-4 h-14 px-4 shadow-xl",onClick:ur,children:e.jsx(Rs,{className:"h-6 w-6"})}),e.jsxs(as,{open:_,onOpenChange:y,children:[e.jsx(ns,{asChild:!0,children:e.jsxs(R,{variant:"outline",size:"lg",className:"gap-4 h-14 px-4 shadow-xl relative",children:[e.jsx(le,{className:"h-6 w-6"}),Et>0&&e.jsx(H,{className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center p-0",children:Et})]})}),e.jsxs(is,{className:"w-96 max-h-96 mt-4",align:"end",children:[e.jsxs(fr,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-semibold",children:"All Appointments"}),re.length>0&&e.jsx(R,{variant:"ghost",size:"sm",onClick:$t,className:"text-xs",children:"View Calendar"})]}),e.jsx(st,{}),re.length===0?e.jsxs("div",{className:"p-4 text-center text-slate-500",children:[e.jsx(le,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No appointments found"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Schedule appointments from ticket details"})]}):e.jsx("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:re.sort((a,d)=>new Date(a.scheduled_for).getTime()-new Date(d.scheduled_for).getTime()).map(a=>{var oe;const d=or(a.status),p=Ze(a.scheduled_for),w=ge(a),D=new Date(a.scheduled_for),O=new Date,ee=D.toDateString()===O.toDateString(),ae=(()=>{const Y=new Date;return Y.setDate(Y.getDate()-1),D.toDateString()===Y.toDateString()&&D.getHours()>=18})(),B=ee||ae;return e.jsxs("div",{className:"group relative",children:[e.jsx(rt,{className:`p-0 focus:bg-slate-50 dark:focus:bg-slate-800/50 cursor-pointer ${B?"border-2 border-red-500 rounded-lg my-1 bg-red-50/50":""}`,children:e.jsxs("div",{className:`w-full p-4 flex items-center gap-4 ${B?"bg-red-50 rounded-lg border border-red-200":""}`,children:[e.jsxs("div",{className:`flex-shrink-0 w-20 h-20 rounded-full border ${B?"border-red-400 bg-red-100":"border-slate-200 dark:border-slate-700"} flex flex-col items-center justify-center text-center`,children:[e.jsx("span",{className:`text-sm font-medium ${B?"text-red-600":"text-slate-500 dark:text-slate-400"}`,children:new Date(a.scheduled_for).toLocaleString("default",{weekday:"short"}).toLowerCase()}),e.jsx("span",{className:`text-2xl font-bold ${B?"text-red-700":"text-slate-900 dark:text-slate-100"}`,children:new Date(a.scheduled_for).getDate()}),e.jsx("span",{className:`text-xs font-medium ${B?"text-red-600":"text-slate-500 dark:text-slate-400"}`,children:new Date(a.scheduled_for).toLocaleString("default",{month:"short"})})]}),e.jsxs("div",{className:`flex-1 p-3 ${B?"bg-white border-red-200":"bg-white dark:bg-slate-800"} rounded-lg border ${B?"border-red-200":"border-slate-200 dark:border-slate-700"} shadow-sm`,children:[e.jsxs("div",{className:"space-y-1 mb-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsxs("span",{className:`text-sm font-medium ${B?"text-red-800":"text-slate-900 dark:text-slate-100"}`,children:["Technical: ",a.technical.name]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[w.locationLink&&e.jsx(R,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-blue-100 dark:hover:bg-blue-900/30",onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),cr(a)},children:e.jsx(ze,{className:"h-3 w-3 text-blue-600 dark:text-blue-400"})}),e.jsx(R,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-slate-100 dark:hover:bg-slate-700",onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),lr(a.id)},children:e.jsx(Lr,{className:"h-3 w-3 text-slate-600 dark:text-slate-400"})})]})]}),e.jsxs("div",{className:`text-sm ${B?"text-red-700":"text-slate-700 dark:text-slate-300"}`,children:["Member: ",((oe=a.ticket.user)==null?void 0:oe.name)||"No Member"]})]}),e.jsx("div",{className:"flex items-center mb-1.5",children:e.jsxs("div",{className:"flex items-center gap-1 flex-1",children:[e.jsx(ze,{className:`h-4 w-4 ${B?"text-red-600":"text-red-500"}`}),e.jsxs("span",{className:`text-sm font-medium ${B?"text-red-800":"text-primary-foreground"} hover:text-primary-foreground`,children:["Building: ",w.buildingName," apartment ",w.unitNumber]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(K,{className:`h-3.5 w-3.5 ${B?"text-red-600":"text-slate-500"}`}),e.jsx("span",{className:`text-xs font-medium ${B?"text-red-600":"text-slate-500 dark:text-slate-400"}`,children:p.time})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[B&&e.jsx(H,{className:"text-xs px-2 py-0.5 bg-red-500 text-white ",children:ae?"Urgent!":"Today!"}),e.jsx(H,{variant:"outline",className:`text-xs px-2 py-0.5 ${d.color} border-current`,children:d.label})]})]})]})]})}),e.jsx(st,{className:"my-0 last:hidden"})]},a.id)})}),e.jsx(st,{}),e.jsx(rt,{className:"p-0",children:e.jsxs(R,{variant:"ghost",className:"w-full justify-center py-3 text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:$t,children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"View All Appointments"]})})]})]}),e.jsxs(as,{children:[e.jsx(ns,{asChild:!0,children:e.jsxs(R,{variant:"outline",size:"lg",className:"gap-4 h-14 px-4 shadow-xl relative hover:shadow-2xl transition-all duration-300 hover:scale-105",children:[e.jsx(Ue,{className:"h-6 w-6"}),ye>0&&e.jsx(H,{className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-gradient-to-r from-red-500 to-orange-500 text-white text-xs flex items-center justify-center p-0 notification-badge-pulse border-2 border-white shadow-lg",children:ye>99?"99+":ye})]})}),e.jsxs(is,{className:"w-[420px] max-h-[520px] mt-4 notification-dropdown shadow-2xl border-0",align:"end",children:[e.jsx("div",{className:" px-4 py-2 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between text-primary-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5"}),e.jsx("span",{className:"text-lg font-bold ",children:"Notifications"}),ye>0&&e.jsxs(H,{className:"bg-primary/20 text-secondary text-xs px-2 py-1 notification-badge-pulse",children:[ye," new"]})]}),ye>0&&e.jsx(R,{variant:"ghost",size:"sm",onClick:nr,className:"text-white bg-primary hover:bg-primary text-xs font-medium",children:"Mark all read"})]})}),G.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:e.jsx(Ue,{className:"h-10 w-10 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"All caught up!"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No new notifications at the moment"})]}):e.jsx("div",{className:"max-h-[400px] overflow-y-auto notification-scrollbar",children:e.jsx("div",{className:"p-2 space-y-1",children:G.map(a=>{const d=a.data.icon==="user-plus"?Le:a.data.icon==="clipboard-check"?te:a.data.icon==="user-check"?zr:a.data.icon==="users"?ce:a.data.icon==="check-circle"?te:a.data.icon==="alert-circle"?Oe:a.data.icon==="info"?ms:Ue,p=(()=>{const O=new Date,ee=new Date(a.created_at),ae=O.getTime()-ee.getTime(),B=Math.floor(ae/6e4),oe=Math.floor(ae/36e5),Y=Math.floor(ae/864e5);return B<1?"Just now":B<60?`${B}m ago`:oe<24?`${oe}h ago`:Y<7?`${Y}d ago`:ee.toLocaleDateString("es-ES",{day:"2-digit",month:"short"})})(),D=(()=>{switch(a.data.color){case"green":return{icon:"text-emerald-600 bg-gradient-to-r from-emerald-50 to-green-50",border:"border-emerald-200",accent:"text-emerald-600"};case"blue":return{icon:"text-blue-600 bg-gradient-to-r from-blue-50 to-cyan-50",border:"border-blue-200",accent:"text-blue-600"};case"red":return{icon:"text-red-600 bg-gradient-to-r from-red-50 to-pink-50",border:"border-red-200",accent:"text-red-600"};case"purple":return{icon:"text-purple-600 bg-gradient-to-r from-purple-50 to-violet-50",border:"border-purple-200",accent:"text-purple-600"};default:return{icon:"text-gray-600 bg-gradient-to-r from-gray-50 to-slate-50",border:"border-gray-200",accent:"text-gray-600"}}})();return e.jsx(rt,{className:`p-0 cursor-pointer group transition-all duration-200 rounded-xl overflow-hidden notification-item ${a.read_at?"hover:bg-gradient-to-r hover:from-gray-50 hover:to-slate-50":"bg-gradient-to-r from-blue-50/80 to-purple-50/80 border border-blue-200/50 shadow-sm notification-unread"}`,onClick:()=>{a.read_at||St(a.id)},children:e.jsxs("div",{className:"w-full p-4 flex items-start gap-4",children:[e.jsxs("div",{className:`relative p-3 rounded-xl ${D.icon} shadow-sm group-hover:shadow-md transition-shadow`,children:[e.jsx(d,{className:"h-5 w-5"}),!a.read_at&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"flex-1 space-y-2 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{className:`text-sm font-bold leading-tight ${a.read_at?"text-gray-700":"text-gray-900"}`,children:a.data.title}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:p}),e.jsx(R,{variant:"ghost",size:"sm",onClick:O=>{O.stopPropagation(),ir(a.id)},className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 hover:bg-red-100 hover:text-red-600 transition-all",children:e.jsx(at,{className:"h-3 w-3"})})]})]}),e.jsx("p",{className:`text-sm leading-relaxed ${a.read_at?"text-gray-600":"text-gray-800"}`,children:a.data.message}),a.data.type==="ticket_assigned"&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.data.ticket_code&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-semibold bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-800 border border-blue-200",children:[e.jsx("span",{className:"mr-1",children:"🎫"}),a.data.ticket_code]}),a.data.assigned_to&&a.data.assigned_to_id&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-semibold bg-gradient-to-r from-emerald-100 to-green-100 text-emerald-800 border border-emerald-200",children:[e.jsx("span",{className:"mr-1",children:"👨‍💼"}),a.data.assigned_to]})]}),a.data.assigned_by&&a.data.assigned_by_id&&e.jsxs("div",{className:"text-xs text-gray-500 bg-gray-50 rounded-lg p-2 border border-gray-200",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Assigned by:"})," ",a.data.assigned_by,e.jsxs("span",{className:"ml-1 text-gray-400",children:["(ID: ",a.data.assigned_by_id,")"]})]})]}),!a.read_at&&e.jsx("div",{className:"flex items-center gap-2 mt-3 pt-2 border-t border-gray-100",children:e.jsxs(R,{variant:"outline",size:"sm",onClick:O=>{O.stopPropagation(),St(a.id)},className:"h-8 px-3 text-xs font-medium hover:bg-green-50 hover:text-green-700 hover:border-green-300 transition-all",children:[e.jsx(it,{className:"h-3 w-3 mr-1.5"}),"Mark read"]})})]})]})},a.id)})})})]})]})]})]}),console.log("Rendering instructions section - isTechnical:",h,"currentInstructions:",q),h&&q.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("h2",{className:"text-3xl font-bold text-foreground flex items-center justify-center gap-3",children:[e.jsx(hs,{className:"h-8 w-8 text-blue-500"}),"Instructions from Management"]}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Important instructions and guidelines from your supervisors"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex gap-6 overflow-x-auto pb-4 scrollbar-hide snap-x snap-mandatory",children:q.slice(0,5).map((a,d)=>{const p={low:"from-blue-500/10 to-blue-600/5 border-blue-200 text-blue-700",normal:"from-gray-500/10 to-gray-600/5 border-gray-200 text-gray-700",high:"from-orange-500/10 to-orange-600/5 border-orange-200 text-orange-700",urgent:"from-red-500/10 to-red-600/5 border-red-200 text-red-700"},D={low:ms,normal:hs,high:ke,urgent:Ur}[a.priority];return e.jsx(A,{className:`flex-shrink-0 w-80 transition-all duration-300 hover:shadow-lg border-l-4 bg-gradient-to-r ${p[a.priority]} snap-start`,children:e.jsx(T,{className:"p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${a.priority==="urgent"?"bg-red-100":"bg-white/50"}`,children:e.jsx(D,{className:`h-4 w-4 ${a.priority==="urgent"?"text-red-600":"text-current"}`})}),e.jsx(H,{variant:"outline",className:`font-semibold uppercase text-xs ${a.priority==="urgent"?"border-red-500 text-red-700 bg-red-50":""}`,children:a.priority})]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>Z(d),className:"h-8 w-8 p-0 hover:bg-white/20",children:e.jsx(it,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:["From: ",e.jsx("strong",{className:"text-foreground",children:a.from})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(a.sent_at).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:"max-h-32 overflow-y-auto custom-scrollbar",children:e.jsx("p",{className:"text-foreground leading-relaxed text-sm",children:a.instruction})})]})})},d)})}),q.length>1&&e.jsx("div",{className:"flex justify-center mt-4 gap-2",children:q.slice(0,5).map((a,d)=>e.jsx("div",{className:"w-2 h-2 rounded-full bg-muted-foreground/30"},d))})]}),q.filter(a=>!a.read).length===0&&e.jsx(A,{className:"max-w-md mx-auto",children:e.jsxs(T,{className:"p-8 text-center",children:[e.jsx(te,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"All caught up!"}),e.jsx("p",{className:"text-muted-foreground",children:"You have no pending instructions."})]})})]}),e.jsxs("div",{className:"space-y-12",children:["                            ",e.jsxs("div",{className:"text-center space-y-6",children:["                                ",e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:h&&!c?"My Tickets":v?"Building Tickets":"Ticket Analytics"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:h&&!c?"Tickets assigned to you and your work summary":v?"Monitor tickets for your building residents":"Real-time monitoring of workflow and performance metrics"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:["                                ",(!h||c||u)&&e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-primary/10 via-background to-primary/5 overflow-hidden",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/20",children:e.jsx(pe,{className:"h-6 w-6 text-primary"})}),e.jsx(J,{className:"h-4 w-4 text-primary/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wider",children:h&&!c?"Mis Tickets Totales":"Total Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:t.tickets.total}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-primary/20 text-primary",children:"+12%"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last month"})]})]})]})}),"                                ",e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-destructive/10 via-background to-destructive/5 overflow-hidden cursor-pointer animate-pulse duration-1000",onClick:()=>tt("open"),children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-destructive/20",children:e.jsx(Oe,{className:"h-6 w-6 text-destructive"})}),e.jsx(ot,{className:"h-4 w-4 text-destructive/60 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-destructive uppercase tracking-wider",children:h&&!c?"Assigned Tickets":"Open Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:t.tickets.open}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-destructive/20 text-destructive",children:h&&!c?"Active":"Priority"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:h&&!c?"Your assignments":"Immediate attention"})]})]})]})}),e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-secondary/10 via-background to-secondary/5 overflow-hidden cursor-pointer",onClick:()=>tt("in_progress"),children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-secondary/20",children:e.jsx(K,{className:"h-6 w-6 text-secondary"})}),e.jsx(ot,{className:"h-4 w-4 text-secondary/60 opacity-0 group-hover:opacity-100 transition-opacity"}),"                                        "]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-secondary uppercase tracking-wider",children:h&&!c?"In Progress - My Tickets":"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:t.tickets.in_progress}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-secondary/20 text-secondary",children:"+8%"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:h&&!c?"Active work":"This week"})]})]})]})}),e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-accent/10 via-background to-accent/5 overflow-hidden cursor-pointer",onClick:()=>tt("resolved"),children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-accent/20",children:e.jsx(te,{className:"h-6 w-6 text-accent"})}),e.jsx(ot,{className:"h-4 w-4 text-accent/60 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-accent uppercase tracking-wider",children:h&&!c?"My Resolved Tickets":"Resolved"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:t.tickets.resolved}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-accent/20 text-accent",children:"+15%"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:h&&!c?"My productivity":"vs target"})]})]})]})}),h&&!c&&!u&&e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-green-50 via-background to-green-100 overflow-hidden cursor-pointer",onClick:()=>window.open("/appointments","_blank"),children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:e.jsx(Or,{className:"h-6 w-6 text-green-600"})}),e.jsx(J,{className:"h-4 w-4 text-green-600/60 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase tracking-wider",children:"Upcoming Appointments"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:t.technical.upcoming_visits}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-green-100 text-green-700",children:"Scheduled"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"go to calendar"})]})]})]})})]}),(!h||c||u)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-3/10 via-background to-chart-3/5 overflow-hidden",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-orange-100",children:e.jsx(ke,{className:"h-6 w-6 text-orange-600"})}),E&&t.tickets.unassigned>0&&e.jsxs(R,{size:"sm",variant:"outline",className:"h-8 px-3 text-xs hover:bg-orange-50 hover:text-orange-900 border-orange-200 text-orange-700",onClick:()=>{const a=document.querySelector('[data-section="unassigned-tickets"]');a&&a.scrollIntoView({behavior:"smooth",block:"start"})},children:[e.jsx(Le,{className:"h-3 w-3 mr-1"}),"Assign"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-orange-600 uppercase tracking-wider",children:"Unassigned"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:t.tickets.unassigned||0}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-orange-100 text-orange-700",children:"Pending"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Requires assignment"})]})]})]})}),x||v?e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-3/10 via-background to-chart-3/5 overflow-hidden",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:e.jsx(us,{className:"h-6 w-6 text-green-600"})}),e.jsx(ve,{className:"h-4 w-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase tracking-wider",children:"Created Today"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:t.tickets.created_today||0}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-green-100 text-green-700",children:"New"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Daily intake"})]})]})]})}):e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-4/10 via-background to-chart-4/5 overflow-hidden",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:e.jsx(le,{className:"h-6 w-6 text-purple-600"})}),e.jsx(ve,{className:"h-4 w-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-purple-600 uppercase tracking-wider",children:"Resolved Today"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:t.tickets.resolved_today}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-purple-100 text-purple-700",children:"Today"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Daily Productivity"})]})]})]})}),x||v?e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-4/10 via-background to-chart-4/5 overflow-hidden",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:e.jsx(le,{className:"h-6 w-6 text-purple-600"})}),e.jsx(ve,{className:"h-4 w-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-purple-600 uppercase tracking-wider",children:"Resolved Today"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:t.tickets.resolved_today}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-purple-100 text-purple-700",children:"Today"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Daily Productivity"})]})]})]})}):e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-2/10 via-background to-chart-2/5 overflow-hidden",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-indigo-100",children:e.jsx(Wr,{className:"h-6 w-6 text-indigo-600"})}),e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-green-100 text-green-700",children:"-2h"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-indigo-600 uppercase tracking-wider",children:"Average Time"}),e.jsxs("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[t.tickets.avg_resolution_hours,"h"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-indigo-100 text-indigo-700",children:"Resolution"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Overall average"})]})]})]})}),e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-5/10 via-background to-chart-5/5 overflow-hidden",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-teal-100",children:e.jsx(Me,{className:"h-6 w-6 text-teal-600"})}),e.jsx(ve,{className:"h-4 w-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-teal-600 uppercase tracking-wider",children:"Efficiency"}),e.jsxs("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[t.tickets.total>0?Math.round(t.tickets.resolved/t.tickets.total*100):0,"%"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-teal-100 text-teal-700",children:"Resolution"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Tasa general"})]})]})]})}),"                            "]})]}),r.unassignedTickets&&r.unassignedTickets.length>0&&e.jsxs("div",{className:"space-y-12","data-section":"unassigned-tickets",children:[e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-orange-100 to-orange-50 rounded-full shadow-lg",children:[e.jsx(ke,{className:"h-6 w-6 text-orange-600"}),e.jsx("span",{className:"text-sm font-bold text-orange-700 uppercase tracking-wider",children:"Immediate Action Required"})]}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-br from-orange-600 to-orange-800 bg-clip-text text-transparent",children:"Unassigned Tickets"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"Critical tickets awaiting technical assignment - streamlined management for maximum efficiency"})]}),e.jsxs(A,{className:"group border-0 shadow-2xl bg-gradient-to-br from-white via-slate-50/30 to-orange-50/20 backdrop-blur-sm transition-all duration-500 hover:shadow-3xl hover:-translate-y-1 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-200/30 via-transparent to-orange-200/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsx(P,{className:"relative border-b border-gradient-to-r from-orange-200/50 via-slate-200/30 to-orange-200/50 bg-gradient-to-r from-orange-50/50 via-white to-slate-50/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-orange-100 to-orange-200 shadow-lg group-hover:shadow-xl transition-all duration-300",children:e.jsx(ke,{className:"h-6 w-6 text-orange-700"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:e.jsx("span",{className:"text-xs font-bold text-white",children:r.unassignedTickets.length})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(W,{className:"text-2xl font-bold text-slate-800 group-hover:text-orange-700 transition-colors",children:"Critical Unassigned Queue"}),e.jsxs("p",{className:"text-sm text-slate-600 font-medium",children:["Managing ",r.unassignedTickets.length," urgent ticket",r.unassignedTickets.length!==1?"s":""," requiring immediate technical assignment"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"px-3 py-2 bg-gradient-to-r from-orange-100 to-orange-200 rounded-lg border border-orange-300",children:e.jsx("span",{className:"text-sm font-bold text-orange-700",children:"Priority: High"})}),e.jsxs(R,{variant:"outline",size:"lg",className:"bg-gradient-to-r from-orange-100 to-orange-200 border-orange-300 text-orange-700 hover:from-orange-200 hover:to-orange-300 hover:border-orange-400 font-semibold shadow-lg hover:shadow-xl transition-all duration-300 group",onClick:()=>window.open("/tickets","_blank"),children:[e.jsx(Le,{className:"h-5 w-5 mr-2"}),"Bulk Assignment Portal",e.jsx(J,{className:"h-4 w-4 ml-2 opacity-0 group-hover:opacity-100 transition-opacity"})]})]})]})}),e.jsxs(T,{className:"relative p-0 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-100 via-transparent to-slate-100 animate-pulse duration-3000"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-orange-400 via-red-500 to-orange-400 animate-pulse"})]}),e.jsx("div",{className:"relative overflow-x-auto custom-scrollbar",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-100/50 via-orange-50/30 to-slate-100/50 sticky top-0 z-10",children:e.jsxs("tr",{className:"border-b-2 border-orange-200/50",children:[e.jsx("th",{className:"text-left py-6 px-8 font-bold text-slate-800 text-sm uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4 text-orange-600"}),"Ticket Details"]})}),e.jsx("th",{className:"text-left py-6 px-8 font-bold text-slate-800 text-sm uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-4 w-4 text-orange-600"}),"Location"]})}),e.jsx("th",{className:"text-left py-6 px-8 font-bold text-slate-800 text-sm uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4 text-orange-600"}),"Device"]})}),e.jsx("th",{className:"text-left py-6 px-8 font-bold text-slate-800 text-sm uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),"Category"]})}),e.jsx("th",{className:"text-left py-6 px-8 font-bold text-slate-800 text-sm uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4 text-orange-600"}),"Created"]})}),e.jsx("th",{className:"text-center py-6 px-8 font-bold text-slate-800 text-sm uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4 text-orange-600"}),"Quick Actions"]})})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100/50",children:r.unassignedTickets.length>0?r.unassignedTickets.map((a,d)=>e.jsx(so,{ticket:a,index:d,technicals:r.availableTechnicals},a.id)):e.jsx("tr",{className:"relative group",children:e.jsxs("td",{colSpan:6,className:"relative py-20 text-center overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-50 via-green-25 to-teal-50 opacity-80"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-green-100/30 to-transparent"}),e.jsx("div",{className:"absolute top-4 left-4 w-3 h-3 bg-green-400 rounded-full animate-ping opacity-60"}),e.jsx("div",{className:"absolute top-8 right-8 w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("div",{className:"absolute bottom-6 left-1/3 w-4 h-4 bg-teal-400 rounded-full animate-bounce opacity-40"}),e.jsxs("div",{className:"relative z-10 space-y-6",children:[e.jsxs("div",{className:"relative inline-flex",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400 to-emerald-600 rounded-full blur-lg opacity-30 animate-pulse"}),e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(te,{className:"h-20 w-20 text-green-500 drop-shadow-lg animate-bounce"}),e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-br from-green-400 to-emerald-600 rounded-full flex items-center justify-center shadow-xl animate-pulse",children:e.jsx(it,{className:"h-4 w-4 text-white font-bold"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-2xl font-black text-green-800 tracking-tight",children:"🎉 Outstanding Performance!"}),e.jsx("p",{className:"text-lg font-bold text-green-700",children:"All tickets successfully assigned to technical team"}),e.jsx("p",{className:"text-sm text-green-600 max-w-lg mx-auto leading-relaxed font-medium",children:"Exceptional workflow management - every support request has been efficiently distributed to qualified technicians. The system is running at optimal efficiency."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse shadow-lg"}),e.jsx("span",{className:"text-xs text-green-700 font-bold uppercase tracking-wider",children:"System Optimized"})]}),e.jsx("div",{className:"w-1 h-1 bg-green-400 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"100% Efficiency"})]}),e.jsx("div",{className:"w-1 h-1 bg-green-400 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"Team Active"})]})]}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full text-white shadow-xl mt-6",children:[e.jsx(te,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-bold uppercase tracking-wider",children:"Perfect Assignment Rate"}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})]})]})]})})})]})})]})]})]}),(v||x)&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:x?"Owner Dashboard":"Doorman Dashboard"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Building management overview and resident ticket monitoring"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(A,{className:"group col-span-1 border-0 shadow-xl bg-gradient-to-br from-slate-50/50 via-background to-slate-100/50 backdrop-blur-sm transition-all duration-500 hover:shadow-2xl hover:-translate-y-2",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-100/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"}),e.jsx(P,{className:"relative border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-background pb-6",children:e.jsxs(W,{className:"flex items-center gap-3 text-xl",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-slate-200 to-slate-300 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:e.jsx(me,{className:"h-6 w-6 text-slate-700"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Tickets by Apartment"}),e.jsx("p",{className:"text-sm text-muted-foreground font-normal",children:"Building unit distribution"})]})]})}),e.jsx(T,{className:"relative p-6",children:e.jsxs("div",{className:"space-y-4",children:[t.building&&t.building.tickets_by_apartment&&Object.entries(t.building.tickets_by_apartment).slice(0,6).map(([a,d],p)=>{const w=typeof d=="object"&&d!==null?d.count||0:d||0,D=typeof d=="object"&&d!==null&&d.apartment_name||a,O=typeof d=="object"&&d!==null?d.floor:null;return e.jsxs("div",{className:"group/item flex items-center justify-between p-5 bg-gradient-to-r from-white/80 via-white/70 to-white/80 rounded-xl hover:from-white/95 hover:via-white/90 hover:to-white/95 transition-all duration-300 shadow-sm hover:shadow-xl border border-slate-200/50 hover:border-slate-300/70 cursor-pointer transform hover:-translate-y-1",style:{animationDelay:`${p*100}ms`},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative w-14 h-14 rounded-xl bg-gradient-to-br from-primary/20 via-primary/15 to-primary/10 flex items-center justify-center shadow-lg group-hover/item:shadow-xl transition-all duration-300 group-hover/item:scale-110",children:[e.jsx(me,{className:"w-7 h-7 text-primary transition-transform duration-300 group-hover/item:scale-110"}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-primary/10 to-transparent opacity-0 group-hover/item:opacity-100 transition-opacity duration-300"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-lg text-slate-900 group-hover/item:text-primary transition-colors duration-300",children:D}),e.jsxs("p",{className:"text-sm text-slate-600 group-hover/item:text-slate-700 transition-colors duration-300 flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"}),O?`Floor ${O} • Unit`:"Apartment unit"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-3xl font-black text-slate-900 group-hover/item:text-primary transition-colors duration-300",children:w}),e.jsx("p",{className:"text-xs text-slate-600 uppercase tracking-widest font-bold group-hover/item:text-slate-700 transition-colors duration-300",children:"tickets"})]})]},a)}),(!((Kt=t.building)!=null&&Kt.tickets_by_apartment)||Object.keys(t.building.tickets_by_apartment).length===0)&&e.jsxs("div",{className:"text-center py-16 text-slate-500",children:[e.jsx("div",{className:"relative mx-auto mb-8 w-24 h-24 rounded-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center shadow-lg",children:e.jsx(me,{className:"w-12 h-12 opacity-40"})}),e.jsx("p",{className:"text-xl font-bold mb-2",children:"No apartment data available"}),e.jsx("p",{className:"text-sm",children:"Apartment ticket breakdown will appear here"})]})]})})]}),e.jsxs(A,{className:"group col-span-1 border-0 shadow-xl bg-gradient-to-br from-emerald-50/50 via-background to-emerald-100/50 backdrop-blur-sm transition-all duration-500 hover:shadow-2xl hover:-translate-y-2",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-100/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"}),e.jsx(P,{className:"relative border-b border-emerald-200/50 bg-gradient-to-r from-emerald-50 to-background pb-6",children:e.jsxs(W,{className:"flex items-center gap-3 text-xl",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-emerald-200 to-emerald-300 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:e.jsx(de,{className:"h-6 w-6 text-emerald-700"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Building Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground font-normal",children:"Resource statistics"})]})]})}),e.jsx(T,{className:"relative p-6",children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("div",{className:"group/stat bg-gradient-to-br from-blue-50 via-blue-100/90 to-blue-200/80 p-6 rounded-xl border border-blue-200/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-200/70 group-hover/stat:bg-blue-300/80 transition-colors duration-300",children:e.jsx(de,{className:"w-5 h-5 text-blue-700"})}),e.jsx("span",{className:"text-sm font-bold text-blue-700 uppercase tracking-widest",children:"Apartments"})]}),e.jsx("p",{className:"text-4xl font-black text-blue-700 group-hover/stat:text-blue-800 transition-colors duration-300",children:((Jt=t.resources)==null?void 0:Jt.apartments)||0})]}),e.jsxs("div",{className:"group/stat bg-gradient-to-br from-green-50 via-green-100/90 to-green-200/80 p-6 rounded-xl border border-green-200/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-200/70 group-hover/stat:bg-green-300/80 transition-colors duration-300",children:e.jsx(ce,{className:"w-5 h-5 text-green-700"})}),e.jsx("span",{className:"text-sm font-bold text-green-700 uppercase tracking-widest",children:"Tenants"})]}),e.jsx("p",{className:"text-4xl font-black text-green-700 group-hover/stat:text-green-800 transition-colors duration-300",children:((Qt=t.resources)==null?void 0:Qt.tenants)||0})]}),e.jsxs("div",{className:"group/stat bg-gradient-to-br from-purple-50 via-purple-100/90 to-purple-200/80 p-6 rounded-xl border border-purple-200/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-200/70 group-hover/stat:bg-purple-300/80 transition-colors duration-300",children:e.jsx(Be,{className:"w-5 h-5 text-purple-700"})}),e.jsx("span",{className:"text-sm font-bold text-purple-700 uppercase tracking-widest",children:"Devices"})]}),e.jsx("p",{className:"text-4xl font-black text-purple-700 group-hover/stat:text-purple-800 transition-colors duration-300",children:((Zt=t.resources)==null?void 0:Zt.devices)||0})]}),e.jsxs("div",{className:"group/stat bg-gradient-to-br from-orange-50 via-orange-100/90 to-orange-200/80 p-6 rounded-xl border border-orange-200/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-200/70 group-hover/stat:bg-orange-300/80 transition-colors duration-300",children:e.jsx(K,{className:"w-5 h-5 text-orange-700"})}),e.jsx("span",{className:"text-sm font-bold text-orange-700 uppercase tracking-widest",children:"Avg Time"})]}),e.jsxs("p",{className:"text-4xl font-black text-orange-700 group-hover/stat:text-orange-800 transition-colors duration-300",children:[t.tickets.avg_resolution_hours||0,"h"]})]})]})})})]})]}),e.jsx("div",{className:"grid grid-cols-1  gap-8",children:e.jsxs(A,{className:"group col-span-2 border-0 shadow-xl bg-gradient-to-br from-slate-50/50 via-background to-slate-100/50 backdrop-blur-sm transition-all duration-500 hover:shadow-2xl hover:-translate-y-2",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-100/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"}),e.jsx(P,{className:"relative border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-background pb-6",children:e.jsxs(W,{className:"flex items-center gap-3 text-xl",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-slate-200 to-slate-300 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:e.jsx(K,{className:"h-6 w-6 text-slate-700"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Recent Ticket Activity"}),e.jsx("p",{className:"text-sm text-muted-foreground font-normal",children:"Latest service requests"})]})]})}),e.jsx(T,{className:"relative p-6",children:e.jsxs("div",{className:"space-y-4",children:[r.recentTickets&&r.recentTickets.slice(0,5).map((a,d)=>{var p,w,D;return e.jsxs("div",{className:"group/ticket flex items-center justify-between p-5 bg-gradient-to-r from-white/80 via-white/70 to-white/80 rounded-xl hover:from-white/95 hover:via-white/90 hover:to-white/95 transition-all duration-300 cursor-pointer shadow-sm hover:shadow-xl border border-slate-200/50 hover:border-slate-300/70 transform hover:-translate-y-1",onClick:()=>window.open(`/tickets/${a.id}`,"_blank"),style:{animationDelay:`${d*100}ms`},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-5 h-5 rounded-full shadow-lg transition-all duration-300 group-hover/ticket:scale-125 ${a.status==="open"?"bg-gradient-to-br from-blue-400 to-blue-600":a.status==="in_progress"?"bg-gradient-to-br from-yellow-400 to-yellow-600":a.status==="resolved"?"bg-gradient-to-br from-green-400 to-green-600":"bg-gradient-to-br from-gray-400 to-gray-600"}`}),e.jsx("div",{className:`absolute inset-0 rounded-full animate-pulse ${a.status==="open"?"bg-blue-400":a.status==="in_progress"?"bg-yellow-400":a.status==="resolved"?"bg-green-400":"bg-gray-400"} opacity-30`})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-lg text-slate-900 truncate max-w-sm group-hover/ticket:text-primary transition-colors duration-300",children:a.title}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-600 group-hover/ticket:text-slate-700 transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:((p=a.user)==null?void 0:p.name)||"Unknown"})]}),e.jsx("span",{children:"•"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:((D=(w=a.device)==null?void 0:w.apartment)==null?void 0:D.name)||"No apt"})]})]})]})]}),e.jsxs("div",{className:"text-right flex flex-col items-end gap-2",children:[e.jsx(H,{variant:a.status==="open"?"default":a.status==="in_progress"?"secondary":a.status==="resolved"?"default":"outline",className:`font-bold px-3 py-1 transition-all duration-300 group-hover/ticket:scale-105 ${a.status==="open"?"bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800 border-blue-300 shadow-lg":""} ${a.status==="in_progress"?"bg-gradient-to-r from-yellow-100 to-yellow-200 text-yellow-800 border-yellow-300 shadow-lg":""} ${a.status==="resolved"?"bg-gradient-to-r from-green-100 to-green-200 text-green-800 border-green-300 shadow-lg":""}`,children:a.status}),e.jsx("div",{className:"opacity-0 group-hover/ticket:opacity-100 transition-opacity duration-300",children:e.jsx(J,{className:"w-4 h-4 text-slate-400"})})]})]},a.id)}),(!r.recentTickets||r.recentTickets.length===0)&&e.jsxs("div",{className:"text-center py-16 text-slate-500",children:[e.jsx("div",{className:"relative mx-auto mb-8 w-24 h-24 rounded-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center shadow-lg",children:e.jsx(K,{className:"w-12 h-12 opacity-40"})}),e.jsx("p",{className:"text-xl font-bold mb-2",children:"No recent activity"}),e.jsx("p",{className:"text-sm",children:"Recent tickets will appear here"})]})]})})]})})]}),g&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:"Tenant Dashboard"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Monitor your tickets and service requests"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-blue-50 via-background to-blue-100 overflow-hidden",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:e.jsx(Oe,{className:"h-6 w-6 text-blue-600"})}),e.jsx(J,{className:"h-4 w-4 text-blue-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?status=open","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wider",children:"Open Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:t.tickets.open||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting service"})]})]})}),e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-yellow-50 via-background to-yellow-100 overflow-hidden",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-yellow-100",children:e.jsx(K,{className:"h-6 w-6 text-yellow-600"})}),e.jsx(J,{className:"h-4 w-4 text-yellow-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?status=in_progress","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-600 uppercase tracking-wider",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:t.tickets.in_progress||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Being worked on"})]})]})}),e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-green-50 via-background to-green-100 overflow-hidden",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:e.jsx(te,{className:"h-6 w-6 text-green-600"})}),e.jsx(J,{className:"h-4 w-4 text-green-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?status=resolved","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase tracking-wider",children:"Resolved"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:t.tickets.resolved||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed tickets"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(A,{className:"col-span-1",children:[e.jsxs(P,{children:[e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5 text-primary"}),"My Recent Tickets"]}),e.jsx(cs,{children:"View the status of your recent service requests"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:r.recentTickets&&r.recentTickets.length>0?r.recentTickets.slice(0,5).map(a=>{var d,p;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors cursor-pointer",onClick:()=>window.open(`/tickets/${a.id}`,"_blank"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${a.status==="open"?"bg-blue-500":a.status==="in_progress"?"bg-yellow-500":a.status==="resolved"?"bg-green-500":"bg-gray-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 truncate max-w-xs",children:a.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx("span",{children:be(a.created_at)}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:((p=(d=a.device)==null?void 0:d.apartment)==null?void 0:p.name)||"No apt"})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx(H,{variant:a.status==="open"?"default":a.status==="in_progress"?"secondary":a.status==="resolved"?"default":"outline",className:`
                                                                ${a.status==="open"?"bg-blue-100 text-blue-700":""}
                                                                ${a.status==="in_progress"?"bg-yellow-100 text-yellow-700":""}
                                                                ${a.status==="resolved"?"bg-green-100 text-green-700":""}
                                                            `,children:a.status})})]},a.id)}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(pe,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No tickets found"}),e.jsx(R,{className:"mt-4",variant:"outline",onClick:()=>window.open("/tickets/create","_blank"),children:"Create a New Ticket"})]})})}),e.jsx(Dr,{className:"flex justify-center border-t pt-4",children:e.jsx(R,{variant:"outline",size:"sm",className:"w-full sm:w-auto",onClick:()=>window.open("/tickets","_blank"),children:"View All Tickets"})})]}),e.jsxs(A,{className:"col-span-1",children:[e.jsxs(P,{children:[e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5 text-primary"}),"My Apartment"]}),e.jsx(cs,{children:"Your apartment details and upcoming appointments"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[(ss=(ts=(es=o==null?void 0:o.auth)==null?void 0:es.user)==null?void 0:ts.tenant)!=null&&ss.apartment?e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/20 flex items-center justify-center",children:e.jsx(de,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:o.auth.user.tenant.apartment.name}),e.jsx("p",{className:"text-sm text-slate-600",children:((rs=o.auth.user.tenant.apartment.building)==null?void 0:rs.name)||"Building"})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(me,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No apartment information found"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Upcoming Appointments"}),r.upcomingAppointments&&r.upcomingAppointments.filter(a=>{var d,p,w,D;return((p=(d=a.ticket)==null?void 0:d.user)==null?void 0:p.email)===((D=(w=o==null?void 0:o.auth)==null?void 0:w.user)==null?void 0:D.email)}).length>0?e.jsx("div",{className:"space-y-2",children:r.upcomingAppointments.filter(a=>{var d,p,w,D;return((p=(d=a.ticket)==null?void 0:d.user)==null?void 0:p.email)===((D=(w=o==null?void 0:o.auth)==null?void 0:w.user)==null?void 0:D.email)}).slice(0,2).map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors cursor-pointer",onClick:()=>window.open(`/appointments/${a.id}`,"_blank"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{className:"w-4 h-4 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:a.title}),e.jsx("p",{className:"text-xs text-slate-600",children:be(a.scheduled_at||a.scheduled_for)})]})]}),e.jsx(H,{className:"bg-blue-100 text-blue-700",children:"Scheduled"})]},a.id))}):e.jsx("div",{className:"p-3 bg-slate-50 rounded-lg text-center",children:e.jsx("p",{className:"text-sm text-slate-600",children:"No upcoming appointments"})})]})]})})]})]}),e.jsxs(A,{children:[e.jsx(P,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-5 w-5 text-primary"}),"Quick Actions"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(R,{className:"flex items-center gap-2 h-12",onClick:()=>window.open("/tickets/create","_blank"),children:[e.jsx(us,{className:"w-4 h-4"}),"Create Service Request"]}),e.jsxs(R,{variant:"outline",className:"flex items-center gap-2 h-12",onClick:()=>window.open("/tickets","_blank"),children:[e.jsx(pe,{className:"w-4 h-4"}),"View My Tickets"]}),e.jsxs(R,{variant:"outline",className:"flex items-center gap-2 h-12",onClick:()=>window.open("/profile","_blank"),children:[e.jsx(lt,{className:"w-4 h-4"}),"Update Profile"]})]})})]})]}),(c||u)&&t.resources.buildings>0&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:["                                    ",e.jsxs("div",{className:"flex items-center justify-center gap-4",children:["                                        ",e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:"System Resources"}),e.jsx(H,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20 px-4 py-2 text-sm font-semibold",children:"Full Access - Admin"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Comprehensive management of buildings, apartments, users and devices"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-1/10 via-background to-chart-1/5 overflow-hidden",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-violet-100 w-fit mx-auto",children:e.jsx(de,{className:"h-8 w-8 text-violet-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-violet-600 uppercase tracking-wider",children:"Buildings"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:t.resources.buildings})]}),r.buildingsWithTickets&&r.buildingsWithTickets.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-xs font-semibold text-violet-600",children:"Buildings Overview"}),r.buildingsWithTickets.length>3&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(R,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>{const a=j.current;a&&a.scrollBy({left:-200,behavior:"smooth"})},children:e.jsx(ct,{className:"h-3 w-3"})}),e.jsx(R,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>{const a=j.current;a&&a.scrollBy({left:200,behavior:"smooth"})},children:e.jsx(nt,{className:"h-3 w-3"})})]})]}),e.jsx("div",{ref:j,className:"flex gap-2 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:r.buildingsWithTickets.map(a=>e.jsx("div",{className:"flex-shrink-0 group/building cursor-pointer",title:`${a.name} - ${a.apartments_count} apartments, ${a.tenants_count} tenants`,onClick:()=>window.open(`/buildings/${a.id}`,"_blank"),children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-violet-200 to-violet-400 flex items-center justify-center transition-transform shadow-lg",children:a.image?e.jsx("img",{src:`/storage/${a.image}`,alt:a.name,className:"w-full h-full rounded-full object-cover",onError:d=>{d.currentTarget.src="/images/default-builder-square.png"}}):e.jsx(de,{className:"h-6 w-6 text-white"})})},a.id))})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(J,{className:"h-3 w-3 text-violet-400"}),e.jsx("span",{className:"text-xs text-slate-500",children:"View management"})]})]})})}),e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-2/10 via-background to-chart-2/5 overflow-hidden cursor-pointer",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-blue-100 w-fit mx-auto",children:e.jsx(me,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wider",children:"Apartments"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:t.resources.apartments})]}),r.buildingsWithTickets&&r.buildingsWithTickets.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-xs font-semibold text-blue-600",children:"By Building"}),r.buildingsWithTickets.length>3&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(R,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:a=>{a.stopPropagation();const d=document.getElementById("apartments-container");d&&d.scrollBy({left:-200,behavior:"smooth"})},children:e.jsx(ct,{className:"h-3 w-3"})}),e.jsx(R,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:a=>{a.stopPropagation();const d=document.getElementById("apartments-container");d&&d.scrollBy({left:200,behavior:"smooth"})},children:e.jsx(nt,{className:"h-3 w-3"})})]})]}),e.jsx("div",{id:"apartments-container",className:"flex gap-2 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:r.buildingsWithTickets.map(a=>e.jsxs("div",{className:"flex-shrink-0 group/building cursor-pointer flex flex-col items-center gap-1",title:`${a.name}: ${a.apartments_count} apartments`,onClick:d=>{d.stopPropagation(),window.open(`/buildings/${a.id}/apartments`,"_blank")},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-200 to-blue-400 flex items-center justify-center  transition-transform shadow-lg",children:a.image?e.jsx("img",{src:`/storage/${a.image}`,alt:a.name,className:"w-full h-full rounded-full object-cover",onError:d=>{d.currentTarget.src="/images/default-builder-square.png"}}):e.jsx(de,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xs font-bold text-blue-700 min-w-0 text-center",children:a.apartments_count})]},`apt-${a.id}`))})]})]})})}),e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-3/10 via-background to-chart-3/5 overflow-hidden cursor-pointer",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-emerald-100 w-fit mx-auto",children:e.jsx(ce,{className:"h-8 w-8 text-emerald-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-600 uppercase tracking-wider",children:"Members"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:t.resources.tenants})]}),r.buildingsWithTickets&&r.buildingsWithTickets.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-xs font-semibold text-emerald-600",children:"By Building"}),r.buildingsWithTickets.length>3&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(R,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:a=>{a.stopPropagation();const d=document.getElementById("tenants-container");d&&d.scrollBy({left:-200,behavior:"smooth"})},children:e.jsx(ct,{className:"h-3 w-3"})}),e.jsx(R,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:a=>{a.stopPropagation();const d=document.getElementById("tenants-container");d&&d.scrollBy({left:200,behavior:"smooth"})},children:e.jsx(nt,{className:"h-3 w-3"})})]})]}),e.jsx("div",{id:"tenants-container",className:"flex gap-2 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:r.buildingsWithTickets.map(a=>e.jsxs("div",{className:"flex-shrink-0 group/building cursor-pointer flex flex-col items-center gap-1",title:`${a.name}: ${a.tenants_count} tenants`,onClick:d=>{d.stopPropagation(),window.open(`/buildings/${a.id}/tenants`,"_blank")},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-200 to-emerald-400 flex items-center justify-center  transition-transform shadow-lg",children:a.image?e.jsx("img",{src:`/storage/${a.image}`,alt:a.name,className:"w-full h-full rounded-full object-cover",onError:d=>{d.currentTarget.src="/images/default-builder-square.png"}}):e.jsx(de,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xs font-bold text-emerald-700 min-w-0 text-center",children:a.tenants_count})]},`tenant-${a.id}`))})]})]})})}),e.jsx(A,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-4/10 via-background to-chart-4/5 overflow-hidden cursor-pointer",onClick:()=>N(!0),children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-amber-100 w-fit mx-auto",children:e.jsx(dt,{className:"h-8 w-8 text-amber-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-amber-600 uppercase tracking-wider",children:"Devices"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:t.resources.devices})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Be,{className:"h-3 w-3 text-amber-400"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Click to view details"})]})]})})})]}),c&&r.topTechnicals&&r.topTechnicals.length>0&&e.jsx("div",{className:"mt-12",children:e.jsxs(A,{className:"border-0 bg-gradient-to-br from-rose-50/50 via-background to-rose-100/50 shadow-2xl backdrop-blur-sm",children:[e.jsx(P,{className:"border-b border-rose-200/50 bg-gradient-to-r from-rose-50/70 to-background pb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-rose-200 to-rose-300 shadow-lg",children:e.jsx(Br,{className:"h-6 w-6 text-rose-700"})}),e.jsxs("div",{children:[e.jsx(W,{className:"text-2xl font-bold text-slate-800",children:"Technical Team Directory"}),e.jsxs("p",{className:"text-sm text-slate-600 mt-2 font-medium",children:[r.topTechnicals.length," active technicians managing operations"]})]})]}),e.jsxs(R,{variant:"outline",size:"lg",className:"bg-gradient-to-r from-rose-100 to-rose-200 border-rose-300 text-rose-700 hover:from-rose-200 hover:to-rose-300 font-semibold px-6",onClick:()=>window.open("/technicals","_blank"),children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Manage Team"]})]})}),e.jsx(T,{className:"p-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.topTechnicals.map(a=>e.jsxs("div",{className:"group relative bg-gradient-to-br from-white to-rose-50/30 rounded-2xl p-6 shadow-lg border border-rose-200/50 hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 hover:border-rose-300/70",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-rose-100/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl"}),e.jsxs("div",{className:"relative space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative shrink-0",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-rose-300 to-rose-500 flex items-center justify-center overflow-hidden shadow-lg ring-2 ring-white",children:a.photo?e.jsx("img",{src:`/storage/${a.photo}`,alt:a.name,className:"w-full h-full object-cover"}):e.jsx(lt,{className:"h-8 w-8 text-white"})}),a.is_default===!0&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-full border-3 border-white flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-xs font-bold text-white",children:"⭐"})})]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h4",{className:"font-bold text-slate-900 text-base truncate",children:a.name}),a.is_default===!0&&e.jsx(H,{variant:"secondary",className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 border-yellow-200 font-semibold",children:"Default Tech"})]}),e.jsxs("div",{className:"space-y-2",children:[a.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Hr,{className:"h-4 w-4 text-slate-500 shrink-0"}),e.jsx("span",{className:"text-sm text-slate-700 truncate font-medium",children:a.email})]}),a.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vr,{className:"h-4 w-4 text-slate-500 shrink-0"}),e.jsx("span",{className:"text-sm text-slate-700 font-medium",children:a.phone})]})]})]})]}),e.jsxs("div",{className:"space-y-3 pt-2 border-t border-rose-200/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 rounded-lg bg-blue-100",children:e.jsx(pe,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("span",{className:"text-sm font-bold text-blue-700",children:[a.tickets_count||0," Active Tickets"]})]}),a.shift&&e.jsxs(H,{variant:"outline",className:"text-xs px-2 py-1 bg-slate-100 text-slate-700 border-slate-300 capitalize font-medium",children:[a.shift," Shift"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-600 font-medium",children:"Workload"}),e.jsx("span",{className:"text-slate-700 font-bold",children:a.tickets_count>10?"High":a.tickets_count>5?"Medium":a.tickets_count>0?"Low":"Available"})]}),e.jsx("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 rounded-full ${a.tickets_count>10?"bg-gradient-to-r from-red-400 to-red-500":a.tickets_count>5?"bg-gradient-to-r from-yellow-400 to-yellow-500":a.tickets_count>0?"bg-gradient-to-r from-green-400 to-green-500":"bg-gradient-to-r from-blue-400 to-blue-500"}`,style:{width:`${Math.min((a.tickets_count||0)/15*100,100)}%`}})})]})]})]})]},a.id))})})]})})]}),(!h||c||u)&&e.jsxs("div",{className:"space-y-16",children:["                            ",e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("h2",{className:"text-5xl font-black text-foreground",children:"Visual Analysis"}),e.jsx("p",{className:"text-2xl text-muted-foreground max-w-3xl mx-auto font-semibold",children:"Interactive charts and trends to monitor system performance"}),e.jsx("div",{className:"flex justify-center gap-6"})]}),e.jsxs("div",{className:"grid gap-20 lg:grid-cols-12",children:["                                ",e.jsx("div",{className:"lg:col-span-6",children:e.jsxs(A,{className:"h-full border-0 bg-gradient-to-br from-muted/20 via-background to-primary/5 shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-secondary/5"}),e.jsx(P,{className:"pb-12 relative",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(W,{className:"text-3xl font-black text-foreground",children:"Ticket Distribution"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Estado actual del sistema"})]}),e.jsxs("div",{className:"flex gap-4",children:["                                                    ",e.jsxs(R,{variant:"outline",size:"lg",onClick:()=>{const a=Object.values(s.ticketsByStatus).reduce((d,p)=>d+p,0);eo(s.ticketsByStatus,a)},className:"h-14 w-14 p-0 hover:bg-primary/10 shadow-xl border-primary/20 hover:scale-105 transition-all duration-300",title:"Export Professional Analysis",children:["                                                        ",e.jsx(xs,{className:"h-6 w-6 text-primary"})]}),e.jsx(R,{variant:"outline",size:"lg",onClick:()=>window.open("/tickets","_blank"),className:"h-14 w-14 p-0 hover:bg-primary/10 shadow-xl border-primary/20",children:e.jsx(J,{className:"h-6 w-6 text-primary"})})]})]})}),e.jsx(T,{className:"pt-0 pb-16 relative",children:e.jsx("div",{className:"h-[500px] flex items-center justify-center",children:e.jsx(Xi,{data:Object.entries(s.ticketsByStatus).map(([a,d],p)=>({name:a.replace("_"," ").toUpperCase(),value:d,color:ws[p%ws.length]})),width:500,height:500,innerRadius:80,outerRadius:160,onSliceClick:a=>{const d=a.name.toLowerCase().replace(" ","_");xr(d,a.value)}})})})]})}),"                                ",e.jsx("div",{className:"lg:col-span-6",children:e.jsxs(A,{className:"h-full border-0 bg-gradient-to-br from-secondary/10 via-background to-accent/5 shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/5 to-accent/5"}),e.jsx(P,{className:"pb-12 relative",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(W,{className:"text-3xl font-black text-foreground",children:"Weekly Trend"}),e.jsx("p",{className:"text-xl text-muted-foreground font-semibold",children:"Ticket evolution over the last 7 days"})]}),e.jsxs("div",{className:"flex gap-4",children:["                                                    ",e.jsx(R,{variant:"outline",size:"lg",onClick:()=>{const a=s.ticketsLastWeek.map(d=>({date:d.date,count:d.count}));Zi(a)},className:"h-14 w-14 p-0 hover:bg-secondary/10 shadow-xl border-secondary/20 hover:scale-105 transition-all duration-300",title:"Export Weekly Trend Analysis",children:e.jsx(xs,{className:"h-6 w-6 text-secondary"})})]})]})}),e.jsx(T,{className:"pt-0 pb-16 relative",children:e.jsx("div",{className:"h-[500px]",children:e.jsx(ks,{width:"100%",height:"100%",children:e.jsxs(Fs,{data:gr,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366F1",stopOpacity:.6}),e.jsx("stop",{offset:"95%",stopColor:"#6366F1",stopOpacity:.1})]})}),e.jsx(_s,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeWidth:2}),e.jsx(Cs,{dataKey:"date",tick:{fontSize:16,fill:"#475569",fontWeight:"bold"},tickLine:{stroke:"#cbd5e1"},axisLine:{stroke:"#cbd5e1"}}),e.jsx(As,{tick:{fontSize:16,fill:"#475569",fontWeight:"bold"},tickLine:{stroke:"#cbd5e1"},axisLine:{stroke:"#cbd5e1"}}),e.jsx(Ts,{contentStyle:{backgroundColor:"#fff",border:"none",borderRadius:"20px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.35)",padding:"20px 24px"},labelFormatter:a=>`Fecha: ${a}`,formatter:(a,d)=>[`${a} tickets`,d==="tickets"?"Daily Total":"Average"]}),e.jsx(Ve,{type:"monotone",dataKey:"tickets",stroke:"#6366F1",strokeWidth:5,fill:"url(#colorGradient)",dot:{fill:"#6366F1",strokeWidth:4,r:8},activeDot:{r:10,stroke:"#6366F1",strokeWidth:4,fill:"#fff"}}),e.jsx(Ve,{type:"monotone",dataKey:"average",stroke:"#94A3B8",strokeWidth:4,strokeDasharray:"10 10",fill:"none",dot:!1})]})})})})]})})]})]}),(c||u)&&s.technicalAnalysis&&s.technicalAnalysis.length>0&&e.jsxs("div",{className:"space-y-8 mt-4",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-blue-100 to-indigo-50 rounded-full shadow-lg",children:[e.jsx(Me,{className:"h-6 w-6 text-blue-600"}),e.jsx("span",{className:"text-sm font-bold text-blue-700 uppercase tracking-wider",children:"Performance Analytics"})]}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-br from-blue-600 to-indigo-800 bg-clip-text text-transparent",children:"Technical Team Analysis"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"Comprehensive performance metrics and efficiency analysis for technical staff"})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[e.jsxs(A,{className:"gap-0 group border-0 shadow-xl bg-gradient-to-br from-white via-blue-50/30 to-indigo-50/20 backdrop-blur-sm transition-all duration-500 hover:shadow-2xl overflow-hidden",children:[e.jsx(P,{className:" border-b border-blue-100/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-red-100 group-hover:bg-red-200 transition-colors",children:e.jsx(Oe,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx(W,{className:"text-xl font-bold text-red-700",children:"Open Tickets"}),e.jsx("p",{className:"text-sm text-red-600/80",children:"Count"})]})]})}),e.jsx(T,{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:s.technicalAnalysis.slice(0,5).some(a=>a.tickets_open>0)?e.jsx("div",{className:"h-80 flex items-center justify-center",children:e.jsx(ut,{data:s.technicalAnalysis.slice(0,5).filter(a=>a.tickets_open>0).map(a=>({name:a.name,value:a.tickets_open})),width:400,height:320,color:"#EF4444",title:"Open Tickets",valueLabel:"Open Tickets",barHeight:28,barSpacing:.05})}):e.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ke,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:"No Open Tickets"}),e.jsx("p",{className:"text-sm",children:"All tickets have been resolved or are in progress"})]})})})})]}),e.jsxs(A,{className:"gap-0 group border-0 shadow-xl bg-gradient-to-br from-white via-blue-50/30 to-indigo-50/20 backdrop-blur-sm transition-all duration-500 hover:shadow-2xl overflow-hidden",children:[e.jsx(P,{className:" border-b border-blue-100/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-yellow-100 group-hover:bg-yellow-200 transition-colors",children:e.jsx(K,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx(W,{className:"text-xl font-bold text-yellow-700",children:"In Progress Tickets"}),e.jsx("p",{className:"text-sm text-yellow-600/80",children:"Count"})]})]})}),e.jsx(T,{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:s.technicalAnalysis.slice(0,5).some(a=>a.tickets_in_progress>0)?e.jsx("div",{className:"h-80 flex items-center justify-center",children:e.jsx(ut,{data:s.technicalAnalysis.slice(0,5).filter(a=>a.tickets_in_progress>0).map(a=>({name:a.name,value:a.tickets_in_progress})),width:400,height:320,color:"#F59E0B",title:"In Progress Tickets",valueLabel:"In Progress Tickets",barHeight:28,barSpacing:.05})}):e.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:"No In Progress Tickets"}),e.jsx("p",{className:"text-sm",children:"All tickets are either resolved or pending"})]})})})})]}),e.jsxs(A,{className:"gap-0 group border-0 shadow-xl bg-gradient-to-br from-white via-blue-50/30 to-indigo-50/20 backdrop-blur-sm transition-all duration-500 hover:shadow-2xl overflow-hidden",children:[e.jsx(P,{className:"border-b border-blue-100/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-100 group-hover:bg-green-200 transition-colors",children:e.jsx(te,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx(W,{className:"text-xl font-bold text-green-700",children:"Resolved Tickets"}),e.jsx("p",{className:"text-sm text-green-600/80",children:"Count"})]})]})}),e.jsx(T,{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:s.technicalAnalysis.slice(0,5).some(a=>a.tickets_resolved>0)?e.jsx("div",{className:"h-80 flex items-center justify-center",children:e.jsx(ut,{data:s.technicalAnalysis.slice(0,5).filter(a=>a.tickets_resolved>0).map(a=>({name:a.name,value:a.tickets_resolved})),width:400,height:320,color:"#10B981",title:"Resolved Tickets",valueLabel:"Resolved Tickets",barHeight:28,barSpacing:.05})}):e.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(te,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:"No Resolved Tickets"}),e.jsx("p",{className:"text-sm",children:"No tickets have been completed yet"})]})})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(A,{className:"bg-gradient-to-br from-red-50 to-red-100 border-red-200",children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-red-700",children:s.technicalAnalysis.reduce((a,d)=>a+d.tickets_open,0)}),e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Open"})]})}),e.jsx(A,{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200",children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-700",children:s.technicalAnalysis.reduce((a,d)=>a+d.tickets_in_progress,0)}),e.jsx("div",{className:"text-sm text-yellow-600 font-medium",children:"Total In Progress"})]})}),e.jsx(A,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-700",children:s.technicalAnalysis.reduce((a,d)=>a+d.tickets_resolved,0)}),e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Resolved"})]})}),e.jsx(A,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-700",children:s.technicalAnalysis.reduce((a,d)=>a+d.total_tickets,0)}),e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Tickets"})]})})]})]}),(!h||c||u)&&e.jsxs("div",{className:"space-y-6 mt-4",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Advanced Analytics"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Interactive charts and visualizations"})]}),e.jsx(Ji,{data:{ticketsByStatus:Object.entries(s.ticketsByStatus).map(([a,d])=>({status:a,count:d,color:a==="open"?"#ef4444":a==="in_progress"?"#f59e0b":a==="resolved"?"#10b981":"#6b7280"})),ticketsByPriority:Object.entries(s.ticketsByPriority).map(([a,d])=>({priority:a,count:d,color:a==="high"?"#dc2626":a==="medium"?"#ea580c":a==="low"?"#16a34a":"#6b7280"})),ticketsByBuilding:r.buildingsWithTickets.map(a=>({building:a.name,count:a.tickets_count})),ticketsOverTime:s.ticketsLastWeek.map((a,d)=>({month:`Day ${d+1}`,created:a.count,resolved:Math.floor(a.count*.8)})),deviceIssues:r.problematicDevices.map(a=>({device:a.device_name,count:a.tickets_count,avgResolution:24})),techniciansPerformance:r.topTechnicals.map(a=>({technician:a.name,resolved:a.tickets_count,avg_time:18}))}})]}),(u||c)&&e.jsx("div",{className:"mt-32",children:e.jsxs(A,{className:"border-0 bg-chart-5 text-background shadow-2xl overflow-hidden relative dark:bg-white/10",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/10 dark:bg-transparent"}),e.jsx(T,{className:"p-16 relative",children:e.jsxs("div",{className:"grid gap-16 lg:grid-cols-4",children:["                                        ",e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-primary/20 w-fit mx-auto dark:bg-primary",children:e.jsx(Ie,{className:"h-10 w-10 text-primary dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-4xl font-black text-background",children:t.tickets.total+t.tickets.resolved_today}),e.jsx("p",{className:"text-primary/80 font-bold text-lg",children:"Total Processed"})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-primary/20 w-fit mx-auto dark:bg-primary",children:e.jsx(ve,{className:"h-10 w-10 text-primary dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-4xl font-black text-background",children:"98.5%"}),e.jsx("p",{className:"text-primary/80 font-bold text-lg",children:"Uptime"})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-accent/20 w-fit mx-auto dark:bg-primary",children:e.jsx(ce,{className:"h-10 w-10 text-accent dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-4xl font-black text-background",children:t.resources.tenants+t.resources.technicals}),e.jsx("p",{className:"text-accent/80 font-bold text-lg",children:"Active Users"})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-chart-1/20 w-fit mx-auto dark:bg-primary",children:e.jsx(Re,{className:"h-10 w-10 text-chart-1 dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-4xl font-black text-background",children:[Math.round(t.tickets.avg_resolution_hours*.8),"h"]}),e.jsx("p",{className:"text-chart-1/80 font-bold text-lg",children:"Response Time"})]})]})]})})]})})]})}),I&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in-0 duration-300",onClick:()=>N(!1),children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden border border-gray-200 dark:border-gray-700 animate-in zoom-in-95 slide-in-from-bottom-4 duration-500 ease-out",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-chart-4/10 to-chart-3/10 dark:from-chart-4/20 dark:to-chart-3/20",children:[e.jsxs("div",{className:"flex items-center gap-3 animate-in slide-in-from-left-4 duration-700 delay-200",children:[e.jsx("div",{className:"p-3 rounded-xl bg-chart-4/20 dark:bg-chart-4/30",children:e.jsx(dt,{className:"h-6 w-6 text-chart-4 dark:text-chart-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-white",children:"Device Management"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-300",children:"Complete overview of all devices in the system"})]})]}),e.jsx(R,{variant:"ghost",size:"lg",onClick:()=>N(!1),className:"rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 animate-in slide-in-from-right-4 duration-700 delay-200 transition-all hover:scale-105",children:e.jsx(at,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] bg-white dark:bg-gray-900 scroll-smooth custom-scrollbar",children:r.allDevices&&r.allDevices.length>0?e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-700 delay-300",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(A,{className:"bg-gradient-to-br from-primary/10 to-primary/5 dark:from-primary/20 dark:to-primary/10 border-primary/20 dark:border-primary/30 dark:bg-gray-800/50 animate-in slide-in-from-left-2 duration-500 delay-400 hover:scale-105 transition-transform",children:e.jsxs(T,{className:"p-4 text-center",children:[e.jsx(Be,{className:"h-8 w-8 text-primary dark:text-primary mx-auto mb-2"}),e.jsx("h3",{className:"font-semibold text-primary dark:text-primary",children:"Total Devices"}),e.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-white",children:r.allDevices.length})]})}),e.jsx(A,{className:"bg-gradient-to-br from-secondary/10 to-secondary/5 dark:from-secondary/20 dark:to-secondary/10 border-secondary/20 dark:border-secondary/30 dark:bg-gray-800/50 animate-in slide-in-from-bottom-2 duration-500 delay-500 hover:scale-105 transition-transform",children:e.jsxs(T,{className:"p-4 text-center",children:[e.jsx(ce,{className:"h-8 w-8 text-secondary dark:text-secondary mx-auto mb-2"}),e.jsx("h3",{className:"font-semibold text-secondary dark:text-secondary",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-white",children:r.allDevices.reduce((a,d)=>a+d.users_count,0)})]})}),e.jsx(A,{className:"bg-gradient-to-br from-accent/10 to-accent/5 dark:from-accent/20 dark:to-accent/10 border-accent/20 dark:border-accent/30 dark:bg-gray-800/50 animate-in slide-in-from-right-2 duration-500 delay-600 hover:scale-105 transition-transform",children:e.jsxs(T,{className:"p-4 text-center",children:[e.jsx(Me,{className:"h-8 w-8 text-accent dark:text-accent mx-auto mb-2"}),e.jsx("h3",{className:"font-semibold text-accent dark:text-accent",children:"Device Types"}),e.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-white",children:new Set(r.allDevices.map(a=>a.device_type)).size})]})})]}),e.jsxs(A,{className:"border-0 shadow-lg dark:bg-gray-800/50 dark:border-gray-700",children:[e.jsx(P,{className:"pb-6 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:!bg-transparent",children:e.jsxs("div",{className:"flex items-center justify-between dark:!bg-transparent",children:[e.jsx(W,{className:"text-xl text-foreground dark:text-white",children:"Device Inventory"}),"                                                    ",e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>to(r.allDevices),className:"gap-2 border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 hover:text-gray-700 dark:text-gray-300 hover:scale-105 transition-all duration-300",children:[e.jsx(qr,{className:"h-4 w-4"}),"Export"]})]})}),e.jsx(T,{className:"p-0 bg-white dark:bg-gray-800/50",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:["                                                        ",e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/70",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Device"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Model"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Brand"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"System"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Users"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Status"})]})}),e.jsx("tbody",{children:r.allDevices.map((a,d)=>e.jsxs("tr",{className:`border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${d%2===0?"bg-white dark:bg-gray-800/30":"bg-gray-50 dark:bg-gray-800/50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-chart-4/20 to-chart-3/20 dark:from-chart-4/30 dark:to-chart-3/30 flex items-center justify-center",children:e.jsx(Pr,{className:"h-4 w-4 text-chart-4 dark:text-chart-4"})}),e.jsx("div",{children:e.jsxs("p",{className:"font-semibold text-foreground dark:text-white text-sm",children:["  ",a.device_type||"Unknown"]})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-foreground dark:text-white",children:a.device_type||"N/A"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-foreground dark:text-white",children:a.brand_name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-muted-foreground dark:text-gray-400",children:a.system_name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4 text-accent dark:text-accent"}),e.jsx("span",{className:"font-semibold text-accent dark:text-accent",children:a.users_count})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(H,{variant:"outline",className:a.users_count>0?"bg-accent/10 dark:bg-accent/20 text-accent dark:text-accent border-accent/20 dark:border-accent/30":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600",children:a.users_count>0?"Active":"Unused"})})]},a.id))})]})})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(dt,{className:"h-16 w-16 text-muted-foreground dark:text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-muted-foreground dark:text-gray-300 mb-2",children:"No Devices Found"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-400",children:"No device data is available at the moment."})]})})]})}),e.jsx(Ds,{open:S,onOpenChange:a=>{a||et()},children:e.jsxs(Es,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[e.jsx($s,{children:e.jsxs(Ms,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-blue-600"}),"Appointment Location - ",f?ge(f).buildingName:""]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-4 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:f==null?void 0:f.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{children:f?Ze(f.scheduled_for).date:""})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:f?Ze(f.scheduled_for).time:""})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(lt,{className:"h-4 w-4"}),e.jsx("span",{children:f==null?void 0:f.technical.name})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsxs("span",{children:["#",f==null?void 0:f.ticket.code]})]})]}),e.jsxs("div",{className:"flex items-start gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(me,{className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:f?ge(f).buildingName:""}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Unit ",f?ge(f).unitNumber:""," â€¢ ",f==null?void 0:f.address]})]})]})]}),e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700",children:e.jsx("iframe",{src:dr(f?ge(f).locationLink:""),width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"w-full h-full"})}),e.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t border-slate-200 dark:border-slate-700",children:f&&ge(f).locationLink&&e.jsxs(R,{onClick:()=>{window.open(ge(f).locationLink,"_blank")},className:"px-6",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Open in Google Maps"]})})]})]})}),e.jsx(xt,{isOpen:b,onClose:()=>C(!1),tickets:we,title:"Open Tickets"}),e.jsx(xt,{isOpen:$,onClose:()=>M(!1),tickets:we,title:"In Progress Tickets"}),e.jsx(xt,{isOpen:U,onClose:()=>X(!1),tickets:we,title:"Resolved Tickets"})]})}function so({ticket:t,index:s,technicals:r}){var v,x,g,E,I,N,S,k,f,F;const[n,i]=z.useState(!1),[l,o]=z.useState(null),m=async()=>{var _;if(!l){L.error("Please select a technician");return}i(!0);try{const y=await fetch(`/tickets/${t.id}/assign-technical`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((_=document.querySelector('meta[name="csrf-token"]'))==null?void 0:_.getAttribute("content"))||""},body:JSON.stringify({technical_id:l})});if(y.ok){const j=await y.json();L.success(j.message||"Ticket assigned successfully!"),_e.reload({only:["lists"]})}else if(y.status===422){const j=await y.json(),b=Object.values(j.errors||{}).flat();L.error(b.join(", ")||"Validation error")}else{const j=await y.json().catch(()=>({message:"Unknown error"}));L.error(j.message||j.error||"Failed to assign ticket")}}catch(y){L.error("Error assigning ticket"),console.error("Assignment error:",y)}finally{i(!1)}},c=_=>{const y={open:"bg-red-100 text-red-700 border-red-200",in_progress:"bg-amber-100 text-amber-700 border-amber-200",resolved:"bg-green-100 text-green-700 border-green-200",closed:"bg-gray-100 text-gray-700 border-gray-200"};return e.jsx(H,{variant:"outline",className:`${y[_]||y.open} capitalize`,children:_.replace("_"," ")})},h=_=>{const y={Hardware:"bg-blue-100 text-blue-700",Software:"bg-purple-100 text-purple-700",Network:"bg-green-100 text-green-700",Maintenance:"bg-orange-100 text-orange-700"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${y[_]||"bg-gray-100 text-gray-700"}`,children:_})},u=_=>{const y=new Date(_),b=Math.floor((new Date().getTime()-y.getTime())/(1e3*60*60));return b<24?`${b}h ago`:`${Math.floor(b/24)}d ago`};return e.jsxs("tr",{className:`border-b border-slate-50 hover:bg-slate-50/50 transition-colors ${s%2===0?"bg-white":"bg-slate-25"}`,children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-slate-800 text-sm",children:t.code}),c(t.status)]}),e.jsx("p",{className:"text-sm text-slate-600 max-w-xs truncate",title:t.title,children:t.title})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-slate-800",children:((E=(g=(x=(v=t.user)==null?void 0:v.tenant)==null?void 0:x.apartment)==null?void 0:g.building)==null?void 0:E.name)||"Unknown Building"}),e.jsx("p",{className:"text-slate-600",children:((S=(N=(I=t.user)==null?void 0:I.tenant)==null?void 0:N.apartment)==null?void 0:S.name)||"Unknown Apt"})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-slate-800",children:((f=(k=t.device)==null?void 0:k.name_device)==null?void 0:f.name)||"Unknown Device"}),e.jsx("p",{className:"text-slate-600",children:((F=t.device)==null?void 0:F.name)||"N/A"})]})}),e.jsx("td",{className:"py-4 px-6",children:h(t.category)}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-slate-800",children:u(t.created_at)}),e.jsx("p",{className:"text-slate-500 text-xs",children:Ss(new Date(t.created_at),"MMM dd, HH:mm")})]})}),e.jsxs("td",{className:"py-4 px-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Er,{value:(l==null?void 0:l.toString())||"",onValueChange:_=>o(Number(_)),children:[e.jsx($r,{className:"w-32 h-8 text-xs",children:e.jsx(Mr,{placeholder:"Select tech"})}),"                        ",e.jsx(Rr,{children:r.length>0?r.map(_=>e.jsx(ds,{value:_.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:_.name}),_.is_default&&e.jsx(H,{variant:"secondary",className:"text-xs px-1 py-0",children:"Default"})]})},_.id)):e.jsx(ds,{value:"",disabled:!0,children:"No technicians available"})})]}),e.jsx(R,{size:"sm",variant:"outline",onClick:m,disabled:!l||n,className:"h-8 px-3 text-xs bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100 disabled:opacity-50",children:n?e.jsx(Rs,{className:"h-3 w-3 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"h-3 w-3 mr-1"}),"Assign"]})})]}),"            "]})]})}export{Xo as default};
