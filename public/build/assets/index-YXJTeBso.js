import{j as e}from"./ui--9QRf85z.js";import{r as p,U as ns}from"./recharts-B16uQ_Zp.js";import{A as zs,D as Hs,a as Vs,b as qs,d as ds}from"./app-layout-jqg5_jOc.js";import{K as Bs,m as Ks,L as Gs,t as j,S as W}from"./app-Bf17O6Tg.js";import{B as h}from"./button-3fVzTxZH.js";import{u as Ys,T as Ws,a as Qs,b as $e,c as Js,f as cs,d as Xs,e as xs,j as Zs,i as er}from"./table-Ck82WI9m.js";import{I as de}from"./input-0DEeXnQl.js";import{S as Fe}from"./switch-C60KyjrZ.js";import{D as P,a as U,b as O,c as z,d as H,e as Pe}from"./dialog-BLXZUGjO.js";import{L as w}from"./label-B8HdVDlN.js";import{S as Q,a as J,b as X,c as Z,d as v}from"./select-oz7VhMd8.js";import{a as n,b as d,c,T as Ue}from"./tooltip-Dm-vk6MS.js";import{B as ce}from"./badge-CTYXlqUe.js";import{C as xe,c as me}from"./card-DuB4YgHF.js";import{U as ms,F as he,c as pe,a as ue}from"./x-eWc-uscP.js";import{a as Oe,C as hs}from"./circle-check-big-DKZvEq1H.js";import{T as ee,L as sr,G as rr,a as tr,b as ar,H as ze}from"./trophy-41xlpHeA.js";import{T as lr}from"./trending-up-iFJZgfSe.js";import{F as or}from"./filter-C7rLzdBM.js";import{P as ps}from"./plus-BdgF4T8b.js";import{S as ir}from"./search-BYwieh_P.js";import{T as nr}from"./table-Um-mGLX3.js";import{R as us}from"./refresh-cw-Ck3NAieY.js";import{U as V}from"./user-B9S7Zak9.js";import{T as He}from"./triangle-alert-Dwpv9XSR.js";import{M as gs}from"./map-pin-B6MGBFhT.js";import{E as js}from"./external-link-D4kgwzSg.js";import{C as fs}from"./chevron-left-BEER2g75.js";import{M as dr,P as cr,a as ge,T as xr}from"./timer-DmmoSr9O.js";import{C as je}from"./clock-rsHRdq3d.js";import{S as mr}from"./star-Bpo0FjGK.js";import{E as hr}from"./ellipsis-DD_sq3ud.js";import{S as Ve}from"./square-pen-6qCxIJZ2.js";import{T as qe}from"./trash-2-DghiETJk.js";import{C as pr}from"./circle-alert-BoVUSwRZ.js";import{E as ur}from"./eye-Bhnt7WyV.js";import"./react-B1hewrmX.js";import"./index--i9LXxpm.js";import"./utils-DvwAYYBZ.js";import"./check-C_IBZmq_.js";import"./createLucideIcon-BBA9I-xQ.js";import"./index-BDFBH7XS.js";import"./index-BsIecJEN.js";import"./index-Df3HipqK.js";import"./chevrons-up-down-DaqTssCh.js";const u=({value:f,duration:fe=1e3})=>{const[Be,Ke]=ns.useState(0);return ns.useEffect(()=>{let q,D;const A=S=>{q||(q=S);const g=Math.min((S-q)/fe,1),B=1-Math.pow(1-g,3),T=Math.floor(B*f);Ke(T),g<1&&(D=requestAnimationFrame(A))};return D=requestAnimationFrame(A),()=>{D&&cancelAnimationFrame(D)}},[f,fe]),e.jsx("span",{children:Be})};function nt({technicals:f,filters:fe,canManage:Be,isDefaultTechnical:Ke,isSuperAdmin:q}){var as,ls,os;const{auth:D}=Bs().props,A=((as=D==null?void 0:D.user)==null?void 0:as.roles)||[],S=q??(Array.isArray(A)?A.includes("super-admin"):!1);console.log("User roles:",A);const g=s=>!!s.is_default,B=s=>{switch(s){case"open":return"bg-red-100 text-red-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"resolved":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},T=s=>new Date(s).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}),y=async(s,r)=>{const x={all:"All Tickets",today:"Today's Tickets",week:"This Week's Tickets",month:"This Month's Tickets",recent:"Recent Completed Tickets (Last 7 days)",open:"Open Tickets",in_progress:"In Progress Tickets",resolved:"Resolved Tickets",closed:"Closed Tickets"};Cs(`${s.name} - ${x[r]}`),Xe(!0),we(!0);try{const a=await fetch(`/api/technicals/${s.id}/tickets?type=${r}`);if(a.ok){const i=await a.json();ke(i)}else{let i=s.tickets||[];switch(r){case"open":{i=i.filter(t=>t.status==="open");break}case"in_progress":{i=i.filter(t=>t.status==="in_progress");break}case"resolved":{i=i.filter(t=>t.status==="resolved");break}case"closed":{i=i.filter(t=>t.status==="closed");break}case"today":{const t=new Date;t.setHours(0,0,0,0);const l=new Date(t);l.setDate(t.getDate()+1),i=i.filter(m=>{const N=new Date(m.created_at);return N>=t&&N<l});break}case"week":{const t=new Date,l=new Date(t);l.setDate(t.getDate()-t.getDay()),l.setHours(0,0,0,0),i=i.filter(m=>new Date(m.created_at)>=l);break}case"month":{const t=new Date,l=new Date(t.getFullYear(),t.getMonth(),1);i=i.filter(m=>new Date(m.created_at)>=l);break}case"recent":{const t=new Date;t.setDate(t.getDate()-7),t.setHours(0,0,0,0),i=i.filter(l=>new Date(l.created_at)>=t&&["resolved","closed"].includes(l.status));break}default:break}ke(i)}}catch(a){console.log("Using local tickets data:",a),j.error("Could not fetch latest ticket data, showing local data");let i=s.tickets||[];switch(r){case"open":i=i.filter(t=>t.status==="open");break;case"in_progress":i=i.filter(t=>t.status==="in_progress");break;case"resolved":i=i.filter(t=>t.status==="resolved");break;case"closed":i=i.filter(t=>t.status==="closed");break;case"today":{const t=new Date;t.setHours(0,0,0,0);const l=new Date(t);l.setDate(t.getDate()+1),i=i.filter(m=>{const N=new Date(m.created_at);return N>=t&&N<l});break}case"week":{const t=new Date,l=new Date(t);l.setDate(t.getDate()-t.getDay()),l.setHours(0,0,0,0),i=i.filter(m=>new Date(m.created_at)>=l);break}case"month":{const t=new Date,l=new Date(t.getFullYear(),t.getMonth(),1);i=i.filter(m=>new Date(m.created_at)>=l);break}case"recent":{const t=new Date;t.setDate(t.getDate()-7),t.setHours(0,0,0,0),i=i.filter(l=>new Date(l.created_at)>=t&&["resolved","closed"].includes(l.status));break}}ke(i)}finally{Xe(!1)}},be=async s=>{Qe(!0),ye(!0);try{const r=await fetch(`/api/tickets/${s}/detail`);if(r.ok){const x=await r.json();Ce(x)}else{const x={id:s,title:"Sample Ticket",description:"This is a sample ticket description with technical details...",status:"in_progress",priority:"high",category:"Hardware",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),history:[{id:1,action:"Ticket Created",description:"Ticket was created by tenant",created_at:new Date().toISOString(),user:{name:"System",role:"system"}}],comments:[]};Ce(x)}}catch{j.error("Error loading ticket details")}finally{Qe(!1)}},[$,ve]=p.useState("list"),[bs,se]=p.useState(!1),[vs,re]=p.useState(!1),[C,te]=p.useState(null),[Ne,Ge]=p.useState(null),[Ye,Ns]=p.useState(4),[ws,we]=p.useState(!1),[ys,ye]=p.useState(!1),[M,ke]=p.useState([]),[o,Ce]=p.useState(null),[ks,Cs]=p.useState(""),[R,De]=p.useState(""),[E,Se]=p.useState("all"),[F,Te]=p.useState("all"),[We,Ds]=p.useState(!1),[Ss,Qe]=p.useState(!1),[Je,Xe]=p.useState(!1),[Ts,ae]=p.useState(!1),[k,Ze]=p.useState(null),[L,le]=p.useState({instruction:"",priority:"normal"}),[_e,es]=p.useState(!1),_=s=>!s||s==="null"||s.trim()===""?null:`/storage/${s}`,K=f.data.filter(s=>{const r=s.name.toLowerCase().includes(R.toLowerCase())||s.email.toLowerCase().includes(R.toLowerCase())||s.phone.includes(R),x=E==="all"||E==="active"&&s.status||E==="inactive"&&!s.status,a=F==="all"||s.shift===F;return r&&x&&a}),[_s,G]=p.useState(!1),[As,oe]=p.useState(!1),[Ae,ie]=p.useState(null),{data:b,setData:I,delete:Ms,processing:ss,reset:Rs}=Ks({id:null,name:"",email:"",phone:"",shift:"morning",photo:null}),Y=(s,r)=>{switch(s){case"name":case"email":case"phone":I(s,r);break;case"shift":I(s,r);break;case"photo":I(s,r);break;case"id":I(s,r);break}if(Ae){const x={...b,[s]:r},a=Object.keys(Ae).some(i=>{const t=i;return t==="photo"?x[t]!==null:Ae[t]!==x[t]});G(a)}},rs=()=>{_s?oe(!0):ne()},ne=()=>{se(!1),oe(!1),G(!1),ie(null),Rs()},Es=()=>{ne()},ts=[{accessorKey:"photo",header:"Photo",cell:({row:s})=>e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden",children:_(s.original.photo)?e.jsx("img",{src:_(s.original.photo),alt:s.original.name,className:"w-full h-full object-cover",onError:r=>{const x=r.target;x.style.display="none",x.parentElement.innerHTML='<div class="w-full h-full bg-gray-200 flex items-center justify-center"><User size={16} class="text-gray-500" /></div>'}}):e.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:e.jsx(V,{className:"w-5 h-5 text-gray-400"})})})},{accessorKey:"name",header:"Name"},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{accessorKey:"shift",header:"Shift",cell:({row:s})=>e.jsx("span",{className:"capitalize",children:s.original.shift})},{accessorKey:"is_default",header:"Role",cell:({row:s})=>e.jsx("div",{className:"flex items-center gap-2",children:S?e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(h,{variant:g(s.original)?"default":"outline",size:"sm",onClick:()=>Ee(s.original),className:"h-6 px-2 text-xs",children:g(s.original)?"Remove Chief":"Set as Chief"})}),e.jsxs(c,{children:[e.jsxs("p",{children:[g(s.original)?"Remove as":"Set as"," Tech Default"]}),e.jsx("p",{children:"Tech Defaults have additional permissions"})]})]}):e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${g(s.original)?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:g(s.original)?"Tech Default":"Technical"})})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(Fe,{checked:s.original.status,onCheckedChange:()=>Re(s.original),disabled:Ne===s.original.id})}),e.jsx(c,{children:e.jsxs("p",{children:[s.original.status?"Deactivate":"Activate"," technical"]})})]}),e.jsx(gr,{status:s.original.status?"active":"inactive"})]})},{id:"actions",header:"Actions",cell:({row:s})=>e.jsxs(Hs,{children:[e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(Vs,{asChild:!0,children:e.jsx(h,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(hr,{className:"h-4 w-4"})})})}),e.jsx(c,{children:e.jsx("p",{children:"More actions"})})]}),e.jsxs(qs,{align:"end",children:[e.jsxs(ds,{onClick:()=>Le(s.original),children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsxs(ds,{onClick:()=>Ie(s.original),children:[e.jsx(qe,{className:"mr-2 h-4 w-4 text-destructive"}),"Delete"]})]})]})}],Me=Ys({data:K,columns:ts,getCoreRowModel:er(),getPaginationRowModel:Zs()}),Ls=({technicals:s,gridColumns:r})=>{const x=()=>{switch(r){case 2:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-2";case 3:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-3";case 4:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-4";case 5:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-5";case 6:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-6";default:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"}};return e.jsx(Ue,{children:e.jsx("div",{className:`grid ${x()} gap-6`,children:s.map((a,i)=>e.jsxs("div",{className:"bg-gradient-to-br from-white to-corporate-gold/5 dark:from-dark-brown dark:to-corporate-gold/10 p-4 rounded-xl shadow-sm transition-all duration-500 border-2 border-corporate-gold/20 relative overflow-hidden",style:{animationDelay:`${i*150}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:[e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-br from-corporate-gold/20 to-transparent rounded-bl-2xl opacity-50"}),e.jsx("div",{className:"w-full aspect-square rounded-lg overflow-hidden mb-4 border-2 border-corporate-gold/30 transition-all duration-300 relative",children:_(a.photo)?e.jsx("img",{src:_(a.photo),alt:a.name,className:"w-full h-full object-cover",onError:t=>{t.currentTarget.src="/images/default-user.png"}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-corporate-gold/10 to-corporate-warm/10 flex items-center justify-center",children:e.jsx(V,{className:"w-16 h-16 text-corporate-gold/60"})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx("h3",{className:"font-semibold text-xl truncate text-corporate-gold dark:text-corporate-gold-light transition-colors duration-300 cursor-help",children:a.name})}),e.jsxs(c,{children:[e.jsxs("p",{children:["Technical: ",a.name]}),e.jsxs("p",{children:["Email: ",a.email]}),e.jsxs("p",{children:["Phone: ",a.phone]})]})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(Fe,{checked:a.status,onCheckedChange:()=>Re(a),disabled:Ne===a.id,className:"scale-90 data-[state=checked]:bg-corporate-gold"})}),e.jsx(c,{children:e.jsxs("p",{children:[a.status?"Deactivate":"Activate"," technical"]})})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{className:"text-muted-foreground truncate",children:a.email}),e.jsx("p",{className:"font-medium text-corporate-dark-brown dark:text-corporate-gold-light",children:a.phone}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`capitalize text-white px-3 py-1 rounded-md font-medium transition-all duration-300 ${a.shift==="morning"?"bg-gradient-to-r from-corporate-gold to-corporate-warm shadow-lg shadow-corporate-gold/30":a.shift==="afternoon"?"bg-gradient-to-r from-corporate-warm to-corporate-gold shadow-lg shadow-corporate-warm/30":"bg-gradient-to-r from-corporate-dark-brown to-corporate-brown shadow-lg shadow-corporate-dark-brown/30"}`,children:a.shift}),g(a)&&e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx("span",{className:"bg-gradient-to-r from-corporate-gold via-corporate-warm to-corporate-gold text-white px-2 py-1 rounded-md text-xs font-medium animate-pulse shadow-lg cursor-help",children:"Tech Default"})}),e.jsxs(c,{children:[e.jsx("p",{children:"Technical Chief - Team Leader"}),e.jsx("p",{children:"Has special permissions and responsibilities"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{onClick:()=>y(a,"month"),className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-2 rounded-lg border border-purple-200 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600",children:e.jsx(u,{value:a.monthly_tickets})}),e.jsx("div",{className:"text-xs text-purple-600",children:"Month"})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view this month's tickets"}),e.jsxs("p",{children:[a.monthly_tickets," tickets this month"]})]})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{onClick:()=>y(a,"week"),className:"bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 p-2 rounded-lg border border-corporate-gold/30 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-lg font-bold text-corporate-gold",children:e.jsx(u,{value:a.weekly_tickets})}),e.jsx("div",{className:"text-xs text-corporate-gold",children:"Week"})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view this week's tickets"}),e.jsxs("p",{children:[a.weekly_tickets," tickets this week"]})]})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{onClick:()=>y(a,"today"),className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-2 rounded-lg border border-green-200 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:e.jsx(u,{value:a.today_tickets})}),e.jsx("div",{className:"text-xs text-green-600",children:"Today"})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view today's tickets"}),e.jsxs("p",{children:[a.today_tickets," tickets today"]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(h,{onClick:()=>Le(a),variant:"outline",size:"sm",className:"gap-2 px-4 border-corporate-gold/30 transition-all duration-300",children:e.jsx(Ve,{className:"w-4 h-4"})})}),e.jsx(c,{children:e.jsx("p",{children:"Edit technical information"})})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(h,{onClick:()=>Ie(a),variant:"outline",size:"sm",className:"gap-2 px-4 border-red-300 transition-all duration-300",children:e.jsx(qe,{className:"w-4 h-4"})})}),e.jsxs(c,{children:[e.jsx("p",{children:"Delete technical permanently"}),e.jsx("p",{className:"text-red-500",children:"This action cannot be undone"})]})]})]}),S&&e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs(h,{onClick:()=>Ee(a),variant:g(a)?"default":"outline",size:"sm",className:`text-xs transition-all duration-300 ${g(a)?"bg-gradient-to-r from-corporate-gold to-corporate-warm text-white shadow-lg":"border-corporate-gold/30"}`,children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),g(a)?"Remove Chief":"Set as Chief"]})}),e.jsxs(c,{children:[e.jsxs("p",{children:[g(a)?"Remove as":"Set as"," Tech Default"]}),e.jsx("p",{children:"Tech Defaults have additional permissions"})]})]})]})]})]},a.id))})})},Is=({technicals:s})=>e.jsx(Ue,{children:e.jsx("div",{className:"space-y-6",children:s.map((r,x)=>{var a,i,t;return e.jsxs("div",{className:"bg-gradient-to-r from-white to-corporate-gold/5 dark:from-transparent dark:to-corporate-gold/10 rounded-xl shadow-sm transition-all duration-500 border-2 border-corporate-gold/20 overflow-hidden group",style:{animationDelay:`${x*200}ms`,animation:"fadeInUp 0.8s ease-out forwards"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-corporate-gold/0 via-corporate-gold/5 to-corporate-gold/0 opacity-0 transition-opacity duration-700 pointer-events-none"}),e.jsxs("div",{className:"flex relative z-10",children:[e.jsxs("div",{className:"w-80 bg-gradient-to-br from-corporate-gold/10 to-corporate-warm/10 dark:from-corporate-gold/20 dark:to-corporate-warm/20 p-6 border-r border-corporate-gold/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-corporate-gold/20 to-transparent rounded-bl-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-gradient-to-tr from-corporate-warm/20 to-transparent rounded-tr-3xl"}),e.jsxs("div",{className:"flex flex-col items-center text-center space-y-4 relative z-10",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-corporate-gold/30 shadow-xl relative transition-transform duration-500",children:_(r.photo)?e.jsx("img",{src:_(r.photo),alt:r.name,className:"w-full h-full object-cover",onError:l=>{l.currentTarget.src="/images/default-user.png"}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 flex items-center justify-center",children:e.jsx(V,{className:"w-12 h-12 text-corporate-gold"})})}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-corporate-gold/0 transition-all duration-500"}),g(r)&&e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx("div",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-corporate-gold to-corporate-warm rounded-full p-2 shadow-lg animate-bounce",children:e.jsx(ee,{className:"w-4 h-4 text-primary-foreground dark:text-white"})})}),e.jsx(c,{children:e.jsx("p",{children:"Technical Chief - Team Leader"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-xl text-corporate-gold dark:text-corporate-gold-light transition-colors duration-300",children:r.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.email}),e.jsx("p",{className:"font-medium text-corporate-dark-brown dark:text-corporate-gold-light",children:r.phone}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium capitalize shadow-lg transition-all duration-300  ${r.shift==="morning"?"bg-gradient-to-r from-corporate-gold to-corporate-warm text-primary-foregrounde shadow-corporate-gold/30":r.shift==="afternoon"?"bg-gradient-to-r from-corporate-warm to-corporate-gold text-primary-foreground shadow-corporate-warm/30":"bg-gradient-to-r from-corporate-dark-brown to-corporate-brown text-primary-foreground shadow-corporate-dark-brown/30"}`,children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),r.shift]}),g(r)&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 dark:text-white rounded-full text-xs font-medium bg-gradient-to-r from-corporate-gold via-corporate-warm to-corporate-gold text-primary-foreground shadow-lg",children:[e.jsx(ee,{className:"w-3 h-3 mr-1"}),"Tech Default"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{className:"bg-white/70 dark:bg-transparent dark:bg-corporate-gold/10 p-2 rounded-lg border border-corporate-gold/20 text-center transition-colors duration-300 cursor-pointer",children:[e.jsx("div",{className:"text-lg font-bold text-corporate-gold animate-pulse",children:e.jsx(u,{value:r.current_streak})}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Streak"})]})}),e.jsx(c,{children:e.jsx("p",{children:"Consecutive resolved tickets"})})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{className:"bg-white/70 dark:bg-transparent p-2 rounded-lg border border-corporate-gold/20 text-center transition-colors duration-300 cursor-pointer",children:[e.jsxs("div",{className:"text-lg font-bold text-corporate-warm",children:[e.jsx(u,{value:r.avg_resolution_time}),"h"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Time"})]})}),e.jsx(c,{children:e.jsx("p",{children:"Average resolution time in hours"})})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`px-2 py-1 flex gap-2 items-center rounded-full text-xs font-medium transition-all duration-300 ${r.status?"bg-gradient-to-r from-green-100 to-green-200 text-green-800 shadow-green-200/50":"bg-gradient-to-r from-red-100 to-red-200 text-red-800 shadow-red-200/50"}`,children:[e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(Fe,{checked:r.status,onCheckedChange:()=>Re(r),disabled:Ne===r.id,className:"data-[state=checked]:bg-white data-[state=unchecked]:bg-gray-200"})}),e.jsx(c,{children:e.jsxs("p",{children:[r.status?"Deactivate":"Activate"," technical"]})})]}),r.status?"Active":"Inactive"]})}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(h,{onClick:()=>Le(r),variant:"outline",size:"sm",className:"flex-1 border-corporate-gold/30 transition-colors duration-300",children:e.jsx(Ve,{className:"w-4 h-4"})})}),e.jsx(c,{children:e.jsx("p",{children:"Edit technical information"})})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(h,{onClick:()=>Ie(r),variant:"outline",size:"sm",className:"flex-1 border-red-300 transition-colors duration-300",children:e.jsx(qe,{className:"w-4 h-4"})})}),e.jsx(c,{children:e.jsx("p",{children:"Delete technical permanently"})})]}),S&&e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(h,{onClick:()=>Ee(r),variant:g(r)?"default":"outline",size:"sm",className:`flex-1 transition-colors duration-300 ${g(r)?"bg-secondary text-primary-foreground border-corporate-gold":"border-corporate-gold/30"}`,children:e.jsx(ee,{className:"w-4 h-4"})})}),e.jsx(c,{children:e.jsxs("p",{children:[g(r)?"Remove as":"Set as"," Tech Default"]})})]}),(S||A.includes("technical"))&&e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(h,{onClick:()=>$s(r),variant:"outline",size:"sm",className:"flex-1 border-blue-300 hover:bg-blue-50 transition-colors duration-300",children:e.jsx(ge,{className:"w-4 h-4"})})}),e.jsx(c,{children:e.jsx("p",{children:"Send instruction to technical"})})]})]})]})]}),e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ar,{className:"w-5 h-5 text-corporate-gold"}),e.jsx("h4",{className:"font-semibold text-lg text-corporate-gold dark:text-corporate-gold-light",children:"Performance Metrics"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{onClick:()=>y(r,"today"),className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-3 rounded-lg border border-green-200 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-xl font-bold text-green-600",children:e.jsx(u,{value:r.today_tickets})}),e.jsx("div",{className:"text-xs text-green-600",children:"Today"})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view today's tickets"}),e.jsxs("p",{children:[r.today_tickets," tickets created today"]})]})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{onClick:()=>y(r,"week"),className:"bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 p-3 rounded-lg border border-corporate-gold/30 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-xl font-bold text-corporate-gold",children:e.jsx(u,{value:r.weekly_tickets})}),e.jsx("div",{className:"text-xs text-corporate-gold",children:"This Week"})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view this week's tickets"}),e.jsxs("p",{children:[r.weekly_tickets," tickets this week"]})]})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{onClick:()=>y(r,"month"),className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-3 rounded-lg border border-purple-200 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-xl font-bold text-purple-600",children:e.jsx(u,{value:r.monthly_tickets})}),e.jsx("div",{className:"text-xs text-purple-600",children:"This Month"})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view this month's tickets"}),e.jsxs("p",{children:[r.monthly_tickets," tickets this month"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{onClick:()=>y(r,"open"),className:"flex items-center justify-between p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pr,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Open Tickets"}),e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Require immediate attention"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-red-600",children:e.jsx(u,{value:r.open_tickets})}),e.jsx(ue,{className:"w-4 h-4 text-red-500"})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view all open tickets"}),e.jsxs("p",{children:[r.open_tickets," tickets waiting for work to begin"]})]})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{onClick:()=>y(r,"in_progress"),className:"flex items-center justify-between p-3 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(je,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-300",children:"In Progress"}),e.jsx("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:"Currently being worked on"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-yellow-600",children:e.jsx(u,{value:r.in_progress_tickets})}),e.jsx(ue,{className:"w-4 h-4 text-yellow-500"})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view all tickets in progress"}),e.jsxs("p",{children:[r.in_progress_tickets," tickets actively being resolved"]})]})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{onClick:()=>y(r,"resolved"),className:"flex items-center justify-between p-3 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Resolved"}),e.jsx("div",{className:"text-xs text-green-600 dark:text-green-400",children:"Successfully completed"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-green-600",children:e.jsx(u,{value:r.resolved_tickets})}),e.jsx(ue,{className:"w-4 h-4 text-green-500"})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view all resolved tickets"}),e.jsxs("p",{children:[r.resolved_tickets," tickets successfully completed"]})]})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{onClick:()=>y(r,"recent"),className:"flex items-center justify-between p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ze,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Recent Completed"}),e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Last 7 days (resolved/closed only)"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:e.jsx(u,{value:((a=r.tickets)==null?void 0:a.filter(l=>{const m=new Date;return m.setDate(m.getDate()-7),new Date(l.created_at)>=m&&["resolved","closed"].includes(l.status)}).length)||0})}),e.jsx(ue,{className:"w-4 h-4 text-blue-500"})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view recent completed tickets"}),e.jsx("p",{children:"Shows only resolved/closed tickets from last 7 days"}),e.jsx("p",{className:"text-blue-500",children:"Excludes active (open/in progress) tickets"})]})]})]}),r.total_tickets>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-corporate-gold font-medium",children:"Success Rate"}),e.jsxs("span",{className:"font-bold text-corporate-gold",children:[e.jsx(u,{value:Math.round(r.resolved_tickets/r.total_tickets*100)}),"%"]})]}),e.jsx("div",{className:"w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-full h-3 shadow-inner overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-corporate-gold via-corporate-warm to-corporate-gold h-3 rounded-full transition-all duration-2000 ease-out shadow-lg relative",style:{width:`${Math.round(r.resolved_tickets/r.total_tickets*100)}%`,animationDelay:`${x*300}ms`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t border-corporate-gold/20",children:[e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{className:"text-center p-2 rounded-lg bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border border-green-200 transition-colors duration-300 cursor-pointer hover:bg-gradient-to-br hover:from-green-100 hover:to-green-150",children:[e.jsx("div",{className:"text-sm font-medium text-green-600",children:"Resolved Today"}),e.jsx("div",{className:"text-lg font-bold text-green-600",children:e.jsx(u,{value:r.resolved_today})})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Tickets resolved today"}),e.jsx("p",{children:"Shows completion performance for today"})]})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{className:"text-center p-2 rounded-lg bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 border border-corporate-gold/30 transition-colors duration-300 cursor-pointer hover:bg-gradient-to-br hover:from-corporate-gold/30 hover:to-corporate-warm/30",children:[e.jsx("div",{className:"text-sm font-medium text-corporate-gold",children:"Avg Resolution"}),e.jsxs("div",{className:"text-lg font-bold text-corporate-gold",children:[e.jsx(u,{value:r.avg_resolution_time}),"h"]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Average time to resolve tickets"}),e.jsx("p",{children:"Lower is better for efficiency"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(pe,{className:"w-5 h-5 text-corporate-gold"}),e.jsx("h4",{className:"font-semibold text-lg text-corporate-gold dark:text-corporate-gold-light",children:"Active Assignments"}),e.jsx("span",{className:"bg-gradient-to-r from-corporate-gold/20 to-corporate-warm/20 text-corporate-gold border border-corporate-gold/30 px-2 py-1 rounded-full text-xs font-medium animate-pulse",children:e.jsx(u,{value:r.assigned_devices_count})})]}),e.jsx("div",{className:"space-y-2 max-h-36 overflow-y-auto overflow-x-hidden",children:((i=r.assigned_devices)==null?void 0:i.length)>0?r.assigned_devices.map((l,m)=>{var N,is;return e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 p-3 rounded-lg border border-corporate-gold/20 hover:bg-gradient-to-r hover:from-corporate-gold/10 hover:to-corporate-warm/10 hover:border-corporate-gold/40 transition-colors duration-300 cursor-pointer",style:{animationDelay:`${x*100+m*50}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:[e.jsx("div",{className:"font-medium text-sm text-corporate-gold truncate",children:l.name}),e.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:[(N=l.brand)==null?void 0:N.name," • ",(is=l.model)==null?void 0:is.name]}),l.system&&e.jsxs("div",{className:"text-xs text-corporate-warm mt-1 truncate",children:["System: ",l.system.name]})]})}),e.jsx(c,{children:e.jsx("p",{children:"Device with active/in-progress tickets"})})]},l.id)}):e.jsx("div",{className:"text-sm text-muted-foreground italic p-3 text-center bg-corporate-gold/5 rounded-lg border border-corporate-gold/20",children:"No active device assignments"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5 text-corporate-gold"}),e.jsx("h4",{className:"font-semibold text-lg text-corporate-gold dark:text-corporate-gold-light",children:"Recent Completed Tickets"})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>y(r,"recent"),className:"text-xs border-corporate-gold/30 hover:bg-primary hover:text-white",children:[e.jsx(ur,{className:"w-3 h-3 mr-1"}),"View All Recent"]})}),e.jsx(c,{children:e.jsx("p",{children:"View tickets from last 7 days"})})]})]}),e.jsx("div",{className:"space-y-2 max-h-44 overflow-y-auto scrollbar-thin",children:((t=r.tickets)==null?void 0:t.filter(l=>{const m=new Date;return m.setDate(m.getDate()-7),m.setHours(0,0,0,0),new Date(l.created_at)>=m&&["resolved","closed"].includes(l.status)}).length)>0?r.tickets.filter(l=>{const m=new Date;return m.setDate(m.getDate()-7),m.setHours(0,0,0,0),new Date(l.created_at)>=m&&["resolved","closed"].includes(l.status)}).slice(0,5).map((l,m)=>e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{onClick:()=>be(l.id),className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 p-3 rounded-lg border border-corporate-gold/20 hover:bg-gradient-to-r hover:from-corporate-gold/10 hover:to-corporate-warm/10 hover:border-corporate-gold/40 transition-all duration-300 cursor-pointer hover:scale-105 transform group",style:{animationDelay:`${x*100+m*50}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium text-sm truncate pr-2 text-corporate-gold group-hover:text-corporate-warm",children:l.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium transition-all duration-300 flex-shrink-0 ${B(l.status)}`,children:l.status.replace("_"," ")}),e.jsx(js,{className:"w-3 h-3 text-corporate-gold opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 truncate",children:[T(l.created_at),l.building&&e.jsxs("span",{className:"ml-2 text-corporate-warm",children:["• ",l.building.name]})]}),l.device&&e.jsxs("div",{className:"text-xs text-corporate-gold mt-1 truncate",children:["Device: ",l.device.name]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view ticket details and history"}),e.jsx("p",{className:"text-green-500",children:"✓ Completed ticket"}),e.jsxs("p",{children:["Status: ",l.status]})]})]},l.id)):e.jsxs("div",{className:"text-sm text-muted-foreground italic p-3 text-center bg-corporate-gold/5 rounded-lg border border-corporate-gold/20",children:[e.jsx(ze,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{children:"No recent completed tickets"}),e.jsx("p",{className:"text-xs mt-1",children:"Last 7 days show no resolved/closed tickets"})]})})]})]})]})})]})]},r.id)})})}),Re=async s=>{Ge(s.id);try{await W.put(route("technicals.update-status",s.id),{},{preserveScroll:!0,onSuccess:()=>j.success("Status updated"),onError:()=>j.error("Error updating status")})}finally{Ge(null)}},Ee=async s=>{if(!S){j.error("Only super-admin can manage Tech Defaults");return}try{await W.put(route("technicals.set-default",s.id),{},{preserveScroll:!0,onSuccess:()=>{const r=g(s)?"removed from":"assigned as";j.success(`Technical ${r} Tech Default successfully`)},onError:()=>j.error("Error updating Tech Default status")})}catch{j.error("Connection error")}},Le=s=>{const r={id:s.id,name:s.name,email:s.email,phone:s.phone,shift:s.shift,photo:null};I(r),ie(r),te(s),G(!1),se(!0)},Ie=s=>{te(s),re(!0)},$s=s=>{Ze(s),le({instruction:"",priority:"normal"}),ae(!0)},Fs=async s=>{if(s.preventDefault(),!k||!L.instruction.trim()){j.error("Please enter an instruction");return}es(!0);try{await W.post(route("technicals.send-instruction",k.id),{instruction:L.instruction,priority:L.priority},{preserveScroll:!0,onSuccess:()=>{ae(!1),Ze(null),le({instruction:"",priority:"normal"}),j.success("Instruction sent successfully")},onError:r=>{Object.values(r).forEach(x=>j.error(x))}})}catch{j.error("Error sending instruction")}finally{es(!1)}},Ps=s=>{switch(s){case"low":return"bg-blue-100 text-blue-800";case"normal":return"bg-gray-100 text-gray-800";case"high":return"bg-orange-100 text-orange-800";case"urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Us=s=>{if(s.preventDefault(),b.id){const r=new FormData;r.append("_method","PUT"),Object.entries(b).forEach(([x,a])=>{a!==null&&(typeof a=="number"?r.append(x,a.toString()):r.append(x,a))}),W.post(route("technicals.update",b.id),r,{preserveScroll:!0,onSuccess:()=>{ne(),j.success("Technical updated")},onError:x=>{Object.values(x).forEach(a=>j.error(a))}})}else{const r={name:b.name,email:b.email,phone:b.phone,shift:b.shift,photo:b.photo};W.post(route("technicals.store"),r,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{ne(),j.success("Technical created")},onError:x=>{Object.values(x).forEach(a=>j.error(a))}})}},Os=()=>{C&&Ms(route("technicals.destroy",C.id),{preserveScroll:!0,onSuccess:()=>{re(!1),j.success("Technical deleted")},onError:()=>{j.error("Delete failed")}})};return e.jsxs(zs,{children:[e.jsx(Gs,{title:"Technicals Management"}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(30px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                
                @keyframes bounceIn {
                    0% {
                        opacity: 0;
                        transform: scale(0.3);
                    }
                    50% {
                        opacity: 1;
                        transform: scale(1.05);
                    }
                    70% {
                        transform: scale(0.9);
                    }
                    100% {
                        opacity: 1;
                        transform: scale(1);
                    }
                }
                
                @keyframes shimmer {
                    0% {
                        background-position: -200px 0;
                    }
                    100% {
                        background-position: calc(200px + 100%) 0;
                    }
                }
                
                .animate-fadeInUp {
                    animation: fadeInUp 0.6s ease-out;
                }
                
                .animate-bounceIn {
                    animation: bounceIn 0.8s ease-out;
                }
                
                .animate-shimmer {
                    background: linear-gradient(
                        90deg,
                        transparent,
                        rgba(255, 255, 255, 0.2),
                        transparent
                    );
                    background-size: 200px 100%;
                    animation: shimmer 2s infinite;
                }
                
                .scrollbar-thin {
                    scrollbar-width: thin;
                }
                
                .scrollbar-thin::-webkit-scrollbar {
                    width: 4px;
                    height: 4px;
                }
                
                .scrollbar-thin::-webkit-scrollbar-track {
                    background: transparent;
                }
                
                .scrollbar-thin::-webkit-scrollbar-thumb {
                    background-color: rgba(156, 163, 175, 0.2);
                    border-radius: 2px;
                }
                
                .scrollbar-thin::-webkit-scrollbar-thumb:hover {
                    background-color: rgba(156, 163, 175, 0.3);
                }
            `}}),e.jsxs("div",{className:"bg-gradient-to-br from-corporate-gold/10 via-corporate-warm/10 to-corporate-gold/5 dark:from-corporate-gold/20 dark:via-corporate-warm/20 dark:to-corporate-gold/10 p-6 border-b border-corporate-gold/20",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-primary to-accent rounded-xl shadow-lg",children:e.jsx(ms,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-corporate-gold dark:text-corporate-gold-light",children:"Technical Team Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage technical staff, track performance, and monitor ticket assignments"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsx(xe,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200",children:e.jsx(me,{className:"p-3",children:e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 cursor-help",children:[e.jsx(Oe,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Active Technicals"}),e.jsx("p",{className:"text-xl font-bold text-green-700",children:e.jsx(u,{value:f.data.filter(s=>s.status).length})})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Currently active technicals"}),e.jsx("p",{children:"Ready to handle tickets and assignments"})]})]})})}),e.jsx(xe,{className:"bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 border-corporate-gold/30",children:e.jsx(me,{className:"p-3",children:e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 cursor-help",children:[e.jsx(ee,{className:"w-5 h-5 text-corporate-gold"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-corporate-gold",children:"Tech Defaults"}),e.jsx("p",{className:"text-xl font-bold text-corporate-gold",children:e.jsx(u,{value:f.data.filter(s=>s.is_default).length})})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Technical Chiefs - Team Leaders"}),e.jsx("p",{children:"Have additional permissions and responsibilities"}),e.jsx("p",{className:"text-corporate-gold",children:"Only super-admin can assign this role"})]})]})})}),e.jsx(xe,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200",children:e.jsx(me,{className:"p-3",children:e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 cursor-help",children:[e.jsx(he,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Tickets"}),e.jsx("p",{className:"text-xl font-bold text-blue-700",children:e.jsx(u,{value:f.data.reduce((s,r)=>s+r.total_tickets,0)})})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Total tickets handled by all technicals"}),e.jsx("p",{children:"Includes all statuses across the team"})]})]})})}),e.jsx(xe,{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border-purple-200",children:e.jsx(me,{className:"p-3",children:e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 cursor-help",children:[e.jsx(lr,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Avg Resolution"}),e.jsxs("p",{className:"text-xl font-bold text-purple-700",children:[e.jsx(u,{value:Math.round(f.data.reduce((s,r)=>s+r.avg_resolution_time,0)/f.data.length)||0}),"h"]})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Average resolution time across all technicals"}),e.jsx("p",{children:"Time from ticket creation to resolution"}),e.jsx("p",{className:"text-purple-500",children:"Lower values indicate better efficiency"})]})]})})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs(h,{variant:"outline",onClick:()=>Ds(!We),className:"border-corporate-gold/30 hover:bg-corporate-gold hover:text-primary-foreground transition-all duration-300",children:[e.jsx(or,{className:"w-4 h-4 mr-2"}),"Advanced Filters"]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Advanced search and filtering options"}),e.jsx("p",{children:"Filter by status, shift, and search terms"})]})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs(h,{onClick:()=>{const s={id:null,name:"",email:"",phone:"",shift:"morning",photo:null};I(s),ie(s),te(null),G(!1),se(!0)},className:"text-primary-foreground bg-primary hover:from-corporate-warm hover:to-corporate-gold  shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(ps,{className:"mr-2 h-4 w-4"}),"Add New Technical"]})}),e.jsx(c,{children:e.jsx("p",{children:"Add a new technical staff member"})})]})]})]}),We&&e.jsxs("div",{className:"mt-6 p-4 bg-white dark:bg-gray-800 rounded-xl border border-corporate-gold/20 shadow-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"search",className:"text-sm font-medium text-corporate-gold",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(ir,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(de,{id:"search",placeholder:"Search by name, email, or phone...",value:R,onChange:s=>De(s.target.value),className:"pl-10 border-corporate-gold/20 focus:border-corporate-gold"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{className:"text-sm font-medium text-corporate-gold",children:"Status"}),e.jsxs(Q,{value:E,onValueChange:Se,children:[e.jsx(J,{className:"border-corporate-gold/20 focus:border-corporate-gold",children:e.jsx(X,{placeholder:"All Status"})}),e.jsxs(Z,{children:[e.jsx(v,{value:"all",children:"All Status"}),e.jsx(v,{value:"active",children:"Active Only"}),e.jsx(v,{value:"inactive",children:"Inactive Only"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{className:"text-sm font-medium text-corporate-gold",children:"Shift"}),e.jsxs(Q,{value:F,onValueChange:Te,children:[e.jsx(J,{className:"border-corporate-gold/20 focus:border-corporate-gold",children:e.jsx(X,{placeholder:"All Shifts"})}),e.jsxs(Z,{children:[e.jsx(v,{value:"all",children:"All Shifts"}),e.jsx(v,{value:"morning",children:"Morning"}),e.jsx(v,{value:"afternoon",children:"Afternoon"}),e.jsx(v,{value:"night",children:"Night"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{className:"text-sm font-medium text-corporate-gold",children:"View Mode"}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>ve("list"),className:`flex-1 ${$==="list"?"bg-white dark:bg-gray-600 shadow-sm":""}`,children:e.jsx(sr,{className:"w-4 h-4 mr-1"})})}),e.jsx(c,{children:e.jsx("p",{children:"Detailed List View - Comprehensive View"})})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>ve("grid"),className:`flex-1 ${$==="grid"?"bg-white dark:bg-gray-600 shadow-sm":""}`,children:e.jsx(rr,{className:"w-4 h-4 mr-1"})})}),e.jsx(c,{children:e.jsx("p",{children:"Grid Cards View - Quick Overview"})})]}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>ve("table"),className:`flex-1 ${$==="table"?"bg-white dark:bg-gray-600 shadow-sm":""}`,children:e.jsx(nr,{className:"w-4 h-4 mr-1"})})}),e.jsx(c,{children:e.jsx("p",{children:"Data Table View - Traditional Layout"})})]})]})]})]}),(R||E!=="all"||F!=="all")&&e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),R&&e.jsxs(ce,{variant:"secondary",className:"bg-corporate-gold/10 text-corporate-gold",children:["Search: ",R]}),E!=="all"&&e.jsxs(ce,{variant:"secondary",className:"bg-corporate-gold/10 text-corporate-gold",children:["Status: ",E]}),F!=="all"&&e.jsxs(ce,{variant:"secondary",className:"bg-corporate-gold/10 text-corporate-gold",children:["Shift: ",F]}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>{De(""),Se("all"),Te("all")},className:"h-6 px-2 text-xs text-muted-foreground hover:text-corporate-gold",children:"Clear all"})]})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[$==="grid"&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Grid columns:"}),e.jsxs(Q,{value:Ye.toString(),onValueChange:s=>Ns(Number(s)),children:[e.jsx(J,{className:"w-24 h-8",children:e.jsx(X,{})}),e.jsx(Z,{children:[2,3,4,5,6].map(s=>e.jsx(v,{value:s.toString(),children:s},s))})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",K.length," of ",f.data.length," technicals"]})]}),K.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"animate-bounceIn",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-corporate-gold/30",children:e.jsx(ms,{className:"w-16 h-16 text-corporate-gold"})}),e.jsx("h3",{className:"text-2xl font-bold text-corporate-gold mb-4",children:f.data.length===0?"No Technicals Yet":"No Results Found"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:f.data.length===0?"Start building your technical team by adding your first technical staff member.":"Try adjusting your search criteria or filters to find the technicals you're looking for."}),f.data.length===0?e.jsxs(h,{onClick:()=>{const s={id:null,name:"",email:"",phone:"",shift:"morning",photo:null};I(s),ie(s),te(null),G(!1),se(!0)},className:"bg-gradient-to-r from-corporate-gold to-corporate-warm hover:from-corporate-warm hover:to-corporate-gold text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(ps,{className:"mr-2 h-4 w-4"}),"Add Your First Technical"]}):e.jsxs(h,{variant:"outline",onClick:()=>{De(""),Se("all"),Te("all")},className:"border-corporate-gold/30 hover:bg-corporate-gold hover:text-white",children:[e.jsx(us,{className:"mr-2 h-4 w-4"}),"Clear All Filters"]})]})}):$==="list"?e.jsx(Is,{technicals:K}):$==="grid"?e.jsx(Ls,{technicals:K,gridColumns:Ye}):e.jsx(Ue,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(Ws,{children:[e.jsx(Qs,{children:Me.getHeaderGroups().map(s=>e.jsx($e,{children:s.headers.map(r=>e.jsx(Js,{children:cs(r.column.columnDef.header,r.getContext())},r.id))},s.id))}),e.jsx(Xs,{children:(ls=Me.getRowModel().rows)!=null&&ls.length?Me.getRowModel().rows.map(s=>e.jsx($e,{children:s.getVisibleCells().map(r=>e.jsx(xs,{children:cs(r.column.columnDef.cell,r.getContext())},r.id))},s.id)):e.jsx($e,{children:e.jsx(xs,{colSpan:ts.length,className:"h-24 text-center",children:"No results."})})})]})})}),e.jsx(P,{open:bs,onOpenChange:rs,children:e.jsxs(U,{className:"sm:max-w-[600px] max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(O,{className:"flex-shrink-0",children:e.jsx(z,{children:C?"Edit Technical":"New Technical"})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 space-y-4 scrollbar-thin scrollbar-thumb-corporate-gold/20 scrollbar-track-transparent hover:scrollbar-thumb-corporate-gold/40 dark:scrollbar-thumb-corporate-gold-light/20 dark:hover:scrollbar-thumb-corporate-gold-light/40",children:e.jsxs("form",{onSubmit:Us,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:" space-y-2",children:[e.jsx(w,{children:"Photo"}),e.jsxs("div",{className:"mt-2 group relative w-full aspect-square rounded-lg overflow-hidden border-2 border-dashed bg-muted/50",children:[e.jsx("input",{type:"file",onChange:s=>{var r;return Y("photo",((r=s.target.files)==null?void 0:r[0])||null)},className:"hidden",id:"photo-upload"}),e.jsx("label",{htmlFor:"photo-upload",className:"flex flex-col items-center justify-center w-full h-full cursor-pointer",children:b.photo?e.jsx("img",{src:URL.createObjectURL(b.photo),alt:"Preview",className:"w-full h-full object-cover"}):C&&_(C.photo)?e.jsx("img",{src:_(C.photo),alt:"Current",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(V,{className:"w-12 h-12 mx-auto text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload photo"})]})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Name"}),e.jsx(de,{value:b.name,onChange:s=>Y("name",s.target.value),required:!0,className:"h-11 mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Email"}),e.jsx(de,{type:"email",value:b.email,onChange:s=>Y("email",s.target.value),required:!0,className:"h-11 mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Phone"}),e.jsx(de,{value:b.phone,onChange:s=>Y("phone",s.target.value),required:!0,className:"h-11 mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Shift"}),e.jsxs(Q,{value:b.shift,onValueChange:s=>Y("shift",s),children:[e.jsx(J,{className:"h-11 mt-2",children:e.jsx(X,{placeholder:"Select shift"})}),e.jsxs(Z,{children:[e.jsx(v,{value:"morning",children:"Morning"}),e.jsx(v,{value:"afternoon",children:"Afternoon"}),e.jsx(v,{value:"night",children:"Night"})]})]})]})]})]}),e.jsxs(H,{className:"flex-shrink-0 pt-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:rs,children:"Cancel"}),e.jsx(h,{type:"submit",disabled:ss,children:ss?"Saving...":"Save"})]})]})})]})}),e.jsx(P,{open:As,onOpenChange:oe,children:e.jsxs(U,{className:"sm:max-w-md",children:[e.jsx(O,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/20 flex items-center justify-center flex-shrink-0",children:e.jsx(He,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx(z,{children:"Unsaved Changes"}),e.jsx(Pe,{className:"mt-1",children:"You have unsaved changes that will be lost if you close this dialog."})]})]})}),e.jsxs(H,{className:"gap-2 sm:gap-0",children:[e.jsx(h,{variant:"outline",onClick:()=>oe(!1),className:"w-full sm:w-auto",children:"Continue Editing"}),e.jsx(h,{variant:"destructive",onClick:Es,className:"w-full sm:w-auto",children:"Discard Changes"})]})]})}),e.jsx(P,{open:vs,onOpenChange:re,children:e.jsxs(U,{children:[e.jsxs(O,{children:[e.jsx(z,{children:"Confirm Delete"}),e.jsxs(Pe,{children:["Are you sure you want to delete ",C==null?void 0:C.name,"?"]})]}),e.jsxs(H,{children:[e.jsx(h,{variant:"outline",onClick:()=>re(!1),children:"Cancel"}),e.jsx(h,{variant:"destructive",onClick:Os,children:"Delete"})]})]})}),e.jsx(P,{open:ws,onOpenChange:we,children:e.jsxs(U,{className:"sm:max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(O,{className:"flex-shrink-0 pb-4 border-b border-corporate-gold/20",children:e.jsxs(z,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-corporate-gold to-corporate-warm rounded-lg",children:e.jsx(he,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-corporate-gold",children:ks}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:Je?"Loading tickets...":`${M.length} tickets found`})]}),e.jsx("div",{className:"ml-auto",children:e.jsxs(ce,{variant:"secondary",className:"bg-corporate-gold/10 text-corporate-gold border-corporate-gold/30",children:[M.length," total"]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 scrollbar-thin scrollbar-thumb-corporate-gold/20 scrollbar-track-transparent hover:scrollbar-thumb-corporate-gold/40",children:Je?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-corporate-gold mb-4"}),e.jsx("p",{className:"text-lg font-medium text-corporate-gold",children:"Loading tickets..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please wait while we fetch the latest data"})]}):M.length>0?e.jsx("div",{className:"space-y-3",children:M.map((s,r)=>e.jsx("div",{onClick:()=>be(s.id),className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 p-4 rounded-lg border border-corporate-gold/20 hover:bg-gradient-to-r hover:from-corporate-gold/10 hover:to-corporate-warm/10 hover:border-corporate-gold/40 transition-all duration-300 cursor-pointer  transform group",style:{animationDelay:`${r*100}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-lg text-corporate-gold group-hover:text-corporate-warm transition-colors duration-300 truncate",children:["#",s.id," - ",s.title]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${B(s.status)}`,children:s.status.replace("_"," ")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hs,{className:"w-4 h-4 text-corporate-gold"}),e.jsxs("span",{children:["Created: ",T(s.created_at)]})]}),s.building&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"w-4 h-4 text-corporate-warm"}),e.jsx("span",{children:s.building.name})]}),s.device&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4 text-corporate-gold"}),e.jsx("span",{children:s.device.name})]}),s.priority&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:`w-4 h-4 ${s.priority==="urgent"?"text-red-500":s.priority==="high"?"text-orange-500":s.priority==="medium"?"text-yellow-500":"text-green-500"}`}),e.jsxs("span",{className:"capitalize",children:[s.priority," Priority"]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsx(h,{variant:"outline",size:"sm",onClick:()=>be(s.id),className:"border-corporate-gold/30 hover:bg-primary hover:text-white",children:e.jsx(js,{className:"w-4 h-4"})})}),e.jsx(c,{children:e.jsx("p",{children:"Open full ticket detail"})})]})})]})},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(he,{className:"w-12 h-12 text-corporate-gold"})}),e.jsx("h3",{className:"text-xl font-bold text-corporate-gold mb-2",children:"No tickets found"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"This technical has no tickets for the selected filter. Try a different filter or check back later."})]})}),e.jsx(H,{className:"flex-shrink-0 pt-4",children:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:M.length>0&&e.jsxs("span",{children:["Showing ",M.length," ticket",M.length!==1?"s":""]})}),e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs(h,{variant:"outline",onClick:()=>we(!1),children:[e.jsx(fs,{className:"w-4 h-4 mr-1"}),"Close"]})}),e.jsx(c,{children:e.jsx("p",{children:"Close ticket list modal"})})]})]})})]})}),e.jsx(P,{open:ys,onOpenChange:ye,children:e.jsxs(U,{className:"sm:max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(O,{className:"flex-shrink-0 pb-6 border-b border-corporate-gold/20",children:e.jsxs(z,{className:"flex items-center gap-3 text-xl font-bold",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-corporate-gold to-corporate-warm rounded-lg",children:e.jsx(he,{className:"w-6 h-6 text-white"})}),"Ticket Details"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 scrollbar-thin scrollbar-thumb-corporate-gold/20 scrollbar-track-transparent hover:scrollbar-thumb-corporate-gold/40",children:Ss?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-corporate-gold mb-4"}),e.jsx("p",{className:"text-lg font-medium text-corporate-gold",children:"Loading ticket details..."})]}):o?e.jsxs("div",{className:"px-6 pb-6",children:[o.user&&o.user.tenant&&e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:o.user.tenant.photo?e.jsx("img",{src:o.user.tenant.photo.startsWith("http")?o.user.tenant.photo:`/storage/${o.user.tenant.photo}`,alt:o.user.tenant.name,className:"w-12 h-12 rounded-full border-2 border-purple-300 shadow-md object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-400 to-blue-400 flex items-center justify-center text-white text-sm font-bold",children:((os=o.user.tenant.name)==null?void 0:os.substring(0,1))||"?"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(V,{className:"w-3 h-3 text-purple-600"}),e.jsx("p",{className:"text-sm font-semibold text-purple-900 truncate",children:o.user.tenant.name})]}),o.user.tenant.email&&e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(dr,{className:"w-3 h-3 text-green-600"}),e.jsx("p",{className:"text-xs text-green-800 truncate",children:o.user.tenant.email})]}),o.user.tenant.phone&&e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(cr,{className:"w-3 h-3 text-orange-600"}),e.jsx("p",{className:"text-xs text-orange-800 truncate",children:o.user.tenant.phone})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:o.title}),e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-medium ${B(o.status)}`,children:o.status.replace("_"," ")})]}),e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:o.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"ID:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["#",o.id]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Category:"}),e.jsx("span",{className:"ml-2 font-medium",children:o.category})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.device&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-sky-100 text-sky-700 text-xs font-medium",children:[e.jsx(pe,{className:"w-3 h-3"}),o.device.name||"Device"]}),e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-purple-100 text-purple-700 text-xs font-medium",children:[e.jsx(tr,{className:"w-3 h-3"}),o.category]})]})}),e.jsxs("div",{className:"text-xs text-slate-500 space-y-1 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(hs,{className:"w-3 h-3"}),"Created: ",T(o.created_at)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3"}),"Updated: ",T(o.updated_at)]}),o.resolved_at&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Oe,{className:"w-3 h-3"}),"Resolved: ",T(o.resolved_at)]})]}),(o.building||o.device)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[o.building&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 p-3 rounded-lg border",children:[e.jsxs("h4",{className:"font-medium text-sm text-corporate-gold mb-1 flex items-center gap-1",children:[e.jsx(gs,{className:"w-3 h-3"}),"Building"]}),e.jsx("p",{className:"text-sm",children:o.building.name}),o.building.address&&e.jsx("p",{className:"text-xs text-muted-foreground",children:o.building.address})]}),o.device&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 p-3 rounded-lg border",children:[e.jsxs("h4",{className:"font-medium text-sm text-corporate-gold mb-1 flex items-center gap-1",children:[e.jsx(pe,{className:"w-3 h-3"}),"Device Details"]}),e.jsx("p",{className:"text-sm",children:o.device.name}),o.device.brand&&e.jsx("p",{className:"text-xs text-muted-foreground",children:o.device.brand.name})]})]})]}),e.jsx("div",{className:"border-t border-slate-200 my-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium text-slate-900 flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4 text-blue-500"}),"History"]}),e.jsx("div",{className:"space-y-3",children:!o.history||o.history.length===0?e.jsxs("div",{className:"text-center py-6 text-slate-500",children:[e.jsx(ge,{className:"w-8 h-8 mx-auto mb-2 text-slate-300"}),e.jsx("p",{className:"text-sm",children:"No history available"})]}):[...o.history].slice().reverse().map((s,r,x)=>e.jsxs("div",{className:"relative pl-6 pb-4 last:pb-0",children:[e.jsx("div",{className:"absolute left-0 top-1 w-3 h-3 bg-blue-500 rounded-full border-2 border-white shadow"}),r!==x.length-1&&e.jsx("div",{className:"absolute left-1.5 top-4 w-0.5 h-full bg-slate-200"}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 ml-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:s.action.replace("_"," ")}),r===0&&e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Recent"})]}),e.jsx("p",{className:"text-sm text-slate-700 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{className:"w-3 h-3"}),s.user?s.user.name:"System"]}),e.jsx("span",{children:T(s.created_at)})]})]})]},s.id))})]}),o.resolution_time&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg border border-green-200 mt-6",children:[e.jsxs("h3",{className:"font-semibold text-lg text-green-600 mb-2 flex items-center gap-2",children:[e.jsx(xr,{className:"w-5 h-5"}),"Resolution Metrics"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Resolution Time:"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:[o.resolution_time,"h"]})]}),o.rating&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Rating:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((s,r)=>e.jsx(mr,{className:`w-4 h-4 ${r<o.rating?"text-yellow-400 fill-current":"text-gray-300"}`},r)),e.jsxs("span",{className:"ml-1 font-bold text-yellow-600",children:["(",o.rating,"/5)"]})]})]}),o.feedback&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Feedback:"}),e.jsxs("p",{className:"text-sm text-muted-foreground italic",children:['"',o.feedback,'"']})]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(He,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:"Error loading ticket details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please try again later"})]})}),e.jsx(H,{className:"flex-shrink-0 pt-4 border-t border-corporate-gold/20",children:e.jsxs(n,{children:[e.jsx(d,{asChild:!0,children:e.jsxs(h,{variant:"outline",onClick:()=>{ye(!1),Ce(null)},className:"px-6 py-2.5",children:[e.jsx(fs,{className:"w-4 h-4 mr-1"}),"Back to List"]})}),e.jsx(c,{children:e.jsx("p",{children:"Return to ticket list"})})]})})]})}),e.jsx(P,{open:Ts,onOpenChange:ae,children:e.jsxs(U,{className:"sm:max-w-[500px]",children:[e.jsxs(O,{children:[e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5 text-blue-500"}),"Send Instruction to ",k==null?void 0:k.name]}),e.jsx(Pe,{children:"Send instructions or guidelines to the technical. Choose priority level appropriately."})]}),e.jsxs("form",{onSubmit:Fs,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"priority",children:"Priority Level"}),e.jsxs(Q,{value:L.priority,onValueChange:s=>le(r=>({...r,priority:s})),children:[e.jsx(J,{children:e.jsx(X,{})}),e.jsxs(Z,{children:[e.jsx(v,{value:"low",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Low Priority"]})}),e.jsx(v,{value:"normal",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),"Normal Priority"]})}),e.jsx(v,{value:"high",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"High Priority"]})}),e.jsx(v,{value:"urgent",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"URGENT"]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"instruction",children:"Instruction"}),e.jsx("textarea",{id:"instruction",value:L.instruction,onChange:s=>le(r=>({...r,instruction:s.target.value})),placeholder:"Enter your instruction or message for the technical...",className:"min-h-[120px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",maxLength:1e3,required:!0}),e.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[L.instruction.length,"/1000 characters"]})]}),(k==null?void 0:k.instructions)&&k.instructions.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Recent Instructions (last 3)"}),e.jsx("div",{className:"max-h-32 overflow-y-auto space-y-2 p-2 border rounded-md bg-gray-50",children:k.instructions.slice(0,3).map((s,r)=>e.jsxs("div",{className:"text-xs border-l-2 border-gray-300 pl-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-1 py-0.5 rounded text-xs ${Ps(s.priority)}`,children:s.priority.toUpperCase()}),e.jsxs("span",{className:"text-gray-500",children:["from ",s.from]}),e.jsx("span",{className:"text-gray-400",children:new Date(s.sent_at).toLocaleDateString()})]}),e.jsx("p",{className:"mt-1 text-gray-700",children:s.instruction})]},r))})]}),e.jsxs(H,{children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>ae(!1),disabled:_e,children:"Cancel"}),e.jsx(h,{type:"submit",disabled:_e||!L.instruction.trim(),className:"bg-blue-600 hover:bg-blue-700",children:_e?e.jsxs(e.Fragment,{children:[e.jsx(us,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Send Instruction"]})})]})]})]})})]})]})}const gr=({status:f})=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f==="active"?"Active":"Inactive"});export{nt as default};
