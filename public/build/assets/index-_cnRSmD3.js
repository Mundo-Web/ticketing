import{j as e}from"./ui-D1w9Iw8H.js";import{r as p,U as ms}from"./recharts-Dld1lWsf.js";import{A as Vs,D as qs,a as Bs,b as Ks,d as Ue}from"./app-layout-KC_XlQnr.js";import{K as Gs,m as Ys,L as Ws,t as u,S as U}from"./app-BAypecS8.js";import{T as $}from"./index-CtBsO7PD.js";import{B as h}from"./button-BntSAybs.js";import{u as Qs,f as hs,c as Js,b as Xs}from"./index-DSucgGxo.js";import{T as Zs,a as er,b as Oe,c as sr,d as rr,e as ps}from"./table-HIdGJ2fv.js";import{I as xe}from"./input-CYKIjOQn.js";import{S as ze}from"./switch-CV2ctoZl.js";import{D as O,a as z,b as H,c as V,e as q,d as He}from"./dialog-D75RAdkD.js";import{L as w}from"./label-BbeNXW0L.js";import{S as J,a as X,b as Z,c as ee,d as v}from"./select-Cexm_mQK.js";import{a as i,b as n,c as d,T as Ve}from"./tooltip-CQHbb0yU.js";import{B as me}from"./format-B6Rb66cG.js";import{C as he,c as pe}from"./card-ujb193xZ.js";import{U as us,F as ue,c as ge,a as je}from"./x-CNM1Dv5p.js";import{a as qe,C as gs}from"./circle-check-big-DZU7S_eA.js";import{T as se,L as tr,G as ar,a as lr,b as or,H as Be}from"./trophy-tcWmXr7P.js";import{T as ir}from"./trending-up-iTRTSR-d.js";import{F as nr}from"./filter-B_U0HgPW.js";import{P as js}from"./plus-CnwexqGC.js";import{S as dr}from"./search-BGEUGtTC.js";import{T as cr}from"./table-BOw16QX-.js";import{R as re}from"./refresh-cw-Sduo88Io.js";import{U as B}from"./user-CtzshXh0.js";import{T as Ke}from"./triangle-alert-DrKF4AKN.js";import{M as fs}from"./map-pin-CGVzMw_j.js";import{E as bs}from"./external-link-DFS43cfb.js";import{C as vs}from"./chevron-left-BbzonqSg.js";import{M as xr,P as mr,a as fe,T as hr}from"./timer-5hOeDT9u.js";import{C as be}from"./clock-BxVJL7PR.js";import{S as pr}from"./star-XcvrnBtN.js";import{E as ur}from"./ellipsis-Dcv-ToJ_.js";import{S as Ge}from"./square-pen-Cq7RxlXg.js";import{T as Ye}from"./trash-2-s1GfykXA.js";import{C as gr}from"./circle-alert-DMAN7II5.js";import{E as jr}from"./eye-CkkIptxE.js";import"./react-B1hewrmX.js";import"./utils-B66yfQja.js";import"./check-CkciTNW-.js";import"./createLucideIcon-CR-66RMC.js";import"./index-CWijjM2R.js";import"./index-cS_AKGRi.js";import"./index-DrdTBqzy.js";import"./chevrons-up-down-BF_I81uV.js";const g=({value:f,duration:ve=1e3})=>{const[We,Qe]=ms.useState(0);return ms.useEffect(()=>{let K,S;const A=y=>{K||(K=y);const j=Math.min((y-K)/ve,1),G=1-Math.pow(1-j,3),T=Math.floor(G*f);Qe(T),j<1&&(S=requestAnimationFrame(A))};return S=requestAnimationFrame(A),()=>{S&&cancelAnimationFrame(S)}},[f,ve]),e.jsx("span",{children:We})};function xt({technicals:f,filters:ve,canManage:We,isDefaultTechnical:Qe,isSuperAdmin:K}){var ns,ds,cs;const{auth:S}=Gs().props,A=((ns=S==null?void 0:S.user)==null?void 0:ns.roles)||[],y=K??(Array.isArray(A)?A.includes("super-admin"):!1);console.log("User roles:",A);const j=s=>!!s.is_default,G=s=>{switch(s){case"open":return"bg-red-100 text-red-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"resolved":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},T=s=>new Date(s).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}),k=async(s,r)=>{const x={all:"All Tickets",today:"Today's Tickets",week:"This Week's Tickets",month:"This Month's Tickets",recent:"Recent Completed Tickets (Last 7 days)",open:"Open Tickets",in_progress:"In Progress Tickets",resolved:"Resolved Tickets",closed:"Closed Tickets"};Ss(`${s.name} - ${x[r]}`),rs(!0),ke(!0);try{const a=await fetch(`/api/technicals/${s.id}/tickets?type=${r}`);if(a.ok){const c=await a.json();De(c)}else{let c=s.tickets||[];switch(r){case"open":{c=c.filter(t=>t.status==="open");break}case"in_progress":{c=c.filter(t=>t.status==="in_progress");break}case"resolved":{c=c.filter(t=>t.status==="resolved");break}case"closed":{c=c.filter(t=>t.status==="closed");break}case"today":{const t=new Date;t.setHours(0,0,0,0);const l=new Date(t);l.setDate(t.getDate()+1),c=c.filter(m=>{const N=new Date(m.created_at);return N>=t&&N<l});break}case"week":{const t=new Date,l=new Date(t);l.setDate(t.getDate()-t.getDay()),l.setHours(0,0,0,0),c=c.filter(m=>new Date(m.created_at)>=l);break}case"month":{const t=new Date,l=new Date(t.getFullYear(),t.getMonth(),1);c=c.filter(m=>new Date(m.created_at)>=l);break}case"recent":{const t=new Date;t.setDate(t.getDate()-7),t.setHours(0,0,0,0),c=c.filter(l=>new Date(l.created_at)>=t&&["resolved","closed"].includes(l.status));break}default:break}De(c)}}catch(a){console.log("Using local tickets data:",a),u.error("Could not fetch latest ticket data, showing local data");let c=s.tickets||[];switch(r){case"open":c=c.filter(t=>t.status==="open");break;case"in_progress":c=c.filter(t=>t.status==="in_progress");break;case"resolved":c=c.filter(t=>t.status==="resolved");break;case"closed":c=c.filter(t=>t.status==="closed");break;case"today":{const t=new Date;t.setHours(0,0,0,0);const l=new Date(t);l.setDate(t.getDate()+1),c=c.filter(m=>{const N=new Date(m.created_at);return N>=t&&N<l});break}case"week":{const t=new Date,l=new Date(t);l.setDate(t.getDate()-t.getDay()),l.setHours(0,0,0,0),c=c.filter(m=>new Date(m.created_at)>=l);break}case"month":{const t=new Date,l=new Date(t.getFullYear(),t.getMonth(),1);c=c.filter(m=>new Date(m.created_at)>=l);break}case"recent":{const t=new Date;t.setDate(t.getDate()-7),t.setHours(0,0,0,0),c=c.filter(l=>new Date(l.created_at)>=t&&["resolved","closed"].includes(l.status));break}}De(c)}finally{rs(!1)}},Ne=async s=>{es(!0),Ce(!0);try{const r=await fetch(`/api/tickets/${s}/detail`);if(r.ok){const x=await r.json();Se(x)}else{const x={id:s,title:"Sample Ticket",description:"This is a sample ticket description with technical details...",status:"in_progress",priority:"high",category:"Hardware",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),history:[{id:1,action:"Ticket Created",description:"Ticket was created by tenant",created_at:new Date().toISOString(),user:{name:"System",role:"system"}}],comments:[]};Se(x)}}catch{u.error("Error loading ticket details")}finally{es(!1)}},[P,we]=p.useState("list"),[Ns,te]=p.useState(!1),[ws,ae]=p.useState(!1),[D,le]=p.useState(null),[ye,Je]=p.useState(null),[Xe,ys]=p.useState(4),[ks,ke]=p.useState(!1),[Cs,Ce]=p.useState(!1),[M,De]=p.useState([]),[o,Se]=p.useState(null),[Ds,Ss]=p.useState(""),[R,Te]=p.useState(""),[E,_e]=p.useState("all"),[F,Ae]=p.useState("all"),[Ze,Ts]=p.useState(!1),[_s,es]=p.useState(!1),[ss,rs]=p.useState(!1),[As,oe]=p.useState(!1),[C,ts]=p.useState(null),[L,ie]=p.useState({instruction:"",priority:"normal"}),[Me,as]=p.useState(!1),_=s=>!s||s==="null"||s.trim()===""?null:`/storage/${s}`,Y=f.data.filter(s=>{const r=s.name.toLowerCase().includes(R.toLowerCase())||s.email.toLowerCase().includes(R.toLowerCase())||s.phone.includes(R),x=E==="all"||E==="active"&&s.status||E==="inactive"&&!s.status,a=F==="all"||s.shift===F;return r&&x&&a}),[Ms,W]=p.useState(!1),[Rs,ne]=p.useState(!1),[Re,de]=p.useState(null),{data:b,setData:I,delete:Es,processing:ls,reset:Ls}=Ys({id:null,name:"",email:"",phone:"",shift:"morning",photo:null}),Q=(s,r)=>{switch(s){case"name":case"email":case"phone":I(s,r);break;case"shift":I(s,r);break;case"photo":I(s,r);break;case"id":I(s,r);break}if(Re){const x={...b,[s]:r},a=Object.keys(Re).some(c=>{const t=c;return t==="photo"?x[t]!==null:Re[t]!==x[t]});W(a)}},os=()=>{Ms?ne(!0):ce()},ce=()=>{te(!1),ne(!1),W(!1),de(null),Ls()},Is=()=>{ce()},is=[{accessorKey:"photo",header:"Photo",cell:({row:s})=>e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden",children:_(s.original.photo)?e.jsx("img",{src:_(s.original.photo),alt:s.original.name,className:"w-full h-full object-cover",onError:r=>{const x=r.target;x.style.display="none",x.parentElement.innerHTML='<div class="w-full h-full bg-gray-200 flex items-center justify-center"><User size={16} class="text-gray-500" /></div>'}}):e.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:e.jsx(B,{className:"w-5 h-5 text-gray-400"})})})},{accessorKey:"name",header:"Name"},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{accessorKey:"shift",header:"Shift",cell:({row:s})=>e.jsx("span",{className:"capitalize",children:s.original.shift})},{accessorKey:"is_default",header:"Role",cell:({row:s})=>e.jsx("div",{className:"flex items-center gap-2",children:y?e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{variant:j(s.original)?"default":"outline",size:"sm",onClick:()=>Ie(s.original),className:"h-6 px-2 text-xs",children:j(s.original)?"Remove Chief":"Set as Chief"})}),e.jsxs(d,{children:[e.jsxs("p",{children:[j(s.original)?"Remove as":"Set as"," Tech Default"]}),e.jsx("p",{children:"Tech Defaults have additional permissions"})]})]}):e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${j(s.original)?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:j(s.original)?"Tech Default":"Technical"})})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(ze,{checked:s.original.status,onCheckedChange:()=>Le(s.original),disabled:ye===s.original.id})}),e.jsx(d,{children:e.jsxs("p",{children:[s.original.status?"Deactivate":"Activate"," technical"]})})]}),e.jsx(fr,{status:s.original.status?"active":"inactive"})]})},{id:"actions",header:"Actions",cell:({row:s})=>e.jsxs(qs,{children:[e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(Bs,{asChild:!0,children:e.jsx(h,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(ur,{className:"h-4 w-4"})})})}),e.jsx(d,{children:e.jsx("p",{children:"More actions"})})]}),e.jsxs(Ks,{align:"end",children:[e.jsxs(Ue,{onClick:()=>$e(s.original),children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),"Edit"]}),y&&e.jsxs(Ue,{onClick:()=>Fe(s.original),children:[e.jsx(re,{className:"mr-2 h-4 w-4 text-orange-600"}),"Reset Password"]}),e.jsxs(Ue,{onClick:()=>Pe(s.original),children:[e.jsx(Ye,{className:"mr-2 h-4 w-4 text-destructive"}),"Delete"]})]})]})}],Ee=Qs({data:Y,columns:is,getCoreRowModel:Xs(),getPaginationRowModel:Js()}),$s=({technicals:s,gridColumns:r})=>{const x=()=>{switch(r){case 2:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-2";case 3:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-3";case 4:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-4";case 5:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-5";case 6:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-6";default:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"}};return e.jsx(Ve,{children:e.jsx("div",{className:`grid ${x()} gap-6`,children:s.map((a,c)=>e.jsxs("div",{className:"bg-gradient-to-br from-white to-corporate-gold/5 dark:from-dark-brown dark:to-corporate-gold/10 p-4 rounded-xl shadow-sm transition-all duration-500 border-2 border-corporate-gold/20 relative overflow-hidden",style:{animationDelay:`${c*150}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:[e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-br from-corporate-gold/20 to-transparent rounded-bl-2xl opacity-50"}),e.jsx("div",{className:"w-full aspect-square rounded-lg overflow-hidden mb-4 border-2 border-corporate-gold/30 transition-all duration-300 relative",children:_(a.photo)?e.jsx("img",{src:_(a.photo),alt:a.name,className:"w-full h-full object-cover",onError:t=>{t.currentTarget.src="/images/default-user.png"}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-corporate-gold/10 to-corporate-warm/10 flex items-center justify-center",children:e.jsx(B,{className:"w-16 h-16 text-corporate-gold/60"})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx("h3",{className:"font-semibold text-xl truncate text-corporate-gold dark:text-corporate-gold-light transition-colors duration-300 cursor-help",children:a.name})}),e.jsxs(d,{children:[e.jsxs("p",{children:["Technical: ",a.name]}),e.jsxs("p",{children:["Email: ",a.email]}),e.jsxs("p",{children:["Phone: ",a.phone]})]})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(ze,{checked:a.status,onCheckedChange:()=>Le(a),disabled:ye===a.id,className:"scale-90 data-[state=checked]:bg-corporate-gold"})}),e.jsx(d,{children:e.jsxs("p",{children:[a.status?"Deactivate":"Activate"," technical"]})})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{className:"text-muted-foreground truncate",children:a.email}),e.jsx("p",{className:"font-medium text-corporate-dark-brown dark:text-corporate-gold-light",children:a.phone}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`capitalize text-white px-3 py-1 rounded-md font-medium transition-all duration-300 ${a.shift==="morning"?"bg-gradient-to-r from-corporate-gold to-corporate-warm shadow-lg shadow-corporate-gold/30":a.shift==="afternoon"?"bg-gradient-to-r from-corporate-warm to-corporate-gold shadow-lg shadow-corporate-warm/30":"bg-gradient-to-r from-corporate-dark-brown to-corporate-brown shadow-lg shadow-corporate-dark-brown/30"}`,children:a.shift}),j(a)&&e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx("span",{className:"bg-gradient-to-r from-corporate-gold via-corporate-warm to-corporate-gold text-white px-2 py-1 rounded-md text-xs font-medium animate-pulse shadow-lg cursor-help",children:"Tech Default"})}),e.jsxs(d,{children:[e.jsx("p",{children:"Technical Chief - Team Leader"}),e.jsx("p",{children:"Has special permissions and responsibilities"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>k(a,"month"),className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-2 rounded-lg border border-purple-200 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600",children:e.jsx(g,{value:a.monthly_tickets})}),e.jsx("div",{className:"text-xs text-purple-600",children:"Month"})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Click to view this month's tickets"}),e.jsxs("p",{children:[a.monthly_tickets," tickets this month"]})]})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>k(a,"week"),className:"bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 p-2 rounded-lg border border-corporate-gold/30 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-lg font-bold text-corporate-gold",children:e.jsx(g,{value:a.weekly_tickets})}),e.jsx("div",{className:"text-xs text-corporate-gold",children:"Week"})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Click to view this week's tickets"}),e.jsxs("p",{children:[a.weekly_tickets," tickets this week"]})]})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>k(a,"today"),className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-2 rounded-lg border border-green-200 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:e.jsx(g,{value:a.today_tickets})}),e.jsx("div",{className:"text-xs text-green-600",children:"Today"})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Click to view today's tickets"}),e.jsxs("p",{children:[a.today_tickets," tickets today"]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{onClick:()=>$e(a),variant:"outline",size:"sm",className:"gap-2 px-4 border-corporate-gold/30 transition-all duration-300",children:e.jsx(Ge,{className:"w-4 h-4"})})}),e.jsx(d,{children:e.jsx("p",{children:"Edit technical information"})})]}),y&&e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{onClick:()=>Fe(a),variant:"outline",size:"sm",className:"gap-2 px-4 border-orange-300 transition-all duration-300",children:e.jsx(re,{className:"w-4 h-4"})})}),e.jsxs(d,{children:[e.jsx("p",{children:"Reset password to email"}),e.jsx("p",{className:"text-orange-500",children:"Password will be set to their email"})]})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{onClick:()=>Pe(a),variant:"outline",size:"sm",className:"gap-2 px-4 border-red-300 transition-all duration-300",children:e.jsx(Ye,{className:"w-4 h-4"})})}),e.jsxs(d,{children:[e.jsx("p",{children:"Delete technical permanently"}),e.jsx("p",{className:"text-red-500",children:"This action cannot be undone"})]})]})]}),y&&e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs(h,{onClick:()=>Ie(a),variant:j(a)?"default":"outline",size:"sm",className:`text-xs transition-all duration-300 ${j(a)?"bg-gradient-to-r from-corporate-gold to-corporate-warm text-white shadow-lg":"border-corporate-gold/30"}`,children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),j(a)?"Remove Chief":"Set as Chief"]})}),e.jsxs(d,{children:[e.jsxs("p",{children:[j(a)?"Remove as":"Set as"," Tech Default"]}),e.jsx("p",{children:"Tech Defaults have additional permissions"})]})]})]})]})]},a.id))})})},Ps=({technicals:s})=>e.jsx(Ve,{children:e.jsx("div",{className:"space-y-6",children:s.map((r,x)=>{var a,c,t;return e.jsxs("div",{className:"bg-gradient-to-r from-white to-corporate-gold/5 dark:from-transparent dark:to-corporate-gold/10 rounded-xl shadow-sm transition-all duration-500 border-2 border-corporate-gold/20 overflow-hidden group",style:{animationDelay:`${x*200}ms`,animation:"fadeInUp 0.8s ease-out forwards"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-corporate-gold/0 via-corporate-gold/5 to-corporate-gold/0 opacity-0 transition-opacity duration-700 pointer-events-none"}),e.jsxs("div",{className:"flex relative z-10",children:[e.jsxs("div",{className:"w-80 bg-gradient-to-br from-corporate-gold/10 to-corporate-warm/10 dark:from-corporate-gold/20 dark:to-corporate-warm/20 p-6 border-r border-corporate-gold/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-corporate-gold/20 to-transparent rounded-bl-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-gradient-to-tr from-corporate-warm/20 to-transparent rounded-tr-3xl"}),e.jsxs("div",{className:"flex flex-col items-center text-center space-y-4 relative z-10",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-corporate-gold/30 shadow-xl relative transition-transform duration-500",children:_(r.photo)?e.jsx("img",{src:_(r.photo),alt:r.name,className:"w-full h-full object-cover",onError:l=>{l.currentTarget.src="/images/default-user.png"}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 flex items-center justify-center",children:e.jsx(B,{className:"w-12 h-12 text-corporate-gold"})})}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-corporate-gold/0 transition-all duration-500"}),j(r)&&e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx("div",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-corporate-gold to-corporate-warm rounded-full p-2 shadow-lg animate-bounce",children:e.jsx(se,{className:"w-4 h-4 text-primary-foreground dark:text-white"})})}),e.jsx(d,{children:e.jsx("p",{children:"Technical Chief - Team Leader"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-xl text-corporate-gold dark:text-corporate-gold-light transition-colors duration-300",children:r.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.email}),e.jsx("p",{className:"font-medium text-corporate-dark-brown dark:text-corporate-gold-light",children:r.phone}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium capitalize shadow-lg transition-all duration-300  ${r.shift==="morning"?"bg-gradient-to-r from-corporate-gold to-corporate-warm text-primary-foregrounde shadow-corporate-gold/30":r.shift==="afternoon"?"bg-gradient-to-r from-corporate-warm to-corporate-gold text-primary-foreground shadow-corporate-warm/30":"bg-gradient-to-r from-corporate-dark-brown to-corporate-brown text-primary-foreground shadow-corporate-dark-brown/30"}`,children:[e.jsx(be,{className:"w-3 h-3 mr-1"}),r.shift]}),j(r)&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 dark:text-white rounded-full text-xs font-medium bg-gradient-to-r from-corporate-gold via-corporate-warm to-corporate-gold text-primary-foreground shadow-lg",children:[e.jsx(se,{className:"w-3 h-3 mr-1"}),"Tech Default"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"bg-white/70 dark:bg-transparent dark:bg-corporate-gold/10 p-2 rounded-lg border border-corporate-gold/20 text-center transition-colors duration-300 cursor-pointer",children:[e.jsx("div",{className:"text-lg font-bold text-corporate-gold animate-pulse",children:e.jsx(g,{value:r.current_streak})}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Streak"})]})}),e.jsx(d,{children:e.jsx("p",{children:"Consecutive resolved tickets"})})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"bg-white/70 dark:bg-transparent p-2 rounded-lg border border-corporate-gold/20 text-center transition-colors duration-300 cursor-pointer",children:[e.jsxs("div",{className:"text-lg font-bold text-corporate-warm",children:[e.jsx(g,{value:r.avg_resolution_time}),"h"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Time"})]})}),e.jsx(d,{children:e.jsx("p",{children:"Average resolution time in hours"})})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`px-2 py-1 flex gap-2 items-center rounded-full text-xs font-medium transition-all duration-300 ${r.status?"bg-gradient-to-r from-green-100 to-green-200 text-green-800 shadow-green-200/50":"bg-gradient-to-r from-red-100 to-red-200 text-red-800 shadow-red-200/50"}`,children:[e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(ze,{checked:r.status,onCheckedChange:()=>Le(r),disabled:ye===r.id,className:"data-[state=checked]:bg-white data-[state=unchecked]:bg-gray-200"})}),e.jsx(d,{children:e.jsxs("p",{children:[r.status?"Deactivate":"Activate"," technical"]})})]}),r.status?"Active":"Inactive"]})}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{onClick:()=>$e(r),variant:"outline",size:"sm",className:"flex-1 border-corporate-gold/30 transition-colors duration-300",children:e.jsx(Ge,{className:"w-4 h-4"})})}),e.jsx(d,{children:e.jsx("p",{children:"Edit technical information"})})]}),y&&e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{onClick:()=>Fe(r),variant:"outline",size:"sm",className:"flex-1 border-orange-300 transition-colors duration-300",children:e.jsx(re,{className:"w-4 h-4"})})}),e.jsxs(d,{children:[e.jsx("p",{children:"Reset password to email"}),e.jsx("p",{className:"text-orange-500",children:"Password will be set to their email"})]})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{onClick:()=>Pe(r),variant:"outline",size:"sm",className:"flex-1 border-red-300 transition-colors duration-300",children:e.jsx(Ye,{className:"w-4 h-4"})})}),e.jsx(d,{children:e.jsx("p",{children:"Delete technical permanently"})})]}),y&&e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{onClick:()=>Ie(r),variant:j(r)?"default":"outline",size:"sm",className:`flex-1 transition-colors duration-300 ${j(r)?"bg-secondary text-primary-foreground border-corporate-gold":"border-corporate-gold/30"}`,children:e.jsx(se,{className:"w-4 h-4"})})}),e.jsx(d,{children:e.jsxs("p",{children:[j(r)?"Remove as":"Set as"," Tech Default"]})})]}),(y||A.includes("technical"))&&e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{onClick:()=>Fs(r),variant:"outline",size:"sm",className:"flex-1 border-blue-300 hover:bg-blue-50 transition-colors duration-300",children:e.jsx(fe,{className:"w-4 h-4"})})}),e.jsx(d,{children:e.jsx("p",{children:"Send instruction to technical"})})]})]})]})]}),e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(or,{className:"w-5 h-5 text-corporate-gold"}),e.jsx("h4",{className:"font-semibold text-lg text-corporate-gold dark:text-corporate-gold-light",children:"Performance Metrics"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>k(r,"today"),className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-3 rounded-lg border border-green-200 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-xl font-bold text-green-600",children:e.jsx(g,{value:r.today_tickets})}),e.jsx("div",{className:"text-xs text-green-600",children:"Today"})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Click to view today's tickets"}),e.jsxs("p",{children:[r.today_tickets," tickets created today"]})]})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>k(r,"week"),className:"bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 p-3 rounded-lg border border-corporate-gold/30 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-xl font-bold text-corporate-gold",children:e.jsx(g,{value:r.weekly_tickets})}),e.jsx("div",{className:"text-xs text-corporate-gold",children:"This Week"})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Click to view this week's tickets"}),e.jsxs("p",{children:[r.weekly_tickets," tickets this week"]})]})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>k(r,"month"),className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-3 rounded-lg border border-purple-200 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-xl font-bold text-purple-600",children:e.jsx(g,{value:r.monthly_tickets})}),e.jsx("div",{className:"text-xs text-purple-600",children:"This Month"})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Click to view this month's tickets"}),e.jsxs("p",{children:[r.monthly_tickets," tickets this month"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>k(r,"open"),className:"flex items-center justify-between p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(gr,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Open Tickets"}),e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Require immediate attention"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-red-600",children:e.jsx(g,{value:r.open_tickets})}),e.jsx(je,{className:"w-4 h-4 text-red-500"})]})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Click to view all open tickets"}),e.jsxs("p",{children:[r.open_tickets," tickets waiting for work to begin"]})]})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>k(r,"in_progress"),className:"flex items-center justify-between p-3 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-300",children:"In Progress"}),e.jsx("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:"Currently being worked on"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-yellow-600",children:e.jsx(g,{value:r.in_progress_tickets})}),e.jsx(je,{className:"w-4 h-4 text-yellow-500"})]})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Click to view all tickets in progress"}),e.jsxs("p",{children:[r.in_progress_tickets," tickets actively being resolved"]})]})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>k(r,"resolved"),className:"flex items-center justify-between p-3 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qe,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Resolved"}),e.jsx("div",{className:"text-xs text-green-600 dark:text-green-400",children:"Successfully completed"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-green-600",children:e.jsx(g,{value:r.resolved_tickets})}),e.jsx(je,{className:"w-4 h-4 text-green-500"})]})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Click to view all resolved tickets"}),e.jsxs("p",{children:[r.resolved_tickets," tickets successfully completed"]})]})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>k(r,"recent"),className:"flex items-center justify-between p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Recent Completed"}),e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Last 7 days (resolved/closed only)"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:e.jsx(g,{value:((a=r.tickets)==null?void 0:a.filter(l=>{const m=new Date;return m.setDate(m.getDate()-7),new Date(l.created_at)>=m&&["resolved","closed"].includes(l.status)}).length)||0})}),e.jsx(je,{className:"w-4 h-4 text-blue-500"})]})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Click to view recent completed tickets"}),e.jsx("p",{children:"Shows only resolved/closed tickets from last 7 days"}),e.jsx("p",{className:"text-blue-500",children:"Excludes active (open/in progress) tickets"})]})]})]}),r.total_tickets>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-corporate-gold font-medium",children:"Success Rate"}),e.jsxs("span",{className:"font-bold text-corporate-gold",children:[e.jsx(g,{value:Math.round(r.resolved_tickets/r.total_tickets*100)}),"%"]})]}),e.jsx("div",{className:"w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-full h-3 shadow-inner overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-corporate-gold via-corporate-warm to-corporate-gold h-3 rounded-full transition-all duration-2000 ease-out shadow-lg relative",style:{width:`${Math.round(r.resolved_tickets/r.total_tickets*100)}%`,animationDelay:`${x*300}ms`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t border-corporate-gold/20",children:[e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"text-center p-2 rounded-lg bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border border-green-200 transition-colors duration-300 cursor-pointer hover:bg-gradient-to-br hover:from-green-100 hover:to-green-150",children:[e.jsx("div",{className:"text-sm font-medium text-green-600",children:"Resolved Today"}),e.jsx("div",{className:"text-lg font-bold text-green-600",children:e.jsx(g,{value:r.resolved_today})})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Tickets resolved today"}),e.jsx("p",{children:"Shows completion performance for today"})]})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"text-center p-2 rounded-lg bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 border border-corporate-gold/30 transition-colors duration-300 cursor-pointer hover:bg-gradient-to-br hover:from-corporate-gold/30 hover:to-corporate-warm/30",children:[e.jsx("div",{className:"text-sm font-medium text-corporate-gold",children:"Avg Resolution"}),e.jsxs("div",{className:"text-lg font-bold text-corporate-gold",children:[e.jsx(g,{value:r.avg_resolution_time}),"h"]})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Average time to resolve tickets"}),e.jsx("p",{children:"Lower is better for efficiency"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ge,{className:"w-5 h-5 text-corporate-gold"}),e.jsx("h4",{className:"font-semibold text-lg text-corporate-gold dark:text-corporate-gold-light",children:"Active Assignments"}),e.jsx("span",{className:"bg-gradient-to-r from-corporate-gold/20 to-corporate-warm/20 text-corporate-gold border border-corporate-gold/30 px-2 py-1 rounded-full text-xs font-medium animate-pulse",children:e.jsx(g,{value:r.assigned_devices_count})})]}),e.jsx("div",{className:"space-y-2 max-h-36 overflow-y-auto overflow-x-hidden",children:((c=r.assigned_devices)==null?void 0:c.length)>0?r.assigned_devices.map((l,m)=>{var N,xs;return e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 p-3 rounded-lg border border-corporate-gold/20 hover:bg-gradient-to-r hover:from-corporate-gold/10 hover:to-corporate-warm/10 hover:border-corporate-gold/40 transition-colors duration-300 cursor-pointer",style:{animationDelay:`${x*100+m*50}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:[e.jsx("div",{className:"font-medium text-sm text-corporate-gold truncate",children:l.name}),e.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:[(N=l.brand)==null?void 0:N.name," • ",(xs=l.model)==null?void 0:xs.name]}),l.system&&e.jsxs("div",{className:"text-xs text-corporate-warm mt-1 truncate",children:["System: ",l.system.name]})]})}),e.jsx(d,{children:e.jsx("p",{children:"Device with active/in-progress tickets"})})]},l.id)}):e.jsx("div",{className:"text-sm text-muted-foreground italic p-3 text-center bg-corporate-gold/5 rounded-lg border border-corporate-gold/20",children:"No active device assignments"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5 text-corporate-gold"}),e.jsx("h4",{className:"font-semibold text-lg text-corporate-gold dark:text-corporate-gold-light",children:"Recent Completed Tickets"})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>k(r,"recent"),className:"text-xs border-corporate-gold/30 hover:bg-primary hover:text-white",children:[e.jsx(jr,{className:"w-3 h-3 mr-1"}),"View All Recent"]})}),e.jsx(d,{children:e.jsx("p",{children:"View tickets from last 7 days"})})]})]}),e.jsx("div",{className:"space-y-2 max-h-44 overflow-y-auto scrollbar-thin",children:((t=r.tickets)==null?void 0:t.filter(l=>{const m=new Date;return m.setDate(m.getDate()-7),m.setHours(0,0,0,0),new Date(l.created_at)>=m&&["resolved","closed"].includes(l.status)}).length)>0?r.tickets.filter(l=>{const m=new Date;return m.setDate(m.getDate()-7),m.setHours(0,0,0,0),new Date(l.created_at)>=m&&["resolved","closed"].includes(l.status)}).slice(0,5).map((l,m)=>e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>Ne(l.id),className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 p-3 rounded-lg border border-corporate-gold/20 hover:bg-gradient-to-r hover:from-corporate-gold/10 hover:to-corporate-warm/10 hover:border-corporate-gold/40 transition-all duration-300 cursor-pointer hover:scale-105 transform group",style:{animationDelay:`${x*100+m*50}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium text-sm truncate pr-2 text-corporate-gold group-hover:text-corporate-warm",children:l.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium transition-all duration-300 flex-shrink-0 ${G(l.status)}`,children:l.status.replace("_"," ")}),e.jsx(bs,{className:"w-3 h-3 text-corporate-gold opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 truncate",children:[T(l.created_at),l.building&&e.jsxs("span",{className:"ml-2 text-corporate-warm",children:["• ",l.building.name]})]}),l.device&&e.jsxs("div",{className:"text-xs text-corporate-gold mt-1 truncate",children:["Device: ",l.device.name]})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Click to view ticket details and history"}),e.jsx("p",{className:"text-green-500",children:"✓ Completed ticket"}),e.jsxs("p",{children:["Status: ",l.status]})]})]},l.id)):e.jsxs("div",{className:"text-sm text-muted-foreground italic p-3 text-center bg-corporate-gold/5 rounded-lg border border-corporate-gold/20",children:[e.jsx(Be,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{children:"No recent completed tickets"}),e.jsx("p",{className:"text-xs mt-1",children:"Last 7 days show no resolved/closed tickets"})]})})]})]})]})})]})]},r.id)})})}),Le=async s=>{Je(s.id);try{await U.put($("technicals.update-status",s.id),{},{preserveScroll:!0,onSuccess:()=>u.success("Status updated"),onError:()=>u.error("Error updating status")})}finally{Je(null)}},Ie=async s=>{if(!y){u.error("Only super-admin can manage Tech Defaults");return}try{await U.put($("technicals.set-default",s.id),{},{preserveScroll:!0,onSuccess:()=>{const r=j(s)?"removed from":"assigned as";u.success(`Technical ${r} Tech Default successfully`)},onError:()=>u.error("Error updating Tech Default status")})}catch{u.error("Connection error")}},$e=s=>{const r={id:s.id,name:s.name,email:s.email,phone:s.phone,shift:s.shift,photo:null};I(r),de(r),le(s),W(!1),te(!0)},Pe=s=>{le(s),ae(!0)},Fe=async s=>{try{U.put($("technicals.reset-password",s.id),{},{preserveScroll:!0,onSuccess:()=>{u.success(`Password reset for ${s.name}. New password is their email: ${s.email}`)},onError:r=>{console.error("Reset password errors:",r),r.error?u.error(r.error):Object.values(r).forEach(x=>u.error(x))}})}catch(r){console.error("Reset password error:",r),u.error("Error resetting password")}},Fs=s=>{ts(s),ie({instruction:"",priority:"normal"}),oe(!0)},Us=async s=>{if(s.preventDefault(),!C||!L.instruction.trim()){u.error("Please enter an instruction");return}as(!0);try{await U.post($("technicals.send-instruction",C.id),{instruction:L.instruction,priority:L.priority},{preserveScroll:!0,onSuccess:()=>{oe(!1),ts(null),ie({instruction:"",priority:"normal"}),u.success("Instruction sent successfully")},onError:r=>{Object.values(r).forEach(x=>u.error(x))}})}catch{u.error("Error sending instruction")}finally{as(!1)}},Os=s=>{switch(s){case"low":return"bg-blue-100 text-blue-800";case"normal":return"bg-gray-100 text-gray-800";case"high":return"bg-orange-100 text-orange-800";case"urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},zs=s=>{if(s.preventDefault(),b.id){const r=new FormData;r.append("_method","PUT"),Object.entries(b).forEach(([x,a])=>{a!==null&&(typeof a=="number"?r.append(x,a.toString()):r.append(x,a))}),U.post($("technicals.update",b.id),r,{preserveScroll:!0,onSuccess:()=>{ce(),u.success("Technical updated")},onError:x=>{Object.values(x).forEach(a=>u.error(a))}})}else{const r={name:b.name,email:b.email,phone:b.phone,shift:b.shift,photo:b.photo};U.post($("technicals.store"),r,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{ce(),u.success("Technical created")},onError:x=>{Object.values(x).forEach(a=>u.error(a))}})}},Hs=()=>{D&&Es($("technicals.destroy",D.id),{preserveScroll:!0,onSuccess:()=>{ae(!1),u.success("Technical deleted")},onError:()=>{u.error("Delete failed")}})};return e.jsxs(Vs,{children:[e.jsx(Ws,{title:"Technicals Management"}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(30px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                
                @keyframes bounceIn {
                    0% {
                        opacity: 0;
                        transform: scale(0.3);
                    }
                    50% {
                        opacity: 1;
                        transform: scale(1.05);
                    }
                    70% {
                        transform: scale(0.9);
                    }
                    100% {
                        opacity: 1;
                        transform: scale(1);
                    }
                }
                
                @keyframes shimmer {
                    0% {
                        background-position: -200px 0;
                    }
                    100% {
                        background-position: calc(200px + 100%) 0;
                    }
                }
                
                .animate-fadeInUp {
                    animation: fadeInUp 0.6s ease-out;
                }
                
                .animate-bounceIn {
                    animation: bounceIn 0.8s ease-out;
                }
                
                .animate-shimmer {
                    background: linear-gradient(
                        90deg,
                        transparent,
                        rgba(255, 255, 255, 0.2),
                        transparent
                    );
                    background-size: 200px 100%;
                    animation: shimmer 2s infinite;
                }
                
                .scrollbar-thin {
                    scrollbar-width: thin;
                }
                
                .scrollbar-thin::-webkit-scrollbar {
                    width: 4px;
                    height: 4px;
                }
                
                .scrollbar-thin::-webkit-scrollbar-track {
                    background: transparent;
                }
                
                .scrollbar-thin::-webkit-scrollbar-thumb {
                    background-color: rgba(156, 163, 175, 0.2);
                    border-radius: 2px;
                }
                
                .scrollbar-thin::-webkit-scrollbar-thumb:hover {
                    background-color: rgba(156, 163, 175, 0.3);
                }
            `}}),e.jsxs("div",{className:"bg-gradient-to-br from-corporate-gold/10 via-corporate-warm/10 to-corporate-gold/5 dark:from-corporate-gold/20 dark:via-corporate-warm/20 dark:to-corporate-gold/10 p-6 border-b border-corporate-gold/20",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-primary to-accent rounded-xl shadow-lg",children:e.jsx(us,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-corporate-gold dark:text-corporate-gold-light",children:"Technical Team Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage technical staff, track performance, and monitor ticket assignments"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsx(he,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200",children:e.jsx(pe,{className:"p-3",children:e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 cursor-help",children:[e.jsx(qe,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Active Technicals"}),e.jsx("p",{className:"text-xl font-bold text-green-700",children:e.jsx(g,{value:f.data.filter(s=>s.status).length})})]})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Currently active technicals"}),e.jsx("p",{children:"Ready to handle tickets and assignments"})]})]})})}),e.jsx(he,{className:"bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 border-corporate-gold/30",children:e.jsx(pe,{className:"p-3",children:e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 cursor-help",children:[e.jsx(se,{className:"w-5 h-5 text-corporate-gold"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-corporate-gold",children:"Tech Defaults"}),e.jsx("p",{className:"text-xl font-bold text-corporate-gold",children:e.jsx(g,{value:f.data.filter(s=>s.is_default).length})})]})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Technical Chiefs - Team Leaders"}),e.jsx("p",{children:"Have additional permissions and responsibilities"}),e.jsx("p",{className:"text-corporate-gold",children:"Only super-admin can assign this role"})]})]})})}),e.jsx(he,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200",children:e.jsx(pe,{className:"p-3",children:e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 cursor-help",children:[e.jsx(ue,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Tickets"}),e.jsx("p",{className:"text-xl font-bold text-blue-700",children:e.jsx(g,{value:f.data.reduce((s,r)=>s+r.total_tickets,0)})})]})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Total tickets handled by all technicals"}),e.jsx("p",{children:"Includes all statuses across the team"})]})]})})}),e.jsx(he,{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border-purple-200",children:e.jsx(pe,{className:"p-3",children:e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 cursor-help",children:[e.jsx(ir,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Avg Resolution"}),e.jsxs("p",{className:"text-xl font-bold text-purple-700",children:[e.jsx(g,{value:Math.round(f.data.reduce((s,r)=>s+r.avg_resolution_time,0)/f.data.length)||0}),"h"]})]})]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Average resolution time across all technicals"}),e.jsx("p",{children:"Time from ticket creation to resolution"}),e.jsx("p",{className:"text-purple-500",children:"Lower values indicate better efficiency"})]})]})})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs(h,{variant:"outline",onClick:()=>Ts(!Ze),className:"border-corporate-gold/30 hover:bg-corporate-gold hover:text-primary-foreground transition-all duration-300",children:[e.jsx(nr,{className:"w-4 h-4 mr-2"}),"Advanced Filters"]})}),e.jsxs(d,{children:[e.jsx("p",{children:"Advanced search and filtering options"}),e.jsx("p",{children:"Filter by status, shift, and search terms"})]})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs(h,{onClick:()=>{const s={id:null,name:"",email:"",phone:"",shift:"morning",photo:null};I(s),de(s),le(null),W(!1),te(!0)},className:"text-primary-foreground bg-primary hover:from-corporate-warm hover:to-corporate-gold  shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(js,{className:"mr-2 h-4 w-4"}),"Add New Technical"]})}),e.jsx(d,{children:e.jsx("p",{children:"Add a new technical staff member"})})]})]})]}),Ze&&e.jsxs("div",{className:"mt-6 p-4 bg-white dark:bg-gray-800 rounded-xl border border-corporate-gold/20 shadow-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"search",className:"text-sm font-medium text-corporate-gold",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(xe,{id:"search",placeholder:"Search by name, email, or phone...",value:R,onChange:s=>Te(s.target.value),className:"pl-10 border-corporate-gold/20 focus:border-corporate-gold"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{className:"text-sm font-medium text-corporate-gold",children:"Status"}),e.jsxs(J,{value:E,onValueChange:_e,children:[e.jsx(X,{className:"border-corporate-gold/20 focus:border-corporate-gold",children:e.jsx(Z,{placeholder:"All Status"})}),e.jsxs(ee,{children:[e.jsx(v,{value:"all",children:"All Status"}),e.jsx(v,{value:"active",children:"Active Only"}),e.jsx(v,{value:"inactive",children:"Inactive Only"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{className:"text-sm font-medium text-corporate-gold",children:"Shift"}),e.jsxs(J,{value:F,onValueChange:Ae,children:[e.jsx(X,{className:"border-corporate-gold/20 focus:border-corporate-gold",children:e.jsx(Z,{placeholder:"All Shifts"})}),e.jsxs(ee,{children:[e.jsx(v,{value:"all",children:"All Shifts"}),e.jsx(v,{value:"morning",children:"Morning"}),e.jsx(v,{value:"afternoon",children:"Afternoon"}),e.jsx(v,{value:"night",children:"Night"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{className:"text-sm font-medium text-corporate-gold",children:"View Mode"}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>we("list"),className:`flex-1 ${P==="list"?"bg-white dark:bg-gray-600 shadow-sm":""}`,children:e.jsx(tr,{className:"w-4 h-4 mr-1"})})}),e.jsx(d,{children:e.jsx("p",{children:"Detailed List View - Comprehensive View"})})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>we("grid"),className:`flex-1 ${P==="grid"?"bg-white dark:bg-gray-600 shadow-sm":""}`,children:e.jsx(ar,{className:"w-4 h-4 mr-1"})})}),e.jsx(d,{children:e.jsx("p",{children:"Grid Cards View - Quick Overview"})})]}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>we("table"),className:`flex-1 ${P==="table"?"bg-white dark:bg-gray-600 shadow-sm":""}`,children:e.jsx(cr,{className:"w-4 h-4 mr-1"})})}),e.jsx(d,{children:e.jsx("p",{children:"Data Table View - Traditional Layout"})})]})]})]})]}),(R||E!=="all"||F!=="all")&&e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),R&&e.jsxs(me,{variant:"secondary",className:"bg-corporate-gold/10 text-corporate-gold",children:["Search: ",R]}),E!=="all"&&e.jsxs(me,{variant:"secondary",className:"bg-corporate-gold/10 text-corporate-gold",children:["Status: ",E]}),F!=="all"&&e.jsxs(me,{variant:"secondary",className:"bg-corporate-gold/10 text-corporate-gold",children:["Shift: ",F]}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>{Te(""),_e("all"),Ae("all")},className:"h-6 px-2 text-xs text-muted-foreground hover:text-corporate-gold",children:"Clear all"})]})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[P==="grid"&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Grid columns:"}),e.jsxs(J,{value:Xe.toString(),onValueChange:s=>ys(Number(s)),children:[e.jsx(X,{className:"w-24 h-8",children:e.jsx(Z,{})}),e.jsx(ee,{children:[2,3,4,5,6].map(s=>e.jsx(v,{value:s.toString(),children:s},s))})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",Y.length," of ",f.data.length," technicals"]})]}),Y.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"animate-bounceIn",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-corporate-gold/30",children:e.jsx(us,{className:"w-16 h-16 text-corporate-gold"})}),e.jsx("h3",{className:"text-2xl font-bold text-corporate-gold mb-4",children:f.data.length===0?"No Technicals Yet":"No Results Found"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:f.data.length===0?"Start building your technical team by adding your first technical staff member.":"Try adjusting your search criteria or filters to find the technicals you're looking for."}),f.data.length===0?e.jsxs(h,{onClick:()=>{const s={id:null,name:"",email:"",phone:"",shift:"morning",photo:null};I(s),de(s),le(null),W(!1),te(!0)},className:"bg-gradient-to-r from-corporate-gold to-corporate-warm hover:from-corporate-warm hover:to-corporate-gold text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(js,{className:"mr-2 h-4 w-4"}),"Add Your First Technical"]}):e.jsxs(h,{variant:"outline",onClick:()=>{Te(""),_e("all"),Ae("all")},className:"border-corporate-gold/30 hover:bg-corporate-gold hover:text-white",children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Clear All Filters"]})]})}):P==="list"?e.jsx(Ps,{technicals:Y}):P==="grid"?e.jsx($s,{technicals:Y,gridColumns:Xe}):e.jsx(Ve,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(Zs,{children:[e.jsx(er,{children:Ee.getHeaderGroups().map(s=>e.jsx(Oe,{children:s.headers.map(r=>e.jsx(sr,{children:hs(r.column.columnDef.header,r.getContext())},r.id))},s.id))}),e.jsx(rr,{children:(ds=Ee.getRowModel().rows)!=null&&ds.length?Ee.getRowModel().rows.map(s=>e.jsx(Oe,{children:s.getVisibleCells().map(r=>e.jsx(ps,{children:hs(r.column.columnDef.cell,r.getContext())},r.id))},s.id)):e.jsx(Oe,{children:e.jsx(ps,{colSpan:is.length,className:"h-24 text-center",children:"No results."})})})]})})}),e.jsx(O,{open:Ns,onOpenChange:os,children:e.jsxs(z,{className:"sm:max-w-[600px] max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(H,{className:"flex-shrink-0",children:e.jsx(V,{children:D?"Edit Technical":"New Technical"})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 space-y-4 scrollbar-thin scrollbar-thumb-corporate-gold/20 scrollbar-track-transparent hover:scrollbar-thumb-corporate-gold/40 dark:scrollbar-thumb-corporate-gold-light/20 dark:hover:scrollbar-thumb-corporate-gold-light/40",children:e.jsxs("form",{onSubmit:zs,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:" space-y-2",children:[e.jsx(w,{children:"Photo"}),e.jsxs("div",{className:"mt-2 group relative w-full aspect-square rounded-lg overflow-hidden border-2 border-dashed bg-muted/50",children:[e.jsx("input",{type:"file",onChange:s=>{var r;return Q("photo",((r=s.target.files)==null?void 0:r[0])||null)},className:"hidden",id:"photo-upload"}),e.jsx("label",{htmlFor:"photo-upload",className:"flex flex-col items-center justify-center w-full h-full cursor-pointer",children:b.photo?e.jsx("img",{src:URL.createObjectURL(b.photo),alt:"Preview",className:"w-full h-full object-cover"}):D&&_(D.photo)?e.jsx("img",{src:_(D.photo),alt:"Current",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(B,{className:"w-12 h-12 mx-auto text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload photo"})]})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Name"}),e.jsx(xe,{value:b.name,onChange:s=>Q("name",s.target.value),required:!0,className:"h-11 mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Email"}),e.jsx(xe,{type:"email",value:b.email,onChange:s=>Q("email",s.target.value),required:!0,className:"h-11 mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Phone"}),e.jsx(xe,{value:b.phone,onChange:s=>Q("phone",s.target.value),required:!0,className:"h-11 mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Shift"}),e.jsxs(J,{value:b.shift,onValueChange:s=>Q("shift",s),children:[e.jsx(X,{className:"h-11 mt-2",children:e.jsx(Z,{placeholder:"Select shift"})}),e.jsxs(ee,{children:[e.jsx(v,{value:"morning",children:"Morning"}),e.jsx(v,{value:"afternoon",children:"Afternoon"}),e.jsx(v,{value:"night",children:"Night"})]})]})]})]})]}),e.jsxs(q,{className:"flex-shrink-0 pt-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:os,children:"Cancel"}),e.jsx(h,{type:"submit",disabled:ls,children:ls?"Saving...":"Save"})]})]})})]})}),e.jsx(O,{open:Rs,onOpenChange:ne,children:e.jsxs(z,{className:"sm:max-w-md",children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/20 flex items-center justify-center flex-shrink-0",children:e.jsx(Ke,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx(V,{children:"Unsaved Changes"}),e.jsx(He,{className:"mt-1",children:"You have unsaved changes that will be lost if you close this dialog."})]})]})}),e.jsxs(q,{className:"gap-2 sm:gap-0",children:[e.jsx(h,{variant:"outline",onClick:()=>ne(!1),className:"w-full sm:w-auto",children:"Continue Editing"}),e.jsx(h,{variant:"destructive",onClick:Is,className:"w-full sm:w-auto",children:"Discard Changes"})]})]})}),e.jsx(O,{open:ws,onOpenChange:ae,children:e.jsxs(z,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Confirm Delete"}),e.jsxs(He,{children:["Are you sure you want to delete ",D==null?void 0:D.name,"?"]})]}),e.jsxs(q,{children:[e.jsx(h,{variant:"outline",onClick:()=>ae(!1),children:"Cancel"}),e.jsx(h,{variant:"destructive",onClick:Hs,children:"Delete"})]})]})}),e.jsx(O,{open:ks,onOpenChange:ke,children:e.jsxs(z,{className:"sm:max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(H,{className:"flex-shrink-0 pb-4 border-b border-corporate-gold/20",children:e.jsxs(V,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-corporate-gold to-corporate-warm rounded-lg",children:e.jsx(ue,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-corporate-gold",children:Ds}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:ss?"Loading tickets...":`${M.length} tickets found`})]}),e.jsx("div",{className:"ml-auto",children:e.jsxs(me,{variant:"secondary",className:"bg-corporate-gold/10 text-corporate-gold border-corporate-gold/30",children:[M.length," total"]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 scrollbar-thin scrollbar-thumb-corporate-gold/20 scrollbar-track-transparent hover:scrollbar-thumb-corporate-gold/40",children:ss?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-corporate-gold mb-4"}),e.jsx("p",{className:"text-lg font-medium text-corporate-gold",children:"Loading tickets..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please wait while we fetch the latest data"})]}):M.length>0?e.jsx("div",{className:"space-y-3",children:M.map((s,r)=>e.jsx("div",{onClick:()=>Ne(s.id),className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 p-4 rounded-lg border border-corporate-gold/20 hover:bg-gradient-to-r hover:from-corporate-gold/10 hover:to-corporate-warm/10 hover:border-corporate-gold/40 transition-all duration-300 cursor-pointer  transform group",style:{animationDelay:`${r*100}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-lg text-corporate-gold group-hover:text-corporate-warm transition-colors duration-300 truncate",children:["#",s.id," - ",s.title]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${G(s.status)}`,children:s.status.replace("_"," ")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"w-4 h-4 text-corporate-gold"}),e.jsxs("span",{children:["Created: ",T(s.created_at)]})]}),s.building&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-4 h-4 text-corporate-warm"}),e.jsx("span",{children:s.building.name})]}),s.device&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4 text-corporate-gold"}),e.jsx("span",{children:s.device.name})]}),s.priority&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:`w-4 h-4 ${s.priority==="urgent"?"text-red-500":s.priority==="high"?"text-orange-500":s.priority==="medium"?"text-yellow-500":"text-green-500"}`}),e.jsxs("span",{className:"capitalize",children:[s.priority," Priority"]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{variant:"outline",size:"sm",onClick:()=>Ne(s.id),className:"border-corporate-gold/30 hover:bg-primary hover:text-white",children:e.jsx(bs,{className:"w-4 h-4"})})}),e.jsx(d,{children:e.jsx("p",{children:"Open full ticket detail"})})]})})]})},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ue,{className:"w-12 h-12 text-corporate-gold"})}),e.jsx("h3",{className:"text-xl font-bold text-corporate-gold mb-2",children:"No tickets found"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"This technical has no tickets for the selected filter. Try a different filter or check back later."})]})}),e.jsx(q,{className:"flex-shrink-0 pt-4",children:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:M.length>0&&e.jsxs("span",{children:["Showing ",M.length," ticket",M.length!==1?"s":""]})}),e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs(h,{variant:"outline",onClick:()=>ke(!1),children:[e.jsx(vs,{className:"w-4 h-4 mr-1"}),"Close"]})}),e.jsx(d,{children:e.jsx("p",{children:"Close ticket list modal"})})]})]})})]})}),e.jsx(O,{open:Cs,onOpenChange:Ce,children:e.jsxs(z,{className:"sm:max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(H,{className:"flex-shrink-0 pb-6 border-b border-corporate-gold/20",children:e.jsxs(V,{className:"flex items-center gap-3 text-xl font-bold",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-corporate-gold to-corporate-warm rounded-lg",children:e.jsx(ue,{className:"w-6 h-6 text-white"})}),"Ticket Details"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 scrollbar-thin scrollbar-thumb-corporate-gold/20 scrollbar-track-transparent hover:scrollbar-thumb-corporate-gold/40",children:_s?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-corporate-gold mb-4"}),e.jsx("p",{className:"text-lg font-medium text-corporate-gold",children:"Loading ticket details..."})]}):o?e.jsxs("div",{className:"px-6 pb-6",children:[o.user&&o.user.tenant&&e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:o.user.tenant.photo?e.jsx("img",{src:o.user.tenant.photo.startsWith("http")?o.user.tenant.photo:`/storage/${o.user.tenant.photo}`,alt:o.user.tenant.name,className:"w-12 h-12 rounded-full border-2 border-purple-300 shadow-md object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-400 to-blue-400 flex items-center justify-center text-white text-sm font-bold",children:((cs=o.user.tenant.name)==null?void 0:cs.substring(0,1))||"?"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(B,{className:"w-3 h-3 text-purple-600"}),e.jsx("p",{className:"text-sm font-semibold text-purple-900 truncate",children:o.user.tenant.name})]}),o.user.tenant.email&&e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(xr,{className:"w-3 h-3 text-green-600"}),e.jsx("p",{className:"text-xs text-green-800 truncate",children:o.user.tenant.email})]}),o.user.tenant.phone&&e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(mr,{className:"w-3 h-3 text-orange-600"}),e.jsx("p",{className:"text-xs text-orange-800 truncate",children:o.user.tenant.phone})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:o.title}),e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-medium ${G(o.status)}`,children:o.status.replace("_"," ")})]}),e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:o.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"ID:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["#",o.id]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Category:"}),e.jsx("span",{className:"ml-2 font-medium",children:o.category})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.device&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-sky-100 text-sky-700 text-xs font-medium",children:[e.jsx(ge,{className:"w-3 h-3"}),o.device.name||"Device"]}),e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-purple-100 text-purple-700 text-xs font-medium",children:[e.jsx(lr,{className:"w-3 h-3"}),o.category]})]})}),e.jsxs("div",{className:"text-xs text-slate-500 space-y-1 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gs,{className:"w-3 h-3"}),"Created: ",T(o.created_at)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(be,{className:"w-3 h-3"}),"Updated: ",T(o.updated_at)]}),o.resolved_at&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(qe,{className:"w-3 h-3"}),"Resolved: ",T(o.resolved_at)]})]}),(o.building||o.device)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[o.building&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 p-3 rounded-lg border",children:[e.jsxs("h4",{className:"font-medium text-sm text-corporate-gold mb-1 flex items-center gap-1",children:[e.jsx(fs,{className:"w-3 h-3"}),"Building"]}),e.jsx("p",{className:"text-sm",children:o.building.name}),o.building.address&&e.jsx("p",{className:"text-xs text-muted-foreground",children:o.building.address})]}),o.device&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 p-3 rounded-lg border",children:[e.jsxs("h4",{className:"font-medium text-sm text-corporate-gold mb-1 flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3"}),"Device Details"]}),e.jsx("p",{className:"text-sm",children:o.device.name}),o.device.brand&&e.jsx("p",{className:"text-xs text-muted-foreground",children:o.device.brand.name})]})]})]}),e.jsx("div",{className:"border-t border-slate-200 my-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium text-slate-900 flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4 text-blue-500"}),"History"]}),e.jsx("div",{className:"space-y-3",children:!o.history||o.history.length===0?e.jsxs("div",{className:"text-center py-6 text-slate-500",children:[e.jsx(fe,{className:"w-8 h-8 mx-auto mb-2 text-slate-300"}),e.jsx("p",{className:"text-sm",children:"No history available"})]}):[...o.history].slice().reverse().map((s,r,x)=>e.jsxs("div",{className:"relative pl-6 pb-4 last:pb-0",children:[e.jsx("div",{className:"absolute left-0 top-1 w-3 h-3 bg-blue-500 rounded-full border-2 border-white shadow"}),r!==x.length-1&&e.jsx("div",{className:"absolute left-1.5 top-4 w-0.5 h-full bg-slate-200"}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 ml-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:s.action.replace("_"," ")}),r===0&&e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Recent"})]}),e.jsx("p",{className:"text-sm text-slate-700 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"}),s.user?s.user.name:"System"]}),e.jsx("span",{children:T(s.created_at)})]})]})]},s.id))})]}),o.resolution_time&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg border border-green-200 mt-6",children:[e.jsxs("h3",{className:"font-semibold text-lg text-green-600 mb-2 flex items-center gap-2",children:[e.jsx(hr,{className:"w-5 h-5"}),"Resolution Metrics"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Resolution Time:"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:[o.resolution_time,"h"]})]}),o.rating&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Rating:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((s,r)=>e.jsx(pr,{className:`w-4 h-4 ${r<o.rating?"text-yellow-400 fill-current":"text-gray-300"}`},r)),e.jsxs("span",{className:"ml-1 font-bold text-yellow-600",children:["(",o.rating,"/5)"]})]})]}),o.feedback&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Feedback:"}),e.jsxs("p",{className:"text-sm text-muted-foreground italic",children:['"',o.feedback,'"']})]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ke,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:"Error loading ticket details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please try again later"})]})}),e.jsx(q,{className:"flex-shrink-0 pt-4 border-t border-corporate-gold/20",children:e.jsxs(i,{children:[e.jsx(n,{asChild:!0,children:e.jsxs(h,{variant:"outline",onClick:()=>{Ce(!1),Se(null)},className:"px-6 py-2.5",children:[e.jsx(vs,{className:"w-4 h-4 mr-1"}),"Back to List"]})}),e.jsx(d,{children:e.jsx("p",{children:"Return to ticket list"})})]})})]})}),e.jsx(O,{open:As,onOpenChange:oe,children:e.jsxs(z,{className:"sm:max-w-[500px]",children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5 text-blue-500"}),"Send Instruction to ",C==null?void 0:C.name]}),e.jsx(He,{children:"Send instructions or guidelines to the technical. Choose priority level appropriately."})]}),e.jsxs("form",{onSubmit:Us,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"priority",children:"Priority Level"}),e.jsxs(J,{value:L.priority,onValueChange:s=>ie(r=>({...r,priority:s})),children:[e.jsx(X,{children:e.jsx(Z,{})}),e.jsxs(ee,{children:[e.jsx(v,{value:"low",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Low Priority"]})}),e.jsx(v,{value:"normal",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),"Normal Priority"]})}),e.jsx(v,{value:"high",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"High Priority"]})}),e.jsx(v,{value:"urgent",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"URGENT"]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"instruction",children:"Instruction"}),e.jsx("textarea",{id:"instruction",value:L.instruction,onChange:s=>ie(r=>({...r,instruction:s.target.value})),placeholder:"Enter your instruction or message for the technical...",className:"min-h-[120px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",maxLength:1e3,required:!0}),e.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[L.instruction.length,"/1000 characters"]})]}),(C==null?void 0:C.instructions)&&C.instructions.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Recent Instructions (last 3)"}),e.jsx("div",{className:"max-h-32 overflow-y-auto space-y-2 p-2 border rounded-md bg-gray-50",children:C.instructions.slice(0,3).map((s,r)=>e.jsxs("div",{className:"text-xs border-l-2 border-gray-300 pl-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-1 py-0.5 rounded text-xs ${Os(s.priority)}`,children:s.priority.toUpperCase()}),e.jsxs("span",{className:"text-gray-500",children:["from ",s.from]}),e.jsx("span",{className:"text-gray-400",children:new Date(s.sent_at).toLocaleDateString()})]}),e.jsx("p",{className:"mt-1 text-gray-700",children:s.instruction})]},r))})]}),e.jsxs(q,{children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>oe(!1),disabled:Me,children:"Cancel"}),e.jsx(h,{type:"submit",disabled:Me||!L.instruction.trim(),className:"bg-blue-600 hover:bg-blue-700",children:Me?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Send Instruction"]})})]})]})]})})]})]})}const fr=({status:f})=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f==="active"?"Active":"Inactive"});export{xt as default};
