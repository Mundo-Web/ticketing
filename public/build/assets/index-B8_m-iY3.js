import{j as n}from"./ui-B_LlBPKL.js";import{A as tm}from"./app-layout-Dl_2JLwh.js";import{a as sc,K as Fo,m as ic,S as Ue,L as nm,t as B}from"./app-BHqtn3Wb.js";import{r as T}from"./recharts-C_88tpBl.js";import{e as sm,F as im}from"./FileSaver.min-BGmHM0RZ.js";import{u as om,f as pc,b as am}from"./index-DEubyOLC.js";import{T as lm,a as cm,b as li,c as um,d as dm,e as ii}from"./table-DH001fLy.js";import{D as Wo,a as $o,b as Go,d as Ho,c as fm}from"./dropdown-menu-DMNoBHsR.js";import{D as Me,a as Be,b as Ye,c as Ze,d as Er,e as Yr}from"./dialog-Cpjj7P1V.js";import{B as I}from"./button-D7WChgOL.js";import{L as be}from"./label-BFkwPYrm.js";import{I as Ke}from"./input-CPYfG3NN.js";import{T as oc}from"./textarea-Cf0M5nmX.js";import{S as hm}from"./switch-CfMBp_U3.js";import{C as Gn,b as pm,a as oi}from"./card-D2PMvY5E.js";import{T as gc,a as mc,b as qn,c as ac}from"./tabs-BAby--lM.js";import{S as gm,a as mm,b as xm,c as vm,d as $n}from"./select-BW9itjM_.js";import bm from"./ModalDispositivos-BxuxlPeE.js";import{BuildingCombobox as wm}from"./ComboBox-Bff0Bwjv.js";import{TenantForm as _m}from"./TenantForm-G-6Y4ThS.js";import{B as jm}from"./badge-D8qydIEn.js";import{S as Nm}from"./separator-2eYOZDPc.js";import{U as ai}from"./user-CpLSdjZ6.js";import{a as ci,C as qo}from"./circle-alert-CQiE_YKh.js";import{C as ym}from"./calendar-B5ENoLvU.js";import{C as ui}from"./clock-C9AFtO6q.js";import{a as xc,M as Yo,P as Zo}from"./trending-up-DPs1t5N1.js";import{E as Sm}from"./eye-C0Ej2ac6.js";import{R as Cm,K as Xo,C as Em}from"./DeviceIcon-D3yqz6Mb.js";import{b as vc,B as Am,S as zo,C as dn,a as di}from"./x-DCQyXNSS.js";import{C as fi}from"./circle-check-big-kRE2lEsQ.js";import{H as Rm}from"./house-DLs_ngv-.js";import{M as Dm}from"./monitor-DC-EX0Dh.js";import{a as Tm}from"./trophy-BpbwooG3.js";import{f as Im}from"./format-CCdy9gBC.js";import{c as si,g as km}from"./react-B1hewrmX.js";import{P as lc}from"./plus-CzQ2zNVS.js";import{C as Lm}from"./cloud-upload-CBWDzHdi.js";import{C as Pe}from"./chevron-up-RfB0QmaY.js";import{S as Ko}from"./square-pen-CZ4LUS4h.js";import{T as cc}from"./trash-2-Cs4R96q7.js";import{M as Om,F as Um}from"./map-pin-DU2QgsnQ.js";import{S as Pm}from"./search-Du8maFVh.js";import{F as Mm}from"./file-spreadsheet-Bu5TR--g.js";import{D as uc}from"./download-L7lCOsHB.js";import{U as zn}from"./users-BUOHIUcQ.js";import{T as Bm}from"./ticket-CqAL-sEh.js";import"./utils-BJRzUxt3.js";import"./tooltip-CZNM2GAl.js";import"./index-BwDU8Ijz.js";import"./index-D4fRSykC.js";import"./index-Cno2KWhz.js";import"./chevrons-up-down-DyCAeWvF.js";import"./createLucideIcon-BiVfa5Ur.js";import"./check-ei1vhWUY.js";import"./react-select-creatable.esm-Cl-wr1ni.js";import"./checkbox-CkiCC9jw.js";import"./share-2-BX2Tzb9c.js";import"./activity-DYMUuslV.js";import"./archive-DNMMvwJ5.js";import"./arrow-left-CPDhjXak.js";import"./zap-Cj_qJnwG.js";import"./building-2-BYrPcrqm.js";import"./database-GGi-pq_Z.js";import"./ellipsis-Bcr1duWK.js";import"./upload-DVGHmo7h.js";import"./wifi-off-CrOOkx7R.js";import"./loader-circle-DxDPAbpk.js";import"./sun-DePERuGU.js";import"./play-B6f8xoDn.js";import"./refresh-cw-DkX1lbet.js";import"./smartphone--tbFG9UO.js";import"./star-C9wwVdhM.js";import"./table-BB7lDMma.js";import"./ticket-plus-DMc59eOu.js";import"./triangle-alert-CwQCDSSb.js";import"./user-plus-BTZB6avM.js";import"./wifi-CRwhCiWI.js";import"./en-US-Cx6CYfeS.js";const Fm=`
.custom-scrollbar::-webkit-scrollbar {
    width: 6px;
}
.custom-scrollbar::-webkit-scrollbar-track {
    background: rgb(243 244 246);
    border-radius: 6px;
}
.custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgb(209 213 219);
    border-radius: 6px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgb(156 163 175);
}
.dark .custom-scrollbar::-webkit-scrollbar-track {
    background: rgb(55 65 81);
}
.dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgb(75 85 99);
}
.dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgb(107 114 128);
}
.line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
`;if(typeof document<"u"&&!document.getElementById("ticket-history-styles")){const j=document.createElement("style");j.id="ticket-history-styles",j.textContent=Fm,document.head.appendChild(j)}const dc={open:{color:"bg-blue-500",icon:ci,text:"Open"},in_progress:{color:"bg-yellow-500",icon:ui,text:"In Progress"},resolved:{color:"bg-green-500",icon:fi,text:"Resolved"},closed:{color:"bg-gray-500",icon:fi,text:"Closed"},cancelled:{color:"bg-red-500",icon:vc,text:"Cancelled"},reopened:{color:"bg-orange-500",icon:Cm,text:"Reopened"}};function Wm({status:j}){const l={open:{label:"Open",bgColor:"bg-blue-100",textColor:"text-blue-800",icon:ci},in_progress:{label:"In Progress",bgColor:"bg-amber-100",textColor:"text-amber-800",icon:ui},resolved:{label:"Resolved",bgColor:"bg-emerald-100",textColor:"text-emerald-800",icon:fi},closed:{label:"Closed",bgColor:"bg-slate-100",textColor:"text-slate-700",icon:fi},cancelled:{label:"Cancelled",bgColor:"bg-red-100",textColor:"text-red-800",icon:vc}}[j]||{label:j,bgColor:"bg-gray-100",textColor:"text-gray-700",icon:ci},ge=l.icon;return n.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium ${l.bgColor} ${l.textColor}`,children:[n.jsx(ge,{className:"w-3 h-3"}),l.label]})}function $m({category:j}){return n.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-purple-100 text-purple-700 text-xs font-medium",children:[n.jsx(Tm,{className:"w-3 h-3"}),j]})}function Gm({device:j}){var pe;return n.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-sky-100 text-sky-700 text-xs font-medium",children:[n.jsx(Dm,{className:"w-3 h-3"}),((pe=j==null?void 0:j.name_device)==null?void 0:pe.name)||(j==null?void 0:j.name)||"Sin dispositivo"]})}function Hm({ticket:j,showContactInfo:pe=!1}){var ge,ue;if(!j.user||!j.user.tenant)return null;const l=j.user.tenant;return n.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-3 mb-3",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex-shrink-0",children:l.photo?n.jsx("img",{src:l.photo.startsWith("http")?l.photo:`/storage/${l.photo}`,alt:l.name,className:"w-12 h-12 rounded-full border-2 border-purple-300 shadow-md object-cover"}):n.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-400 to-blue-400 flex items-center justify-center text-white text-sm font-bold",children:((ge=l.name)==null?void 0:ge.substring(0,1))||"?"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(ai,{className:"w-3 h-3 text-purple-600"}),n.jsx("p",{className:"text-sm font-semibold text-purple-900 truncate",children:l.name})]}),pe&&l.email&&n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(xc,{className:"w-3 h-3 text-green-600"}),n.jsx("p",{className:"text-xs text-green-800 truncate",children:l.email})]}),l.apartment&&n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(Rm,{className:"w-3 h-3 text-blue-600"}),n.jsx("p",{className:"text-xs text-blue-800 truncate",children:l.apartment.name})]}),((ue=l.apartment)==null?void 0:ue.building)&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Am,{className:"w-3 h-3 text-gray-600"}),n.jsx("p",{className:"text-xs text-gray-700 truncate",children:l.apartment.building.name})]})]})]})})}function qm({isOpen:j,onClose:pe,tenant:l}){const[ge,ue]=T.useState([]),[we,Y]=T.useState(!1),[Ur,Pr]=T.useState("all"),[re,Ar]=T.useState(null),Re=T.useCallback(async(F="all")=>{var X,k,or;if(l!=null&&l.id){Y(!0);try{const V=await sc.get(`/tenants/${l.id}/tickets`,{params:{status:F}});ue(V.data.tickets)}catch(V){console.error("Error fetching tickets:",V),sc.isAxiosError(V)?((X=V.response)==null?void 0:X.status)===403?console.error("Access denied to fetch tickets"):((k=V.response)==null?void 0:k.status)===404?console.error("Tenant not found"):console.error("Unexpected error:",((or=V.response)==null?void 0:or.data)||V.message):console.error("Non-axios error:",V)}finally{Y(!1)}}},[l==null?void 0:l.id]);if(T.useEffect(()=>{j&&(l!=null&&l.id)&&Re(Ur)},[j,l==null?void 0:l.id,Ur,Re]),!l)return n.jsx(Me,{open:j,onOpenChange:pe,children:n.jsxs(Be,{className:"max-w-md",children:[n.jsx(Ye,{children:n.jsx(Ze,{children:"Error"})}),n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No tenant selected"})}),n.jsx("div",{className:"flex justify-end pt-4 border-t",children:n.jsx(I,{onClick:pe,children:"Close"})})]})});const ir=F=>{const X=dc[F]||dc.open,k=X.icon;return n.jsxs(jm,{className:`${X.color} text-white`,children:[n.jsx(k,{className:"w-3 h-3 mr-1"}),X.text]})},me=ge.reduce((F,X)=>(F[X.status]=(F[X.status]||0)+1,F),{}),te=ge.length;return n.jsx(Me,{open:j,onOpenChange:pe,children:n.jsxs(Be,{className:"min-w-5xl h-[95vh] max-h-[95vh] overflow-hidden bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[n.jsx(Ye,{className:"border-b border-gray-200 dark:border-gray-700 pb-4",children:n.jsxs(Ze,{className:"flex items-center gap-3 text-xl font-bold",children:[n.jsx("div",{className:"p-2 bg-corporate-gold/10 rounded-lg",children:n.jsx(ai,{className:"w-5 h-5 text-corporate-gold"})}),n.jsx("span",{className:"text-corporate-gold",children:"Ticket History"}),n.jsx("span",{className:"text-muted-foreground text-lg",children:"•"}),n.jsx("span",{className:"text-foreground",children:(l==null?void 0:l.name)||"Unknown Tenant"})]})}),n.jsxs("div",{className:"flex h-[calc(88vh-140px)] gap-6 mt-4",children:[n.jsxs("div",{className:"w-3/5 border-r border-gray-200 dark:border-gray-700 pr-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-4 text-white text-center shadow-sm",children:[n.jsx("div",{className:"text-2xl font-bold mb-1",children:te}),n.jsx("div",{className:"text-xs text-blue-100 font-medium",children:"Total"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-4 text-white text-center shadow-sm",children:[n.jsx("div",{className:"text-2xl font-bold mb-1",children:me.resolved||0}),n.jsx("div",{className:"text-xs text-green-100 font-medium",children:"Resolved"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-4 text-white text-center shadow-sm",children:[n.jsx("div",{className:"text-2xl font-bold mb-1",children:me.open||0}),n.jsx("div",{className:"text-xs text-orange-100 font-medium",children:"Pending"})]})]}),n.jsx(gc,{value:Ur,onValueChange:Pr,children:n.jsxs(mc,{className:"grid w-full grid-cols-3 bg-gray-50 dark:bg-gray-900 rounded-lg p-1 border-0",children:[n.jsxs(qn,{value:"all",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-gray-900 text-sm font-medium rounded-md",children:["All (",te,")"]}),n.jsxs(qn,{value:"open",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-gray-900 text-sm font-medium rounded-md",children:["Open (",me.open||0,")"]}),n.jsxs(qn,{value:"resolved",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-gray-900 text-sm font-medium rounded-md",children:["Resolved (",me.resolved||0,")"]})]})})]}),n.jsx("div",{className:"h-[calc(100%-140px)] overflow-y-auto space-y-2 pr-2 custom-scrollbar",children:we?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-corporate-gold mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading tickets..."})]}):ge.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx(ci,{className:"w-6 h-6 text-gray-400"})}),n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"No tickets found"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"This member hasn't created any tickets yet"})]}):ge.map(F=>n.jsxs("div",{className:`cursor-pointer transition-all duration-200 rounded-lg border p-3 hover:shadow-md ${(re==null?void 0:re.id)===F.id?"bg-corporate-gold/5 border-corporate-gold shadow-sm":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-corporate-gold/30"}`,onClick:()=>Ar(F),children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-mono text-xs font-medium text-corporate-gold bg-corporate-gold/10 px-2 py-1 rounded",children:F.code}),n.jsx("span",{className:"text-xs text-muted-foreground",children:Im(new Date(F.created_at),"MMM d")})]}),n.jsx("div",{className:"scale-75",children:ir(F.status)})]}),n.jsx("h4",{className:"font-medium text-sm line-clamp-1 mb-1",children:F.title}),n.jsx("div",{className:"text-xs text-muted-foreground line-clamp-1 mb-2",children:F.description}),n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[F.device&&n.jsxs("div",{className:"flex items-center gap-1 text-corporate-gold bg-corporate-gold/10 px-2 py-1 rounded-full",children:[n.jsx("div",{className:"w-1 h-1 bg-corporate-gold rounded-full"}),n.jsx("span",{className:"font-medium truncate max-w-20",children:F.device.name})]}),F.technical&&n.jsxs("div",{className:"flex items-center gap-1 text-blue-600 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded-full",children:[n.jsx(ai,{className:"w-2.5 h-2.5"}),n.jsx("span",{className:"font-medium truncate max-w-16",children:F.technical.name})]})]})]},F.id))})]}),n.jsx("div",{className:"w-2/5 pl-6",children:re?n.jsx("div",{className:"h-full overflow-y-auto custom-scrollbar",children:n.jsxs(Gn,{className:"shadow-xl border-0 bg-gradient-to-br from-white to-gray-50",children:[n.jsx(pm,{className:"text-black rounded-t-lg shadow pb-4",children:n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("h2",{className:"text-lg font-semibold",children:"Ticket Details"})})}),n.jsx(oi,{className:"p-0",children:n.jsx("div",{className:"max-h-[calc(100vh-200px)] overflow-y-auto",children:n.jsxs("div",{className:"px-6 pb-6",children:[n.jsx(Hm,{ticket:re,showContactInfo:!0}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:re.title}),n.jsx(Wm,{status:re.status})]}),n.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:re.description}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-500",children:"ID:"}),n.jsxs("span",{className:"ml-2 font-medium",children:["#",re.id]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-500",children:"Code:"}),n.jsx("span",{className:"ml-2 font-medium",children:re.code})]})]}),n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.jsx(Gm,{device:re.device}),n.jsx($m,{category:re.category})]})}),n.jsxs("div",{className:"text-xs text-slate-500 space-y-1 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ym,{className:"w-3 h-3"}),"Created:"," ",re.created_at?new Date(re.created_at).toLocaleString("en-US"):"-"]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ui,{className:"w-3 h-3"}),"Updated:"," ",re.updated_at?new Date(re.updated_at).toLocaleString("en-US"):"-"]})]})]}),n.jsx(Nm,{}),n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsxs("h4",{className:"font-medium text-slate-900 flex items-center gap-2",children:[n.jsx(ui,{className:"w-4 h-4 text-blue-500"}),"History"]}),n.jsx("div",{className:"space-y-3",children:!re.histories||re.histories.length===0?n.jsxs("div",{className:"text-center py-6 text-slate-500",children:[n.jsx(xc,{className:"w-8 h-8 mx-auto mb-2 text-slate-300"}),n.jsx("p",{className:"text-sm",children:"No history available"})]}):[...re.histories].slice().reverse().map((F,X,k)=>n.jsxs("div",{className:"relative pl-6 pb-4 last:pb-0",children:[n.jsx("div",{className:"absolute left-0 top-1 w-3 h-3 bg-blue-500 rounded-full border-2 border-white shadow"}),X!==k.length-1&&n.jsx("div",{className:"absolute left-1.5 top-4 w-0.5 h-full bg-slate-200"}),n.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 ml-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:F.action.replace("_"," ")}),X===0&&n.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Recent"})]}),n.jsx("p",{className:"text-sm text-slate-700 mb-2",children:F.description}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(ai,{className:"w-3 h-3"}),F.user?F.user.name:"Sistema"]}),n.jsx("span",{children:new Date(F.created_at).toLocaleString("es-ES")})]})]})]},F.id))})]})]})})})]})}):n.jsx("div",{className:"h-full flex items-center justify-center",children:n.jsxs("div",{className:"text-center p-8",children:[n.jsx("div",{className:"w-16 h-16 bg-corporate-gold/10 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Sm,{className:"w-8 h-8 text-corporate-gold/40"})}),n.jsx("h3",{className:"font-bold text-lg text-muted-foreground mb-2",children:"Select a Ticket"}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-xs leading-relaxed",children:"Choose a ticket from the list to view its details and activity history."})]})})})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700 mt-4 bg-white dark:bg-gray-900",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:ge.length>0&&n.jsx("div",{className:"flex items-center gap-3",children:n.jsxs("span",{children:[n.jsx("span",{className:"font-medium text-corporate-gold",children:ge.length})," ticket",ge.length!==1?"s":""," •",n.jsxs("span",{className:"text-green-600 ml-1",children:[me.resolved||0," resolved"]})," •",n.jsxs("span",{className:"text-orange-600 ml-1",children:[me.open||0," pending"]})]})})}),n.jsx(I,{onClick:pe,className:"bg-corporate-gold hover:bg-corporate-warm text-white px-6 py-2 font-medium shadow-md hover:shadow-lg transition-all duration-200",children:"Close"})]})]})})}var Hn={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var zm=Hn.exports,fc;function Km(){return fc||(fc=1,function(j,pe){(function(){var l,ge="4.17.21",ue=200,we="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",Y="Expected a function",Ur="Invalid `variable` option passed into `_.template`",Pr="__lodash_hash_undefined__",re=500,Ar="__lodash_placeholder__",Re=1,ir=2,me=4,te=1,F=2,X=1,k=2,or=4,V=8,Ce=16,Fe=32,Xe=64,ne=128,We=256,Zr=512,Xr=30,xr="...",gt=800,de=16,Jr=1,$e=2,Ut=3,vr=1/0,br=9007199254740991,Pt=17976931348623157e292,wr=NaN,De=4294967295,mt=De-1,hi=De>>>1,Kn=[["ary",ne],["bind",X],["bindKey",k],["curry",V],["curryRight",Ce],["flip",Zr],["partial",Fe],["partialRight",Xe],["rearg",We]],Qr="[object Arguments]",Vr="[object Array]",pi="[object AsyncFunction]",Rr="[object Boolean]",Je="[object Date]",Yn="[object DOMException]",et="[object Error]",xt="[object Function]",Zn="[object GeneratorFunction]",_e="[object Map]",vt="[object Number]",Mt="[object Null]",_r="[object Object]",bt="[object Promise]",fn="[object Proxy]",rt="[object RegExp]",Te="[object Set]",tt="[object String]",wt="[object Symbol]",gi="[object Undefined]",_t="[object WeakMap]",Bt="[object WeakSet]",jt="[object ArrayBuffer]",Dr="[object DataView]",ar="[object Float32Array]",Ft="[object Float64Array]",Nt="[object Int8Array]",hn="[object Int16Array]",lr="[object Int32Array]",Tr="[object Uint8Array]",E="[object Uint8ClampedArray]",pn="[object Uint16Array]",jr="[object Uint32Array]",je=/\b__p \+= '';/g,yt=/\b(__p \+=) '' \+/g,mi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xn=/&(?:amp|lt|gt|quot|#39);/g,gn=/[&<>"']/g,nt=RegExp(Xn.source),Wt=RegExp(gn.source),ie=/<%-([\s\S]+?)%>/g,$t=/<%([\s\S]+?)%>/g,Jn=/<%=([\s\S]+?)%>/g,Qn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xi=/^\w*$/,vi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mn=/[\\^$.*+?()[\]{}|]/g,bi=RegExp(mn.source),xn=/^\s+/,wi=/\s/,_i=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ji=/\{\n\/\* \[wrapped with (.+)\] \*/,Ni=/,? & /,Vn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,yi=/[()=,{}\[\]\/\s]/,es=/\\(\\)?/g,Si=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rs=/\w*$/,Ci=/^[-+]0x[0-9a-f]+$/i,Ei=/^0b[01]+$/i,ts=/^\[object .+?Constructor\]$/,St=/^0o[0-7]+$/i,Ai=/^(?:0|[1-9]\d*)$/,st=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Gt=/($^)/,Ri=/['\n\r\u2028\u2029\\]/g,Ht="\\ud800-\\udfff",qt="\\u0300-\\u036f",Ie="\\ufe20-\\ufe2f",zt="\\u20d0-\\u20ff",ns=qt+Ie+zt,ss="\\u2700-\\u27bf",is="a-z\\xdf-\\xf6\\xf8-\\xff",Kt="\\xac\\xb1\\xd7\\xf7",Di="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Yt="\\u2000-\\u206f",Ti=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",L="\\ufe0e\\ufe0f",Ne=Kt+Di+Yt+Ti,Qe="['’]",it="["+Ht+"]",os="["+Ne+"]",Zt="["+ns+"]",as="\\d+",Ii="["+ss+"]",ls="["+is+"]",cs="[^"+Ht+Ne+as+ss+is+Ct+"]",vn="\\ud83c[\\udffb-\\udfff]",ki="(?:"+Zt+"|"+vn+")",us="[^"+Ht+"]",bn="(?:\\ud83c[\\udde6-\\uddff]){2}",Xt="[\\ud800-\\udbff][\\udc00-\\udfff]",Mr="["+Ct+"]",wn="\\u200d",_n="(?:"+ls+"|"+cs+")",ds="(?:"+Mr+"|"+cs+")",jn="(?:"+Qe+"(?:d|ll|m|re|s|t|ve))?",Nn="(?:"+Qe+"(?:D|LL|M|RE|S|T|VE))?",yn=ki+"?",Sn="["+L+"]?",fs="(?:"+wn+"(?:"+[us,bn,Xt].join("|")+")"+Sn+yn+")*",hs="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ps="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Cn=Sn+yn+fs,gs="(?:"+[Ii,bn,Xt].join("|")+")"+Cn,ms="(?:"+[us+Zt+"?",Zt,bn,Xt,it].join("|")+")",xs=RegExp(Qe,"g"),vs=RegExp(Zt,"g"),u=RegExp(vn+"(?="+vn+")|"+ms+Cn,"g"),p=RegExp([Mr+"?"+ls+"+"+jn+"(?="+[os,Mr,"$"].join("|")+")",ds+"+"+Nn+"(?="+[os,Mr+_n,"$"].join("|")+")",Mr+"?"+_n+"+"+jn,Mr+"+"+Nn,ps,hs,as,gs].join("|"),"g"),N=RegExp("["+wn+Ht+ns+L+"]"),$=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,O=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],q=-1,y={};y[ar]=y[Ft]=y[Nt]=y[hn]=y[lr]=y[Tr]=y[E]=y[pn]=y[jr]=!0,y[Qr]=y[Vr]=y[jt]=y[Rr]=y[Dr]=y[Je]=y[et]=y[xt]=y[_e]=y[vt]=y[_r]=y[rt]=y[Te]=y[tt]=y[_t]=!1;var C={};C[Qr]=C[Vr]=C[jt]=C[Dr]=C[Rr]=C[Je]=C[ar]=C[Ft]=C[Nt]=C[hn]=C[lr]=C[_e]=C[vt]=C[_r]=C[rt]=C[Te]=C[tt]=C[wt]=C[Tr]=C[E]=C[pn]=C[jr]=!0,C[et]=C[xt]=C[_t]=!1;var xe={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ir={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},wc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_c=parseFloat,jc=parseInt,Jo=typeof si=="object"&&si&&si.Object===Object&&si,Nc=typeof self=="object"&&self&&self.Object===Object&&self,ye=Jo||Nc||Function("return this")(),Li=pe&&!pe.nodeType&&pe,Et=Li&&!0&&j&&!j.nodeType&&j,Qo=Et&&Et.exports===Li,Oi=Qo&&Jo.process,cr=function(){try{var f=Et&&Et.require&&Et.require("util").types;return f||Oi&&Oi.binding&&Oi.binding("util")}catch{}}(),Vo=cr&&cr.isArrayBuffer,ea=cr&&cr.isDate,ra=cr&&cr.isMap,ta=cr&&cr.isRegExp,na=cr&&cr.isSet,sa=cr&&cr.isTypedArray;function Ve(f,m,g){switch(g.length){case 0:return f.call(m);case 1:return f.call(m,g[0]);case 2:return f.call(m,g[0],g[1]);case 3:return f.call(m,g[0],g[1],g[2])}return f.apply(m,g)}function yc(f,m,g,_){for(var U=-1,Z=f==null?0:f.length;++U<Z;){var fe=f[U];m(_,fe,g(fe),f)}return _}function ur(f,m){for(var g=-1,_=f==null?0:f.length;++g<_&&m(f[g],g,f)!==!1;);return f}function Sc(f,m){for(var g=f==null?0:f.length;g--&&m(f[g],g,f)!==!1;);return f}function ia(f,m){for(var g=-1,_=f==null?0:f.length;++g<_;)if(!m(f[g],g,f))return!1;return!0}function ot(f,m){for(var g=-1,_=f==null?0:f.length,U=0,Z=[];++g<_;){var fe=f[g];m(fe,g,f)&&(Z[U++]=fe)}return Z}function bs(f,m){var g=f==null?0:f.length;return!!g&&Jt(f,m,0)>-1}function Ui(f,m,g){for(var _=-1,U=f==null?0:f.length;++_<U;)if(g(m,f[_]))return!0;return!1}function se(f,m){for(var g=-1,_=f==null?0:f.length,U=Array(_);++g<_;)U[g]=m(f[g],g,f);return U}function at(f,m){for(var g=-1,_=m.length,U=f.length;++g<_;)f[U+g]=m[g];return f}function Pi(f,m,g,_){var U=-1,Z=f==null?0:f.length;for(_&&Z&&(g=f[++U]);++U<Z;)g=m(g,f[U],U,f);return g}function Cc(f,m,g,_){var U=f==null?0:f.length;for(_&&U&&(g=f[--U]);U--;)g=m(g,f[U],U,f);return g}function Mi(f,m){for(var g=-1,_=f==null?0:f.length;++g<_;)if(m(f[g],g,f))return!0;return!1}var Ec=Bi("length");function Ac(f){return f.split("")}function Rc(f){return f.match(Vn)||[]}function oa(f,m,g){var _;return g(f,function(U,Z,fe){if(m(U,Z,fe))return _=Z,!1}),_}function ws(f,m,g,_){for(var U=f.length,Z=g+(_?1:-1);_?Z--:++Z<U;)if(m(f[Z],Z,f))return Z;return-1}function Jt(f,m,g){return m===m?Wc(f,m,g):ws(f,aa,g)}function Dc(f,m,g,_){for(var U=g-1,Z=f.length;++U<Z;)if(_(f[U],m))return U;return-1}function aa(f){return f!==f}function la(f,m){var g=f==null?0:f.length;return g?Wi(f,m)/g:wr}function Bi(f){return function(m){return m==null?l:m[f]}}function Fi(f){return function(m){return f==null?l:f[m]}}function ca(f,m,g,_,U){return U(f,function(Z,fe,ee){g=_?(_=!1,Z):m(g,Z,fe,ee)}),g}function Tc(f,m){var g=f.length;for(f.sort(m);g--;)f[g]=f[g].value;return f}function Wi(f,m){for(var g,_=-1,U=f.length;++_<U;){var Z=m(f[_]);Z!==l&&(g=g===l?Z:g+Z)}return g}function $i(f,m){for(var g=-1,_=Array(f);++g<f;)_[g]=m(g);return _}function Ic(f,m){return se(m,function(g){return[g,f[g]]})}function ua(f){return f&&f.slice(0,pa(f)+1).replace(xn,"")}function er(f){return function(m){return f(m)}}function Gi(f,m){return se(m,function(g){return f[g]})}function En(f,m){return f.has(m)}function da(f,m){for(var g=-1,_=f.length;++g<_&&Jt(m,f[g],0)>-1;);return g}function fa(f,m){for(var g=f.length;g--&&Jt(m,f[g],0)>-1;);return g}function kc(f,m){for(var g=f.length,_=0;g--;)f[g]===m&&++_;return _}var Lc=Fi(xe),Oc=Fi(Ir);function Uc(f){return"\\"+wc[f]}function Pc(f,m){return f==null?l:f[m]}function Qt(f){return N.test(f)}function Mc(f){return $.test(f)}function Bc(f){for(var m,g=[];!(m=f.next()).done;)g.push(m.value);return g}function Hi(f){var m=-1,g=Array(f.size);return f.forEach(function(_,U){g[++m]=[U,_]}),g}function ha(f,m){return function(g){return f(m(g))}}function lt(f,m){for(var g=-1,_=f.length,U=0,Z=[];++g<_;){var fe=f[g];(fe===m||fe===Ar)&&(f[g]=Ar,Z[U++]=g)}return Z}function _s(f){var m=-1,g=Array(f.size);return f.forEach(function(_){g[++m]=_}),g}function Fc(f){var m=-1,g=Array(f.size);return f.forEach(function(_){g[++m]=[_,_]}),g}function Wc(f,m,g){for(var _=g-1,U=f.length;++_<U;)if(f[_]===m)return _;return-1}function $c(f,m,g){for(var _=g+1;_--;)if(f[_]===m)return _;return _}function Vt(f){return Qt(f)?Hc(f):Ec(f)}function Nr(f){return Qt(f)?qc(f):Ac(f)}function pa(f){for(var m=f.length;m--&&wi.test(f.charAt(m)););return m}var Gc=Fi(bc);function Hc(f){for(var m=u.lastIndex=0;u.test(f);)++m;return m}function qc(f){return f.match(u)||[]}function zc(f){return f.match(p)||[]}var Kc=function f(m){m=m==null?ye:en.defaults(ye.Object(),m,en.pick(ye,O));var g=m.Array,_=m.Date,U=m.Error,Z=m.Function,fe=m.Math,ee=m.Object,qi=m.RegExp,Yc=m.String,dr=m.TypeError,js=g.prototype,Zc=Z.prototype,rn=ee.prototype,Ns=m["__core-js_shared__"],ys=Zc.toString,Q=rn.hasOwnProperty,Xc=0,ga=function(){var e=/[^.]+$/.exec(Ns&&Ns.keys&&Ns.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ss=rn.toString,Jc=ys.call(ee),Qc=ye._,Vc=qi("^"+ys.call(Q).replace(mn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Cs=Qo?m.Buffer:l,ct=m.Symbol,Es=m.Uint8Array,ma=Cs?Cs.allocUnsafe:l,As=ha(ee.getPrototypeOf,ee),xa=ee.create,va=rn.propertyIsEnumerable,Rs=js.splice,ba=ct?ct.isConcatSpreadable:l,An=ct?ct.iterator:l,At=ct?ct.toStringTag:l,Ds=function(){try{var e=kt(ee,"defineProperty");return e({},"",{}),e}catch{}}(),eu=m.clearTimeout!==ye.clearTimeout&&m.clearTimeout,ru=_&&_.now!==ye.Date.now&&_.now,tu=m.setTimeout!==ye.setTimeout&&m.setTimeout,Ts=fe.ceil,Is=fe.floor,zi=ee.getOwnPropertySymbols,nu=Cs?Cs.isBuffer:l,wa=m.isFinite,su=js.join,iu=ha(ee.keys,ee),he=fe.max,Ee=fe.min,ou=_.now,au=m.parseInt,_a=fe.random,lu=js.reverse,Ki=kt(m,"DataView"),Rn=kt(m,"Map"),Yi=kt(m,"Promise"),tn=kt(m,"Set"),Dn=kt(m,"WeakMap"),Tn=kt(ee,"create"),ks=Dn&&new Dn,nn={},cu=Lt(Ki),uu=Lt(Rn),du=Lt(Yi),fu=Lt(tn),hu=Lt(Dn),Ls=ct?ct.prototype:l,In=Ls?Ls.valueOf:l,ja=Ls?Ls.toString:l;function o(e){if(ae(e)&&!P(e)&&!(e instanceof z)){if(e instanceof fr)return e;if(Q.call(e,"__wrapped__"))return Nl(e)}return new fr(e)}var sn=function(){function e(){}return function(r){if(!oe(r))return{};if(xa)return xa(r);e.prototype=r;var t=new e;return e.prototype=l,t}}();function Os(){}function fr(e,r){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=l}o.templateSettings={escape:ie,evaluate:$t,interpolate:Jn,variable:"",imports:{_:o}},o.prototype=Os.prototype,o.prototype.constructor=o,fr.prototype=sn(Os.prototype),fr.prototype.constructor=fr;function z(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function pu(){var e=new z(this.__wrapped__);return e.__actions__=Ge(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ge(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ge(this.__views__),e}function gu(){if(this.__filtered__){var e=new z(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function mu(){var e=this.__wrapped__.value(),r=this.__dir__,t=P(e),s=r<0,i=t?e.length:0,a=Ad(0,i,this.__views__),c=a.start,d=a.end,h=d-c,x=s?d:c-1,v=this.__iteratees__,b=v.length,w=0,S=Ee(h,this.__takeCount__);if(!t||!s&&i==h&&S==h)return za(e,this.__actions__);var R=[];e:for(;h--&&w<S;){x+=r;for(var W=-1,D=e[x];++W<b;){var H=v[W],K=H.iteratee,nr=H.type,Oe=K(D);if(nr==$e)D=Oe;else if(!Oe){if(nr==Jr)continue e;break e}}R[w++]=D}return R}z.prototype=sn(Os.prototype),z.prototype.constructor=z;function Rt(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}function xu(){this.__data__=Tn?Tn(null):{},this.size=0}function vu(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}function bu(e){var r=this.__data__;if(Tn){var t=r[e];return t===Pr?l:t}return Q.call(r,e)?r[e]:l}function wu(e){var r=this.__data__;return Tn?r[e]!==l:Q.call(r,e)}function _u(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Tn&&r===l?Pr:r,this}Rt.prototype.clear=xu,Rt.prototype.delete=vu,Rt.prototype.get=bu,Rt.prototype.has=wu,Rt.prototype.set=_u;function Br(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}function ju(){this.__data__=[],this.size=0}function Nu(e){var r=this.__data__,t=Us(r,e);if(t<0)return!1;var s=r.length-1;return t==s?r.pop():Rs.call(r,t,1),--this.size,!0}function yu(e){var r=this.__data__,t=Us(r,e);return t<0?l:r[t][1]}function Su(e){return Us(this.__data__,e)>-1}function Cu(e,r){var t=this.__data__,s=Us(t,e);return s<0?(++this.size,t.push([e,r])):t[s][1]=r,this}Br.prototype.clear=ju,Br.prototype.delete=Nu,Br.prototype.get=yu,Br.prototype.has=Su,Br.prototype.set=Cu;function Fr(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}function Eu(){this.size=0,this.__data__={hash:new Rt,map:new(Rn||Br),string:new Rt}}function Au(e){var r=Ys(this,e).delete(e);return this.size-=r?1:0,r}function Ru(e){return Ys(this,e).get(e)}function Du(e){return Ys(this,e).has(e)}function Tu(e,r){var t=Ys(this,e),s=t.size;return t.set(e,r),this.size+=t.size==s?0:1,this}Fr.prototype.clear=Eu,Fr.prototype.delete=Au,Fr.prototype.get=Ru,Fr.prototype.has=Du,Fr.prototype.set=Tu;function Dt(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new Fr;++r<t;)this.add(e[r])}function Iu(e){return this.__data__.set(e,Pr),this}function ku(e){return this.__data__.has(e)}Dt.prototype.add=Dt.prototype.push=Iu,Dt.prototype.has=ku;function yr(e){var r=this.__data__=new Br(e);this.size=r.size}function Lu(){this.__data__=new Br,this.size=0}function Ou(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}function Uu(e){return this.__data__.get(e)}function Pu(e){return this.__data__.has(e)}function Mu(e,r){var t=this.__data__;if(t instanceof Br){var s=t.__data__;if(!Rn||s.length<ue-1)return s.push([e,r]),this.size=++t.size,this;t=this.__data__=new Fr(s)}return t.set(e,r),this.size=t.size,this}yr.prototype.clear=Lu,yr.prototype.delete=Ou,yr.prototype.get=Uu,yr.prototype.has=Pu,yr.prototype.set=Mu;function Na(e,r){var t=P(e),s=!t&&Ot(e),i=!t&&!s&&pt(e),a=!t&&!s&&!i&&cn(e),c=t||s||i||a,d=c?$i(e.length,Yc):[],h=d.length;for(var x in e)(r||Q.call(e,x))&&!(c&&(x=="length"||i&&(x=="offset"||x=="parent")||a&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||Hr(x,h)))&&d.push(x);return d}function ya(e){var r=e.length;return r?e[io(0,r-1)]:l}function Bu(e,r){return Zs(Ge(e),Tt(r,0,e.length))}function Fu(e){return Zs(Ge(e))}function Zi(e,r,t){(t!==l&&!Sr(e[r],t)||t===l&&!(r in e))&&Wr(e,r,t)}function kn(e,r,t){var s=e[r];(!(Q.call(e,r)&&Sr(s,t))||t===l&&!(r in e))&&Wr(e,r,t)}function Us(e,r){for(var t=e.length;t--;)if(Sr(e[t][0],r))return t;return-1}function Wu(e,r,t,s){return ut(e,function(i,a,c){r(s,i,t(i),c)}),s}function Sa(e,r){return e&&Lr(r,ve(r),e)}function $u(e,r){return e&&Lr(r,qe(r),e)}function Wr(e,r,t){r=="__proto__"&&Ds?Ds(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}function Xi(e,r){for(var t=-1,s=r.length,i=g(s),a=e==null;++t<s;)i[t]=a?l:To(e,r[t]);return i}function Tt(e,r,t){return e===e&&(t!==l&&(e=e<=t?e:t),r!==l&&(e=e>=r?e:r)),e}function hr(e,r,t,s,i,a){var c,d=r&Re,h=r&ir,x=r&me;if(t&&(c=i?t(e,s,i,a):t(e)),c!==l)return c;if(!oe(e))return e;var v=P(e);if(v){if(c=Dd(e),!d)return Ge(e,c)}else{var b=Ae(e),w=b==xt||b==Zn;if(pt(e))return Za(e,d);if(b==_r||b==Qr||w&&!i){if(c=h||w?{}:pl(e),!d)return h?bd(e,$u(c,e)):vd(e,Sa(c,e))}else{if(!C[b])return i?e:{};c=Td(e,b,d)}}a||(a=new yr);var S=a.get(e);if(S)return S;a.set(e,c),Gl(e)?e.forEach(function(D){c.add(hr(D,r,t,D,e,a))}):Wl(e)&&e.forEach(function(D,H){c.set(H,hr(D,r,t,H,e,a))});var R=x?h?xo:mo:h?qe:ve,W=v?l:R(e);return ur(W||e,function(D,H){W&&(H=D,D=e[H]),kn(c,H,hr(D,r,t,H,e,a))}),c}function Gu(e){var r=ve(e);return function(t){return Ca(t,e,r)}}function Ca(e,r,t){var s=t.length;if(e==null)return!s;for(e=ee(e);s--;){var i=t[s],a=r[i],c=e[i];if(c===l&&!(i in e)||!a(c))return!1}return!0}function Ea(e,r,t){if(typeof e!="function")throw new dr(Y);return Fn(function(){e.apply(l,t)},r)}function Ln(e,r,t,s){var i=-1,a=bs,c=!0,d=e.length,h=[],x=r.length;if(!d)return h;t&&(r=se(r,er(t))),s?(a=Ui,c=!1):r.length>=ue&&(a=En,c=!1,r=new Dt(r));e:for(;++i<d;){var v=e[i],b=t==null?v:t(v);if(v=s||v!==0?v:0,c&&b===b){for(var w=x;w--;)if(r[w]===b)continue e;h.push(v)}else a(r,b,s)||h.push(v)}return h}var ut=el(kr),Aa=el(Qi,!0);function Hu(e,r){var t=!0;return ut(e,function(s,i,a){return t=!!r(s,i,a),t}),t}function Ps(e,r,t){for(var s=-1,i=e.length;++s<i;){var a=e[s],c=r(a);if(c!=null&&(d===l?c===c&&!tr(c):t(c,d)))var d=c,h=a}return h}function qu(e,r,t,s){var i=e.length;for(t=M(t),t<0&&(t=-t>i?0:i+t),s=s===l||s>i?i:M(s),s<0&&(s+=i),s=t>s?0:ql(s);t<s;)e[t++]=r;return e}function Ra(e,r){var t=[];return ut(e,function(s,i,a){r(s,i,a)&&t.push(s)}),t}function Se(e,r,t,s,i){var a=-1,c=e.length;for(t||(t=kd),i||(i=[]);++a<c;){var d=e[a];r>0&&t(d)?r>1?Se(d,r-1,t,s,i):at(i,d):s||(i[i.length]=d)}return i}var Ji=rl(),Da=rl(!0);function kr(e,r){return e&&Ji(e,r,ve)}function Qi(e,r){return e&&Da(e,r,ve)}function Ms(e,r){return ot(r,function(t){return qr(e[t])})}function It(e,r){r=ft(r,e);for(var t=0,s=r.length;e!=null&&t<s;)e=e[Or(r[t++])];return t&&t==s?e:l}function Ta(e,r,t){var s=r(e);return P(e)?s:at(s,t(e))}function ke(e){return e==null?e===l?gi:Mt:At&&At in ee(e)?Ed(e):Fd(e)}function Vi(e,r){return e>r}function zu(e,r){return e!=null&&Q.call(e,r)}function Ku(e,r){return e!=null&&r in ee(e)}function Yu(e,r,t){return e>=Ee(r,t)&&e<he(r,t)}function eo(e,r,t){for(var s=t?Ui:bs,i=e[0].length,a=e.length,c=a,d=g(a),h=1/0,x=[];c--;){var v=e[c];c&&r&&(v=se(v,er(r))),h=Ee(v.length,h),d[c]=!t&&(r||i>=120&&v.length>=120)?new Dt(c&&v):l}v=e[0];var b=-1,w=d[0];e:for(;++b<i&&x.length<h;){var S=v[b],R=r?r(S):S;if(S=t||S!==0?S:0,!(w?En(w,R):s(x,R,t))){for(c=a;--c;){var W=d[c];if(!(W?En(W,R):s(e[c],R,t)))continue e}w&&w.push(R),x.push(S)}}return x}function Zu(e,r,t,s){return kr(e,function(i,a,c){r(s,t(i),a,c)}),s}function On(e,r,t){r=ft(r,e),e=vl(e,r);var s=e==null?e:e[Or(gr(r))];return s==null?l:Ve(s,e,t)}function Ia(e){return ae(e)&&ke(e)==Qr}function Xu(e){return ae(e)&&ke(e)==jt}function Ju(e){return ae(e)&&ke(e)==Je}function Un(e,r,t,s,i){return e===r?!0:e==null||r==null||!ae(e)&&!ae(r)?e!==e&&r!==r:Qu(e,r,t,s,Un,i)}function Qu(e,r,t,s,i,a){var c=P(e),d=P(r),h=c?Vr:Ae(e),x=d?Vr:Ae(r);h=h==Qr?_r:h,x=x==Qr?_r:x;var v=h==_r,b=x==_r,w=h==x;if(w&&pt(e)){if(!pt(r))return!1;c=!0,v=!1}if(w&&!v)return a||(a=new yr),c||cn(e)?dl(e,r,t,s,i,a):Sd(e,r,h,t,s,i,a);if(!(t&te)){var S=v&&Q.call(e,"__wrapped__"),R=b&&Q.call(r,"__wrapped__");if(S||R){var W=S?e.value():e,D=R?r.value():r;return a||(a=new yr),i(W,D,t,s,a)}}return w?(a||(a=new yr),Cd(e,r,t,s,i,a)):!1}function Vu(e){return ae(e)&&Ae(e)==_e}function ro(e,r,t,s){var i=t.length,a=i,c=!s;if(e==null)return!a;for(e=ee(e);i--;){var d=t[i];if(c&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++i<a;){d=t[i];var h=d[0],x=e[h],v=d[1];if(c&&d[2]){if(x===l&&!(h in e))return!1}else{var b=new yr;if(s)var w=s(x,v,h,e,r,b);if(!(w===l?Un(v,x,te|F,s,b):w))return!1}}return!0}function ka(e){if(!oe(e)||Od(e))return!1;var r=qr(e)?Vc:ts;return r.test(Lt(e))}function ed(e){return ae(e)&&ke(e)==rt}function rd(e){return ae(e)&&Ae(e)==Te}function td(e){return ae(e)&&ri(e.length)&&!!y[ke(e)]}function La(e){return typeof e=="function"?e:e==null?ze:typeof e=="object"?P(e)?Pa(e[0],e[1]):Ua(e):tc(e)}function to(e){if(!Bn(e))return iu(e);var r=[];for(var t in ee(e))Q.call(e,t)&&t!="constructor"&&r.push(t);return r}function nd(e){if(!oe(e))return Bd(e);var r=Bn(e),t=[];for(var s in e)s=="constructor"&&(r||!Q.call(e,s))||t.push(s);return t}function no(e,r){return e<r}function Oa(e,r){var t=-1,s=He(e)?g(e.length):[];return ut(e,function(i,a,c){s[++t]=r(i,a,c)}),s}function Ua(e){var r=bo(e);return r.length==1&&r[0][2]?ml(r[0][0],r[0][1]):function(t){return t===e||ro(t,e,r)}}function Pa(e,r){return _o(e)&&gl(r)?ml(Or(e),r):function(t){var s=To(t,e);return s===l&&s===r?Io(t,e):Un(r,s,te|F)}}function Bs(e,r,t,s,i){e!==r&&Ji(r,function(a,c){if(i||(i=new yr),oe(a))sd(e,r,c,t,Bs,s,i);else{var d=s?s(No(e,c),a,c+"",e,r,i):l;d===l&&(d=a),Zi(e,c,d)}},qe)}function sd(e,r,t,s,i,a,c){var d=No(e,t),h=No(r,t),x=c.get(h);if(x){Zi(e,t,x);return}var v=a?a(d,h,t+"",e,r,c):l,b=v===l;if(b){var w=P(h),S=!w&&pt(h),R=!w&&!S&&cn(h);v=h,w||S||R?P(d)?v=d:le(d)?v=Ge(d):S?(b=!1,v=Za(h,!0)):R?(b=!1,v=Xa(h,!0)):v=[]:Wn(h)||Ot(h)?(v=d,Ot(d)?v=zl(d):(!oe(d)||qr(d))&&(v=pl(h))):b=!1}b&&(c.set(h,v),i(v,h,s,a,c),c.delete(h)),Zi(e,t,v)}function Ma(e,r){var t=e.length;if(t)return r+=r<0?t:0,Hr(r,t)?e[r]:l}function Ba(e,r,t){r.length?r=se(r,function(a){return P(a)?function(c){return It(c,a.length===1?a[0]:a)}:a}):r=[ze];var s=-1;r=se(r,er(A()));var i=Oa(e,function(a,c,d){var h=se(r,function(x){return x(a)});return{criteria:h,index:++s,value:a}});return Tc(i,function(a,c){return xd(a,c,t)})}function id(e,r){return Fa(e,r,function(t,s){return Io(e,s)})}function Fa(e,r,t){for(var s=-1,i=r.length,a={};++s<i;){var c=r[s],d=It(e,c);t(d,c)&&Pn(a,ft(c,e),d)}return a}function od(e){return function(r){return It(r,e)}}function so(e,r,t,s){var i=s?Dc:Jt,a=-1,c=r.length,d=e;for(e===r&&(r=Ge(r)),t&&(d=se(e,er(t)));++a<c;)for(var h=0,x=r[a],v=t?t(x):x;(h=i(d,v,h,s))>-1;)d!==e&&Rs.call(d,h,1),Rs.call(e,h,1);return e}function Wa(e,r){for(var t=e?r.length:0,s=t-1;t--;){var i=r[t];if(t==s||i!==a){var a=i;Hr(i)?Rs.call(e,i,1):lo(e,i)}}return e}function io(e,r){return e+Is(_a()*(r-e+1))}function ad(e,r,t,s){for(var i=-1,a=he(Ts((r-e)/(t||1)),0),c=g(a);a--;)c[s?a:++i]=e,e+=t;return c}function oo(e,r){var t="";if(!e||r<1||r>br)return t;do r%2&&(t+=e),r=Is(r/2),r&&(e+=e);while(r);return t}function G(e,r){return yo(xl(e,r,ze),e+"")}function ld(e){return ya(un(e))}function cd(e,r){var t=un(e);return Zs(t,Tt(r,0,t.length))}function Pn(e,r,t,s){if(!oe(e))return e;r=ft(r,e);for(var i=-1,a=r.length,c=a-1,d=e;d!=null&&++i<a;){var h=Or(r[i]),x=t;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(i!=c){var v=d[h];x=s?s(v,h,d):l,x===l&&(x=oe(v)?v:Hr(r[i+1])?[]:{})}kn(d,h,x),d=d[h]}return e}var $a=ks?function(e,r){return ks.set(e,r),e}:ze,ud=Ds?function(e,r){return Ds(e,"toString",{configurable:!0,enumerable:!1,value:Lo(r),writable:!0})}:ze;function dd(e){return Zs(un(e))}function pr(e,r,t){var s=-1,i=e.length;r<0&&(r=-r>i?0:i+r),t=t>i?i:t,t<0&&(t+=i),i=r>t?0:t-r>>>0,r>>>=0;for(var a=g(i);++s<i;)a[s]=e[s+r];return a}function fd(e,r){var t;return ut(e,function(s,i,a){return t=r(s,i,a),!t}),!!t}function Fs(e,r,t){var s=0,i=e==null?s:e.length;if(typeof r=="number"&&r===r&&i<=hi){for(;s<i;){var a=s+i>>>1,c=e[a];c!==null&&!tr(c)&&(t?c<=r:c<r)?s=a+1:i=a}return i}return ao(e,r,ze,t)}function ao(e,r,t,s){var i=0,a=e==null?0:e.length;if(a===0)return 0;r=t(r);for(var c=r!==r,d=r===null,h=tr(r),x=r===l;i<a;){var v=Is((i+a)/2),b=t(e[v]),w=b!==l,S=b===null,R=b===b,W=tr(b);if(c)var D=s||R;else x?D=R&&(s||w):d?D=R&&w&&(s||!S):h?D=R&&w&&!S&&(s||!W):S||W?D=!1:D=s?b<=r:b<r;D?i=v+1:a=v}return Ee(a,mt)}function Ga(e,r){for(var t=-1,s=e.length,i=0,a=[];++t<s;){var c=e[t],d=r?r(c):c;if(!t||!Sr(d,h)){var h=d;a[i++]=c===0?0:c}}return a}function Ha(e){return typeof e=="number"?e:tr(e)?wr:+e}function rr(e){if(typeof e=="string")return e;if(P(e))return se(e,rr)+"";if(tr(e))return ja?ja.call(e):"";var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}function dt(e,r,t){var s=-1,i=bs,a=e.length,c=!0,d=[],h=d;if(t)c=!1,i=Ui;else if(a>=ue){var x=r?null:Nd(e);if(x)return _s(x);c=!1,i=En,h=new Dt}else h=r?[]:d;e:for(;++s<a;){var v=e[s],b=r?r(v):v;if(v=t||v!==0?v:0,c&&b===b){for(var w=h.length;w--;)if(h[w]===b)continue e;r&&h.push(b),d.push(v)}else i(h,b,t)||(h!==d&&h.push(b),d.push(v))}return d}function lo(e,r){return r=ft(r,e),e=vl(e,r),e==null||delete e[Or(gr(r))]}function qa(e,r,t,s){return Pn(e,r,t(It(e,r)),s)}function Ws(e,r,t,s){for(var i=e.length,a=s?i:-1;(s?a--:++a<i)&&r(e[a],a,e););return t?pr(e,s?0:a,s?a+1:i):pr(e,s?a+1:0,s?i:a)}function za(e,r){var t=e;return t instanceof z&&(t=t.value()),Pi(r,function(s,i){return i.func.apply(i.thisArg,at([s],i.args))},t)}function co(e,r,t){var s=e.length;if(s<2)return s?dt(e[0]):[];for(var i=-1,a=g(s);++i<s;)for(var c=e[i],d=-1;++d<s;)d!=i&&(a[i]=Ln(a[i]||c,e[d],r,t));return dt(Se(a,1),r,t)}function Ka(e,r,t){for(var s=-1,i=e.length,a=r.length,c={};++s<i;){var d=s<a?r[s]:l;t(c,e[s],d)}return c}function uo(e){return le(e)?e:[]}function fo(e){return typeof e=="function"?e:ze}function ft(e,r){return P(e)?e:_o(e,r)?[e]:jl(J(e))}var hd=G;function ht(e,r,t){var s=e.length;return t=t===l?s:t,!r&&t>=s?e:pr(e,r,t)}var Ya=eu||function(e){return ye.clearTimeout(e)};function Za(e,r){if(r)return e.slice();var t=e.length,s=ma?ma(t):new e.constructor(t);return e.copy(s),s}function ho(e){var r=new e.constructor(e.byteLength);return new Es(r).set(new Es(e)),r}function pd(e,r){var t=r?ho(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}function gd(e){var r=new e.constructor(e.source,rs.exec(e));return r.lastIndex=e.lastIndex,r}function md(e){return In?ee(In.call(e)):{}}function Xa(e,r){var t=r?ho(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function Ja(e,r){if(e!==r){var t=e!==l,s=e===null,i=e===e,a=tr(e),c=r!==l,d=r===null,h=r===r,x=tr(r);if(!d&&!x&&!a&&e>r||a&&c&&h&&!d&&!x||s&&c&&h||!t&&h||!i)return 1;if(!s&&!a&&!x&&e<r||x&&t&&i&&!s&&!a||d&&t&&i||!c&&i||!h)return-1}return 0}function xd(e,r,t){for(var s=-1,i=e.criteria,a=r.criteria,c=i.length,d=t.length;++s<c;){var h=Ja(i[s],a[s]);if(h){if(s>=d)return h;var x=t[s];return h*(x=="desc"?-1:1)}}return e.index-r.index}function Qa(e,r,t,s){for(var i=-1,a=e.length,c=t.length,d=-1,h=r.length,x=he(a-c,0),v=g(h+x),b=!s;++d<h;)v[d]=r[d];for(;++i<c;)(b||i<a)&&(v[t[i]]=e[i]);for(;x--;)v[d++]=e[i++];return v}function Va(e,r,t,s){for(var i=-1,a=e.length,c=-1,d=t.length,h=-1,x=r.length,v=he(a-d,0),b=g(v+x),w=!s;++i<v;)b[i]=e[i];for(var S=i;++h<x;)b[S+h]=r[h];for(;++c<d;)(w||i<a)&&(b[S+t[c]]=e[i++]);return b}function Ge(e,r){var t=-1,s=e.length;for(r||(r=g(s));++t<s;)r[t]=e[t];return r}function Lr(e,r,t,s){var i=!t;t||(t={});for(var a=-1,c=r.length;++a<c;){var d=r[a],h=s?s(t[d],e[d],d,t,e):l;h===l&&(h=e[d]),i?Wr(t,d,h):kn(t,d,h)}return t}function vd(e,r){return Lr(e,wo(e),r)}function bd(e,r){return Lr(e,fl(e),r)}function $s(e,r){return function(t,s){var i=P(t)?yc:Wu,a=r?r():{};return i(t,e,A(s,2),a)}}function on(e){return G(function(r,t){var s=-1,i=t.length,a=i>1?t[i-1]:l,c=i>2?t[2]:l;for(a=e.length>3&&typeof a=="function"?(i--,a):l,c&&Le(t[0],t[1],c)&&(a=i<3?l:a,i=1),r=ee(r);++s<i;){var d=t[s];d&&e(r,d,s,a)}return r})}function el(e,r){return function(t,s){if(t==null)return t;if(!He(t))return e(t,s);for(var i=t.length,a=r?i:-1,c=ee(t);(r?a--:++a<i)&&s(c[a],a,c)!==!1;);return t}}function rl(e){return function(r,t,s){for(var i=-1,a=ee(r),c=s(r),d=c.length;d--;){var h=c[e?d:++i];if(t(a[h],h,a)===!1)break}return r}}function wd(e,r,t){var s=r&X,i=Mn(e);function a(){var c=this&&this!==ye&&this instanceof a?i:e;return c.apply(s?t:this,arguments)}return a}function tl(e){return function(r){r=J(r);var t=Qt(r)?Nr(r):l,s=t?t[0]:r.charAt(0),i=t?ht(t,1).join(""):r.slice(1);return s[e]()+i}}function an(e){return function(r){return Pi(ec(Vl(r).replace(xs,"")),e,"")}}function Mn(e){return function(){var r=arguments;switch(r.length){case 0:return new e;case 1:return new e(r[0]);case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[1],r[2]);case 4:return new e(r[0],r[1],r[2],r[3]);case 5:return new e(r[0],r[1],r[2],r[3],r[4]);case 6:return new e(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new e(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var t=sn(e.prototype),s=e.apply(t,r);return oe(s)?s:t}}function _d(e,r,t){var s=Mn(e);function i(){for(var a=arguments.length,c=g(a),d=a,h=ln(i);d--;)c[d]=arguments[d];var x=a<3&&c[0]!==h&&c[a-1]!==h?[]:lt(c,h);if(a-=x.length,a<t)return al(e,r,Gs,i.placeholder,l,c,x,l,l,t-a);var v=this&&this!==ye&&this instanceof i?s:e;return Ve(v,this,c)}return i}function nl(e){return function(r,t,s){var i=ee(r);if(!He(r)){var a=A(t,3);r=ve(r),t=function(d){return a(i[d],d,i)}}var c=e(r,t,s);return c>-1?i[a?r[c]:c]:l}}function sl(e){return Gr(function(r){var t=r.length,s=t,i=fr.prototype.thru;for(e&&r.reverse();s--;){var a=r[s];if(typeof a!="function")throw new dr(Y);if(i&&!c&&Ks(a)=="wrapper")var c=new fr([],!0)}for(s=c?s:t;++s<t;){a=r[s];var d=Ks(a),h=d=="wrapper"?vo(a):l;h&&jo(h[0])&&h[1]==(ne|V|Fe|We)&&!h[4].length&&h[9]==1?c=c[Ks(h[0])].apply(c,h[3]):c=a.length==1&&jo(a)?c[d]():c.thru(a)}return function(){var x=arguments,v=x[0];if(c&&x.length==1&&P(v))return c.plant(v).value();for(var b=0,w=t?r[b].apply(this,x):v;++b<t;)w=r[b].call(this,w);return w}})}function Gs(e,r,t,s,i,a,c,d,h,x){var v=r&ne,b=r&X,w=r&k,S=r&(V|Ce),R=r&Zr,W=w?l:Mn(e);function D(){for(var H=arguments.length,K=g(H),nr=H;nr--;)K[nr]=arguments[nr];if(S)var Oe=ln(D),sr=kc(K,Oe);if(s&&(K=Qa(K,s,i,S)),a&&(K=Va(K,a,c,S)),H-=sr,S&&H<x){var ce=lt(K,Oe);return al(e,r,Gs,D.placeholder,t,K,ce,d,h,x-H)}var Cr=b?t:this,Kr=w?Cr[e]:e;return H=K.length,d?K=Wd(K,d):R&&H>1&&K.reverse(),v&&h<H&&(K.length=h),this&&this!==ye&&this instanceof D&&(Kr=W||Mn(Kr)),Kr.apply(Cr,K)}return D}function il(e,r){return function(t,s){return Zu(t,e,r(s),{})}}function Hs(e,r){return function(t,s){var i;if(t===l&&s===l)return r;if(t!==l&&(i=t),s!==l){if(i===l)return s;typeof t=="string"||typeof s=="string"?(t=rr(t),s=rr(s)):(t=Ha(t),s=Ha(s)),i=e(t,s)}return i}}function po(e){return Gr(function(r){return r=se(r,er(A())),G(function(t){var s=this;return e(r,function(i){return Ve(i,s,t)})})})}function qs(e,r){r=r===l?" ":rr(r);var t=r.length;if(t<2)return t?oo(r,e):r;var s=oo(r,Ts(e/Vt(r)));return Qt(r)?ht(Nr(s),0,e).join(""):s.slice(0,e)}function jd(e,r,t,s){var i=r&X,a=Mn(e);function c(){for(var d=-1,h=arguments.length,x=-1,v=s.length,b=g(v+h),w=this&&this!==ye&&this instanceof c?a:e;++x<v;)b[x]=s[x];for(;h--;)b[x++]=arguments[++d];return Ve(w,i?t:this,b)}return c}function ol(e){return function(r,t,s){return s&&typeof s!="number"&&Le(r,t,s)&&(t=s=l),r=zr(r),t===l?(t=r,r=0):t=zr(t),s=s===l?r<t?1:-1:zr(s),ad(r,t,s,e)}}function zs(e){return function(r,t){return typeof r=="string"&&typeof t=="string"||(r=mr(r),t=mr(t)),e(r,t)}}function al(e,r,t,s,i,a,c,d,h,x){var v=r&V,b=v?c:l,w=v?l:c,S=v?a:l,R=v?l:a;r|=v?Fe:Xe,r&=~(v?Xe:Fe),r&or||(r&=-4);var W=[e,r,i,S,b,R,w,d,h,x],D=t.apply(l,W);return jo(e)&&bl(D,W),D.placeholder=s,wl(D,e,r)}function go(e){var r=fe[e];return function(t,s){if(t=mr(t),s=s==null?0:Ee(M(s),292),s&&wa(t)){var i=(J(t)+"e").split("e"),a=r(i[0]+"e"+(+i[1]+s));return i=(J(a)+"e").split("e"),+(i[0]+"e"+(+i[1]-s))}return r(t)}}var Nd=tn&&1/_s(new tn([,-0]))[1]==vr?function(e){return new tn(e)}:Po;function ll(e){return function(r){var t=Ae(r);return t==_e?Hi(r):t==Te?Fc(r):Ic(r,e(r))}}function $r(e,r,t,s,i,a,c,d){var h=r&k;if(!h&&typeof e!="function")throw new dr(Y);var x=s?s.length:0;if(x||(r&=-97,s=i=l),c=c===l?c:he(M(c),0),d=d===l?d:M(d),x-=i?i.length:0,r&Xe){var v=s,b=i;s=i=l}var w=h?l:vo(e),S=[e,r,t,s,i,v,b,a,c,d];if(w&&Md(S,w),e=S[0],r=S[1],t=S[2],s=S[3],i=S[4],d=S[9]=S[9]===l?h?0:e.length:he(S[9]-x,0),!d&&r&(V|Ce)&&(r&=-25),!r||r==X)var R=wd(e,r,t);else r==V||r==Ce?R=_d(e,r,d):(r==Fe||r==(X|Fe))&&!i.length?R=jd(e,r,t,s):R=Gs.apply(l,S);var W=w?$a:bl;return wl(W(R,S),e,r)}function cl(e,r,t,s){return e===l||Sr(e,rn[t])&&!Q.call(s,t)?r:e}function ul(e,r,t,s,i,a){return oe(e)&&oe(r)&&(a.set(r,e),Bs(e,r,l,ul,a),a.delete(r)),e}function yd(e){return Wn(e)?l:e}function dl(e,r,t,s,i,a){var c=t&te,d=e.length,h=r.length;if(d!=h&&!(c&&h>d))return!1;var x=a.get(e),v=a.get(r);if(x&&v)return x==r&&v==e;var b=-1,w=!0,S=t&F?new Dt:l;for(a.set(e,r),a.set(r,e);++b<d;){var R=e[b],W=r[b];if(s)var D=c?s(W,R,b,r,e,a):s(R,W,b,e,r,a);if(D!==l){if(D)continue;w=!1;break}if(S){if(!Mi(r,function(H,K){if(!En(S,K)&&(R===H||i(R,H,t,s,a)))return S.push(K)})){w=!1;break}}else if(!(R===W||i(R,W,t,s,a))){w=!1;break}}return a.delete(e),a.delete(r),w}function Sd(e,r,t,s,i,a,c){switch(t){case Dr:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case jt:return!(e.byteLength!=r.byteLength||!a(new Es(e),new Es(r)));case Rr:case Je:case vt:return Sr(+e,+r);case et:return e.name==r.name&&e.message==r.message;case rt:case tt:return e==r+"";case _e:var d=Hi;case Te:var h=s&te;if(d||(d=_s),e.size!=r.size&&!h)return!1;var x=c.get(e);if(x)return x==r;s|=F,c.set(e,r);var v=dl(d(e),d(r),s,i,a,c);return c.delete(e),v;case wt:if(In)return In.call(e)==In.call(r)}return!1}function Cd(e,r,t,s,i,a){var c=t&te,d=mo(e),h=d.length,x=mo(r),v=x.length;if(h!=v&&!c)return!1;for(var b=h;b--;){var w=d[b];if(!(c?w in r:Q.call(r,w)))return!1}var S=a.get(e),R=a.get(r);if(S&&R)return S==r&&R==e;var W=!0;a.set(e,r),a.set(r,e);for(var D=c;++b<h;){w=d[b];var H=e[w],K=r[w];if(s)var nr=c?s(K,H,w,r,e,a):s(H,K,w,e,r,a);if(!(nr===l?H===K||i(H,K,t,s,a):nr)){W=!1;break}D||(D=w=="constructor")}if(W&&!D){var Oe=e.constructor,sr=r.constructor;Oe!=sr&&"constructor"in e&&"constructor"in r&&!(typeof Oe=="function"&&Oe instanceof Oe&&typeof sr=="function"&&sr instanceof sr)&&(W=!1)}return a.delete(e),a.delete(r),W}function Gr(e){return yo(xl(e,l,Cl),e+"")}function mo(e){return Ta(e,ve,wo)}function xo(e){return Ta(e,qe,fl)}var vo=ks?function(e){return ks.get(e)}:Po;function Ks(e){for(var r=e.name+"",t=nn[r],s=Q.call(nn,r)?t.length:0;s--;){var i=t[s],a=i.func;if(a==null||a==e)return i.name}return r}function ln(e){var r=Q.call(o,"placeholder")?o:e;return r.placeholder}function A(){var e=o.iteratee||Oo;return e=e===Oo?La:e,arguments.length?e(arguments[0],arguments[1]):e}function Ys(e,r){var t=e.__data__;return Ld(r)?t[typeof r=="string"?"string":"hash"]:t.map}function bo(e){for(var r=ve(e),t=r.length;t--;){var s=r[t],i=e[s];r[t]=[s,i,gl(i)]}return r}function kt(e,r){var t=Pc(e,r);return ka(t)?t:l}function Ed(e){var r=Q.call(e,At),t=e[At];try{e[At]=l;var s=!0}catch{}var i=Ss.call(e);return s&&(r?e[At]=t:delete e[At]),i}var wo=zi?function(e){return e==null?[]:(e=ee(e),ot(zi(e),function(r){return va.call(e,r)}))}:Mo,fl=zi?function(e){for(var r=[];e;)at(r,wo(e)),e=As(e);return r}:Mo,Ae=ke;(Ki&&Ae(new Ki(new ArrayBuffer(1)))!=Dr||Rn&&Ae(new Rn)!=_e||Yi&&Ae(Yi.resolve())!=bt||tn&&Ae(new tn)!=Te||Dn&&Ae(new Dn)!=_t)&&(Ae=function(e){var r=ke(e),t=r==_r?e.constructor:l,s=t?Lt(t):"";if(s)switch(s){case cu:return Dr;case uu:return _e;case du:return bt;case fu:return Te;case hu:return _t}return r});function Ad(e,r,t){for(var s=-1,i=t.length;++s<i;){var a=t[s],c=a.size;switch(a.type){case"drop":e+=c;break;case"dropRight":r-=c;break;case"take":r=Ee(r,e+c);break;case"takeRight":e=he(e,r-c);break}}return{start:e,end:r}}function Rd(e){var r=e.match(ji);return r?r[1].split(Ni):[]}function hl(e,r,t){r=ft(r,e);for(var s=-1,i=r.length,a=!1;++s<i;){var c=Or(r[s]);if(!(a=e!=null&&t(e,c)))break;e=e[c]}return a||++s!=i?a:(i=e==null?0:e.length,!!i&&ri(i)&&Hr(c,i)&&(P(e)||Ot(e)))}function Dd(e){var r=e.length,t=new e.constructor(r);return r&&typeof e[0]=="string"&&Q.call(e,"index")&&(t.index=e.index,t.input=e.input),t}function pl(e){return typeof e.constructor=="function"&&!Bn(e)?sn(As(e)):{}}function Td(e,r,t){var s=e.constructor;switch(r){case jt:return ho(e);case Rr:case Je:return new s(+e);case Dr:return pd(e,t);case ar:case Ft:case Nt:case hn:case lr:case Tr:case E:case pn:case jr:return Xa(e,t);case _e:return new s;case vt:case tt:return new s(e);case rt:return gd(e);case Te:return new s;case wt:return md(e)}}function Id(e,r){var t=r.length;if(!t)return e;var s=t-1;return r[s]=(t>1?"& ":"")+r[s],r=r.join(t>2?", ":" "),e.replace(_i,`{
/* [wrapped with `+r+`] */
`)}function kd(e){return P(e)||Ot(e)||!!(ba&&e&&e[ba])}function Hr(e,r){var t=typeof e;return r=r??br,!!r&&(t=="number"||t!="symbol"&&Ai.test(e))&&e>-1&&e%1==0&&e<r}function Le(e,r,t){if(!oe(t))return!1;var s=typeof r;return(s=="number"?He(t)&&Hr(r,t.length):s=="string"&&r in t)?Sr(t[r],e):!1}function _o(e,r){if(P(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||tr(e)?!0:xi.test(e)||!Qn.test(e)||r!=null&&e in ee(r)}function Ld(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function jo(e){var r=Ks(e),t=o[r];if(typeof t!="function"||!(r in z.prototype))return!1;if(e===t)return!0;var s=vo(t);return!!s&&e===s[0]}function Od(e){return!!ga&&ga in e}var Ud=Ns?qr:Bo;function Bn(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||rn;return e===t}function gl(e){return e===e&&!oe(e)}function ml(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==l||e in ee(t))}}function Pd(e){var r=Vs(e,function(s){return t.size===re&&t.clear(),s}),t=r.cache;return r}function Md(e,r){var t=e[1],s=r[1],i=t|s,a=i<(X|k|ne),c=s==ne&&t==V||s==ne&&t==We&&e[7].length<=r[8]||s==(ne|We)&&r[7].length<=r[8]&&t==V;if(!(a||c))return e;s&X&&(e[2]=r[2],i|=t&X?0:or);var d=r[3];if(d){var h=e[3];e[3]=h?Qa(h,d,r[4]):d,e[4]=h?lt(e[3],Ar):r[4]}return d=r[5],d&&(h=e[5],e[5]=h?Va(h,d,r[6]):d,e[6]=h?lt(e[5],Ar):r[6]),d=r[7],d&&(e[7]=d),s&ne&&(e[8]=e[8]==null?r[8]:Ee(e[8],r[8])),e[9]==null&&(e[9]=r[9]),e[0]=r[0],e[1]=i,e}function Bd(e){var r=[];if(e!=null)for(var t in ee(e))r.push(t);return r}function Fd(e){return Ss.call(e)}function xl(e,r,t){return r=he(r===l?e.length-1:r,0),function(){for(var s=arguments,i=-1,a=he(s.length-r,0),c=g(a);++i<a;)c[i]=s[r+i];i=-1;for(var d=g(r+1);++i<r;)d[i]=s[i];return d[r]=t(c),Ve(e,this,d)}}function vl(e,r){return r.length<2?e:It(e,pr(r,0,-1))}function Wd(e,r){for(var t=e.length,s=Ee(r.length,t),i=Ge(e);s--;){var a=r[s];e[s]=Hr(a,t)?i[a]:l}return e}function No(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}var bl=_l($a),Fn=tu||function(e,r){return ye.setTimeout(e,r)},yo=_l(ud);function wl(e,r,t){var s=r+"";return yo(e,Id(s,$d(Rd(s),t)))}function _l(e){var r=0,t=0;return function(){var s=ou(),i=de-(s-t);if(t=s,i>0){if(++r>=gt)return arguments[0]}else r=0;return e.apply(l,arguments)}}function Zs(e,r){var t=-1,s=e.length,i=s-1;for(r=r===l?s:r;++t<r;){var a=io(t,i),c=e[a];e[a]=e[t],e[t]=c}return e.length=r,e}var jl=Pd(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(vi,function(t,s,i,a){r.push(i?a.replace(es,"$1"):s||t)}),r});function Or(e){if(typeof e=="string"||tr(e))return e;var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}function Lt(e){if(e!=null){try{return ys.call(e)}catch{}try{return e+""}catch{}}return""}function $d(e,r){return ur(Kn,function(t){var s="_."+t[0];r&t[1]&&!bs(e,s)&&e.push(s)}),e.sort()}function Nl(e){if(e instanceof z)return e.clone();var r=new fr(e.__wrapped__,e.__chain__);return r.__actions__=Ge(e.__actions__),r.__index__=e.__index__,r.__values__=e.__values__,r}function Gd(e,r,t){(t?Le(e,r,t):r===l)?r=1:r=he(M(r),0);var s=e==null?0:e.length;if(!s||r<1)return[];for(var i=0,a=0,c=g(Ts(s/r));i<s;)c[a++]=pr(e,i,i+=r);return c}function Hd(e){for(var r=-1,t=e==null?0:e.length,s=0,i=[];++r<t;){var a=e[r];a&&(i[s++]=a)}return i}function qd(){var e=arguments.length;if(!e)return[];for(var r=g(e-1),t=arguments[0],s=e;s--;)r[s-1]=arguments[s];return at(P(t)?Ge(t):[t],Se(r,1))}var zd=G(function(e,r){return le(e)?Ln(e,Se(r,1,le,!0)):[]}),Kd=G(function(e,r){var t=gr(r);return le(t)&&(t=l),le(e)?Ln(e,Se(r,1,le,!0),A(t,2)):[]}),Yd=G(function(e,r){var t=gr(r);return le(t)&&(t=l),le(e)?Ln(e,Se(r,1,le,!0),l,t):[]});function Zd(e,r,t){var s=e==null?0:e.length;return s?(r=t||r===l?1:M(r),pr(e,r<0?0:r,s)):[]}function Xd(e,r,t){var s=e==null?0:e.length;return s?(r=t||r===l?1:M(r),r=s-r,pr(e,0,r<0?0:r)):[]}function Jd(e,r){return e&&e.length?Ws(e,A(r,3),!0,!0):[]}function Qd(e,r){return e&&e.length?Ws(e,A(r,3),!0):[]}function Vd(e,r,t,s){var i=e==null?0:e.length;return i?(t&&typeof t!="number"&&Le(e,r,t)&&(t=0,s=i),qu(e,r,t,s)):[]}function yl(e,r,t){var s=e==null?0:e.length;if(!s)return-1;var i=t==null?0:M(t);return i<0&&(i=he(s+i,0)),ws(e,A(r,3),i)}function Sl(e,r,t){var s=e==null?0:e.length;if(!s)return-1;var i=s-1;return t!==l&&(i=M(t),i=t<0?he(s+i,0):Ee(i,s-1)),ws(e,A(r,3),i,!0)}function Cl(e){var r=e==null?0:e.length;return r?Se(e,1):[]}function ef(e){var r=e==null?0:e.length;return r?Se(e,vr):[]}function rf(e,r){var t=e==null?0:e.length;return t?(r=r===l?1:M(r),Se(e,r)):[]}function tf(e){for(var r=-1,t=e==null?0:e.length,s={};++r<t;){var i=e[r];s[i[0]]=i[1]}return s}function El(e){return e&&e.length?e[0]:l}function nf(e,r,t){var s=e==null?0:e.length;if(!s)return-1;var i=t==null?0:M(t);return i<0&&(i=he(s+i,0)),Jt(e,r,i)}function sf(e){var r=e==null?0:e.length;return r?pr(e,0,-1):[]}var of=G(function(e){var r=se(e,uo);return r.length&&r[0]===e[0]?eo(r):[]}),af=G(function(e){var r=gr(e),t=se(e,uo);return r===gr(t)?r=l:t.pop(),t.length&&t[0]===e[0]?eo(t,A(r,2)):[]}),lf=G(function(e){var r=gr(e),t=se(e,uo);return r=typeof r=="function"?r:l,r&&t.pop(),t.length&&t[0]===e[0]?eo(t,l,r):[]});function cf(e,r){return e==null?"":su.call(e,r)}function gr(e){var r=e==null?0:e.length;return r?e[r-1]:l}function uf(e,r,t){var s=e==null?0:e.length;if(!s)return-1;var i=s;return t!==l&&(i=M(t),i=i<0?he(s+i,0):Ee(i,s-1)),r===r?$c(e,r,i):ws(e,aa,i,!0)}function df(e,r){return e&&e.length?Ma(e,M(r)):l}var ff=G(Al);function Al(e,r){return e&&e.length&&r&&r.length?so(e,r):e}function hf(e,r,t){return e&&e.length&&r&&r.length?so(e,r,A(t,2)):e}function pf(e,r,t){return e&&e.length&&r&&r.length?so(e,r,l,t):e}var gf=Gr(function(e,r){var t=e==null?0:e.length,s=Xi(e,r);return Wa(e,se(r,function(i){return Hr(i,t)?+i:i}).sort(Ja)),s});function mf(e,r){var t=[];if(!(e&&e.length))return t;var s=-1,i=[],a=e.length;for(r=A(r,3);++s<a;){var c=e[s];r(c,s,e)&&(t.push(c),i.push(s))}return Wa(e,i),t}function So(e){return e==null?e:lu.call(e)}function xf(e,r,t){var s=e==null?0:e.length;return s?(t&&typeof t!="number"&&Le(e,r,t)?(r=0,t=s):(r=r==null?0:M(r),t=t===l?s:M(t)),pr(e,r,t)):[]}function vf(e,r){return Fs(e,r)}function bf(e,r,t){return ao(e,r,A(t,2))}function wf(e,r){var t=e==null?0:e.length;if(t){var s=Fs(e,r);if(s<t&&Sr(e[s],r))return s}return-1}function _f(e,r){return Fs(e,r,!0)}function jf(e,r,t){return ao(e,r,A(t,2),!0)}function Nf(e,r){var t=e==null?0:e.length;if(t){var s=Fs(e,r,!0)-1;if(Sr(e[s],r))return s}return-1}function yf(e){return e&&e.length?Ga(e):[]}function Sf(e,r){return e&&e.length?Ga(e,A(r,2)):[]}function Cf(e){var r=e==null?0:e.length;return r?pr(e,1,r):[]}function Ef(e,r,t){return e&&e.length?(r=t||r===l?1:M(r),pr(e,0,r<0?0:r)):[]}function Af(e,r,t){var s=e==null?0:e.length;return s?(r=t||r===l?1:M(r),r=s-r,pr(e,r<0?0:r,s)):[]}function Rf(e,r){return e&&e.length?Ws(e,A(r,3),!1,!0):[]}function Df(e,r){return e&&e.length?Ws(e,A(r,3)):[]}var Tf=G(function(e){return dt(Se(e,1,le,!0))}),If=G(function(e){var r=gr(e);return le(r)&&(r=l),dt(Se(e,1,le,!0),A(r,2))}),kf=G(function(e){var r=gr(e);return r=typeof r=="function"?r:l,dt(Se(e,1,le,!0),l,r)});function Lf(e){return e&&e.length?dt(e):[]}function Of(e,r){return e&&e.length?dt(e,A(r,2)):[]}function Uf(e,r){return r=typeof r=="function"?r:l,e&&e.length?dt(e,l,r):[]}function Co(e){if(!(e&&e.length))return[];var r=0;return e=ot(e,function(t){if(le(t))return r=he(t.length,r),!0}),$i(r,function(t){return se(e,Bi(t))})}function Rl(e,r){if(!(e&&e.length))return[];var t=Co(e);return r==null?t:se(t,function(s){return Ve(r,l,s)})}var Pf=G(function(e,r){return le(e)?Ln(e,r):[]}),Mf=G(function(e){return co(ot(e,le))}),Bf=G(function(e){var r=gr(e);return le(r)&&(r=l),co(ot(e,le),A(r,2))}),Ff=G(function(e){var r=gr(e);return r=typeof r=="function"?r:l,co(ot(e,le),l,r)}),Wf=G(Co);function $f(e,r){return Ka(e||[],r||[],kn)}function Gf(e,r){return Ka(e||[],r||[],Pn)}var Hf=G(function(e){var r=e.length,t=r>1?e[r-1]:l;return t=typeof t=="function"?(e.pop(),t):l,Rl(e,t)});function Dl(e){var r=o(e);return r.__chain__=!0,r}function qf(e,r){return r(e),e}function Xs(e,r){return r(e)}var zf=Gr(function(e){var r=e.length,t=r?e[0]:0,s=this.__wrapped__,i=function(a){return Xi(a,e)};return r>1||this.__actions__.length||!(s instanceof z)||!Hr(t)?this.thru(i):(s=s.slice(t,+t+(r?1:0)),s.__actions__.push({func:Xs,args:[i],thisArg:l}),new fr(s,this.__chain__).thru(function(a){return r&&!a.length&&a.push(l),a}))});function Kf(){return Dl(this)}function Yf(){return new fr(this.value(),this.__chain__)}function Zf(){this.__values__===l&&(this.__values__=Hl(this.value()));var e=this.__index__>=this.__values__.length,r=e?l:this.__values__[this.__index__++];return{done:e,value:r}}function Xf(){return this}function Jf(e){for(var r,t=this;t instanceof Os;){var s=Nl(t);s.__index__=0,s.__values__=l,r?i.__wrapped__=s:r=s;var i=s;t=t.__wrapped__}return i.__wrapped__=e,r}function Qf(){var e=this.__wrapped__;if(e instanceof z){var r=e;return this.__actions__.length&&(r=new z(this)),r=r.reverse(),r.__actions__.push({func:Xs,args:[So],thisArg:l}),new fr(r,this.__chain__)}return this.thru(So)}function Vf(){return za(this.__wrapped__,this.__actions__)}var eh=$s(function(e,r,t){Q.call(e,t)?++e[t]:Wr(e,t,1)});function rh(e,r,t){var s=P(e)?ia:Hu;return t&&Le(e,r,t)&&(r=l),s(e,A(r,3))}function th(e,r){var t=P(e)?ot:Ra;return t(e,A(r,3))}var nh=nl(yl),sh=nl(Sl);function ih(e,r){return Se(Js(e,r),1)}function oh(e,r){return Se(Js(e,r),vr)}function ah(e,r,t){return t=t===l?1:M(t),Se(Js(e,r),t)}function Tl(e,r){var t=P(e)?ur:ut;return t(e,A(r,3))}function Il(e,r){var t=P(e)?Sc:Aa;return t(e,A(r,3))}var lh=$s(function(e,r,t){Q.call(e,t)?e[t].push(r):Wr(e,t,[r])});function ch(e,r,t,s){e=He(e)?e:un(e),t=t&&!s?M(t):0;var i=e.length;return t<0&&(t=he(i+t,0)),ti(e)?t<=i&&e.indexOf(r,t)>-1:!!i&&Jt(e,r,t)>-1}var uh=G(function(e,r,t){var s=-1,i=typeof r=="function",a=He(e)?g(e.length):[];return ut(e,function(c){a[++s]=i?Ve(r,c,t):On(c,r,t)}),a}),dh=$s(function(e,r,t){Wr(e,t,r)});function Js(e,r){var t=P(e)?se:Oa;return t(e,A(r,3))}function fh(e,r,t,s){return e==null?[]:(P(r)||(r=r==null?[]:[r]),t=s?l:t,P(t)||(t=t==null?[]:[t]),Ba(e,r,t))}var hh=$s(function(e,r,t){e[t?0:1].push(r)},function(){return[[],[]]});function ph(e,r,t){var s=P(e)?Pi:ca,i=arguments.length<3;return s(e,A(r,4),t,i,ut)}function gh(e,r,t){var s=P(e)?Cc:ca,i=arguments.length<3;return s(e,A(r,4),t,i,Aa)}function mh(e,r){var t=P(e)?ot:Ra;return t(e,ei(A(r,3)))}function xh(e){var r=P(e)?ya:ld;return r(e)}function vh(e,r,t){(t?Le(e,r,t):r===l)?r=1:r=M(r);var s=P(e)?Bu:cd;return s(e,r)}function bh(e){var r=P(e)?Fu:dd;return r(e)}function wh(e){if(e==null)return 0;if(He(e))return ti(e)?Vt(e):e.length;var r=Ae(e);return r==_e||r==Te?e.size:to(e).length}function _h(e,r,t){var s=P(e)?Mi:fd;return t&&Le(e,r,t)&&(r=l),s(e,A(r,3))}var jh=G(function(e,r){if(e==null)return[];var t=r.length;return t>1&&Le(e,r[0],r[1])?r=[]:t>2&&Le(r[0],r[1],r[2])&&(r=[r[0]]),Ba(e,Se(r,1),[])}),Qs=ru||function(){return ye.Date.now()};function Nh(e,r){if(typeof r!="function")throw new dr(Y);return e=M(e),function(){if(--e<1)return r.apply(this,arguments)}}function kl(e,r,t){return r=t?l:r,r=e&&r==null?e.length:r,$r(e,ne,l,l,l,l,r)}function Ll(e,r){var t;if(typeof r!="function")throw new dr(Y);return e=M(e),function(){return--e>0&&(t=r.apply(this,arguments)),e<=1&&(r=l),t}}var Eo=G(function(e,r,t){var s=X;if(t.length){var i=lt(t,ln(Eo));s|=Fe}return $r(e,s,r,t,i)}),Ol=G(function(e,r,t){var s=X|k;if(t.length){var i=lt(t,ln(Ol));s|=Fe}return $r(r,s,e,t,i)});function Ul(e,r,t){r=t?l:r;var s=$r(e,V,l,l,l,l,l,r);return s.placeholder=Ul.placeholder,s}function Pl(e,r,t){r=t?l:r;var s=$r(e,Ce,l,l,l,l,l,r);return s.placeholder=Pl.placeholder,s}function Ml(e,r,t){var s,i,a,c,d,h,x=0,v=!1,b=!1,w=!0;if(typeof e!="function")throw new dr(Y);r=mr(r)||0,oe(t)&&(v=!!t.leading,b="maxWait"in t,a=b?he(mr(t.maxWait)||0,r):a,w="trailing"in t?!!t.trailing:w);function S(ce){var Cr=s,Kr=i;return s=i=l,x=ce,c=e.apply(Kr,Cr),c}function R(ce){return x=ce,d=Fn(H,r),v?S(ce):c}function W(ce){var Cr=ce-h,Kr=ce-x,nc=r-Cr;return b?Ee(nc,a-Kr):nc}function D(ce){var Cr=ce-h,Kr=ce-x;return h===l||Cr>=r||Cr<0||b&&Kr>=a}function H(){var ce=Qs();if(D(ce))return K(ce);d=Fn(H,W(ce))}function K(ce){return d=l,w&&s?S(ce):(s=i=l,c)}function nr(){d!==l&&Ya(d),x=0,s=h=i=d=l}function Oe(){return d===l?c:K(Qs())}function sr(){var ce=Qs(),Cr=D(ce);if(s=arguments,i=this,h=ce,Cr){if(d===l)return R(h);if(b)return Ya(d),d=Fn(H,r),S(h)}return d===l&&(d=Fn(H,r)),c}return sr.cancel=nr,sr.flush=Oe,sr}var yh=G(function(e,r){return Ea(e,1,r)}),Sh=G(function(e,r,t){return Ea(e,mr(r)||0,t)});function Ch(e){return $r(e,Zr)}function Vs(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new dr(Y);var t=function(){var s=arguments,i=r?r.apply(this,s):s[0],a=t.cache;if(a.has(i))return a.get(i);var c=e.apply(this,s);return t.cache=a.set(i,c)||a,c};return t.cache=new(Vs.Cache||Fr),t}Vs.Cache=Fr;function ei(e){if(typeof e!="function")throw new dr(Y);return function(){var r=arguments;switch(r.length){case 0:return!e.call(this);case 1:return!e.call(this,r[0]);case 2:return!e.call(this,r[0],r[1]);case 3:return!e.call(this,r[0],r[1],r[2])}return!e.apply(this,r)}}function Eh(e){return Ll(2,e)}var Ah=hd(function(e,r){r=r.length==1&&P(r[0])?se(r[0],er(A())):se(Se(r,1),er(A()));var t=r.length;return G(function(s){for(var i=-1,a=Ee(s.length,t);++i<a;)s[i]=r[i].call(this,s[i]);return Ve(e,this,s)})}),Ao=G(function(e,r){var t=lt(r,ln(Ao));return $r(e,Fe,l,r,t)}),Bl=G(function(e,r){var t=lt(r,ln(Bl));return $r(e,Xe,l,r,t)}),Rh=Gr(function(e,r){return $r(e,We,l,l,l,r)});function Dh(e,r){if(typeof e!="function")throw new dr(Y);return r=r===l?r:M(r),G(e,r)}function Th(e,r){if(typeof e!="function")throw new dr(Y);return r=r==null?0:he(M(r),0),G(function(t){var s=t[r],i=ht(t,0,r);return s&&at(i,s),Ve(e,this,i)})}function Ih(e,r,t){var s=!0,i=!0;if(typeof e!="function")throw new dr(Y);return oe(t)&&(s="leading"in t?!!t.leading:s,i="trailing"in t?!!t.trailing:i),Ml(e,r,{leading:s,maxWait:r,trailing:i})}function kh(e){return kl(e,1)}function Lh(e,r){return Ao(fo(r),e)}function Oh(){if(!arguments.length)return[];var e=arguments[0];return P(e)?e:[e]}function Uh(e){return hr(e,me)}function Ph(e,r){return r=typeof r=="function"?r:l,hr(e,me,r)}function Mh(e){return hr(e,Re|me)}function Bh(e,r){return r=typeof r=="function"?r:l,hr(e,Re|me,r)}function Fh(e,r){return r==null||Ca(e,r,ve(r))}function Sr(e,r){return e===r||e!==e&&r!==r}var Wh=zs(Vi),$h=zs(function(e,r){return e>=r}),Ot=Ia(function(){return arguments}())?Ia:function(e){return ae(e)&&Q.call(e,"callee")&&!va.call(e,"callee")},P=g.isArray,Gh=Vo?er(Vo):Xu;function He(e){return e!=null&&ri(e.length)&&!qr(e)}function le(e){return ae(e)&&He(e)}function Hh(e){return e===!0||e===!1||ae(e)&&ke(e)==Rr}var pt=nu||Bo,qh=ea?er(ea):Ju;function zh(e){return ae(e)&&e.nodeType===1&&!Wn(e)}function Kh(e){if(e==null)return!0;if(He(e)&&(P(e)||typeof e=="string"||typeof e.splice=="function"||pt(e)||cn(e)||Ot(e)))return!e.length;var r=Ae(e);if(r==_e||r==Te)return!e.size;if(Bn(e))return!to(e).length;for(var t in e)if(Q.call(e,t))return!1;return!0}function Yh(e,r){return Un(e,r)}function Zh(e,r,t){t=typeof t=="function"?t:l;var s=t?t(e,r):l;return s===l?Un(e,r,l,t):!!s}function Ro(e){if(!ae(e))return!1;var r=ke(e);return r==et||r==Yn||typeof e.message=="string"&&typeof e.name=="string"&&!Wn(e)}function Xh(e){return typeof e=="number"&&wa(e)}function qr(e){if(!oe(e))return!1;var r=ke(e);return r==xt||r==Zn||r==pi||r==fn}function Fl(e){return typeof e=="number"&&e==M(e)}function ri(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=br}function oe(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}function ae(e){return e!=null&&typeof e=="object"}var Wl=ra?er(ra):Vu;function Jh(e,r){return e===r||ro(e,r,bo(r))}function Qh(e,r,t){return t=typeof t=="function"?t:l,ro(e,r,bo(r),t)}function Vh(e){return $l(e)&&e!=+e}function ep(e){if(Ud(e))throw new U(we);return ka(e)}function rp(e){return e===null}function tp(e){return e==null}function $l(e){return typeof e=="number"||ae(e)&&ke(e)==vt}function Wn(e){if(!ae(e)||ke(e)!=_r)return!1;var r=As(e);if(r===null)return!0;var t=Q.call(r,"constructor")&&r.constructor;return typeof t=="function"&&t instanceof t&&ys.call(t)==Jc}var Do=ta?er(ta):ed;function np(e){return Fl(e)&&e>=-9007199254740991&&e<=br}var Gl=na?er(na):rd;function ti(e){return typeof e=="string"||!P(e)&&ae(e)&&ke(e)==tt}function tr(e){return typeof e=="symbol"||ae(e)&&ke(e)==wt}var cn=sa?er(sa):td;function sp(e){return e===l}function ip(e){return ae(e)&&Ae(e)==_t}function op(e){return ae(e)&&ke(e)==Bt}var ap=zs(no),lp=zs(function(e,r){return e<=r});function Hl(e){if(!e)return[];if(He(e))return ti(e)?Nr(e):Ge(e);if(An&&e[An])return Bc(e[An]());var r=Ae(e),t=r==_e?Hi:r==Te?_s:un;return t(e)}function zr(e){if(!e)return e===0?e:0;if(e=mr(e),e===vr||e===-1/0){var r=e<0?-1:1;return r*Pt}return e===e?e:0}function M(e){var r=zr(e),t=r%1;return r===r?t?r-t:r:0}function ql(e){return e?Tt(M(e),0,De):0}function mr(e){if(typeof e=="number")return e;if(tr(e))return wr;if(oe(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=oe(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=ua(e);var t=Ei.test(e);return t||St.test(e)?jc(e.slice(2),t?2:8):Ci.test(e)?wr:+e}function zl(e){return Lr(e,qe(e))}function cp(e){return e?Tt(M(e),-9007199254740991,br):e===0?e:0}function J(e){return e==null?"":rr(e)}var up=on(function(e,r){if(Bn(r)||He(r)){Lr(r,ve(r),e);return}for(var t in r)Q.call(r,t)&&kn(e,t,r[t])}),Kl=on(function(e,r){Lr(r,qe(r),e)}),ni=on(function(e,r,t,s){Lr(r,qe(r),e,s)}),dp=on(function(e,r,t,s){Lr(r,ve(r),e,s)}),fp=Gr(Xi);function hp(e,r){var t=sn(e);return r==null?t:Sa(t,r)}var pp=G(function(e,r){e=ee(e);var t=-1,s=r.length,i=s>2?r[2]:l;for(i&&Le(r[0],r[1],i)&&(s=1);++t<s;)for(var a=r[t],c=qe(a),d=-1,h=c.length;++d<h;){var x=c[d],v=e[x];(v===l||Sr(v,rn[x])&&!Q.call(e,x))&&(e[x]=a[x])}return e}),gp=G(function(e){return e.push(l,ul),Ve(Yl,l,e)});function mp(e,r){return oa(e,A(r,3),kr)}function xp(e,r){return oa(e,A(r,3),Qi)}function vp(e,r){return e==null?e:Ji(e,A(r,3),qe)}function bp(e,r){return e==null?e:Da(e,A(r,3),qe)}function wp(e,r){return e&&kr(e,A(r,3))}function _p(e,r){return e&&Qi(e,A(r,3))}function jp(e){return e==null?[]:Ms(e,ve(e))}function Np(e){return e==null?[]:Ms(e,qe(e))}function To(e,r,t){var s=e==null?l:It(e,r);return s===l?t:s}function yp(e,r){return e!=null&&hl(e,r,zu)}function Io(e,r){return e!=null&&hl(e,r,Ku)}var Sp=il(function(e,r,t){r!=null&&typeof r.toString!="function"&&(r=Ss.call(r)),e[r]=t},Lo(ze)),Cp=il(function(e,r,t){r!=null&&typeof r.toString!="function"&&(r=Ss.call(r)),Q.call(e,r)?e[r].push(t):e[r]=[t]},A),Ep=G(On);function ve(e){return He(e)?Na(e):to(e)}function qe(e){return He(e)?Na(e,!0):nd(e)}function Ap(e,r){var t={};return r=A(r,3),kr(e,function(s,i,a){Wr(t,r(s,i,a),s)}),t}function Rp(e,r){var t={};return r=A(r,3),kr(e,function(s,i,a){Wr(t,i,r(s,i,a))}),t}var Dp=on(function(e,r,t){Bs(e,r,t)}),Yl=on(function(e,r,t,s){Bs(e,r,t,s)}),Tp=Gr(function(e,r){var t={};if(e==null)return t;var s=!1;r=se(r,function(a){return a=ft(a,e),s||(s=a.length>1),a}),Lr(e,xo(e),t),s&&(t=hr(t,Re|ir|me,yd));for(var i=r.length;i--;)lo(t,r[i]);return t});function Ip(e,r){return Zl(e,ei(A(r)))}var kp=Gr(function(e,r){return e==null?{}:id(e,r)});function Zl(e,r){if(e==null)return{};var t=se(xo(e),function(s){return[s]});return r=A(r),Fa(e,t,function(s,i){return r(s,i[0])})}function Lp(e,r,t){r=ft(r,e);var s=-1,i=r.length;for(i||(i=1,e=l);++s<i;){var a=e==null?l:e[Or(r[s])];a===l&&(s=i,a=t),e=qr(a)?a.call(e):a}return e}function Op(e,r,t){return e==null?e:Pn(e,r,t)}function Up(e,r,t,s){return s=typeof s=="function"?s:l,e==null?e:Pn(e,r,t,s)}var Xl=ll(ve),Jl=ll(qe);function Pp(e,r,t){var s=P(e),i=s||pt(e)||cn(e);if(r=A(r,4),t==null){var a=e&&e.constructor;i?t=s?new a:[]:oe(e)?t=qr(a)?sn(As(e)):{}:t={}}return(i?ur:kr)(e,function(c,d,h){return r(t,c,d,h)}),t}function Mp(e,r){return e==null?!0:lo(e,r)}function Bp(e,r,t){return e==null?e:qa(e,r,fo(t))}function Fp(e,r,t,s){return s=typeof s=="function"?s:l,e==null?e:qa(e,r,fo(t),s)}function un(e){return e==null?[]:Gi(e,ve(e))}function Wp(e){return e==null?[]:Gi(e,qe(e))}function $p(e,r,t){return t===l&&(t=r,r=l),t!==l&&(t=mr(t),t=t===t?t:0),r!==l&&(r=mr(r),r=r===r?r:0),Tt(mr(e),r,t)}function Gp(e,r,t){return r=zr(r),t===l?(t=r,r=0):t=zr(t),e=mr(e),Yu(e,r,t)}function Hp(e,r,t){if(t&&typeof t!="boolean"&&Le(e,r,t)&&(r=t=l),t===l&&(typeof r=="boolean"?(t=r,r=l):typeof e=="boolean"&&(t=e,e=l)),e===l&&r===l?(e=0,r=1):(e=zr(e),r===l?(r=e,e=0):r=zr(r)),e>r){var s=e;e=r,r=s}if(t||e%1||r%1){var i=_a();return Ee(e+i*(r-e+_c("1e-"+((i+"").length-1))),r)}return io(e,r)}var qp=an(function(e,r,t){return r=r.toLowerCase(),e+(t?Ql(r):r)});function Ql(e){return ko(J(e).toLowerCase())}function Vl(e){return e=J(e),e&&e.replace(st,Lc).replace(vs,"")}function zp(e,r,t){e=J(e),r=rr(r);var s=e.length;t=t===l?s:Tt(M(t),0,s);var i=t;return t-=r.length,t>=0&&e.slice(t,i)==r}function Kp(e){return e=J(e),e&&Wt.test(e)?e.replace(gn,Oc):e}function Yp(e){return e=J(e),e&&bi.test(e)?e.replace(mn,"\\$&"):e}var Zp=an(function(e,r,t){return e+(t?"-":"")+r.toLowerCase()}),Xp=an(function(e,r,t){return e+(t?" ":"")+r.toLowerCase()}),Jp=tl("toLowerCase");function Qp(e,r,t){e=J(e),r=M(r);var s=r?Vt(e):0;if(!r||s>=r)return e;var i=(r-s)/2;return qs(Is(i),t)+e+qs(Ts(i),t)}function Vp(e,r,t){e=J(e),r=M(r);var s=r?Vt(e):0;return r&&s<r?e+qs(r-s,t):e}function eg(e,r,t){e=J(e),r=M(r);var s=r?Vt(e):0;return r&&s<r?qs(r-s,t)+e:e}function rg(e,r,t){return t||r==null?r=0:r&&(r=+r),au(J(e).replace(xn,""),r||0)}function tg(e,r,t){return(t?Le(e,r,t):r===l)?r=1:r=M(r),oo(J(e),r)}function ng(){var e=arguments,r=J(e[0]);return e.length<3?r:r.replace(e[1],e[2])}var sg=an(function(e,r,t){return e+(t?"_":"")+r.toLowerCase()});function ig(e,r,t){return t&&typeof t!="number"&&Le(e,r,t)&&(r=t=l),t=t===l?De:t>>>0,t?(e=J(e),e&&(typeof r=="string"||r!=null&&!Do(r))&&(r=rr(r),!r&&Qt(e))?ht(Nr(e),0,t):e.split(r,t)):[]}var og=an(function(e,r,t){return e+(t?" ":"")+ko(r)});function ag(e,r,t){return e=J(e),t=t==null?0:Tt(M(t),0,e.length),r=rr(r),e.slice(t,t+r.length)==r}function lg(e,r,t){var s=o.templateSettings;t&&Le(e,r,t)&&(r=l),e=J(e),r=ni({},r,s,cl);var i=ni({},r.imports,s.imports,cl),a=ve(i),c=Gi(i,a),d,h,x=0,v=r.interpolate||Gt,b="__p += '",w=qi((r.escape||Gt).source+"|"+v.source+"|"+(v===Jn?Si:Gt).source+"|"+(r.evaluate||Gt).source+"|$","g"),S="//# sourceURL="+(Q.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++q+"]")+`
`;e.replace(w,function(D,H,K,nr,Oe,sr){return K||(K=nr),b+=e.slice(x,sr).replace(Ri,Uc),H&&(d=!0,b+=`' +
__e(`+H+`) +
'`),Oe&&(h=!0,b+=`';
`+Oe+`;
__p += '`),K&&(b+=`' +
((__t = (`+K+`)) == null ? '' : __t) +
'`),x=sr+D.length,D}),b+=`';
`;var R=Q.call(r,"variable")&&r.variable;if(!R)b=`with (obj) {
`+b+`
}
`;else if(yi.test(R))throw new U(Ur);b=(h?b.replace(je,""):b).replace(yt,"$1").replace(mi,"$1;"),b="function("+(R||"obj")+`) {
`+(R?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(d?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+b+`return __p
}`;var W=rc(function(){return Z(a,S+"return "+b).apply(l,c)});if(W.source=b,Ro(W))throw W;return W}function cg(e){return J(e).toLowerCase()}function ug(e){return J(e).toUpperCase()}function dg(e,r,t){if(e=J(e),e&&(t||r===l))return ua(e);if(!e||!(r=rr(r)))return e;var s=Nr(e),i=Nr(r),a=da(s,i),c=fa(s,i)+1;return ht(s,a,c).join("")}function fg(e,r,t){if(e=J(e),e&&(t||r===l))return e.slice(0,pa(e)+1);if(!e||!(r=rr(r)))return e;var s=Nr(e),i=fa(s,Nr(r))+1;return ht(s,0,i).join("")}function hg(e,r,t){if(e=J(e),e&&(t||r===l))return e.replace(xn,"");if(!e||!(r=rr(r)))return e;var s=Nr(e),i=da(s,Nr(r));return ht(s,i).join("")}function pg(e,r){var t=Xr,s=xr;if(oe(r)){var i="separator"in r?r.separator:i;t="length"in r?M(r.length):t,s="omission"in r?rr(r.omission):s}e=J(e);var a=e.length;if(Qt(e)){var c=Nr(e);a=c.length}if(t>=a)return e;var d=t-Vt(s);if(d<1)return s;var h=c?ht(c,0,d).join(""):e.slice(0,d);if(i===l)return h+s;if(c&&(d+=h.length-d),Do(i)){if(e.slice(d).search(i)){var x,v=h;for(i.global||(i=qi(i.source,J(rs.exec(i))+"g")),i.lastIndex=0;x=i.exec(v);)var b=x.index;h=h.slice(0,b===l?d:b)}}else if(e.indexOf(rr(i),d)!=d){var w=h.lastIndexOf(i);w>-1&&(h=h.slice(0,w))}return h+s}function gg(e){return e=J(e),e&&nt.test(e)?e.replace(Xn,Gc):e}var mg=an(function(e,r,t){return e+(t?" ":"")+r.toUpperCase()}),ko=tl("toUpperCase");function ec(e,r,t){return e=J(e),r=t?l:r,r===l?Mc(e)?zc(e):Rc(e):e.match(r)||[]}var rc=G(function(e,r){try{return Ve(e,l,r)}catch(t){return Ro(t)?t:new U(t)}}),xg=Gr(function(e,r){return ur(r,function(t){t=Or(t),Wr(e,t,Eo(e[t],e))}),e});function vg(e){var r=e==null?0:e.length,t=A();return e=r?se(e,function(s){if(typeof s[1]!="function")throw new dr(Y);return[t(s[0]),s[1]]}):[],G(function(s){for(var i=-1;++i<r;){var a=e[i];if(Ve(a[0],this,s))return Ve(a[1],this,s)}})}function bg(e){return Gu(hr(e,Re))}function Lo(e){return function(){return e}}function wg(e,r){return e==null||e!==e?r:e}var _g=sl(),jg=sl(!0);function ze(e){return e}function Oo(e){return La(typeof e=="function"?e:hr(e,Re))}function Ng(e){return Ua(hr(e,Re))}function yg(e,r){return Pa(e,hr(r,Re))}var Sg=G(function(e,r){return function(t){return On(t,e,r)}}),Cg=G(function(e,r){return function(t){return On(e,t,r)}});function Uo(e,r,t){var s=ve(r),i=Ms(r,s);t==null&&!(oe(r)&&(i.length||!s.length))&&(t=r,r=e,e=this,i=Ms(r,ve(r)));var a=!(oe(t)&&"chain"in t)||!!t.chain,c=qr(e);return ur(i,function(d){var h=r[d];e[d]=h,c&&(e.prototype[d]=function(){var x=this.__chain__;if(a||x){var v=e(this.__wrapped__),b=v.__actions__=Ge(this.__actions__);return b.push({func:h,args:arguments,thisArg:e}),v.__chain__=x,v}return h.apply(e,at([this.value()],arguments))})}),e}function Eg(){return ye._===this&&(ye._=Qc),this}function Po(){}function Ag(e){return e=M(e),G(function(r){return Ma(r,e)})}var Rg=po(se),Dg=po(ia),Tg=po(Mi);function tc(e){return _o(e)?Bi(Or(e)):od(e)}function Ig(e){return function(r){return e==null?l:It(e,r)}}var kg=ol(),Lg=ol(!0);function Mo(){return[]}function Bo(){return!1}function Og(){return{}}function Ug(){return""}function Pg(){return!0}function Mg(e,r){if(e=M(e),e<1||e>br)return[];var t=De,s=Ee(e,De);r=A(r),e-=De;for(var i=$i(s,r);++t<e;)r(t);return i}function Bg(e){return P(e)?se(e,Or):tr(e)?[e]:Ge(jl(J(e)))}function Fg(e){var r=++Xc;return J(e)+r}var Wg=Hs(function(e,r){return e+r},0),$g=go("ceil"),Gg=Hs(function(e,r){return e/r},1),Hg=go("floor");function qg(e){return e&&e.length?Ps(e,ze,Vi):l}function zg(e,r){return e&&e.length?Ps(e,A(r,2),Vi):l}function Kg(e){return la(e,ze)}function Yg(e,r){return la(e,A(r,2))}function Zg(e){return e&&e.length?Ps(e,ze,no):l}function Xg(e,r){return e&&e.length?Ps(e,A(r,2),no):l}var Jg=Hs(function(e,r){return e*r},1),Qg=go("round"),Vg=Hs(function(e,r){return e-r},0);function em(e){return e&&e.length?Wi(e,ze):0}function rm(e,r){return e&&e.length?Wi(e,A(r,2)):0}return o.after=Nh,o.ary=kl,o.assign=up,o.assignIn=Kl,o.assignInWith=ni,o.assignWith=dp,o.at=fp,o.before=Ll,o.bind=Eo,o.bindAll=xg,o.bindKey=Ol,o.castArray=Oh,o.chain=Dl,o.chunk=Gd,o.compact=Hd,o.concat=qd,o.cond=vg,o.conforms=bg,o.constant=Lo,o.countBy=eh,o.create=hp,o.curry=Ul,o.curryRight=Pl,o.debounce=Ml,o.defaults=pp,o.defaultsDeep=gp,o.defer=yh,o.delay=Sh,o.difference=zd,o.differenceBy=Kd,o.differenceWith=Yd,o.drop=Zd,o.dropRight=Xd,o.dropRightWhile=Jd,o.dropWhile=Qd,o.fill=Vd,o.filter=th,o.flatMap=ih,o.flatMapDeep=oh,o.flatMapDepth=ah,o.flatten=Cl,o.flattenDeep=ef,o.flattenDepth=rf,o.flip=Ch,o.flow=_g,o.flowRight=jg,o.fromPairs=tf,o.functions=jp,o.functionsIn=Np,o.groupBy=lh,o.initial=sf,o.intersection=of,o.intersectionBy=af,o.intersectionWith=lf,o.invert=Sp,o.invertBy=Cp,o.invokeMap=uh,o.iteratee=Oo,o.keyBy=dh,o.keys=ve,o.keysIn=qe,o.map=Js,o.mapKeys=Ap,o.mapValues=Rp,o.matches=Ng,o.matchesProperty=yg,o.memoize=Vs,o.merge=Dp,o.mergeWith=Yl,o.method=Sg,o.methodOf=Cg,o.mixin=Uo,o.negate=ei,o.nthArg=Ag,o.omit=Tp,o.omitBy=Ip,o.once=Eh,o.orderBy=fh,o.over=Rg,o.overArgs=Ah,o.overEvery=Dg,o.overSome=Tg,o.partial=Ao,o.partialRight=Bl,o.partition=hh,o.pick=kp,o.pickBy=Zl,o.property=tc,o.propertyOf=Ig,o.pull=ff,o.pullAll=Al,o.pullAllBy=hf,o.pullAllWith=pf,o.pullAt=gf,o.range=kg,o.rangeRight=Lg,o.rearg=Rh,o.reject=mh,o.remove=mf,o.rest=Dh,o.reverse=So,o.sampleSize=vh,o.set=Op,o.setWith=Up,o.shuffle=bh,o.slice=xf,o.sortBy=jh,o.sortedUniq=yf,o.sortedUniqBy=Sf,o.split=ig,o.spread=Th,o.tail=Cf,o.take=Ef,o.takeRight=Af,o.takeRightWhile=Rf,o.takeWhile=Df,o.tap=qf,o.throttle=Ih,o.thru=Xs,o.toArray=Hl,o.toPairs=Xl,o.toPairsIn=Jl,o.toPath=Bg,o.toPlainObject=zl,o.transform=Pp,o.unary=kh,o.union=Tf,o.unionBy=If,o.unionWith=kf,o.uniq=Lf,o.uniqBy=Of,o.uniqWith=Uf,o.unset=Mp,o.unzip=Co,o.unzipWith=Rl,o.update=Bp,o.updateWith=Fp,o.values=un,o.valuesIn=Wp,o.without=Pf,o.words=ec,o.wrap=Lh,o.xor=Mf,o.xorBy=Bf,o.xorWith=Ff,o.zip=Wf,o.zipObject=$f,o.zipObjectDeep=Gf,o.zipWith=Hf,o.entries=Xl,o.entriesIn=Jl,o.extend=Kl,o.extendWith=ni,Uo(o,o),o.add=Wg,o.attempt=rc,o.camelCase=qp,o.capitalize=Ql,o.ceil=$g,o.clamp=$p,o.clone=Uh,o.cloneDeep=Mh,o.cloneDeepWith=Bh,o.cloneWith=Ph,o.conformsTo=Fh,o.deburr=Vl,o.defaultTo=wg,o.divide=Gg,o.endsWith=zp,o.eq=Sr,o.escape=Kp,o.escapeRegExp=Yp,o.every=rh,o.find=nh,o.findIndex=yl,o.findKey=mp,o.findLast=sh,o.findLastIndex=Sl,o.findLastKey=xp,o.floor=Hg,o.forEach=Tl,o.forEachRight=Il,o.forIn=vp,o.forInRight=bp,o.forOwn=wp,o.forOwnRight=_p,o.get=To,o.gt=Wh,o.gte=$h,o.has=yp,o.hasIn=Io,o.head=El,o.identity=ze,o.includes=ch,o.indexOf=nf,o.inRange=Gp,o.invoke=Ep,o.isArguments=Ot,o.isArray=P,o.isArrayBuffer=Gh,o.isArrayLike=He,o.isArrayLikeObject=le,o.isBoolean=Hh,o.isBuffer=pt,o.isDate=qh,o.isElement=zh,o.isEmpty=Kh,o.isEqual=Yh,o.isEqualWith=Zh,o.isError=Ro,o.isFinite=Xh,o.isFunction=qr,o.isInteger=Fl,o.isLength=ri,o.isMap=Wl,o.isMatch=Jh,o.isMatchWith=Qh,o.isNaN=Vh,o.isNative=ep,o.isNil=tp,o.isNull=rp,o.isNumber=$l,o.isObject=oe,o.isObjectLike=ae,o.isPlainObject=Wn,o.isRegExp=Do,o.isSafeInteger=np,o.isSet=Gl,o.isString=ti,o.isSymbol=tr,o.isTypedArray=cn,o.isUndefined=sp,o.isWeakMap=ip,o.isWeakSet=op,o.join=cf,o.kebabCase=Zp,o.last=gr,o.lastIndexOf=uf,o.lowerCase=Xp,o.lowerFirst=Jp,o.lt=ap,o.lte=lp,o.max=qg,o.maxBy=zg,o.mean=Kg,o.meanBy=Yg,o.min=Zg,o.minBy=Xg,o.stubArray=Mo,o.stubFalse=Bo,o.stubObject=Og,o.stubString=Ug,o.stubTrue=Pg,o.multiply=Jg,o.nth=df,o.noConflict=Eg,o.noop=Po,o.now=Qs,o.pad=Qp,o.padEnd=Vp,o.padStart=eg,o.parseInt=rg,o.random=Hp,o.reduce=ph,o.reduceRight=gh,o.repeat=tg,o.replace=ng,o.result=Lp,o.round=Qg,o.runInContext=f,o.sample=xh,o.size=wh,o.snakeCase=sg,o.some=_h,o.sortedIndex=vf,o.sortedIndexBy=bf,o.sortedIndexOf=wf,o.sortedLastIndex=_f,o.sortedLastIndexBy=jf,o.sortedLastIndexOf=Nf,o.startCase=og,o.startsWith=ag,o.subtract=Vg,o.sum=em,o.sumBy=rm,o.template=lg,o.times=Mg,o.toFinite=zr,o.toInteger=M,o.toLength=ql,o.toLower=cg,o.toNumber=mr,o.toSafeInteger=cp,o.toString=J,o.toUpper=ug,o.trim=dg,o.trimEnd=fg,o.trimStart=hg,o.truncate=pg,o.unescape=gg,o.uniqueId=Fg,o.upperCase=mg,o.upperFirst=ko,o.each=Tl,o.eachRight=Il,o.first=El,Uo(o,function(){var e={};return kr(o,function(r,t){Q.call(o.prototype,t)||(e[t]=r)}),e}(),{chain:!1}),o.VERSION=ge,ur(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){o[e].placeholder=o}),ur(["drop","take"],function(e,r){z.prototype[e]=function(t){t=t===l?1:he(M(t),0);var s=this.__filtered__&&!r?new z(this):this.clone();return s.__filtered__?s.__takeCount__=Ee(t,s.__takeCount__):s.__views__.push({size:Ee(t,De),type:e+(s.__dir__<0?"Right":"")}),s},z.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),ur(["filter","map","takeWhile"],function(e,r){var t=r+1,s=t==Jr||t==Ut;z.prototype[e]=function(i){var a=this.clone();return a.__iteratees__.push({iteratee:A(i,3),type:t}),a.__filtered__=a.__filtered__||s,a}}),ur(["head","last"],function(e,r){var t="take"+(r?"Right":"");z.prototype[e]=function(){return this[t](1).value()[0]}}),ur(["initial","tail"],function(e,r){var t="drop"+(r?"":"Right");z.prototype[e]=function(){return this.__filtered__?new z(this):this[t](1)}}),z.prototype.compact=function(){return this.filter(ze)},z.prototype.find=function(e){return this.filter(e).head()},z.prototype.findLast=function(e){return this.reverse().find(e)},z.prototype.invokeMap=G(function(e,r){return typeof e=="function"?new z(this):this.map(function(t){return On(t,e,r)})}),z.prototype.reject=function(e){return this.filter(ei(A(e)))},z.prototype.slice=function(e,r){e=M(e);var t=this;return t.__filtered__&&(e>0||r<0)?new z(t):(e<0?t=t.takeRight(-e):e&&(t=t.drop(e)),r!==l&&(r=M(r),t=r<0?t.dropRight(-r):t.take(r-e)),t)},z.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},z.prototype.toArray=function(){return this.take(De)},kr(z.prototype,function(e,r){var t=/^(?:filter|find|map|reject)|While$/.test(r),s=/^(?:head|last)$/.test(r),i=o[s?"take"+(r=="last"?"Right":""):r],a=s||/^find/.test(r);i&&(o.prototype[r]=function(){var c=this.__wrapped__,d=s?[1]:arguments,h=c instanceof z,x=d[0],v=h||P(c),b=function(H){var K=i.apply(o,at([H],d));return s&&w?K[0]:K};v&&t&&typeof x=="function"&&x.length!=1&&(h=v=!1);var w=this.__chain__,S=!!this.__actions__.length,R=a&&!w,W=h&&!S;if(!a&&v){c=W?c:new z(this);var D=e.apply(c,d);return D.__actions__.push({func:Xs,args:[b],thisArg:l}),new fr(D,w)}return R&&W?e.apply(this,d):(D=this.thru(b),R?s?D.value()[0]:D.value():D)})}),ur(["pop","push","shift","sort","splice","unshift"],function(e){var r=js[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",s=/^(?:pop|shift)$/.test(e);o.prototype[e]=function(){var i=arguments;if(s&&!this.__chain__){var a=this.value();return r.apply(P(a)?a:[],i)}return this[t](function(c){return r.apply(P(c)?c:[],i)})}}),kr(z.prototype,function(e,r){var t=o[r];if(t){var s=t.name+"";Q.call(nn,s)||(nn[s]=[]),nn[s].push({name:r,func:t})}}),nn[Gs(l,k).name]=[{name:"wrapper",func:l}],z.prototype.clone=pu,z.prototype.reverse=gu,z.prototype.value=mu,o.prototype.at=zf,o.prototype.chain=Kf,o.prototype.commit=Yf,o.prototype.next=Zf,o.prototype.plant=Jf,o.prototype.reverse=Qf,o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=Vf,o.prototype.first=o.prototype.head,An&&(o.prototype[An]=Xf),o},en=Kc();Et?((Et.exports=en)._=en,Li._=en):ye._=en}).call(zm)}(Hn,Hn.exports)),Hn.exports}var Ym=Km();const hc=km(Ym),Zm=`
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideRight {
    from {
        transform: translateX(-100%);
    }
    to {
        transform: translateX(100%);
    }
}

.border-3 {
    border-width: 3px;
}

.animate-pulse-soft {
    animation: pulse-soft 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes pulse-soft {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.8;
    }
}

/* Animación de entrada suave para las cards */
@keyframes cardEntrance {
    from {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.card-entrance {
    animation: cardEntrance 0.5s ease-out forwards;
}
`;if(typeof document<"u"){const j=document.createElement("style");j.type="text/css",j.innerText=Zm,document.head.appendChild(j)}function N0({apartments:j,brands:pe,models:l,systems:ge,name_devices:ue,filters:we}){var Xt,Mr,wn,_n,ds,jn,Nn,yn,Sn,fs,hs,ps,Cn,gs,ms,xs,vs;const{auth:Y}=Fo().props;console.log("=== COMPONENT RENDERED ==="),console.log("Apartments data:",j),console.log("Building info:",Fo().props),console.log("USER ROLE DEBUG:",(Xt=Y.user)==null?void 0:Xt.role),console.log("USER ROLES ARRAY:",(Mr=Y.user)==null?void 0:Mr.roles),console.log("IS OWNER OR DOORMAN (role):",((wn=Y.user)==null?void 0:wn.role)==="owner"||((_n=Y.user)==null?void 0:_n.role)==="doorman"),console.log("IS OWNER OR DOORMAN (roles array):",((jn=(ds=Y.user)==null?void 0:ds.roles)==null?void 0:jn.includes("owner"))||((yn=(Nn=Y.user)==null?void 0:Nn.roles)==null?void 0:yn.includes("doorman"))),console.log("=== END COMPONENT DEBUG ===");const[Ur,Pr]=T.useState([]),[re,Ar]=T.useState({}),[Re,ir]=T.useState({}),[me,te]=T.useState((we==null?void 0:we.search)||""),[F,X]=T.useState(!1),[k,or]=T.useState(()=>{if(typeof window<"u"){const u=new URLSearchParams(window.location.search),p=u.get("sort_by"),N=u.get("sort_dir");if(p&&N)return[{id:p,desc:N==="desc"}]}return[{id:"order",desc:!1}]}),[V,Ce]=T.useState(!1),[Fe,Xe]=T.useState(!1),[ne,We]=T.useState(null),[Zr,Xr]=T.useState(null),[xr,gt]=T.useState(null),[de,Jr]=T.useState(null),[$e,Ut]=T.useState([]),[vr,br]=T.useState([]),[Pt,wr]=T.useState(!1),[De,mt]=T.useState(!1),[hi,Kn]=T.useState(null),[Qr,Vr]=T.useState(!1),[pi,Rr]=T.useState(!1),[Je,Yn]=T.useState(null),[et,xt]=T.useState(null),[Zn,_e]=T.useState(),[vt,Mt]=T.useState(!1),[_r,bt]=T.useState(!1),[fn,rt]=T.useState(null),[Te,tt]=T.useState(!1),[wt,gi]=T.useState(0),[_t,Bt]=T.useState(!1),[jt,Dr]=T.useState(!1),[ar,Ft]=T.useState(null),[Nt,hn]=T.useState([]),[lr,Tr]=T.useState(!1),{building:E,all_buildings:pn,googleMapsApiKey:jr}=Fo().props,{data:je,setData:yt,post:mi,delete:Xn,processing:gn,errors:nt,reset:Wt}=ic({id:null,name:"",ubicacion:"",order:0,tenants:[]}),ie=ic({device_id:"",category:"",title:"",description:"",member_id:"",tenant_id:"",priority:"medium"}),$t=T.useRef(null);T.useEffect(()=>{console.log("=== BUILDING CHANGED IN USEEFFECT ==="),console.log("Building ID:",E.id),console.log("Building name:",E.name),console.log("Building location_link:",E.location_link),console.log("Full building object:",E),gi(u=>(console.log("MapKey changed from",u,"to",u+1),u+1)),console.log("=== END BUILDING CHANGE ===")},[E]);const Jn=T.useCallback(hc.debounce(u=>{X(!0);const p=window.location.pathname+window.location.search,N=new URL(p,window.location.origin),$=document.activeElement===$t.current;u.trim()?N.searchParams.set("search",u.trim()):N.searchParams.delete("search"),N.searchParams.set("page","1"),Ue.visit(N.toString(),{preserveState:!0,preserveScroll:!0,onFinish:()=>{X(!1),$&&$t.current&&$t.current.focus()}})},500),[]),Qn=u=>{te(u),Jn(u)},xi=()=>!hc.isEqual(je,Zn),vi=u=>{var $;u.preventDefault();const p=new FormData,N=($=document.querySelector('meta[name="csrf-token"]'))==null?void 0:$.getAttribute("content");N&&p.append("_token",N),p.append("name",je.name),p.append("ubicacion",je.ubicacion),p.append("order",je.order.toString()),je.tenants.forEach((O,q)=>{p.append(`tenants[${q}][name]`,O.name),p.append(`tenants[${q}][email]`,O.email),p.append(`tenants[${q}][phone]`,O.phone),O.photo&&p.append(`tenants[${q}][photo]`,O.photo),O.id&&p.append(`tenants[${q}][id]`,O.id.toString())}),mi(route("buildings.apartments.store",E.id),{forceFormData:!0,preserveScroll:!0,preserveState:!1,onSuccess:()=>{Wt(),_e(void 0),Ce(!1),B.success("Apartment created successfully")},onError:O=>{Object.values(O).forEach(q=>B.error(q))}})},mn=u=>{var N;const p={id:u.id,name:u.name,ubicacion:u.ubicacion,order:u.order||0,tenants:((N=u.tenants)==null?void 0:N.map($=>({id:$.id,name:$.name||"",email:$.email||"",phone:$.phone||"",photo:null,photoPreview:$.photo||""})))||[]};yt(p),_e(p),We(u),Ce(!0)},bi=u=>{var $;if(u.preventDefault(),!je.id)return;const p=new FormData,N=($=document.querySelector('meta[name="csrf-token"]'))==null?void 0:$.getAttribute("content");N&&p.append("_token",N),p.append("_method","PUT"),p.append("name",je.name),p.append("ubicacion",je.ubicacion),p.append("order",je.order.toString()),je.tenants.forEach((O,q)=>{O.id&&p.append(`tenants[${q}][id]`,O.id.toString()),p.append(`tenants[${q}][name]`,O.name),p.append(`tenants[${q}][email]`,O.email),p.append(`tenants[${q}][phone]`,O.phone),O.photo&&p.append(`tenants[${q}][photo]`,O.photo)}),Ue.post(route("apartments.update",je.id),p,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{Wt(),_e(void 0),Ce(!1),We(null),B.success("Apartment updated successfully")},onError:O=>{Object.values(O).forEach(q=>B.error(q))}})},xn=()=>{const u={id:null,name:"",ubicacion:"",order:0,tenants:[]};Wt(),_e(u),We(null),Ce(!0)},wi=u=>{We(u),Xe(!0)},_i=()=>{if(!ne){B.error("No apartment selected for deletion");return}console.log("=== APARTMENT DELETE DEBUG ==="),console.log("Attempting to delete apartment:",ne),console.log("Route:",route("apartments.destroy",ne.id)),console.log("=== END APARTMENT DELETE DEBUG ==="),Xn(route("apartments.destroy",ne.id),{preserveScroll:!0,onSuccess:u=>{console.log("Apartment delete success:",u),Xe(!1),We(null),B.success("Apartment deleted successfully")},onError:u=>{if(console.error("=== APARTMENT DELETION ERROR DETAILS ==="),console.error("Full error object:",u),console.error("Error type:",typeof u),console.error("Error keys:",Object.keys(u||{})),u&&typeof u=="object"){const p=[];u.error&&p.push(u.error),u.message&&p.push(u.message),u.errors&&Object.values(u.errors).forEach(N=>{Array.isArray(N)?p.push(...N):p.push(N)}),p.length>0?B.error(`Error deleting apartment: ${p.join(", ")}`):B.error("Error deleting apartment. Unknown error format.")}else typeof u=="string"?B.error(`Error deleting apartment: ${u}`):B.error("Error deleting apartment. Check console for details.");console.error("=== END APARTMENT DELETION ERROR ===")},onFinish:()=>{console.log("Apartment deletion request finished")}})},ji=(u,p)=>{gt(u),Jr(p),Ut(p.devices||[]),br(p.shared_devices||[]),wr(!0)},Ni=u=>{Kn(u),mt(!0)},Vn=u=>{var N,$,O,q,y;console.log("=== DEVICE SELECTED ==="),console.log("Selected device:",u),console.log("Selected tenant:",de),console.log("Selected apartment for ticket creation:",Je),console.log("User roles:",(N=Y.user)==null?void 0:N.roles),console.log("=== END DEVICE SELECTED ==="),xt(u),ie.setData("device_id",u.id.toString()),((O=($=Y.user)==null?void 0:$.roles)==null?void 0:O.includes("super-admin"))||((y=(q=Y.user)==null?void 0:q.roles)==null?void 0:y.includes("technical"))?(ie.setData("tenant_id",(de==null?void 0:de.id.toString())||""),ie.setData("member_id","")):(ie.setData("member_id",(de==null?void 0:de.id.toString())||""),ie.setData("tenant_id","")),Vr(!1),Rr(!0)},yi=u=>{u.preventDefault(),ie.post("/tickets",{preserveScroll:!0,onSuccess:()=>{Rr(!1),ie.reset(),Yn(null),xt(null),B.success("Ticket created successfully!")},onError:()=>{B.error("Error creating ticket. Please try again.")}})},es=u=>{if(console.log("=== GENERATING EMBED URL ==="),console.log("Input location_link:",u),console.log("Building ID:",E==null?void 0:E.id),console.log("Google Maps API Key:",jr?"Present":"Missing"),!(u!=null&&u.trim()))return console.warn("No location link provided"),"";if(!jr)return console.warn("No Google Maps API Key provided"),"";const p=u.trim();if(p.includes("/embed"))return console.log("Using existing embed URL:",p),p;const N=p.match(/^(-?\d+\.?\d*),\s*(-?\d+\.?\d*)$/);if(N){const O=parseFloat(N[1]),q=parseFloat(N[2]);if(O>=-90&&O<=90&&q>=-180&&q<=180){const y=`https://www.google.com/maps/embed/v1/place?key=${jr}&q=${O},${q}&zoom=17`;return console.log("Generated embed URL for coordinates WITH PIN:",y),y}else console.warn("Invalid coordinates:",{lat:O,lng:q})}if(/maps\.app\.goo\.gl|goo\.gl\/maps/.test(p)){const O=`https://www.google.com/maps/embed/v1/place?key=${jr}&q=${encodeURIComponent(p)}`;return console.log("Generated embed URL for short link (fallback as search):",O),O}if(p.includes("google.com/maps")){const O=p.match(/pb=([^&]+)/);if(O){const C=`https://www.google.com/maps/embed?pb=${O[1]}`;return console.log("Generated embed URL from pb parameter:",C),C}const q=p.match(/@(-?\d+\.?\d*),(-?\d+\.?\d*)/);if(q){const C=parseFloat(q[1]),xe=parseFloat(q[2]);if(C>=-90&&C<=90&&xe>=-180&&xe<=180){const Ir=`https://www.google.com/maps/embed/v1/place?key=${jr}&q=${C},${xe}&zoom=17`;return console.log("Generated embed URL from @ coordinates WITH PIN:",Ir),Ir}}const y=p.match(/place\/([^/?#]+)/);if(y){const C=y[1],xe=`https://www.google.com/maps/embed/v1/place?key=${jr}&place_id=${C}`;return console.log("Generated embed URL for place ID:",xe),xe}}const $=`https://www.google.com/maps/embed/v1/place?key=${jr}&q=${encodeURIComponent(p)}`;return console.log("Fallback embed URL (address or query):",$),$},Si=async u=>{Xr(u.id);try{Ue.put(route("apartments.update-status",u.id),{status:!u.status},{preserveScroll:!0,onSuccess:()=>{B.success("Status updated successfully")},onError:p=>{console.error("Error updating status:",p),B.error("Error updating status")},onFinish:()=>{Xr(null)}})}catch(p){console.error("Connection error:",p),B.error("Connection error"),Xr(null)}},rs=u=>{var $;if(u.preventDefault(),!fn){B.error("Please select a file");return}const p=new FormData,N=($=document.querySelector('meta[name="csrf-token"]'))==null?void 0:$.getAttribute("content");N&&p.append("_token",N),p.append("file",fn),tt(!0),Ue.post(route("buildings.apartments.bulk-upload",E.id),p,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{bt(!1),rt(null),B.success("Apartments uploaded successfully")},onError:O=>{Object.values(O).forEach(q=>B.error(q))},onFinish:()=>{tt(!1)}})},Ci=u=>{var N;const p=(N=u.target.files)==null?void 0:N[0];if(p){if(!p.name.endsWith(".xlsx")&&!p.name.endsWith(".xls")){B.error("Please select an Excel file (.xlsx or .xls)");return}rt(p)}},Ei=()=>{const u=document.createElement("a");u.href="/resources/apartments_template.xlsx",u.download="apartments_template.xlsx",u.target="_blank",document.body.appendChild(u),u.click(),document.body.removeChild(u)},ts=[{accessorKey:"order",header:({column:u})=>n.jsxs(I,{variant:"ghost",onClick:()=>u.toggleSorting(u.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold text-left justify-start hover:bg-transparent hover:text-primary-foreground",children:["Order",u.getIsSorted()==="asc"?n.jsx(Pe,{className:"ml-2 h-4 w-4 rotate-180"}):u.getIsSorted()==="desc"?n.jsx(Pe,{className:"ml-2 h-4 w-4"}):n.jsx(Pe,{className:"ml-2 h-4 w-4 opacity-20"})]}),cell:({row:u})=>{const p=u.getValue("order");return n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full text-primary-foreground font-medium text-xs",children:p||0})})}},{accessorKey:"name",header:({column:u})=>n.jsxs(I,{variant:"ghost",onClick:()=>u.toggleSorting(u.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold text-left justify-start hover:bg-transparent hover:text-primary-foreground",children:["Apartment",u.getIsSorted()==="asc"?n.jsx(Pe,{className:"ml-2 h-4 w-4 rotate-180"}):u.getIsSorted()==="desc"?n.jsx(Pe,{className:"ml-2 h-4 w-4"}):n.jsx(Pe,{className:"ml-2 h-4 w-4 opacity-20"})]}),cell:({row:u})=>n.jsx("div",{className:"font-medium",children:u.getValue("name")})},{id:"tenants_count",accessorFn:u=>{var p;return((p=u.tenants)==null?void 0:p.length)||0},header:({column:u})=>n.jsxs(I,{variant:"ghost",onClick:()=>u.toggleSorting(u.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold text-left justify-start hover:bg-transparent  hover:text-primary-foreground",children:[n.jsx(zn,{className:"mr-2 h-4 w-4"}),"Members",u.getIsSorted()==="asc"?n.jsx(Pe,{className:"ml-2 h-4 w-4 rotate-180"}):u.getIsSorted()==="desc"?n.jsx(Pe,{className:"ml-2 h-4 w-4"}):n.jsx(Pe,{className:"ml-2 h-4 w-4 opacity-20"})]}),cell:({row:u})=>{var N;const p=u.original;return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-corporate-gold/10 text-corporate-gold",children:n.jsx(zn,{className:"w-4 h-4"})}),n.jsx("span",{className:"font-medium",children:((N=p.tenants)==null?void 0:N.length)||0}),n.jsx("span",{className:"text-muted-foreground text-sm",children:"members"})]})}},{accessorKey:"status",header:({column:u})=>n.jsxs(I,{variant:"ghost",onClick:()=>u.toggleSorting(u.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold text-left justify-start hover:bg-transparent  hover:text-primary-foreground",children:["Status",u.getIsSorted()==="asc"?n.jsx(Pe,{className:"ml-2 h-4 w-4 rotate-180"}):u.getIsSorted()==="desc"?n.jsx(Pe,{className:"ml-2 h-4 w-4"}):n.jsx(Pe,{className:"ml-2 h-4 w-4 opacity-20"})]}),cell:({row:u})=>{const p=u.original;return n.jsx(hm,{checked:p.status,disabled:Zr===p.id,onCheckedChange:()=>Si(p),className:"data-[state=checked]:bg-green-500"})}},{id:"actions",enableHiding:!1,cell:({row:u})=>{const p=u.original;return n.jsxs("div",{className:"flex gap-2",children:[n.jsx(I,{variant:"ghost",size:"icon",onClick:()=>mn(p),children:n.jsx(Ko,{className:"h-4 w-4"})}),n.jsx(I,{variant:"ghost",size:"icon",onClick:()=>wi(p),children:n.jsx(cc,{className:"h-4 w-4"})})]})}}],St=u=>{const p=window.location.pathname+window.location.search,N=new URL(p,window.location.origin);N.searchParams.set("page",u.toString()),Ue.visit(N.toString(),{preserveState:!0,preserveScroll:!0})},Ai=u=>{const p=typeof u=="function"?u(k):u;or(p);const N=window.location.pathname+window.location.search,$=new URL(N,window.location.origin);if(p.length>0){const O=p[0];$.searchParams.set("sort_by",O.id),$.searchParams.set("sort_dir",O.desc?"desc":"asc")}else $.searchParams.set("sort_by","order"),$.searchParams.set("sort_dir","asc");$.searchParams.set("page","1"),Ue.visit($.toString(),{preserveState:!0,preserveScroll:!0})},st=om({data:j.data,columns:ts,onSortingChange:Ai,onColumnFiltersChange:Pr,getCoreRowModel:am(),manualSorting:!0,onColumnVisibilityChange:Ar,onRowSelectionChange:ir,manualPagination:!0,pageCount:j.meta.last_page,state:{sorting:k,columnFilters:Ur,columnVisibility:re,rowSelection:Re,pagination:{pageIndex:j.meta.current_page-1,pageSize:j.meta.per_page}}}),Gt=()=>{const u=st.getAllColumns().filter(C=>C.getIsVisible()&&C.id!=="actions").map(C=>({id:C.id,header:typeof C.columnDef.header=="string"?C.columnDef.header:C.id.charAt(0).toUpperCase()+C.id.slice(1)})),p=u.map(C=>C.header).join(",")+`
`,N=j.data.map(C=>u.map(xe=>{var Ir;return xe.id==="status"?C.status?"Active":"Inactive":xe.id==="tenants_count"?((Ir=C.tenants)==null?void 0:Ir.length)||0:xe.id==="name"?C.name:xe.id==="ubicacion"&&C.ubicacion||""}).join(",")).join(`
`),$=p+N,O=new Blob([$],{type:"text/csv;charset=utf-8;"}),q=URL.createObjectURL(O),y=document.createElement("a");y.href=q,y.download=`apartments_${new Date().toISOString().split("T")[0]}${we!=null&&we.search?`_${we.search}`:""}.csv`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(q),B.success("CSV exported successfully!")},Ri=async()=>{try{const u=new sm.Workbook,p=u.addWorksheet("Apartments"),N=st.getAllColumns().filter(y=>y.getIsVisible()&&y.id!=="actions").map(y=>({id:y.id,header:typeof y.columnDef.header=="string"?y.columnDef.header:y.id.charAt(0).toUpperCase()+y.id.slice(1)})),$=p.addRow(N.map(y=>y.header));$.font={bold:!0},$.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE0E0E0"}},j.data.forEach(y=>{const C=N.map(xe=>{var Ir;return xe.id==="status"?y.status?"Active":"Inactive":xe.id==="tenants_count"?((Ir=y.tenants)==null?void 0:Ir.length)||0:xe.id==="name"?y.name:xe.id==="ubicacion"&&y.ubicacion||""});p.addRow(C)}),p.columns.forEach(y=>{y.header&&(y.width=Math.max(y.header.toString().length,...p.getColumn(y.number).values.slice(1).map(C=>(C==null?void 0:C.toString().length)||0))+2)}),p.eachRow({includeEmpty:!1},y=>{y.eachCell({includeEmpty:!1},C=>{C.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})});const O=await u.xlsx.writeBuffer(),q=new Blob([O],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});im.saveAs(q,`apartments_${new Date().toISOString().split("T")[0]}${we!=null&&we.search?`_${we.search}`:""}.xlsx`),B.success("Excel file exported successfully!")}catch(u){console.error("Error exporting to Excel:",u),B.error("Error exporting to Excel. Please try again.")}},[Ht,qt]=T.useState(!1),[Ie,zt]=T.useState(null),ns=u=>{zt(u),qt(!0)},ss=u=>{var $;u.preventDefault();const p=new FormData,N=($=document.querySelector('meta[name="csrf-token"]'))==null?void 0:$.getAttribute("content");N&&p.append("_token",N),p.append("_method","PUT"),p.append("owner[id]",Ie.id.toString()),p.append("owner[name]",Ie.name),p.append("owner[email]",Ie.email),p.append("owner[phone]",Ie.phone),Ue.post(route("buildings.update-owner",E.id),p,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{qt(!1),B.success("Superintendent updated!")},onError:()=>{B.error("Error updating superintendent")}})},[is,Kt]=T.useState(!1),[Di,Yt]=T.useState(!1),[Ti,Ct]=T.useState(!1),[L,Ne]=T.useState(null),[Qe,it]=T.useState(!1),os=()=>{Ne({id:0,name:"",email:"",phone:"",shift:""}),Kt(!0)},Zt=u=>{Ne(u),Yt(!0)},as=u=>{Ne(u),Ct(!0)},Ii=u=>{u.preventDefault(),it(!0),console.log("=== DOORMAN CREATION DEBUG ==="),console.log("doormanData:",L),console.log("Building ID:",E.id);const p={_method:"PUT",action:"create_doorman",doorman:{name:L.name,email:L.email,phone:L.phone||"",shift:L.shift}};console.log("Post data:",p),console.log("=== END DEBUG ==="),Ue.post(route("buildings.update",E.id),p,{preserveScroll:!0,onSuccess:()=>{Kt(!1),Ne(null),B.success("Doorman created successfully!")},onError:N=>{console.error("Doorman creation errors:",N),B.error("Error creating doorman")},onFinish:()=>{it(!1)}})},ls=u=>{u.preventDefault(),it(!0),console.log("=== DOORMAN UPDATE DEBUG ==="),console.log("doormanData:",L),console.log("Building ID:",E.id);const p={_method:"PUT",action:"update_doorman",doorman:{id:L.id,name:L.name,email:L.email,phone:L.phone||"",shift:L.shift}};console.log("Update data:",p),console.log("=== END UPDATE DEBUG ==="),Ue.post(route("buildings.update",E.id),p,{preserveScroll:!0,onSuccess:()=>{Yt(!1),Ne(null),B.success("Doorman updated successfully!")},onError:N=>{console.error("Doorman update errors:",N),B.error("Error updating doorman")},onFinish:()=>{it(!1)}})},cs=()=>{if(!L){B.error("No doorman selected for deletion");return}it(!0),console.log("=== DOORMAN DELETE DEBUG ==="),console.log("doormanData:",L),console.log("Building ID:",E.id);const u={_method:"PUT",action:"delete_doorman",doorman:{id:L.id}};console.log("Delete data:",u),console.log("Route:",route("buildings.update",E.id)),console.log("=== END DELETE DEBUG ==="),Ue.post(route("buildings.update",E.id),u,{preserveScroll:!0,onSuccess:p=>{console.log("Delete success response:",p),Ct(!1),Ne(null),B.success("Doorman deleted successfully!")},onError:p=>{console.error("Doorman deletion errors:",p),p.message?B.error(`Error deleting doorman: ${p.message}`):p["doorman.id"]?B.error(`Validation error: ${p["doorman.id"]}`):typeof p=="string"?B.error(`Error deleting doorman: ${p}`):B.error("Error deleting doorman. Check console for details.")},onFinish:()=>{it(!1)}})},vn=u=>{Ft(u),Bt(!0)},ki=()=>{ar&&(Tr(!0),Ue.post(route("tenants.reset-password",ar.id),{},{preserveScroll:!0,onSuccess:()=>{Bt(!1),Ft(null),B.success("Password reset successfully! Email notification sent.")},onError:u=>{console.error("Password reset errors:",u),B.error("Error resetting password. Please try again.")},onFinish:()=>{Tr(!1)}}))},us=()=>{if(Nt.length===0){B.error("Please select at least one tenant");return}Tr(!0),Ue.post(route("tenants.bulk-reset-passwords"),{tenant_ids:Nt},{preserveScroll:!0,onSuccess:()=>{Dr(!1),hn([]),B.success("Bulk password reset completed!")},onError:u=>{console.error("Bulk reset errors:",u),B.error("Error in bulk password reset. Please try again.")},onFinish:()=>{Tr(!1)}})},bn=()=>{Tr(!0),Ue.post(route("buildings.reset-passwords",E.id),{},{preserveScroll:!0,onSuccess:()=>{B.success("All building passwords reset successfully!")},onError:u=>{console.error("Building reset errors:",u),B.error("Error resetting building passwords. Please try again.")},onFinish:()=>{Tr(!1)}})};return n.jsxs(tm,{breadcrumbs:Jm,children:[n.jsx(nm,{title:"Apartments"}),n.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[n.jsx(Gn,{className:"w-full border-none py-0 shadow-none",children:n.jsx(oi,{className:"p-0",children:n.jsx(wm,{buildings:pn,selectedId:E.id,onChange:u=>{console.log("=== BUILDING COMBOBOX ONCHANGE CALLED ==="),console.log("New building ID:",u),console.log("Current building ID:",E.id),console.log("Route that will be called:",route("buildings.apartments",u)),console.log("=== CALLING ROUTER.VISIT ==="),Ue.visit(route("buildings.apartments",u))}})})}),n.jsx("div",{className:"flex flex-col sm:flex-row justify-end items-start sm:items-center gap-4",children:n.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[n.jsxs(I,{onClick:xn,className:"flex items-center gap-2",children:[n.jsx(lc,{className:"w-5 h-5"}),n.jsx("span",{className:"hidden sm:block",children:"New Apartment"})]}),n.jsxs(I,{onClick:()=>bt(!0),variant:"outline",className:"flex items-center gap-2",children:[n.jsx(Lm,{className:"w-5 h-5"}),n.jsx("span",{className:"hidden sm:block",children:"Bulk Upload"})]}),(((fs=(Sn=Y.user)==null?void 0:Sn.roles)==null?void 0:fs.includes("super-admin"))||((ps=(hs=Y.user)==null?void 0:hs.roles)==null?void 0:ps.includes("owner"))||((gs=(Cn=Y.user)==null?void 0:Cn.roles)==null?void 0:gs.includes("doorman")))&&n.jsxs(Wo,{children:[n.jsx($o,{asChild:!0,children:n.jsxs(I,{variant:"outline",className:"flex items-center gap-2 border-orange-300 hover:bg-orange-500 hover:text-white",disabled:lr,children:[n.jsx(Xo,{className:"w-5 h-5"}),n.jsx("span",{className:"hidden sm:block",children:"Reset Passwords"}),n.jsx(Pe,{className:"ml-1 h-4 w-4"})]})}),n.jsx(Go,{align:"end",children:n.jsxs(Ho,{onClick:bn,children:[n.jsx(Xo,{className:"mr-2 h-4 w-4"}),"Reset All Building Passwords"]})})]})]})}),n.jsxs(Me,{open:V,onOpenChange:u=>{!u&&xi()?Mt(!0):Ce(u)},children:[n.jsx(Be,{className:"w-full max-w-none sm:max-w-2xl mx-0 sm:mx-4 p-0 overflow-hidden",children:n.jsxs("div",{className:"overflow-y-auto px-6 py-8",style:{maxHeight:"90vh"},children:[n.jsxs(Ye,{className:"mb-6",children:[n.jsx(Ze,{className:"text-2xl",children:ne?"Edit Apartment":"Create New Apartment"}),n.jsx(Er,{children:ne?"Update the apartment information":"Fill in the required fields to create a new apartment"})]}),n.jsxs(gc,{defaultValue:"apartment",className:"w-full",children:[n.jsxs(mc,{className:"grid w-full grid-cols-2",children:[n.jsx(qn,{value:"apartment",children:"Apartment"}),n.jsx(qn,{value:"tenant",children:"Members"})]}),n.jsxs("form",{onSubmit:ne?bi:vi,children:[n.jsxs(ac,{value:"apartment",className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(be,{htmlFor:"name",children:["Apartment Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Ke,{id:"name",value:je.name,onChange:u=>yt("name",u.target.value),className:`h-11 mt-2 ${nt.name?"border-red-500":""}`,required:!0}),nt.name&&n.jsx("p",{className:"text-sm text-red-500",children:nt.name})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"ubicacion",children:"Location"}),n.jsx(oc,{id:"ubicacion",value:je.ubicacion,onChange:u=>yt("ubicacion",u.target.value),rows:3,className:"mt-2"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(be,{htmlFor:"order",children:["Order ",n.jsx("span",{className:"text-muted-foreground",children:"(optional)"})]}),n.jsx(Ke,{id:"order",type:"number",min:"0",value:je.order,onChange:u=>yt("order",parseInt(u.target.value)||0),className:"h-11 mt-2",placeholder:"Enter display order (0 = first)"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Use this to control the order in which apartments are displayed. Lower numbers appear first."}),nt.order&&n.jsx("p",{className:"text-sm text-red-500",children:nt.order})]})]}),n.jsx(ac,{value:"tenant",className:"space-y-6",children:n.jsx("div",{className:"h-[400px] max-h-[400px] overflow-y-auto",children:n.jsx(_m,{tenants:je.tenants,onTenantsChange:u=>yt("tenants",u),errors:nt})})}),n.jsxs("div",{className:" px-6 py-4 bg-card flex justify-end gap-4",children:[n.jsx(I,{type:"button",variant:"outline",className:"h-12",onClick:()=>Ce(!1),children:"Cancel"}),n.jsx(I,{type:"submit",disabled:gn,className:"h-12",children:gn?ne?"Updating...":"Creating...":ne?"Update Apartment":"Create Apartment"})]})]})]})]})}),n.jsx(Me,{open:vt,onOpenChange:Mt,children:n.jsxs(Be,{children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Do you have unsaved changes?"}),n.jsx(Er,{children:"You have pending changes to the form. Are you sure you want to exit without saving?"})]}),n.jsxs(Yr,{children:[n.jsx(I,{variant:"outline",onClick:()=>Mt(!1),children:"Cancel"}),n.jsx(I,{variant:"destructive",onClick:()=>{Ce(!1),Mt(!1),Wt(),_e(void 0)},children:"Discard changes"})]})]})})]}),n.jsx(Me,{open:Fe,onOpenChange:Xe,children:n.jsxs(Be,{children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Confirm Deletion"}),n.jsxs(Er,{children:["Are you sure you want to delete the apartment ",n.jsx("strong",{children:ne==null?void 0:ne.name}),"? This action cannot be undone."]})]}),n.jsxs(Yr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>Xe(!1),children:"Cancel"}),n.jsx(I,{type:"button",variant:"destructive",onClick:_i,children:"Delete"})]})]})}),n.jsx(Me,{open:Pt,onOpenChange:wr,children:n.jsx(Be,{className:"min-w-3xl",children:n.jsx(bm,{onClose:()=>{wr(!1),Ue.reload()},visible:Pt,tenantName:de||void 0,devices:$e,shareDevice:vr,brands:pe,models:l,systems:ge,name_devices:ue,apartmentId:(xr==null?void 0:xr.id)||0,tenantId:(de==null?void 0:de.id)||0,tenants:(xr==null?void 0:xr.tenants)||[]})})}),n.jsx(qm,{isOpen:De,onClose:()=>{mt(!1),Kn(null)},tenant:hi}),n.jsx(Me,{open:_r,onOpenChange:bt,children:n.jsxs(Be,{className:"w-full max-w-md",children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Bulk Upload Apartments"}),n.jsx(Er,{children:"Upload an Excel file with apartments and their members information"})]}),n.jsxs("form",{onSubmit:rs,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(be,{htmlFor:"excel-file",children:["Excel File ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Ke,{id:"excel-file",type:"file",accept:".xlsx,.xls",onChange:Ci,className:"h-11 mt-2",required:!0}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Supported formats: .xlsx, .xls"})]}),n.jsxs("div",{className:"bg-corporate-gold/10 dark:bg-corporate-gold/20 border border-corporate-gold/20 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-corporate-gold dark:text-corporate-gold-light mb-2",children:"Excel Format Required:"}),n.jsxs("ul",{className:"text-sm text-corporate-dark-brown dark:text-corporate-gold-light/80 space-y-1",children:[n.jsxs("li",{children:["• ",n.jsx("strong",{children:"apartment:"})," Apartment name"]}),n.jsxs("li",{children:["• ",n.jsx("strong",{children:"order:"})," Apartment order (optional, default: 0)"]}),n.jsxs("li",{children:["• ",n.jsx("strong",{children:"name:"})," Member name"]}),n.jsxs("li",{children:["• ",n.jsx("strong",{children:"email:"})," Member email"]}),n.jsxs("li",{children:["• ",n.jsx("strong",{children:"phone:"})," Member phone"]})]}),n.jsx("div",{className:"mt-3 p-2 bg-corporate-warm/10 border border-corporate-warm/20 rounded text-sm",children:n.jsxs("p",{className:"text-corporate-dark-brown dark:text-corporate-gold-light/80",children:[n.jsx("strong",{children:"Limitations:"})," Maximum 1000 rows, 10MB file size"]})}),n.jsx(I,{type:"button",variant:"link",className:"text-corporate-gold p-0 h-auto mt-2 hover:text-corporate-warm",onClick:Ei,children:"Download Template"})]}),n.jsxs(Yr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>bt(!1),disabled:Te,children:"Cancel"}),n.jsx(I,{type:"submit",disabled:Te||!fn,children:Te?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):"Upload"})]})]})]})}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[n.jsxs("div",{className:"w-full lg:w-4/12 space-y-6",children:[E.owner&&n.jsx(Gn,{className:"overflow-hidden !p-0 border-2 border-corporate-gold/20 hover:border-corporate-gold/40 transition-all duration-300 hover:shadow-xl group bg-gradient-to-br from-white to-corporate-gold/5 dark:from-dark-brown to-corporate-gold/10",children:n.jsxs(oi,{className:"p-0",children:[n.jsxs("div",{className:"bg-gradient-to-r from-corporate-gold/15 via-corporate-gold/10 to-corporate-gold/5 dark:from-corporate-gold/25 dark:via-corporate-gold/15 dark:to-corporate-gold/10 p-4 border-b border-corporate-gold/20 relative overflow-hidden flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 text-corporate-gold dark:text-corporate-gold-light relative z-10",children:[n.jsx(zo,{className:"w-4 h-4"}),n.jsx("span",{className:"font-bold text-sm",children:"Superintendent"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsx(I,{size:"icon",variant:"ghost",onClick:()=>E.owner&&ns({id:1,name:E.owner.name,email:E.owner.email,phone:E.owner.phone}),children:n.jsx(Ko,{className:"w-4 h-4"})})})]}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-start gap-5",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:`/storage/${E.owner.photo}`,alt:E.owner.name,className:"w-20 h-20 rounded-full object-cover border-3 border-corporate-gold/30 shadow-lg group-hover:border-corporate-gold/50 transition-all duration-300 group-hover:shadow-xl",onError:u=>{u.currentTarget.src="/images/default-user.png"}}),n.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-corporate-gold/40 opacity-0 group-hover:opacity-100 group-hover:scale-110 transition-all duration-300"})]}),n.jsx("div",{className:"absolute -bottom-2 -right-2 w-7 h-7 bg-gradient-to-br from-corporate-warm via-corporate-gold to-corporate-dark-brown rounded-full border-3 border-background shadow-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:n.jsx(Em,{className:"w-4 h-4 text-white"})})]}),n.jsxs("div",{className:"flex-1 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-foreground group-hover:text-corporate-gold transition-colors",children:E.owner.name}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("div",{className:"w-2 h-2 bg-corporate-gold rounded-full animate-pulse"}),n.jsx("p",{className:"text-sm text-muted-foreground font-semibold",children:"Property Owner"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("a",{href:`mailto:${E.owner.email}`,className:"flex items-center gap-3 text-sm group/item hover:bg-corporate-gold/5 px-3 rounded-lg transition-all duration-300 cursor-pointer border border-transparent hover:border-corporate-gold/20",children:[n.jsx("a",{href:`mailto:${E.owner.email}`,className:"w-8 h-8 rounded-full bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 flex items-center justify-center group-hover/item:from-corporate-gold/30 group-hover/item:to-corporate-warm/30 transition-all duration-300 group-hover/item:scale-110",children:n.jsx(Yo,{className:"w-4 h-4 text-corporate-gold dark:text-corporate-gold-light"})}),n.jsx("span",{className:"text-muted-foreground group-hover/item:text-foreground font-medium flex-1",children:E.owner.email})]}),n.jsxs("a",{href:`tel:${E.owner.phone}`,className:"flex items-center gap-3 text-sm group/item hover:bg-corporate-gold/5 px-3 rounded-lg transition-all duration-300 cursor-pointer border border-transparent hover:border-corporate-gold/20",children:[n.jsx("a",{href:`tel:${E.owner.phone}`,className:"w-8 h-8 rounded-full bg-gradient-to-br from-corporate-warm/20 to-corporate-gold/20 flex items-center justify-center group-hover/item:from-corporate-warm/30 group-hover/item:to-corporate-gold/30 transition-all duration-300 group-hover/item:scale-110",children:n.jsx(Zo,{className:"w-4 h-4 text-corporate-warm dark:text-corporate-gold-light"})}),n.jsx("span",{className:"text-muted-foreground group-hover/item:text-foreground font-medium flex-1",children:E.owner.phone})]})]})]})]})})]})}),n.jsx(Me,{open:Ht,onOpenChange:qt,children:n.jsxs(Be,{children:[n.jsx(Ye,{children:n.jsx(Ze,{children:"Edit Superintendent"})}),n.jsxs("form",{onSubmit:ss,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(be,{children:"Name"}),n.jsx(Ke,{value:(Ie==null?void 0:Ie.name)||"",onChange:u=>zt(p=>p?{...p,name:u.target.value}:null),placeholder:"Name"})]}),n.jsxs("div",{children:[n.jsx(be,{children:"Email"}),n.jsx(Ke,{value:(Ie==null?void 0:Ie.email)||"",onChange:u=>zt(p=>p?{...p,email:u.target.value}:null),placeholder:"Email"})]}),n.jsxs("div",{children:[n.jsx(be,{children:"Phone"}),n.jsx(Ke,{value:(Ie==null?void 0:Ie.phone)||"",onChange:u=>zt(p=>p?{...p,phone:u.target.value}:null),placeholder:"Phone"})]}),n.jsxs(Yr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>qt(!1),children:"Cancel"}),n.jsx(I,{type:"submit",children:"Save"})]})]})]})}),n.jsx(Me,{open:is,onOpenChange:Kt,children:n.jsxs(Be,{children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Add New Doorman"}),n.jsx(Er,{children:"Fill in the information for the new doorman"})]}),n.jsxs("form",{onSubmit:Ii,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(be,{htmlFor:"doorman-name",children:["Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Ke,{id:"doorman-name",value:(L==null?void 0:L.name)||"",onChange:u=>Ne(p=>p?{...p,name:u.target.value}:null),placeholder:"Enter doorman's name",required:!0})]}),n.jsxs("div",{children:[n.jsxs(be,{htmlFor:"doorman-email",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Ke,{id:"doorman-email",type:"email",value:(L==null?void 0:L.email)||"",onChange:u=>Ne(p=>p?{...p,email:u.target.value}:null),placeholder:"Enter doorman's email",required:!0})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"doorman-phone",children:"Phone"}),n.jsx(Ke,{id:"doorman-phone",value:(L==null?void 0:L.phone)||"",onChange:u=>Ne(p=>p?{...p,phone:u.target.value}:null),placeholder:"Enter doorman's phone"})]}),n.jsxs("div",{children:[n.jsxs(be,{htmlFor:"doorman-shift",children:["Shift ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{id:"doorman-shift",value:(L==null?void 0:L.shift)||"",onChange:u=>Ne(p=>p?{...p,shift:u.target.value}:null),className:"w-full h-11 px-3 rounded-md border border-input bg-background text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",required:!0,children:[n.jsx("option",{value:"",children:"Select shift"}),n.jsx("option",{value:"morning",children:"Morning"}),n.jsx("option",{value:"afternoon",children:"Afternoon"}),n.jsx("option",{value:"night",children:"Night"})]})]}),n.jsxs(Yr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>Kt(!1),disabled:Qe,children:"Cancel"}),n.jsx(I,{type:"submit",disabled:Qe,children:Qe?"Creating...":"Create Doorman"})]})]})]})}),n.jsx(Me,{open:Di,onOpenChange:Yt,children:n.jsxs(Be,{children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Edit Doorman"}),n.jsx(Er,{children:"Update the doorman's information"})]}),n.jsxs("form",{onSubmit:ls,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(be,{htmlFor:"edit-doorman-name",children:["Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Ke,{id:"edit-doorman-name",value:(L==null?void 0:L.name)||"",onChange:u=>Ne(p=>p?{...p,name:u.target.value}:null),placeholder:"Enter doorman's name",required:!0})]}),n.jsxs("div",{children:[n.jsxs(be,{htmlFor:"edit-doorman-email",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Ke,{id:"edit-doorman-email",type:"email",value:(L==null?void 0:L.email)||"",onChange:u=>Ne(p=>p?{...p,email:u.target.value}:null),placeholder:"Enter doorman's email",required:!0})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"edit-doorman-phone",children:"Phone"}),n.jsx(Ke,{id:"edit-doorman-phone",value:(L==null?void 0:L.phone)||"",onChange:u=>Ne(p=>p?{...p,phone:u.target.value}:null),placeholder:"Enter doorman's phone"})]}),n.jsxs("div",{children:[n.jsxs(be,{htmlFor:"edit-doorman-shift",children:["Shift ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{id:"edit-doorman-shift",value:(L==null?void 0:L.shift)||"",onChange:u=>Ne(p=>p?{...p,shift:u.target.value}:null),className:"w-full h-11 px-3 rounded-md border border-input bg-background text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",required:!0,children:[n.jsx("option",{value:"",children:"Select shift"}),n.jsx("option",{value:"morning",children:"Morning"}),n.jsx("option",{value:"afternoon",children:"Afternoon"}),n.jsx("option",{value:"night",children:"Night"})]})]}),n.jsxs(Yr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>Yt(!1),disabled:Qe,children:"Cancel"}),n.jsx(I,{type:"submit",disabled:Qe,children:Qe?"Updating...":"Update Doorman"})]})]})]})}),n.jsx(Me,{open:Ti,onOpenChange:Ct,children:n.jsxs(Be,{children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Delete Doorman"}),n.jsxs(Er,{children:["Are you sure you want to delete ",n.jsx("strong",{children:L==null?void 0:L.name}),"? This action cannot be undone."]})]}),n.jsxs(Yr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>Ct(!1),disabled:Qe,children:"Cancel"}),n.jsx(I,{type:"button",variant:"destructive",onClick:cs,disabled:Qe,children:Qe?"Deleting...":"Delete Doorman"})]})]})}),n.jsxs("div",{className:"space-y-4 w-full",children:[n.jsxs("div",{className:"flex items-center gap-3 px-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-corporate-gold dark:text-corporate-gold-light",children:[n.jsx(zo,{className:"w-5 h-5"}),n.jsx("h3",{className:"text-lg font-bold",children:"Doormen"})]}),n.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-corporate-gold/30 to-transparent"}),n.jsxs("span",{className:"text-xs text-muted-foreground bg-corporate-gold/10 border border-corporate-gold/20 px-2 py-1 rounded-full font-medium",children:[((ms=E.doormen)==null?void 0:ms.length)||0," ",(((xs=E.doormen)==null?void 0:xs.length)||0)===1?"Guard":"Guards"]}),n.jsxs(I,{size:"sm",variant:"outline",onClick:os,className:"ml-2",children:[n.jsx(lc,{className:"w-4 h-4"})," Add Doorman"]})]}),E.doormen&&E.doormen.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.doormen.map((u,p)=>n.jsxs(Gn,{className:"group !p-0 overflow-hidden border-2 border-corporate-gold/20 hover:border-corporate-gold/40 transition-all duration-300 hover:-translate-y-1 bg-gradient-to-br from-white to-corporate-gold/5 dark:from-dark-brown dark:to-corporate-gold/10 relative",style:{animationDelay:`${p*150}ms`},children:[n.jsxs("div",{className:"absolute top-3 right-3 z-10 flex gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity duration-200",children:[n.jsx(I,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 bg-white/80 hover:bg-white hover:text-primary-foreground shadow-sm border border-corporate-gold/20 hover:border-corporate-gold/40",onClick:()=>Zt(u),children:n.jsx(Ko,{className:"w-3.5 h-3.5 text-corporate-gold"})}),n.jsx(I,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 bg-white/80 hover:bg-red-50 shadow-sm border border-red-200 hover:border-red-300",onClick:()=>as(u),children:n.jsx(cc,{className:"w-3.5 h-3.5 text-red-500"})})]}),n.jsxs(oi,{className:"p-4",children:[n.jsx("div",{className:"relative mb-4",children:n.jsxs("div",{className:"relative mx-auto w-20 h-20",children:[n.jsx("img",{src:`/storage/${u.photo}`,alt:u.name,className:"w-full h-full rounded-full object-cover border-3 border-corporate-gold/20 group-hover:border-corporate-gold/50 transition-all duration-300 shadow-lg group-hover:shadow-xl",onError:N=>{N.currentTarget.src="/images/default-user.png"}}),n.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-corporate-gold/30 opacity-0 group-hover:opacity-100 group-hover:scale-110 transition-all duration-300"}),n.jsx("div",{className:"absolute -bottom-1 -right-1",children:n.jsx("div",{className:`w-5 h-5 rounded-full border-2 border-white shadow-sm ${u.shift.toLowerCase().includes("morning")?"bg-yellow-400":u.shift.toLowerCase().includes("night")?"bg-blue-900":"bg-orange-500"}`})})]})}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h4",{className:"text-sm font-bold text-corporate-gold dark:text-corporate-gold-light line-clamp-1 group-hover:text-corporate-warm transition-colors",children:u.name}),n.jsx("div",{className:"flex items-center justify-center gap-2",children:n.jsxs("span",{className:"text-xs font-medium text-muted-foreground capitalize",children:[u.shift," Shift"]})}),u.email&&n.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-muted-foreground",children:[n.jsx(Yo,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate max-w-[120px]",children:u.email})]}),u.phone&&n.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-muted-foreground",children:[n.jsx(Zo,{className:"w-3 h-3"}),n.jsx("span",{children:u.phone})]})]})]})]},u.id))}):n.jsxs("div",{className:"text-center py-8 px-4 bg-corporate-gold/5 border border-corporate-gold/20 rounded-lg",children:[n.jsx(zo,{className:"w-12 h-12 mx-auto text-corporate-gold/40 mb-3"}),n.jsx("p",{className:"text-muted-foreground mb-2",children:"No doormen assigned to this building"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:'Click "Add Doorman" to assign security personnel'})]})]}),E.location_link&&n.jsxs(Gn,{className:"overflow-hidden !p-0 border-2 border-corporate-gold/20 hover:border-corporate-gold/40 transition-all duration-300 hover:shadow-xl group bg-gradient-to-br from-white to-corporate-gold/5 dark:from-dark-brown dark:to-corporate-gold/10",children:[n.jsxs("div",{className:"bg-gradient-to-r from-corporate-gold/10 via-corporate-gold/15 to-corporate-gold/10 dark:from-corporate-gold/20 dark:via-corporate-gold/25 dark:to-corporate-gold/20 p-4 border-b border-corporate-gold/20 relative overflow-hidden",children:[n.jsxs("div",{className:"flex items-center gap-2 text-corporate-gold dark:text-corporate-gold-light relative z-10",children:[n.jsx("div",{className:"p-2 bg-corporate-gold/10 rounded-full group-hover:bg-corporate-gold/20 transition-colors duration-300",children:n.jsx(Om,{className:"w-4 h-4"})}),n.jsx("span",{className:"font-bold text-sm",children:"Building Location"})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-corporate-gold/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 transform -translate-x-full group-hover:translate-x-full duration-1000"})]}),n.jsxs("div",{className:"relative overflow-hidden",children:[n.jsxs("div",{className:"aspect-video relative",children:[(console.log("=== RENDERING IFRAME ==="),console.log("Building location_link:",E.location_link),console.log("Generated iframe src:",es((E==null?void 0:E.location_link)||"")),console.log("Iframe key:",`map-${E.id}-${wt}`),console.log("=== END IFRAME RENDER ==="),null),n.jsx("iframe",{src:es((E==null?void 0:E.location_link)||""),width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"group-hover:scale-105 transition-transform duration-700 ease-out",onLoad:()=>console.log("Iframe loaded successfully"),onError:()=>console.log("Iframe failed to load")},`map-${E.id}-${wt}`)]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-transparent pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),n.jsx("div",{className:"absolute top-3 right-3 w-3 h-3 bg-corporate-gold/60 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-300 group-hover:scale-150"}),n.jsx("div",{className:"absolute bottom-3 left-3 w-2 h-2 bg-corporate-warm/60 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-500 group-hover:scale-125"})]})]})]}),n.jsxs("div",{className:"lg:w-8/12 flex flex-col",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 p-4 bg-corporate-gold/5 dark:bg-corporate-gold/10 border border-corporate-gold/20 rounded-lg",children:[n.jsx("div",{className:"flex items-center gap-4 flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Pm,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${F?"text-corporate-gold animate-pulse":"text-corporate-gold/60"}`}),n.jsx(Ke,{ref:$t,placeholder:"Search apartments, members, locations...",value:me,onChange:u=>Qn(u.target.value),className:"pl-10 w-80 border-corporate-gold/20 focus:border-corporate-gold focus:ring-corporate-gold/20",disabled:F}),F&&n.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-corporate-gold"})}),me&&!F&&n.jsx("button",{onClick:()=>Qn(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-corporate-gold/60 hover:text-corporate-gold transition-colors",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Wo,{children:[n.jsx($o,{asChild:!0,children:n.jsxs(I,{variant:"outline",size:"sm",className:"border-corporate-gold/20 hover:bg-primary hover:border-corporate-gold",children:[n.jsx(Um,{className:"mr-2 h-4 w-4"}),"Columns ",n.jsx(Pe,{className:"ml-1 h-4 w-4"})]})}),n.jsx(Go,{align:"end",className:"w-48",children:st.getAllColumns().filter(u=>u.getCanHide()).map(u=>n.jsx(fm,{className:"capitalize",checked:u.getIsVisible(),onCheckedChange:p=>u.toggleVisibility(!!p),children:u.id.replace(/_/g," ")},u.id))})]}),n.jsxs(Wo,{children:[n.jsx($o,{asChild:!0,children:n.jsxs(I,{variant:"outline",size:"sm",className:"border-corporate-gold/20 hover:bg-primary hover:border-corporate-gold",children:[n.jsx(Mm,{className:"mr-2 h-4 w-4"}),"Export ",n.jsx(Pe,{className:"ml-1 h-4 w-4"})]})}),n.jsxs(Go,{align:"end",children:[n.jsxs(Ho,{onClick:Gt,children:[n.jsx(uc,{className:"mr-2 h-4 w-4"}),"Export to CSV"]}),n.jsxs(Ho,{onClick:Ri,children:[n.jsx(uc,{className:"mr-2 h-4 w-4"}),"Export to Excel"]})]})]})]})]}),n.jsx("div",{className:"rounded-md border",children:n.jsxs(lm,{children:[n.jsx(cm,{children:st.getHeaderGroups().map(u=>n.jsx(li,{children:u.headers.map(p=>n.jsx(um,{children:pc(p.column.columnDef.header,p.getContext())},p.id))},u.id))}),n.jsx(dm,{children:(vs=st.getRowModel().rows)!=null&&vs.length?st.getRowModel().rows.map(u=>n.jsx(Xm,{row:u,handleShowDevices:ji,handleShowTicketHistory:Ni,handleResetPassword:vn,auth:Y,setSelectedTenantForTicketCreation:Yn,setShowCreateTicketDevicesModal:Vr,setSelectedApartment:gt,setSelectedTenant:Jr,setSelectedDevices:Ut,setSelectedShareDevices:br,isResettingPassword:lr},u.id)):n.jsx(li,{children:n.jsx(ii,{colSpan:ts.length,className:"h-24 text-center",children:"No results found."})})})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 p-4 border-t border-corporate-gold/20 bg-corporate-gold/5 dark:bg-corporate-gold/10",children:[n.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:n.jsxs("span",{children:["Showing ",(j.meta.current_page-1)*j.meta.per_page+1," to"," ",Math.min(j.meta.current_page*j.meta.per_page,j.meta.total)," ","of ",j.meta.total," entries"]})}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs(I,{variant:"outline",size:"sm",onClick:()=>St(1),disabled:j.meta.current_page===1,className:"h-8 w-8 p-0",children:[n.jsx(qo,{className:"h-4 w-4"}),n.jsx(qo,{className:"h-4 w-4 -ml-2"})]}),n.jsx(I,{variant:"outline",size:"sm",onClick:()=>St(j.meta.current_page-1),disabled:j.meta.current_page===1,className:"h-8 w-8 p-0",children:n.jsx(qo,{className:"h-4 w-4"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Page"}),n.jsx("input",{type:"number",value:j.meta.current_page,onChange:u=>{const p=u.target.value?Number(u.target.value):1;p>=1&&p<=j.meta.last_page&&St(p)},className:"w-12 h-8 text-center border rounded text-sm bg-background",min:"1",max:j.meta.last_page}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["of ",j.meta.last_page]})]}),n.jsx(I,{variant:"outline",size:"sm",onClick:()=>St(j.meta.current_page+1),disabled:j.meta.current_page===j.meta.last_page,className:"h-8 w-8 p-0",children:n.jsx(dn,{className:"h-4 w-4"})}),n.jsxs(I,{variant:"outline",size:"sm",onClick:()=>St(j.meta.last_page),disabled:j.meta.current_page===j.meta.last_page,className:"h-8 w-8 p-0",children:[n.jsx(dn,{className:"h-4 w-4"}),n.jsx(dn,{className:"h-4 w-4 -ml-2"})]})]})})]})]})]})]}),n.jsx(Me,{open:Qr,onOpenChange:Vr,children:n.jsxs(Be,{className:"sm:max-w-[600px]",children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Select Device"}),n.jsxs(Er,{children:["Choose a device for apartment ",Je==null?void 0:Je.name," to create a ticket."]})]}),n.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[$e.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-2",children:"Personal Devices"}),n.jsx("div",{className:"space-y-2",children:$e.map(u=>{var p,N;return n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>Vn(u),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-corporate-gold/10 flex items-center justify-center",children:n.jsx(di,{className:"w-5 h-5 text-corporate-gold"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:u.name||"Unknown Device"}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[(p=u.brand)==null?void 0:p.name," - ",(N=u.model)==null?void 0:N.name]})]})]}),n.jsx(dn,{className:"h-4 w-4 text-gray-400"})]},u.id)})})]}),vr.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-2",children:"Shared Devices"}),n.jsx("div",{className:"space-y-2",children:vr.map(u=>{var p,N;return n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",onClick:()=>Vn(u),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(zn,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:u.name||"Unknown Device"}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[(p=u.brand)==null?void 0:p.name," - ",(N=u.model)==null?void 0:N.name," (Shared)"]})]})]}),n.jsx(dn,{className:"h-4 w-4 text-gray-400"})]},u.id)})})]}),$e.length===0&&vr.length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(di,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{className:"font-medium",children:"No devices available"}),n.jsx("p",{className:"text-sm",children:"This member doesn't have any devices assigned."})]})]})]})}),n.jsx(Me,{open:pi,onOpenChange:Rr,children:n.jsxs(Be,{className:"sm:max-w-[500px]",children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Create Ticket"}),n.jsxs(Er,{children:["Creating ticket for ",de==null?void 0:de.name," in apartment ",Je==null?void 0:Je.name," - ",et==null?void 0:et.name]})]}),n.jsxs("form",{onSubmit:yi,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(be,{htmlFor:"category",children:"Category *"}),n.jsxs(gm,{value:ie.data.category,onValueChange:u=>ie.setData("category",u),children:[n.jsx(mm,{children:n.jsx(xm,{placeholder:"Select category"})}),n.jsxs(vm,{children:[n.jsx($n,{value:"Hardware",children:"Hardware"}),n.jsx($n,{value:"Software",children:"Software"}),n.jsx($n,{value:"Red",children:"Network"}),n.jsx($n,{value:"Soporte",children:"Support"}),n.jsx($n,{value:"Otro",children:"Other"})]})]}),ie.errors.category&&n.jsx("p",{className:"text-sm text-red-600 mt-1",children:ie.errors.category})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"title",children:"Title *"}),n.jsx(Ke,{id:"title",value:ie.data.title,onChange:u=>ie.setData("title",u.target.value),placeholder:"Enter ticket title",required:!0}),ie.errors.title&&n.jsx("p",{className:"text-sm text-red-600 mt-1",children:ie.errors.title})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"description",children:"Description"}),n.jsx(oc,{id:"description",value:ie.data.description,onChange:u=>ie.setData("description",u.target.value),placeholder:"Describe the issue...",rows:4}),ie.errors.description&&n.jsx("p",{className:"text-sm text-red-600 mt-1",children:ie.errors.description})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>Rr(!1),children:"Cancel"}),n.jsx(I,{type:"submit",disabled:ie.processing,children:ie.processing?"Creating...":"Create Ticket"})]})]})]})}),n.jsx(Me,{open:_t,onOpenChange:Bt,children:n.jsxs(Be,{children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Reset Password"}),n.jsxs(Er,{children:["Are you sure you want to reset the password for ",n.jsx("strong",{children:ar==null?void 0:ar.name}),"?",n.jsx("br",{}),n.jsx("br",{}),"The password will be changed to their email address: ",n.jsx("strong",{children:ar==null?void 0:ar.email}),n.jsx("br",{}),"An email notification will be sent to them with their new credentials."]})]}),n.jsxs(Yr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>Bt(!1),disabled:lr,children:"Cancel"}),n.jsx(I,{type:"button",variant:"destructive",onClick:ki,disabled:lr,children:lr?"Resetting...":"Reset Password"})]})]})}),n.jsx(Me,{open:jt,onOpenChange:Dr,children:n.jsxs(Be,{children:[n.jsxs(Ye,{children:[n.jsx(Ze,{children:"Bulk Password Reset"}),n.jsxs(Er,{children:["Are you sure you want to reset passwords for ",n.jsx("strong",{children:Nt.length})," selected members?",n.jsx("br",{}),n.jsx("br",{}),"Each member's password will be changed to their email address and they will receive email notifications with their new credentials."]})]}),n.jsxs(Yr,{children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>Dr(!1),disabled:lr,children:"Cancel"}),n.jsx(I,{type:"button",variant:"destructive",onClick:us,disabled:lr,children:lr?"Resetting...":"Reset All Passwords"})]})]})})]})}const Xm=({row:j,handleShowDevices:pe,handleShowTicketHistory:l,handleResetPassword:ge,auth:ue,setSelectedTenantForTicketCreation:we,setShowCreateTicketDevicesModal:Y,setSelectedApartment:Ur,setSelectedTenant:Pr,setSelectedDevices:re,setSelectedShareDevices:Ar,isResettingPassword:Re})=>{var F,X;const[ir,me]=T.useState(!1),te=j.original;return n.jsxs(n.Fragment,{children:[n.jsx(li,{"data-state":j.getIsSelected()&&"selected",className:"hover:bg-muted/50 transition-colors group",children:j.getVisibleCells().map(k=>{var or,V;return k.column.id==="tenants_count"?n.jsx(ii,{children:n.jsx("div",{className:"cursor-pointer hover:bg-muted/70 p-3 rounded-lg transition-all duration-200 group-hover:bg-muted/30",onClick:()=>me(!ir),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`
                                            flex items-center justify-center w-8 h-8 rounded-full 
                                            bg-gradient-to-br from-corporate-gold/10 to-corporate-gold/20 
                                            border border-corporate-gold/20 transition-all duration-300 
                                            hover:from-corporate-gold/20 hover:to-corporate-gold/30 hover:border-corporate-gold/30
                                            hover:scale-110 hover:shadow-md
                                            ${ir?"bg-gradient-to-br from-corporate-gold/20 to-corporate-gold/30 border-corporate-gold/40 shadow-sm":""}
                                        `,children:n.jsx(dn,{className:`
                                                w-4 h-4 text-corporate-gold transition-all duration-300 ease-in-out
                                                ${ir?"rotate-90 scale-110":"hover:scale-105"}
                                            `})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`
                                                flex items-center justify-center w-6 h-6 rounded-full 
                                                bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 text-corporate-gold
                                                transition-all duration-200 hover:from-corporate-gold/30 hover:to-corporate-warm/30
                                            `,children:n.jsx(zn,{className:"w-3 h-3"})}),n.jsx("span",{className:"font-semibold text-corporate-gold dark:text-corporate-gold-light",children:((or=te.tenants)==null?void 0:or.length)||0}),n.jsx("span",{className:"text-muted-foreground text-sm font-medium",children:((V=te.tenants)==null?void 0:V.length)===1?"member":"members"})]}),te.tenants&&te.tenants.length>0&&n.jsx("div",{className:"ml-auto opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:n.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-1 rounded-full",children:ir?"Click to collapse":"Click to expand"})})]})})},k.id):n.jsx(ii,{children:k.column.columnDef.cell?pc(k.column.columnDef.cell,k.getContext()):null},k.id)})}),ir&&te.tenants&&te.tenants.length>0&&n.jsx(li,{className:"border-b bg-gradient-to-r from-corporate-gold/5 to-corporate-gold/10 dark:from-corporate-gold/10 dark:to-corporate-gold/15",children:n.jsx(ii,{colSpan:5,className:"p-6",children:n.jsxs("div",{className:"animate-in slide-in-from-top-2 duration-300",children:[n.jsxs("div",{className:"text-sm font-semibold text-muted-foreground mb-4 flex items-center gap-2",children:[n.jsx("div",{className:"w-1 h-4 bg-corporate-gold rounded-full"}),n.jsx(zn,{className:"w-4 h-4 text-corporate-gold"}),n.jsxs("span",{children:["Apartment Members (",((F=te.tenants)==null?void 0:F.length)||0,")"]})]}),n.jsx("div",{className:"grid gap-4",children:(X=te.tenants)==null?void 0:X.map((k,or)=>{var V,Ce,Fe,Xe,ne,We,Zr,Xr,xr,gt,de,Jr;return n.jsxs("div",{className:"flex items-center justify-between gap-4 p-5 bg-background border border-corporate-gold/20 rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 hover:border-corporate-gold/40 group/member",style:{animationDelay:`${or*100}ms`,animation:"fadeInUp 0.4s ease-out forwards"},children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"relative",children:n.jsx("img",{src:`/storage/${k.photo}`,alt:k.name,className:"w-14 h-14 rounded-full object-cover border-2 border-corporate-gold/20 shadow-sm group-hover/member:border-corporate-gold/40 transition-all duration-200",onError:$e=>{$e.currentTarget.src="/images/default-user.png"}})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h4",{className:"font-bold text-corporate-gold dark:text-corporate-gold-light text-lg",children:k.name}),n.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-corporate-gold/10 to-corporate-gold/20 text-corporate-gold border border-corporate-gold/20 text-xs font-medium rounded-full",children:"Member"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[n.jsxs("a",{href:`mailto:${k.email}`,className:"flex items-center gap-2 text-muted-foreground hover:text-corporate-gold transition-colors",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-corporate-gold/20 flex items-center justify-center",children:n.jsx(Yo,{className:"w-3 h-3 text-corporate-gold"})}),n.jsx("span",{className:"font-medium",children:k.email})]}),n.jsxs("a",{href:`tel:${k.phone}`,className:"flex items-center gap-2 text-muted-foreground hover:text-corporate-gold transition-colors",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-corporate-warm/20 flex items-center justify-center",children:n.jsx(Zo,{className:"w-3 h-3 text-corporate-warm"})}),n.jsx("span",{className:"font-medium",children:k.phone})]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(I,{variant:"outline",size:"sm",className:"flex items-center gap-2 hover:bg-corporate-gold hover:text-primary-foreground transition-all duration-300 border-corporate-gold/20 hover:border-corporate-gold group-hover/member:border-corporate-gold/40",onClick:()=>{var wr,De,mt;console.log("=== CREATE TICKET BUTTON CLICKED ==="),console.log("User role:",(wr=ue.user)==null?void 0:wr.role),console.log("User roles array:",(De=ue.user)==null?void 0:De.roles),console.log("Tenant:",k),console.log("Tenant devices:",k.devices),console.log("Tenant shared devices:",k.shared_devices),console.log("Apartment:",te),console.log("=== END CREATE TICKET BUTTON DEBUG ===");const $e=((mt=ue.user)==null?void 0:mt.roles)||[],Ut=$e.includes("superadmin")||$e.includes("super-admin"),vr=$e.includes("owner"),br=$e.includes("doorman"),Pt=$e.includes("technical");(Ut||vr||br||Pt)&&(Ur(te),Pr(k),re(k.devices||[]),Ar(k.shared_devices||[]),we(te),Y(!0))},children:[n.jsx(di,{className:"w-4 h-4"}),n.jsx("span",{className:"font-bold text-base",children:Number(((V=k.devices)==null?void 0:V.length)||0)+Number(((Ce=k.shared_devices)==null?void 0:Ce.length)||0)}),n.jsx("span",{className:"hidden sm:inline font-medium",children:"Devices"})]}),(((Xe=(Fe=ue.user)==null?void 0:Fe.roles)==null?void 0:Xe.includes("super-admin"))||((We=(ne=ue.user)==null?void 0:ne.roles)==null?void 0:We.includes("superadmin")))&&n.jsxs(I,{variant:"outline",size:"sm",className:"flex items-center gap-2 hover:bg-purple-500 hover:text-white transition-all duration-300 border-purple-300 hover:border-purple-500",onClick:()=>{console.log("=== MANAGE DEVICES BUTTON CLICKED ==="),console.log("Super admin managing devices for tenant:",k),console.log("Apartment:",te),pe(te,k)},children:[n.jsx(di,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline font-medium",children:"Manage"})]}),n.jsxs(I,{variant:"outline",size:"sm",className:"flex items-center gap-2 hover:bg-blue-500 hover:text-white transition-all duration-300 border-blue-300 hover:border-blue-500",onClick:()=>l(k),children:[n.jsx(Bm,{className:"w-4 h-4"}),n.jsx("span",{className:"font-bold text-base",children:k.tickets_count||0}),n.jsx("span",{className:"hidden sm:inline font-medium",children:"Tickets"})]}),(((Xr=(Zr=ue.user)==null?void 0:Zr.roles)==null?void 0:Xr.includes("super-admin"))||((gt=(xr=ue.user)==null?void 0:xr.roles)==null?void 0:gt.includes("owner"))||((Jr=(de=ue.user)==null?void 0:de.roles)==null?void 0:Jr.includes("doorman")))&&n.jsxs(I,{variant:"outline",size:"sm",className:"flex items-center gap-2 hover:bg-orange-500 hover:text-white transition-all duration-300 border-orange-300 hover:border-orange-500",onClick:()=>ge(k),disabled:Re,children:[n.jsx(Xo,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline font-medium",children:"Reset Password"})]})]})]},k.id)})})]})})})]})},Jm=[{title:"Apartments",href:"/apartments"}];export{N0 as default};
