import{j as e}from"./ui-B_LlBPKL.js";import{r as g,U as We}from"./recharts-C_88tpBl.js";import{A as ys}from"./app-layout-Dl_2JLwh.js";import{K as Cs,m as Ds,L as Ts,t as N,S as se}from"./app-BHqtn3Wb.js";import{B as h}from"./button-D7WChgOL.js";import{u as Ss,f as Qe,c as _s,b as As}from"./index-DEubyOLC.js";import{T as Ms,a as Rs,b as Se,c as Es,d as Ls,e as Je}from"./table-DH001fLy.js";import{I as re}from"./input-CPYfG3NN.js";import{D as $s,a as Is,b as Fs,d as Xe}from"./dropdown-menu-DMNoBHsR.js";import{S as _e}from"./switch-CfMBp_U3.js";import{D as V,a as q,b as B,c as K,e as G,d as Ze}from"./dialog-Cpjj7P1V.js";import{L as C}from"./label-BFkwPYrm.js";import{S as te,a as ae,b as le,c as oe,d as w}from"./select-BW9itjM_.js";import{a as d,b as n,c,T as Ae}from"./tooltip-CZNM2GAl.js";import{B as ie}from"./badge-D8qydIEn.js";import{C as de,a as ne}from"./card-D2PMvY5E.js";import{U as es}from"./users-BUOHIUcQ.js";import{C as Me}from"./circle-check-big-kRE2lEsQ.js";import{T as Y,L as Us,G as Os,a as Ps,b as zs,H as Re}from"./trophy-BpbwooG3.js";import{F as ce,a as me,C as xe}from"./x-DCQyXNSS.js";import{T as Hs,E as ss,M as Vs,P as qs,a as Bs,b as Ks}from"./trending-up-DPs1t5N1.js";import{F as Gs,M as rs}from"./map-pin-DU2QgsnQ.js";import{P as ts}from"./plus-CzQ2zNVS.js";import{S as Ys}from"./search-Du8maFVh.js";import{T as Ws}from"./table-BB7lDMma.js";import{R as Qs}from"./refresh-cw-DkX1lbet.js";import{U as F}from"./user-CpLSdjZ6.js";import{T as Ee}from"./triangle-alert-CwQCDSSb.js";import{C as as}from"./calendar-B5ENoLvU.js";import{C as ls,a as Js}from"./circle-alert-CQiE_YKh.js";import{C as he}from"./clock-C9AFtO6q.js";import{S as Xs}from"./star-C9wwVdhM.js";import{E as Zs}from"./ellipsis-Bcr1duWK.js";import{S as Le}from"./square-pen-CZ4LUS4h.js";import{T as $e}from"./trash-2-Cs4R96q7.js";import{E as er}from"./eye-C0Ej2ac6.js";import"./react-B1hewrmX.js";import"./utils-BJRzUxt3.js";import"./chevron-up-RfB0QmaY.js";import"./createLucideIcon-BiVfa5Ur.js";import"./index-BwDU8Ijz.js";import"./index-D4fRSykC.js";import"./index-Cno2KWhz.js";import"./chevrons-up-down-DyCAeWvF.js";import"./check-ei1vhWUY.js";const u=({value:j,duration:E=1e3})=>{const[U,L]=We.useState(0);return We.useEffect(()=>{let p,D;const k=b=>{p||(p=b);const $=Math.min((b-p)/E,1),T=1-Math.pow(1-$,3),O=Math.floor(T*j);L(O),$<1&&(D=requestAnimationFrame(k))};return D=requestAnimationFrame(k),()=>{D&&cancelAnimationFrame(D)}},[j,E]),e.jsx("span",{children:U})};function Gr({technicals:j}){var Be,Ke,Ge;const{auth:E}=Cs().props,U=((Be=E==null?void 0:E.user)==null?void 0:Be.roles)||[],L=Array.isArray(U)?U.includes("super-admin"):!1;console.log("User roles:",U);const p=s=>!!s.is_default,D=s=>{switch(s){case"open":return"bg-red-100 text-red-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"resolved":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},k=s=>new Date(s).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}),b=async(s,r)=>{const x={all:"All Tickets",today:"Today's Tickets",week:"This Week's Tickets",month:"This Month's Tickets",recent:"Recent Completed Tickets (Last 7 days)",open:"Open Tickets",in_progress:"In Progress Tickets",resolved:"Resolved Tickets",closed:"Closed Tickets"};xs(`${s.name} - ${x[r]}`),ze(!0),ge(!0);try{const a=await fetch(`/api/technicals/${s.id}/tickets?type=${r}`);if(a.ok){const i=await a.json();je(i)}else{let i=s.tickets||[];switch(r){case"open":{i=i.filter(t=>t.status==="open");break}case"in_progress":{i=i.filter(t=>t.status==="in_progress");break}case"resolved":{i=i.filter(t=>t.status==="resolved");break}case"closed":{i=i.filter(t=>t.status==="closed");break}case"today":{const t=new Date;t.setHours(0,0,0,0);const l=new Date(t);l.setDate(t.getDate()+1),i=i.filter(m=>{const v=new Date(m.created_at);return v>=t&&v<l});break}case"week":{const t=new Date,l=new Date(t);l.setDate(t.getDate()-t.getDay()),l.setHours(0,0,0,0),i=i.filter(m=>new Date(m.created_at)>=l);break}case"month":{const t=new Date,l=new Date(t.getFullYear(),t.getMonth(),1);i=i.filter(m=>new Date(m.created_at)>=l);break}case"recent":{const t=new Date;t.setDate(t.getDate()-7),t.setHours(0,0,0,0),i=i.filter(l=>new Date(l.created_at)>=t&&["resolved","closed"].includes(l.status));break}default:break}je(i)}}catch(a){console.log("Using local tickets data:",a),N.error("Could not fetch latest ticket data, showing local data");let i=s.tickets||[];switch(r){case"open":i=i.filter(t=>t.status==="open");break;case"in_progress":i=i.filter(t=>t.status==="in_progress");break;case"resolved":i=i.filter(t=>t.status==="resolved");break;case"closed":i=i.filter(t=>t.status==="closed");break;case"today":{const t=new Date;t.setHours(0,0,0,0);const l=new Date(t);l.setDate(t.getDate()+1),i=i.filter(m=>{const v=new Date(m.created_at);return v>=t&&v<l});break}case"week":{const t=new Date,l=new Date(t);l.setDate(t.getDate()-t.getDay()),l.setHours(0,0,0,0),i=i.filter(m=>new Date(m.created_at)>=l);break}case"month":{const t=new Date,l=new Date(t.getFullYear(),t.getMonth(),1);i=i.filter(m=>new Date(m.created_at)>=l);break}case"recent":{const t=new Date;t.setDate(t.getDate()-7),t.setHours(0,0,0,0),i=i.filter(l=>new Date(l.created_at)>=t&&["resolved","closed"].includes(l.status));break}}je(i)}finally{ze(!1)}},$=async s=>{Oe(!0),ue(!0);try{const r=await fetch(`/api/tickets/${s}/detail`);if(r.ok){const x=await r.json();fe(x)}else{const x={id:s,title:"Sample Ticket",description:"This is a sample ticket description with technical details...",status:"in_progress",priority:"high",category:"Hardware",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),history:[{id:1,action:"Ticket Created",description:"Ticket was created by tenant",created_at:new Date().toISOString(),user:{name:"System",role:"system"}}],comments:[]};fe(x)}}catch{N.error("Error loading ticket details")}finally{Oe(!1)}},[T,O]=g.useState("list"),[os,W]=g.useState(!1),[is,Q]=g.useState(!1),[y,J]=g.useState(null),[pe,Ie]=g.useState(null),[Fe,ds]=g.useState(4),[ns,ge]=g.useState(!1),[cs,ue]=g.useState(!1),[_,je]=g.useState([]),[o,fe]=g.useState(null),[ms,xs]=g.useState(""),[A,be]=g.useState(""),[M,ve]=g.useState("all"),[I,Ne]=g.useState("all"),[Ue,hs]=g.useState(!1),[ps,Oe]=g.useState(!1),[Pe,ze]=g.useState(!1),S=s=>!s||s==="null"||s.trim()===""?null:`/storage/${s}`,P=j.data.filter(s=>{const r=s.name.toLowerCase().includes(A.toLowerCase())||s.email.toLowerCase().includes(A.toLowerCase())||s.phone.includes(A),x=M==="all"||M==="active"&&s.status||M==="inactive"&&!s.status,a=I==="all"||s.shift===I;return r&&x&&a}),[gs,z]=g.useState(!1),[us,X]=g.useState(!1),[we,Z]=g.useState(null),{data:f,setData:R,delete:js,processing:He,reset:fs}=Ds({id:null,name:"",email:"",phone:"",shift:"morning",photo:null}),H=(s,r)=>{switch(s){case"name":case"email":case"phone":R(s,r);break;case"shift":R(s,r);break;case"photo":R(s,r);break;case"id":R(s,r);break}if(we){const x={...f,[s]:r},a=Object.keys(we).some(i=>{const t=i;return t==="photo"?x[t]!==null:we[t]!==x[t]});z(a)}},Ve=()=>{gs?X(!0):ee()},ee=()=>{W(!1),X(!1),z(!1),Z(null),fs()},bs=()=>{ee()},qe=[{accessorKey:"photo",header:"Photo",cell:({row:s})=>e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden",children:S(s.original.photo)?e.jsx("img",{src:S(s.original.photo),alt:s.original.name,className:"w-full h-full object-cover",onError:r=>{const x=r.target;x.style.display="none",x.parentElement.innerHTML='<div class="w-full h-full bg-gray-200 flex items-center justify-center"><User size={16} class="text-gray-500" /></div>'}}):e.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:e.jsx(F,{className:"w-5 h-5 text-gray-400"})})})},{accessorKey:"name",header:"Name"},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{accessorKey:"shift",header:"Shift",cell:({row:s})=>e.jsx("span",{className:"capitalize",children:s.original.shift})},{accessorKey:"is_default",header:"Role",cell:({row:s})=>e.jsx("div",{className:"flex items-center gap-2",children:L?e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{variant:p(s.original)?"default":"outline",size:"sm",onClick:()=>Ce(s.original),className:"h-6 px-2 text-xs",children:p(s.original)?"Remove Chief":"Set as Chief"})}),e.jsxs(c,{children:[e.jsxs("p",{children:[p(s.original)?"Remove as":"Set as"," Tech Default"]}),e.jsx("p",{children:"Tech Defaults have additional permissions"})]})]}):e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${p(s.original)?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:p(s.original)?"Tech Default":"Technical"})})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx(_e,{checked:s.original.status,onCheckedChange:()=>ye(s.original),disabled:pe===s.original.id})}),e.jsx(c,{children:e.jsxs("p",{children:[s.original.status?"Deactivate":"Activate"," technical"]})})]}),e.jsx(sr,{status:s.original.status?"active":"inactive"})]})},{id:"actions",header:"Actions",cell:({row:s})=>e.jsxs($s,{children:[e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx(Is,{asChild:!0,children:e.jsx(h,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(Zs,{className:"h-4 w-4"})})})}),e.jsx(c,{children:e.jsx("p",{children:"More actions"})})]}),e.jsxs(Fs,{align:"end",children:[e.jsxs(Xe,{onClick:()=>De(s.original),children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsxs(Xe,{onClick:()=>Te(s.original),children:[e.jsx($e,{className:"mr-2 h-4 w-4 text-destructive"}),"Delete"]})]})]})}],ke=Ss({data:P,columns:qe,getCoreRowModel:As(),getPaginationRowModel:_s()}),vs=({technicals:s,gridColumns:r})=>{const x=()=>{switch(r){case 2:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-2";case 3:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-3";case 4:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-4";case 5:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-5";case 6:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-6";default:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"}};return e.jsx(Ae,{children:e.jsx("div",{className:`grid ${x()} gap-6`,children:s.map((a,i)=>e.jsxs("div",{className:"bg-gradient-to-br from-white to-corporate-gold/5 dark:from-dark-brown dark:to-corporate-gold/10 p-4 rounded-xl shadow-sm transition-all duration-500 border-2 border-corporate-gold/20 relative overflow-hidden",style:{animationDelay:`${i*150}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:[e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-br from-corporate-gold/20 to-transparent rounded-bl-2xl opacity-50"}),e.jsx("div",{className:"w-full aspect-square rounded-lg overflow-hidden mb-4 border-2 border-corporate-gold/30 transition-all duration-300 relative",children:S(a.photo)?e.jsx("img",{src:S(a.photo),alt:a.name,className:"w-full h-full object-cover",onError:t=>{t.currentTarget.src="/images/default-user.png"}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-corporate-gold/10 to-corporate-warm/10 flex items-center justify-center",children:e.jsx(F,{className:"w-16 h-16 text-corporate-gold/60"})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx("h3",{className:"font-semibold text-xl truncate text-corporate-gold dark:text-corporate-gold-light transition-colors duration-300 cursor-help",children:a.name})}),e.jsxs(c,{children:[e.jsxs("p",{children:["Technical: ",a.name]}),e.jsxs("p",{children:["Email: ",a.email]}),e.jsxs("p",{children:["Phone: ",a.phone]})]})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx(_e,{checked:a.status,onCheckedChange:()=>ye(a),disabled:pe===a.id,className:"scale-90 data-[state=checked]:bg-corporate-gold"})}),e.jsx(c,{children:e.jsxs("p",{children:[a.status?"Deactivate":"Activate"," technical"]})})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{className:"text-muted-foreground truncate",children:a.email}),e.jsx("p",{className:"font-medium text-corporate-dark-brown dark:text-corporate-gold-light",children:a.phone}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`capitalize text-white px-3 py-1 rounded-md font-medium transition-all duration-300 ${a.shift==="morning"?"bg-gradient-to-r from-corporate-gold to-corporate-warm shadow-lg shadow-corporate-gold/30":a.shift==="afternoon"?"bg-gradient-to-r from-corporate-warm to-corporate-gold shadow-lg shadow-corporate-warm/30":"bg-gradient-to-r from-corporate-dark-brown to-corporate-brown shadow-lg shadow-corporate-dark-brown/30"}`,children:a.shift}),p(a)&&e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx("span",{className:"bg-gradient-to-r from-corporate-gold via-corporate-warm to-corporate-gold text-white px-2 py-1 rounded-md text-xs font-medium animate-pulse shadow-lg cursor-help",children:"Tech Default"})}),e.jsxs(c,{children:[e.jsx("p",{children:"Technical Chief - Team Leader"}),e.jsx("p",{children:"Has special permissions and responsibilities"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>b(a,"month"),className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-2 rounded-lg border border-purple-200 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600",children:e.jsx(u,{value:a.monthly_tickets})}),e.jsx("div",{className:"text-xs text-purple-600",children:"Month"})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view this month's tickets"}),e.jsxs("p",{children:[a.monthly_tickets," tickets this month"]})]})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>b(a,"week"),className:"bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 p-2 rounded-lg border border-corporate-gold/30 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-lg font-bold text-corporate-gold",children:e.jsx(u,{value:a.weekly_tickets})}),e.jsx("div",{className:"text-xs text-corporate-gold",children:"Week"})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view this week's tickets"}),e.jsxs("p",{children:[a.weekly_tickets," tickets this week"]})]})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>b(a,"today"),className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-2 rounded-lg border border-green-200 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:e.jsx(u,{value:a.today_tickets})}),e.jsx("div",{className:"text-xs text-green-600",children:"Today"})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view today's tickets"}),e.jsxs("p",{children:[a.today_tickets," tickets today"]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{onClick:()=>De(a),variant:"outline",size:"sm",className:"gap-2 px-4 border-corporate-gold/30 transition-all duration-300",children:e.jsx(Le,{className:"w-4 h-4"})})}),e.jsx(c,{children:e.jsx("p",{children:"Edit technical information"})})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{onClick:()=>Te(a),variant:"outline",size:"sm",className:"gap-2 px-4 border-red-300 transition-all duration-300",children:e.jsx($e,{className:"w-4 h-4"})})}),e.jsxs(c,{children:[e.jsx("p",{children:"Delete technical permanently"}),e.jsx("p",{className:"text-red-500",children:"This action cannot be undone"})]})]})]}),L&&e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs(h,{onClick:()=>Ce(a),variant:p(a)?"default":"outline",size:"sm",className:`text-xs transition-all duration-300 ${p(a)?"bg-gradient-to-r from-corporate-gold to-corporate-warm text-white shadow-lg":"border-corporate-gold/30"}`,children:[e.jsx(Y,{className:"w-4 h-4 mr-1"}),p(a)?"Remove Chief":"Set as Chief"]})}),e.jsxs(c,{children:[e.jsxs("p",{children:[p(a)?"Remove as":"Set as"," Tech Default"]}),e.jsx("p",{children:"Tech Defaults have additional permissions"})]})]})]})]})]},a.id))})})},Ns=({technicals:s})=>e.jsx(Ae,{children:e.jsx("div",{className:"space-y-6",children:s.map((r,x)=>{var a,i,t;return e.jsxs("div",{className:"bg-gradient-to-r from-white to-corporate-gold/5 dark:from-transparent dark:to-corporate-gold/10 rounded-xl shadow-sm transition-all duration-500 border-2 border-corporate-gold/20 overflow-hidden group",style:{animationDelay:`${x*200}ms`,animation:"fadeInUp 0.8s ease-out forwards"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-corporate-gold/0 via-corporate-gold/5 to-corporate-gold/0 opacity-0 transition-opacity duration-700 pointer-events-none"}),e.jsxs("div",{className:"flex relative z-10",children:[e.jsxs("div",{className:"w-80 bg-gradient-to-br from-corporate-gold/10 to-corporate-warm/10 dark:from-corporate-gold/20 dark:to-corporate-warm/20 p-6 border-r border-corporate-gold/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-corporate-gold/20 to-transparent rounded-bl-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-gradient-to-tr from-corporate-warm/20 to-transparent rounded-tr-3xl"}),e.jsxs("div",{className:"flex flex-col items-center text-center space-y-4 relative z-10",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-corporate-gold/30 shadow-xl relative transition-transform duration-500",children:S(r.photo)?e.jsx("img",{src:S(r.photo),alt:r.name,className:"w-full h-full object-cover",onError:l=>{l.currentTarget.src="/images/default-user.png"}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 flex items-center justify-center",children:e.jsx(F,{className:"w-12 h-12 text-corporate-gold"})})}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-corporate-gold/0 transition-all duration-500"}),p(r)&&e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx("div",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-corporate-gold to-corporate-warm rounded-full p-2 shadow-lg animate-bounce",children:e.jsx(Y,{className:"w-4 h-4 text-primary-foreground dark:text-white"})})}),e.jsx(c,{children:e.jsx("p",{children:"Technical Chief - Team Leader"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-xl text-corporate-gold dark:text-corporate-gold-light transition-colors duration-300",children:r.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.email}),e.jsx("p",{className:"font-medium text-corporate-dark-brown dark:text-corporate-gold-light",children:r.phone}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium capitalize shadow-lg transition-all duration-300  ${r.shift==="morning"?"bg-gradient-to-r from-corporate-gold to-corporate-warm text-primary-foregrounde shadow-corporate-gold/30":r.shift==="afternoon"?"bg-gradient-to-r from-corporate-warm to-corporate-gold text-primary-foreground shadow-corporate-warm/30":"bg-gradient-to-r from-corporate-dark-brown to-corporate-brown text-primary-foreground shadow-corporate-dark-brown/30"}`,children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),r.shift]}),p(r)&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 dark:text-white rounded-full text-xs font-medium bg-gradient-to-r from-corporate-gold via-corporate-warm to-corporate-gold text-primary-foreground shadow-lg",children:[e.jsx(Y,{className:"w-3 h-3 mr-1"}),"Tech Default"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"bg-white/70 dark:bg-transparent dark:bg-corporate-gold/10 p-2 rounded-lg border border-corporate-gold/20 text-center transition-colors duration-300 cursor-pointer",children:[e.jsx("div",{className:"text-lg font-bold text-corporate-gold animate-pulse",children:e.jsx(u,{value:r.current_streak})}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Streak"})]})}),e.jsx(c,{children:e.jsx("p",{children:"Consecutive resolved tickets"})})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"bg-white/70 dark:bg-transparent p-2 rounded-lg border border-corporate-gold/20 text-center transition-colors duration-300 cursor-pointer",children:[e.jsxs("div",{className:"text-lg font-bold text-corporate-warm",children:[e.jsx(u,{value:r.avg_resolution_time}),"h"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Time"})]})}),e.jsx(c,{children:e.jsx("p",{children:"Average resolution time in hours"})})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`px-2 py-1 flex gap-2 items-center rounded-full text-xs font-medium transition-all duration-300 ${r.status?"bg-gradient-to-r from-green-100 to-green-200 text-green-800 shadow-green-200/50":"bg-gradient-to-r from-red-100 to-red-200 text-red-800 shadow-red-200/50"}`,children:[e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx(_e,{checked:r.status,onCheckedChange:()=>ye(r),disabled:pe===r.id,className:"data-[state=checked]:bg-white data-[state=unchecked]:bg-gray-200"})}),e.jsx(c,{children:e.jsxs("p",{children:[r.status?"Deactivate":"Activate"," technical"]})})]}),r.status?"Active":"Inactive"]})}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{onClick:()=>De(r),variant:"outline",size:"sm",className:"flex-1 border-corporate-gold/30 transition-colors duration-300",children:e.jsx(Le,{className:"w-4 h-4"})})}),e.jsx(c,{children:e.jsx("p",{children:"Edit technical information"})})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{onClick:()=>Te(r),variant:"outline",size:"sm",className:"flex-1 border-red-300 transition-colors duration-300",children:e.jsx($e,{className:"w-4 h-4"})})}),e.jsx(c,{children:e.jsx("p",{children:"Delete technical permanently"})})]}),L&&e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{onClick:()=>Ce(r),variant:p(r)?"default":"outline",size:"sm",className:`flex-1 transition-colors duration-300 ${p(r)?"bg-secondary text-primary-foreground border-corporate-gold":"border-corporate-gold/30"}`,children:e.jsx(Y,{className:"w-4 h-4"})})}),e.jsx(c,{children:e.jsxs("p",{children:[p(r)?"Remove as":"Set as"," Tech Default"]})})]})]})]})]}),e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(zs,{className:"w-5 h-5 text-corporate-gold"}),e.jsx("h4",{className:"font-semibold text-lg text-corporate-gold dark:text-corporate-gold-light",children:"Performance Metrics"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>b(r,"today"),className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-3 rounded-lg border border-green-200 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-xl font-bold text-green-600",children:e.jsx(u,{value:r.today_tickets})}),e.jsx("div",{className:"text-xs text-green-600",children:"Today"})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view today's tickets"}),e.jsxs("p",{children:[r.today_tickets," tickets created today"]})]})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>b(r,"week"),className:"bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 p-3 rounded-lg border border-corporate-gold/30 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-xl font-bold text-corporate-gold",children:e.jsx(u,{value:r.weekly_tickets})}),e.jsx("div",{className:"text-xs text-corporate-gold",children:"This Week"})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view this week's tickets"}),e.jsxs("p",{children:[r.weekly_tickets," tickets this week"]})]})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>b(r,"month"),className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-3 rounded-lg border border-purple-200 text-center transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-xl font-bold text-purple-600",children:e.jsx(u,{value:r.monthly_tickets})}),e.jsx("div",{className:"text-xs text-purple-600",children:"This Month"})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view this month's tickets"}),e.jsxs("p",{children:[r.monthly_tickets," tickets this month"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>b(r,"open"),className:"flex items-center justify-between p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Js,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Open Tickets"}),e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Require immediate attention"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-red-600",children:e.jsx(u,{value:r.open_tickets})}),e.jsx(xe,{className:"w-4 h-4 text-red-500"})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view all open tickets"}),e.jsxs("p",{children:[r.open_tickets," tickets waiting for work to begin"]})]})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>b(r,"in_progress"),className:"flex items-center justify-between p-3 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(he,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-300",children:"In Progress"}),e.jsx("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:"Currently being worked on"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-yellow-600",children:e.jsx(u,{value:r.in_progress_tickets})}),e.jsx(xe,{className:"w-4 h-4 text-yellow-500"})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view all tickets in progress"}),e.jsxs("p",{children:[r.in_progress_tickets," tickets actively being resolved"]})]})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>b(r,"resolved"),className:"flex items-center justify-between p-3 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Resolved"}),e.jsx("div",{className:"text-xs text-green-600 dark:text-green-400",children:"Successfully completed"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-green-600",children:e.jsx(u,{value:r.resolved_tickets})}),e.jsx(xe,{className:"w-4 h-4 text-green-500"})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view all resolved tickets"}),e.jsxs("p",{children:[r.resolved_tickets," tickets successfully completed"]})]})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>b(r,"recent"),className:"flex items-center justify-between p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 transition-all duration-300 cursor-pointer hover:scale-105 transform",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Re,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Recent Completed"}),e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Last 7 days (resolved/closed only)"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:e.jsx(u,{value:((a=r.tickets)==null?void 0:a.filter(l=>{const m=new Date;return m.setDate(m.getDate()-7),new Date(l.created_at)>=m&&["resolved","closed"].includes(l.status)}).length)||0})}),e.jsx(xe,{className:"w-4 h-4 text-blue-500"})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view recent completed tickets"}),e.jsx("p",{children:"Shows only resolved/closed tickets from last 7 days"}),e.jsx("p",{className:"text-blue-500",children:"Excludes active (open/in progress) tickets"})]})]})]}),r.total_tickets>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-corporate-gold font-medium",children:"Success Rate"}),e.jsxs("span",{className:"font-bold text-corporate-gold",children:[e.jsx(u,{value:Math.round(r.resolved_tickets/r.total_tickets*100)}),"%"]})]}),e.jsx("div",{className:"w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-full h-3 shadow-inner overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-corporate-gold via-corporate-warm to-corporate-gold h-3 rounded-full transition-all duration-2000 ease-out shadow-lg relative",style:{width:`${Math.round(r.resolved_tickets/r.total_tickets*100)}%`,animationDelay:`${x*300}ms`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t border-corporate-gold/20",children:[e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"text-center p-2 rounded-lg bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border border-green-200 transition-colors duration-300 cursor-pointer hover:bg-gradient-to-br hover:from-green-100 hover:to-green-150",children:[e.jsx("div",{className:"text-sm font-medium text-green-600",children:"Resolved Today"}),e.jsx("div",{className:"text-lg font-bold text-green-600",children:e.jsx(u,{value:r.resolved_today})})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Tickets resolved today"}),e.jsx("p",{children:"Shows completion performance for today"})]})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"text-center p-2 rounded-lg bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 border border-corporate-gold/30 transition-colors duration-300 cursor-pointer hover:bg-gradient-to-br hover:from-corporate-gold/30 hover:to-corporate-warm/30",children:[e.jsx("div",{className:"text-sm font-medium text-corporate-gold",children:"Avg Resolution"}),e.jsxs("div",{className:"text-lg font-bold text-corporate-gold",children:[e.jsx(u,{value:r.avg_resolution_time}),"h"]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Average time to resolve tickets"}),e.jsx("p",{children:"Lower is better for efficiency"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(me,{className:"w-5 h-5 text-corporate-gold"}),e.jsx("h4",{className:"font-semibold text-lg text-corporate-gold dark:text-corporate-gold-light",children:"Active Assignments"}),e.jsx("span",{className:"bg-gradient-to-r from-corporate-gold/20 to-corporate-warm/20 text-corporate-gold border border-corporate-gold/30 px-2 py-1 rounded-full text-xs font-medium animate-pulse",children:e.jsx(u,{value:r.assigned_devices_count})})]}),e.jsx("div",{className:"space-y-2 max-h-36 overflow-y-auto overflow-x-hidden",children:((i=r.assigned_devices)==null?void 0:i.length)>0?r.assigned_devices.map((l,m)=>{var v,Ye;return e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 p-3 rounded-lg border border-corporate-gold/20 hover:bg-gradient-to-r hover:from-corporate-gold/10 hover:to-corporate-warm/10 hover:border-corporate-gold/40 transition-colors duration-300 cursor-pointer",style:{animationDelay:`${x*100+m*50}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:[e.jsx("div",{className:"font-medium text-sm text-corporate-gold truncate",children:l.name}),e.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:[(v=l.brand)==null?void 0:v.name," • ",(Ye=l.model)==null?void 0:Ye.name]}),l.system&&e.jsxs("div",{className:"text-xs text-corporate-warm mt-1 truncate",children:["System: ",l.system.name]})]})}),e.jsx(c,{children:e.jsx("p",{children:"Device with active/in-progress tickets"})})]},l.id)}):e.jsx("div",{className:"text-sm text-muted-foreground italic p-3 text-center bg-corporate-gold/5 rounded-lg border border-corporate-gold/20",children:"No active device assignments"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-5 h-5 text-corporate-gold"}),e.jsx("h4",{className:"font-semibold text-lg text-corporate-gold dark:text-corporate-gold-light",children:"Recent Completed Tickets"})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>b(r,"recent"),className:"text-xs border-corporate-gold/30 hover:bg-primary hover:text-white",children:[e.jsx(er,{className:"w-3 h-3 mr-1"}),"View All Recent"]})}),e.jsx(c,{children:e.jsx("p",{children:"View tickets from last 7 days"})})]})]}),e.jsx("div",{className:"space-y-2 max-h-44 overflow-y-auto scrollbar-thin",children:((t=r.tickets)==null?void 0:t.filter(l=>{const m=new Date;return m.setDate(m.getDate()-7),m.setHours(0,0,0,0),new Date(l.created_at)>=m&&["resolved","closed"].includes(l.status)}).length)>0?r.tickets.filter(l=>{const m=new Date;return m.setDate(m.getDate()-7),m.setHours(0,0,0,0),new Date(l.created_at)>=m&&["resolved","closed"].includes(l.status)}).slice(0,5).map((l,m)=>e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{onClick:()=>$(l.id),className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 p-3 rounded-lg border border-corporate-gold/20 hover:bg-gradient-to-r hover:from-corporate-gold/10 hover:to-corporate-warm/10 hover:border-corporate-gold/40 transition-all duration-300 cursor-pointer hover:scale-105 transform group",style:{animationDelay:`${x*100+m*50}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium text-sm truncate pr-2 text-corporate-gold group-hover:text-corporate-warm",children:l.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium transition-all duration-300 flex-shrink-0 ${D(l.status)}`,children:l.status.replace("_"," ")}),e.jsx(ss,{className:"w-3 h-3 text-corporate-gold opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 truncate",children:[k(l.created_at),l.building&&e.jsxs("span",{className:"ml-2 text-corporate-warm",children:["• ",l.building.name]})]}),l.device&&e.jsxs("div",{className:"text-xs text-corporate-gold mt-1 truncate",children:["Device: ",l.device.name]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Click to view ticket details and history"}),e.jsx("p",{className:"text-green-500",children:"✓ Completed ticket"}),e.jsxs("p",{children:["Status: ",l.status]})]})]},l.id)):e.jsxs("div",{className:"text-sm text-muted-foreground italic p-3 text-center bg-corporate-gold/5 rounded-lg border border-corporate-gold/20",children:[e.jsx(Re,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{children:"No recent completed tickets"}),e.jsx("p",{className:"text-xs mt-1",children:"Last 7 days show no resolved/closed tickets"})]})})]})]})]})})]})]},r.id)})})}),ye=async s=>{Ie(s.id);try{await se.put(route("technicals.update-status",s.id),{},{preserveScroll:!0,onSuccess:()=>N.success("Status updated"),onError:()=>N.error("Error updating status")})}finally{Ie(null)}},Ce=async s=>{if(!L){N.error("Only super-admin can manage Tech Defaults");return}try{await se.put(route("technicals.set-default",s.id),{},{preserveScroll:!0,onSuccess:()=>{const r=p(s)?"removed from":"assigned as";N.success(`Technical ${r} Tech Default successfully`)},onError:()=>N.error("Error updating Tech Default status")})}catch{N.error("Connection error")}},De=s=>{const r={id:s.id,name:s.name,email:s.email,phone:s.phone,shift:s.shift,photo:null};R(r),Z(r),J(s),z(!1),W(!0)},Te=s=>{J(s),Q(!0)},ws=s=>{if(s.preventDefault(),f.id){const r=new FormData;r.append("_method","PUT"),Object.entries(f).forEach(([x,a])=>{a!==null&&(typeof a=="number"?r.append(x,a.toString()):r.append(x,a))}),se.post(route("technicals.update",f.id),r,{preserveScroll:!0,onSuccess:()=>{ee(),N.success("Technical updated")},onError:x=>{Object.values(x).forEach(a=>N.error(a))}})}else{const r={name:f.name,email:f.email,phone:f.phone,shift:f.shift,photo:f.photo};se.post(route("technicals.store"),r,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{ee(),N.success("Technical created")},onError:x=>{Object.values(x).forEach(a=>N.error(a))}})}},ks=()=>{y&&js(route("technicals.destroy",y.id),{preserveScroll:!0,onSuccess:()=>{Q(!1),N.success("Technical deleted")},onError:()=>{N.error("Delete failed")}})};return e.jsxs(ys,{children:[e.jsx(Ts,{title:"Technicals Management"}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(30px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                
                @keyframes bounceIn {
                    0% {
                        opacity: 0;
                        transform: scale(0.3);
                    }
                    50% {
                        opacity: 1;
                        transform: scale(1.05);
                    }
                    70% {
                        transform: scale(0.9);
                    }
                    100% {
                        opacity: 1;
                        transform: scale(1);
                    }
                }
                
                @keyframes shimmer {
                    0% {
                        background-position: -200px 0;
                    }
                    100% {
                        background-position: calc(200px + 100%) 0;
                    }
                }
                
                .animate-fadeInUp {
                    animation: fadeInUp 0.6s ease-out;
                }
                
                .animate-bounceIn {
                    animation: bounceIn 0.8s ease-out;
                }
                
                .animate-shimmer {
                    background: linear-gradient(
                        90deg,
                        transparent,
                        rgba(255, 255, 255, 0.2),
                        transparent
                    );
                    background-size: 200px 100%;
                    animation: shimmer 2s infinite;
                }
                
                .scrollbar-thin {
                    scrollbar-width: thin;
                }
                
                .scrollbar-thin::-webkit-scrollbar {
                    width: 4px;
                    height: 4px;
                }
                
                .scrollbar-thin::-webkit-scrollbar-track {
                    background: transparent;
                }
                
                .scrollbar-thin::-webkit-scrollbar-thumb {
                    background-color: rgba(156, 163, 175, 0.2);
                    border-radius: 2px;
                }
                
                .scrollbar-thin::-webkit-scrollbar-thumb:hover {
                    background-color: rgba(156, 163, 175, 0.3);
                }
            `}}),e.jsxs("div",{className:"bg-gradient-to-br from-corporate-gold/10 via-corporate-warm/10 to-corporate-gold/5 dark:from-corporate-gold/20 dark:via-corporate-warm/20 dark:to-corporate-gold/10 p-6 border-b border-corporate-gold/20",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-primary to-accent rounded-xl shadow-lg",children:e.jsx(es,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-corporate-gold dark:text-corporate-gold-light",children:"Technical Team Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage technical staff, track performance, and monitor ticket assignments"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsx(de,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200",children:e.jsx(ne,{className:"p-3",children:e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 cursor-help",children:[e.jsx(Me,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Active Technicals"}),e.jsx("p",{className:"text-xl font-bold text-green-700",children:e.jsx(u,{value:j.data.filter(s=>s.status).length})})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Currently active technicals"}),e.jsx("p",{children:"Ready to handle tickets and assignments"})]})]})})}),e.jsx(de,{className:"bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 border-corporate-gold/30",children:e.jsx(ne,{className:"p-3",children:e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 cursor-help",children:[e.jsx(Y,{className:"w-5 h-5 text-corporate-gold"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-corporate-gold",children:"Tech Defaults"}),e.jsx("p",{className:"text-xl font-bold text-corporate-gold",children:e.jsx(u,{value:j.data.filter(s=>s.is_default).length})})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Technical Chiefs - Team Leaders"}),e.jsx("p",{children:"Have additional permissions and responsibilities"}),e.jsx("p",{className:"text-corporate-gold",children:"Only super-admin can assign this role"})]})]})})}),e.jsx(de,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200",children:e.jsx(ne,{className:"p-3",children:e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 cursor-help",children:[e.jsx(ce,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Tickets"}),e.jsx("p",{className:"text-xl font-bold text-blue-700",children:e.jsx(u,{value:j.data.reduce((s,r)=>s+r.total_tickets,0)})})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Total tickets handled by all technicals"}),e.jsx("p",{children:"Includes all statuses across the team"})]})]})})}),e.jsx(de,{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border-purple-200",children:e.jsx(ne,{className:"p-3",children:e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 cursor-help",children:[e.jsx(Hs,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Avg Resolution"}),e.jsxs("p",{className:"text-xl font-bold text-purple-700",children:[e.jsx(u,{value:Math.round(j.data.reduce((s,r)=>s+r.avg_resolution_time,0)/j.data.length)||0}),"h"]})]})]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Average resolution time across all technicals"}),e.jsx("p",{children:"Time from ticket creation to resolution"}),e.jsx("p",{className:"text-purple-500",children:"Lower values indicate better efficiency"})]})]})})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs(h,{variant:"outline",onClick:()=>hs(!Ue),className:"border-corporate-gold/30 hover:bg-corporate-gold hover:text-primary-foreground transition-all duration-300",children:[e.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Advanced Filters"]})}),e.jsxs(c,{children:[e.jsx("p",{children:"Advanced search and filtering options"}),e.jsx("p",{children:"Filter by status, shift, and search terms"})]})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs(h,{onClick:()=>{const s={id:null,name:"",email:"",phone:"",shift:"morning",photo:null};R(s),Z(s),J(null),z(!1),W(!0)},className:"text-primary-foreground bg-primary hover:from-corporate-warm hover:to-corporate-gold  shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(ts,{className:"mr-2 h-4 w-4"}),"Add New Technical"]})}),e.jsx(c,{children:e.jsx("p",{children:"Add a new technical staff member"})})]})]})]}),Ue&&e.jsxs("div",{className:"mt-6 p-4 bg-white dark:bg-gray-800 rounded-xl border border-corporate-gold/20 shadow-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"search",className:"text-sm font-medium text-corporate-gold",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(re,{id:"search",placeholder:"Search by name, email, or phone...",value:A,onChange:s=>be(s.target.value),className:"pl-10 border-corporate-gold/20 focus:border-corporate-gold"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{className:"text-sm font-medium text-corporate-gold",children:"Status"}),e.jsxs(te,{value:M,onValueChange:ve,children:[e.jsx(ae,{className:"border-corporate-gold/20 focus:border-corporate-gold",children:e.jsx(le,{placeholder:"All Status"})}),e.jsxs(oe,{children:[e.jsx(w,{value:"all",children:"All Status"}),e.jsx(w,{value:"active",children:"Active Only"}),e.jsx(w,{value:"inactive",children:"Inactive Only"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{className:"text-sm font-medium text-corporate-gold",children:"Shift"}),e.jsxs(te,{value:I,onValueChange:Ne,children:[e.jsx(ae,{className:"border-corporate-gold/20 focus:border-corporate-gold",children:e.jsx(le,{placeholder:"All Shifts"})}),e.jsxs(oe,{children:[e.jsx(w,{value:"all",children:"All Shifts"}),e.jsx(w,{value:"morning",children:"Morning"}),e.jsx(w,{value:"afternoon",children:"Afternoon"}),e.jsx(w,{value:"night",children:"Night"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{className:"text-sm font-medium text-corporate-gold",children:"View Mode"}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>O("list"),className:`flex-1 ${T==="list"?"bg-white dark:bg-gray-600 shadow-sm":""}`,children:e.jsx(Us,{className:"w-4 h-4 mr-1"})})}),e.jsx(c,{children:e.jsx("p",{children:"Detailed List View - Comprehensive View"})})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>O("grid"),className:`flex-1 ${T==="grid"?"bg-white dark:bg-gray-600 shadow-sm":""}`,children:e.jsx(Os,{className:"w-4 h-4 mr-1"})})}),e.jsx(c,{children:e.jsx("p",{children:"Grid Cards View - Quick Overview"})})]}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>O("table"),className:`flex-1 ${T==="table"?"bg-white dark:bg-gray-600 shadow-sm":""}`,children:e.jsx(Ws,{className:"w-4 h-4 mr-1"})})}),e.jsx(c,{children:e.jsx("p",{children:"Data Table View - Traditional Layout"})})]})]})]})]}),(A||M!=="all"||I!=="all")&&e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),A&&e.jsxs(ie,{variant:"secondary",className:"bg-corporate-gold/10 text-corporate-gold",children:["Search: ",A]}),M!=="all"&&e.jsxs(ie,{variant:"secondary",className:"bg-corporate-gold/10 text-corporate-gold",children:["Status: ",M]}),I!=="all"&&e.jsxs(ie,{variant:"secondary",className:"bg-corporate-gold/10 text-corporate-gold",children:["Shift: ",I]}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>{be(""),ve("all"),Ne("all")},className:"h-6 px-2 text-xs text-muted-foreground hover:text-corporate-gold",children:"Clear all"})]})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[T==="grid"&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Grid columns:"}),e.jsxs(te,{value:Fe.toString(),onValueChange:s=>ds(Number(s)),children:[e.jsx(ae,{className:"w-24 h-8",children:e.jsx(le,{})}),e.jsx(oe,{children:[2,3,4,5,6].map(s=>e.jsx(w,{value:s.toString(),children:s},s))})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",P.length," of ",j.data.length," technicals"]})]}),P.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"animate-bounceIn",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-corporate-gold/30",children:e.jsx(es,{className:"w-16 h-16 text-corporate-gold"})}),e.jsx("h3",{className:"text-2xl font-bold text-corporate-gold mb-4",children:j.data.length===0?"No Technicals Yet":"No Results Found"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:j.data.length===0?"Start building your technical team by adding your first technical staff member.":"Try adjusting your search criteria or filters to find the technicals you're looking for."}),j.data.length===0?e.jsxs(h,{onClick:()=>{const s={id:null,name:"",email:"",phone:"",shift:"morning",photo:null};R(s),Z(s),J(null),z(!1),W(!0)},className:"bg-gradient-to-r from-corporate-gold to-corporate-warm hover:from-corporate-warm hover:to-corporate-gold text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(ts,{className:"mr-2 h-4 w-4"}),"Add Your First Technical"]}):e.jsxs(h,{variant:"outline",onClick:()=>{be(""),ve("all"),Ne("all")},className:"border-corporate-gold/30 hover:bg-corporate-gold hover:text-white",children:[e.jsx(Qs,{className:"mr-2 h-4 w-4"}),"Clear All Filters"]})]})}):T==="list"?e.jsx(Ns,{technicals:P}):T==="grid"?e.jsx(vs,{technicals:P,gridColumns:Fe}):e.jsx(Ae,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(Ms,{children:[e.jsx(Rs,{children:ke.getHeaderGroups().map(s=>e.jsx(Se,{children:s.headers.map(r=>e.jsx(Es,{children:Qe(r.column.columnDef.header,r.getContext())},r.id))},s.id))}),e.jsx(Ls,{children:(Ke=ke.getRowModel().rows)!=null&&Ke.length?ke.getRowModel().rows.map(s=>e.jsx(Se,{children:s.getVisibleCells().map(r=>e.jsx(Je,{children:Qe(r.column.columnDef.cell,r.getContext())},r.id))},s.id)):e.jsx(Se,{children:e.jsx(Je,{colSpan:qe.length,className:"h-24 text-center",children:"No results."})})})]})})}),e.jsx(V,{open:os,onOpenChange:Ve,children:e.jsxs(q,{className:"sm:max-w-[600px] max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(B,{className:"flex-shrink-0",children:e.jsx(K,{children:y?"Edit Technical":"New Technical"})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 space-y-4 scrollbar-thin scrollbar-thumb-corporate-gold/20 scrollbar-track-transparent hover:scrollbar-thumb-corporate-gold/40 dark:scrollbar-thumb-corporate-gold-light/20 dark:hover:scrollbar-thumb-corporate-gold-light/40",children:e.jsxs("form",{onSubmit:ws,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:" space-y-2",children:[e.jsx(C,{children:"Photo"}),e.jsxs("div",{className:"mt-2 group relative w-full aspect-square rounded-lg overflow-hidden border-2 border-dashed bg-muted/50",children:[e.jsx("input",{type:"file",onChange:s=>{var r;return H("photo",((r=s.target.files)==null?void 0:r[0])||null)},className:"hidden",id:"photo-upload"}),e.jsx("label",{htmlFor:"photo-upload",className:"flex flex-col items-center justify-center w-full h-full cursor-pointer",children:f.photo?e.jsx("img",{src:URL.createObjectURL(f.photo),alt:"Preview",className:"w-full h-full object-cover"}):y&&S(y.photo)?e.jsx("img",{src:S(y.photo),alt:"Current",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(F,{className:"w-12 h-12 mx-auto text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload photo"})]})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Name"}),e.jsx(re,{value:f.name,onChange:s=>H("name",s.target.value),required:!0,className:"h-11 mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Email"}),e.jsx(re,{type:"email",value:f.email,onChange:s=>H("email",s.target.value),required:!0,className:"h-11 mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Phone"}),e.jsx(re,{value:f.phone,onChange:s=>H("phone",s.target.value),required:!0,className:"h-11 mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Shift"}),e.jsxs(te,{value:f.shift,onValueChange:s=>H("shift",s),children:[e.jsx(ae,{className:"h-11 mt-2",children:e.jsx(le,{placeholder:"Select shift"})}),e.jsxs(oe,{children:[e.jsx(w,{value:"morning",children:"Morning"}),e.jsx(w,{value:"afternoon",children:"Afternoon"}),e.jsx(w,{value:"night",children:"Night"})]})]})]})]})]}),e.jsxs(G,{className:"flex-shrink-0 pt-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:Ve,children:"Cancel"}),e.jsx(h,{type:"submit",disabled:He,children:He?"Saving...":"Save"})]})]})})]})}),e.jsx(V,{open:us,onOpenChange:X,children:e.jsxs(q,{className:"sm:max-w-md",children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/20 flex items-center justify-center flex-shrink-0",children:e.jsx(Ee,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx(K,{children:"Unsaved Changes"}),e.jsx(Ze,{className:"mt-1",children:"You have unsaved changes that will be lost if you close this dialog."})]})]})}),e.jsxs(G,{className:"gap-2 sm:gap-0",children:[e.jsx(h,{variant:"outline",onClick:()=>X(!1),className:"w-full sm:w-auto",children:"Continue Editing"}),e.jsx(h,{variant:"destructive",onClick:bs,className:"w-full sm:w-auto",children:"Discard Changes"})]})]})}),e.jsx(V,{open:is,onOpenChange:Q,children:e.jsxs(q,{children:[e.jsxs(B,{children:[e.jsx(K,{children:"Confirm Delete"}),e.jsxs(Ze,{children:["Are you sure you want to delete ",y==null?void 0:y.name,"?"]})]}),e.jsxs(G,{children:[e.jsx(h,{variant:"outline",onClick:()=>Q(!1),children:"Cancel"}),e.jsx(h,{variant:"destructive",onClick:ks,children:"Delete"})]})]})}),e.jsx(V,{open:ns,onOpenChange:ge,children:e.jsxs(q,{className:"sm:max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(B,{className:"flex-shrink-0 pb-4 border-b border-corporate-gold/20",children:e.jsxs(K,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-corporate-gold to-corporate-warm rounded-lg",children:e.jsx(ce,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-corporate-gold",children:ms}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:Pe?"Loading tickets...":`${_.length} tickets found`})]}),e.jsx("div",{className:"ml-auto",children:e.jsxs(ie,{variant:"secondary",className:"bg-corporate-gold/10 text-corporate-gold border-corporate-gold/30",children:[_.length," total"]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 scrollbar-thin scrollbar-thumb-corporate-gold/20 scrollbar-track-transparent hover:scrollbar-thumb-corporate-gold/40",children:Pe?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-corporate-gold mb-4"}),e.jsx("p",{className:"text-lg font-medium text-corporate-gold",children:"Loading tickets..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please wait while we fetch the latest data"})]}):_.length>0?e.jsx("div",{className:"space-y-3",children:_.map((s,r)=>e.jsx("div",{onClick:()=>$(s.id),className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 p-4 rounded-lg border border-corporate-gold/20 hover:bg-gradient-to-r hover:from-corporate-gold/10 hover:to-corporate-warm/10 hover:border-corporate-gold/40 transition-all duration-300 cursor-pointer  transform group",style:{animationDelay:`${r*100}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-lg text-corporate-gold group-hover:text-corporate-warm transition-colors duration-300 truncate",children:["#",s.id," - ",s.title]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${D(s.status)}`,children:s.status.replace("_"," ")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(as,{className:"w-4 h-4 text-corporate-gold"}),e.jsxs("span",{children:["Created: ",k(s.created_at)]})]}),s.building&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4 text-corporate-warm"}),e.jsx("span",{children:s.building.name})]}),s.device&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-corporate-gold"}),e.jsx("span",{children:s.device.name})]}),s.priority&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:`w-4 h-4 ${s.priority==="urgent"?"text-red-500":s.priority==="high"?"text-orange-500":s.priority==="medium"?"text-yellow-500":"text-green-500"}`}),e.jsxs("span",{className:"capitalize",children:[s.priority," Priority"]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsx(h,{variant:"outline",size:"sm",onClick:()=>$(s.id),className:"border-corporate-gold/30 hover:bg-primary hover:text-white",children:e.jsx(ss,{className:"w-4 h-4"})})}),e.jsx(c,{children:e.jsx("p",{children:"Open full ticket detail"})})]})})]})},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-corporate-gold/20 to-corporate-warm/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ce,{className:"w-12 h-12 text-corporate-gold"})}),e.jsx("h3",{className:"text-xl font-bold text-corporate-gold mb-2",children:"No tickets found"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"This technical has no tickets for the selected filter. Try a different filter or check back later."})]})}),e.jsx(G,{className:"flex-shrink-0 pt-4",children:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:_.length>0&&e.jsxs("span",{children:["Showing ",_.length," ticket",_.length!==1?"s":""]})}),e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs(h,{variant:"outline",onClick:()=>ge(!1),children:[e.jsx(ls,{className:"w-4 h-4 mr-1"}),"Close"]})}),e.jsx(c,{children:e.jsx("p",{children:"Close ticket list modal"})})]})]})})]})}),e.jsx(V,{open:cs,onOpenChange:ue,children:e.jsxs(q,{className:"sm:max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(B,{className:"flex-shrink-0 pb-6 border-b border-corporate-gold/20",children:e.jsxs(K,{className:"flex items-center gap-3 text-xl font-bold",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-corporate-gold to-corporate-warm rounded-lg",children:e.jsx(ce,{className:"w-6 h-6 text-white"})}),"Ticket Details"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 scrollbar-thin scrollbar-thumb-corporate-gold/20 scrollbar-track-transparent hover:scrollbar-thumb-corporate-gold/40",children:ps?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-corporate-gold mb-4"}),e.jsx("p",{className:"text-lg font-medium text-corporate-gold",children:"Loading ticket details..."})]}):o?e.jsxs("div",{className:"px-6 pb-6",children:[o.user&&o.user.tenant&&e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:o.user.tenant.photo?e.jsx("img",{src:o.user.tenant.photo.startsWith("http")?o.user.tenant.photo:`/storage/${o.user.tenant.photo}`,alt:o.user.tenant.name,className:"w-12 h-12 rounded-full border-2 border-purple-300 shadow-md object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-400 to-blue-400 flex items-center justify-center text-white text-sm font-bold",children:((Ge=o.user.tenant.name)==null?void 0:Ge.substring(0,1))||"?"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(F,{className:"w-3 h-3 text-purple-600"}),e.jsx("p",{className:"text-sm font-semibold text-purple-900 truncate",children:o.user.tenant.name})]}),o.user.tenant.email&&e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(Vs,{className:"w-3 h-3 text-green-600"}),e.jsx("p",{className:"text-xs text-green-800 truncate",children:o.user.tenant.email})]}),o.user.tenant.phone&&e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(qs,{className:"w-3 h-3 text-orange-600"}),e.jsx("p",{className:"text-xs text-orange-800 truncate",children:o.user.tenant.phone})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:o.title}),e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-medium ${D(o.status)}`,children:o.status.replace("_"," ")})]}),e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:o.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"ID:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["#",o.id]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Category:"}),e.jsx("span",{className:"ml-2 font-medium",children:o.category})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.device&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-sky-100 text-sky-700 text-xs font-medium",children:[e.jsx(me,{className:"w-3 h-3"}),o.device.name||"Device"]}),e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-purple-100 text-purple-700 text-xs font-medium",children:[e.jsx(Ps,{className:"w-3 h-3"}),o.category]})]})}),e.jsxs("div",{className:"text-xs text-slate-500 space-y-1 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(as,{className:"w-3 h-3"}),"Created: ",k(o.created_at)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(he,{className:"w-3 h-3"}),"Updated: ",k(o.updated_at)]}),o.resolved_at&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Me,{className:"w-3 h-3"}),"Resolved: ",k(o.resolved_at)]})]}),(o.building||o.device)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[o.building&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 p-3 rounded-lg border",children:[e.jsxs("h4",{className:"font-medium text-sm text-corporate-gold mb-1 flex items-center gap-1",children:[e.jsx(rs,{className:"w-3 h-3"}),"Building"]}),e.jsx("p",{className:"text-sm",children:o.building.name}),o.building.address&&e.jsx("p",{className:"text-xs text-muted-foreground",children:o.building.address})]}),o.device&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 p-3 rounded-lg border",children:[e.jsxs("h4",{className:"font-medium text-sm text-corporate-gold mb-1 flex items-center gap-1",children:[e.jsx(me,{className:"w-3 h-3"}),"Device Details"]}),e.jsx("p",{className:"text-sm",children:o.device.name}),o.device.brand&&e.jsx("p",{className:"text-xs text-muted-foreground",children:o.device.brand.name})]})]})]}),e.jsx("div",{className:"border-t border-slate-200 my-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium text-slate-900 flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-blue-500"}),"History"]}),e.jsx("div",{className:"space-y-3",children:!o.history||o.history.length===0?e.jsxs("div",{className:"text-center py-6 text-slate-500",children:[e.jsx(Bs,{className:"w-8 h-8 mx-auto mb-2 text-slate-300"}),e.jsx("p",{className:"text-sm",children:"No history available"})]}):[...o.history].slice().reverse().map((s,r,x)=>e.jsxs("div",{className:"relative pl-6 pb-4 last:pb-0",children:[e.jsx("div",{className:"absolute left-0 top-1 w-3 h-3 bg-blue-500 rounded-full border-2 border-white shadow"}),r!==x.length-1&&e.jsx("div",{className:"absolute left-1.5 top-4 w-0.5 h-full bg-slate-200"}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 ml-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:s.action.replace("_"," ")}),r===0&&e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Recent"})]}),e.jsx("p",{className:"text-sm text-slate-700 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"}),s.user?s.user.name:"System"]}),e.jsx("span",{children:k(s.created_at)})]})]})]},s.id))})]}),o.resolution_time&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg border border-green-200 mt-6",children:[e.jsxs("h3",{className:"font-semibold text-lg text-green-600 mb-2 flex items-center gap-2",children:[e.jsx(Ks,{className:"w-5 h-5"}),"Resolution Metrics"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Resolution Time:"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:[o.resolution_time,"h"]})]}),o.rating&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Rating:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((s,r)=>e.jsx(Xs,{className:`w-4 h-4 ${r<o.rating?"text-yellow-400 fill-current":"text-gray-300"}`},r)),e.jsxs("span",{className:"ml-1 font-bold text-yellow-600",children:["(",o.rating,"/5)"]})]})]}),o.feedback&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Feedback:"}),e.jsxs("p",{className:"text-sm text-muted-foreground italic",children:['"',o.feedback,'"']})]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ee,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:"Error loading ticket details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please try again later"})]})}),e.jsx(G,{className:"flex-shrink-0 pt-4 border-t border-corporate-gold/20",children:e.jsxs(d,{children:[e.jsx(n,{asChild:!0,children:e.jsxs(h,{variant:"outline",onClick:()=>{ue(!1),fe(null)},className:"px-6 py-2.5",children:[e.jsx(ls,{className:"w-4 h-4 mr-1"}),"Back to List"]})}),e.jsx(c,{children:e.jsx("p",{children:"Return to ticket list"})})]})})]})})]})]})}const sr=({status:j})=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:j==="active"?"Active":"Inactive"});export{Gr as default};
