import{j as e}from"./ui-CxdvOzk8.js";import{A as gt,D as _e,a as Me,b as $e,e as Be,f as te,d as he}from"./app-layout-TDJiV7iO.js";import{K as pt,L as ut,S as Qe,t as q}from"./app-D2djsAIy.js";import{b as je,A as et,C as tt,X as st,Y as at,T as ve,d as ce,L as rt,r as B,P as bt,e as ft,f as Ft}from"./recharts-B16uQ_Zp.js";import{C as E,a as Q,b as ee,c as S}from"./card-Cwu-GuCl.js";import{B as G}from"./badge-DTwTR7Ns.js";import{B as C}from"./button-Bjaxs6gg.js";import{S as yt,a as jt,b as vt,c as Nt,d as Ie}from"./select-CH9bWLLc.js";import{T as kt}from"./tooltip-C675c2So.js";import{D as wt,a as Ct,b as Et,c as St}from"./dialog-DoswhpAf.js";import{E as de,F as me}from"./FileSaver.min-BGmHM0RZ.js";import{T as ie}from"./trending-up-iFJZgfSe.js";import{C as ge,Z as Oe}from"./zap-1HMIGlWi.js";import{A as We}from"./activity-DiIEwa5r.js";import{R as lt,B as Le,W as Dt,O as Pe}from"./wrench-Bk2yZqnD.js";import{C as K,a as se}from"./circle-check-big-DKZvEq1H.js";import{D as He}from"./download-CRovyn-I.js";import{M as pe}from"./map-pin-B6MGBFhT.js";import{E as At}from"./eye-Bhnt7WyV.js";import{C as ae}from"./clock-rsHRdq3d.js";import{X as ue,B as re,b as be,c as Tt}from"./x-C-8u8pOo.js";import{C as Rt}from"./check-C_IBZmq_.js";import{T as fe}from"./ticket-NZxvcyxK.js";import{E as X}from"./external-link-D4kgwzSg.js";import{a as le,C as Fe}from"./circle-alert-BUSeI3Lb.js";import{T as Ge,M as zt,P as Ut,a as Ve}from"./timer-DmmoSr9O.js";import{T as qe}from"./triangle-alert-Dwpv9XSR.js";import{U as Ne}from"./user-plus-TUxKnim4.js";import{H as Ye}from"./house-Csy0F4Ln.js";import{U as oe}from"./users-DGeSYAzz.js";import{S as ye}from"./smartphone-DjIgDxH-.js";import{M as Ke}from"./monitor--_KUovl-.js";import{U as Xe}from"./user-B9S7Zak9.js";import{F as Je}from"./file-spreadsheet-DP1B9Kxi.js";import{I as Ze}from"./info-DjRDCVbv.js";import{C as _t}from"./circle-play-Dthy1u5D.js";import{f as ot}from"./format-CCdy9gBC.js";import"./index--i9LXxpm.js";import"./utils-DvwAYYBZ.js";import"./index-BnX2aouM.js";import"./index-BsIecJEN.js";import"./index-DtwPC3MI.js";import"./chevrons-up-down-DaqTssCh.js";import"./createLucideIcon-BBA9I-xQ.js";import"./react-B1hewrmX.js";import"./en-US-Cx6CYfeS.js";const Mt=({active:r,payload:d,label:n})=>{if(r&&d&&d.length){const u=d.reduce((l,s)=>l+(s.value||0),0);return e.jsx("div",{className:"bg-white dark:bg-gray-800 border-0 rounded-2xl shadow-2xl p-6 min-w-[200px]",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-b border-gray-100 dark:border-gray-700 pb-3",children:[e.jsx("p",{className:"font-bold text-lg text-gray-900 dark:text-white",children:n}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Total: ",u," tickets"]})]}),e.jsx("div",{className:"space-y-3",children:d.map((l,s)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shadow-md",style:{backgroundColor:l.color}}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:l.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:l.value}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1",children:["(",u>0?Math.round(l.value/u*100):0,"%)"]})]})]},s))})]})})}return null};function $t({data:r}){return e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsxs(E,{className:"border-0 bg-gradient-to-br from-primary/5 via-background to-secondary/5 shadow-2xl overflow-hidden relative lg:col-span-2",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 to-green-50/50 dark:from-blue-950/20 dark:to-green-950/20"}),e.jsxs(Q,{className:"pb-8 relative",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-gradient-to-br from-blue-500 to-green-500 shadow-lg",children:e.jsx(ie,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{children:[e.jsx(ee,{className:"text-3xl font-black text-foreground",children:"Ticket Evolution"}),e.jsx("p",{className:"text-lg text-muted-foreground font-medium",children:"Created vs Resolved trends over time"})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-blue-50/80 dark:bg-blue-950/30 rounded-xl p-4 border border-blue-100 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full shadow-sm"}),e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Average Created"})]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:[r.ticketsOverTime.length>0?Math.round(r.ticketsOverTime.reduce((d,n)=>d+n.created,0)/r.ticketsOverTime.length):0," /day"]})]}),e.jsxs("div",{className:"bg-green-50/80 dark:bg-green-950/30 rounded-xl p-4 border border-green-100 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full shadow-sm"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Average Resolved"})]}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-2",children:[r.ticketsOverTime.length>0?Math.round(r.ticketsOverTime.reduce((d,n)=>d+n.resolved,0)/r.ticketsOverTime.length):0," /day"]})]})]})]}),e.jsx(S,{className:"pt-0 pb-8 relative",children:e.jsx("div",{className:"h-[450px] bg-gradient-to-b from-white/50 to-transparent dark:from-gray-900/50 rounded-2xl p-4",children:e.jsx(je,{width:"100%",height:"100%",children:e.jsxs(et,{data:r.ticketsOverTime,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorCreated",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:.9}),e.jsx("stop",{offset:"50%",stopColor:"#3b82f6",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorResolved",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:.9}),e.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:.1})]}),e.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx(tt,{strokeDasharray:"2 6",stroke:"hsl(var(--muted-foreground))",opacity:.3,vertical:!1}),e.jsx(st,{dataKey:"month",tick:{fontSize:13,fill:"hsl(var(--muted-foreground))",fontWeight:500},tickLine:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1},axisLine:{stroke:"hsl(var(--border))",strokeWidth:2},dy:10}),e.jsx(at,{tick:{fontSize:13,fill:"hsl(var(--muted-foreground))",fontWeight:500},tickLine:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1},axisLine:{stroke:"hsl(var(--border))",strokeWidth:2},dx:-10}),e.jsx(ve,{content:e.jsx(Mt,{})}),e.jsx(ce,{type:"monotone",dataKey:"created",stackId:"1",stroke:"#3b82f6",strokeWidth:4,fill:"url(#colorCreated)",name:"Created",dot:{fill:"#3b82f6",strokeWidth:3,r:6,stroke:"#ffffff",filter:"url(#glow)"},activeDot:{r:8,stroke:"#3b82f6",strokeWidth:4,fill:"#ffffff",filter:"url(#glow)",className:"animate-pulse"}}),e.jsx(ce,{type:"monotone",dataKey:"resolved",stackId:"2",stroke:"#10b981",strokeWidth:4,fill:"url(#colorResolved)",name:"Resolved",dot:{fill:"#10b981",strokeWidth:3,r:6,stroke:"#ffffff",filter:"url(#glow)"},activeDot:{r:8,stroke:"#10b981",strokeWidth:4,fill:"#ffffff",filter:"url(#glow)",className:"animate-pulse"}}),e.jsx(rt,{verticalAlign:"top",height:50,iconType:"circle",formatter:(d,n)=>e.jsx("span",{className:"text-base font-semibold",style:{color:n.color},children:d})})]})})})})]})})}const Bt=[{title:"Dashboard",href:"/dashboard"}],ne=["#3B82F6","#EF4444","#F59E0B","#10B981","#8B5CF6","#F97316","#06B6D4","#84CC16","#EC4899","#6366F1"],It=async r=>{const d=new de.Workbook;d.creator="Ticketing System - Trend Analysis",d.created=new Date,d.company="Weekly Performance Report";const n=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=(c=>{const g=[],m=new Date;for(let h=6;h>=0;h--){const w=new Date(m);w.setDate(m.getDate()-h);const v=w.toLocaleDateString("en-US",{month:"short",day:"numeric"}),f=c.find(U=>U.date===v);g.push({date:v,count:f&&f.count||0})}return g})(r),s={primary:"FF2563EB",secondary:"FF1E3A8A",success:"FF059669",warning:"FFF59E0B",danger:"FFDC2626",info:"FF0891B2",light:"FFF8FAFC",dark:"FF1E293B"},o=d.addWorksheet("Weekly Trend Analysis",{pageSetup:{paperSize:9,orientation:"landscape"}});o.columns=[{width:15},{width:18},{width:18},{width:20},{width:25},{width:30}],o.mergeCells("A1:F1");const z=o.getCell("A1");z.value="WEEKLY PERFORMANCE TREND ANALYSIS",z.style={font:{name:"Segoe UI",size:20,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:s.secondary}},left:{style:"thick",color:{argb:s.secondary}},bottom:{style:"thick",color:{argb:s.secondary}},right:{style:"thick",color:{argb:s.secondary}}}},o.getRow(1).height=40,o.mergeCells("A2:D2");const I=o.getCell("A2");I.value=`Analysis Period: Last 7 Days | Generated: ${n}`,I.style={font:{name:"Segoe UI",size:11,italic:!0,color:{argb:s.dark}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.light}},alignment:{horizontal:"left",vertical:"middle"}},o.mergeCells("E2:F2");const j=l.reduce((c,g)=>c+(g.count||0),0),N=l.length>0?Math.round(j/l.length):0,O=o.getCell("E2");O.value=`Total: ${j} tickets | Daily Avg: ${N}`,O.style={font:{name:"Segoe UI",size:11,bold:!0,color:{argb:s.primary}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.light}},alignment:{horizontal:"right",vertical:"middle"}};let b=4;["Date","Tickets Created","Trend vs Avg","Performance","Volume Category","Action Needed"].forEach((c,g)=>{const m=o.getCell(b,g+1);m.value=c,m.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.secondary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:"FFFFFFFF"}},left:{style:"medium",color:{argb:"FFFFFFFF"}},bottom:{style:"medium",color:{argb:"FFFFFFFF"}},right:{style:"medium",color:{argb:"FFFFFFFF"}}}}}),o.getRow(b).height=30,b++,l.forEach((c,g)=>{const m=c.count||0,h=N||1,w=h>0?Math.round((m-h)/h*100):0,v=w>15?"↗ Above Average":w<-15?"↘ Below Average":"→ Normal Range",f=m>h*1.3?"High Volume":m<h*.7?"Low Volume":"Standard Volume",U=m>h*1.5?"Peak Day":m>h*1.2?"Busy Day":m<h*.8?"Light Day":"Normal Day",T=m>h*1.5?"Monitor capacity & resources":m<h*.5?"Review for issues":"Continue monitoring";[c.date||"Unknown",m,`${w>0?"+":""}${w}% ${v}`,f,U,T].forEach((V,_)=>{const H=o.getCell(b,_+1);H.value=V;let M=g%2===0?"FFFFFFFF":"FFF8FAFC",L=s.dark;if(_===2&&(w>15?(M=s.success,L="FFFFFFFF"):w<-15&&(M=s.warning,L="FFFFFFFF")),_===3)switch(V){case"High Volume":M=s.info,L="FFFFFFFF";break;case"Low Volume":M=s.warning,L="FFFFFFFF";break}if(_===4)switch(V){case"Peak Day":M=s.danger,L="FFFFFFFF";break;case"Busy Day":M=s.warning,L="FFFFFFFF";break;case"Light Day":M=s.info,L="FFFFFFFF";break}H.style={font:{name:"Segoe UI",size:10,color:{argb:L}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:M}},alignment:{horizontal:_===0||_===5?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),o.getRow(b).height=25,b++}),b+=2,o.mergeCells(`A${b}:F${b}`);const R=o.getCell(`A${b}`);R.value="TREND ANALYSIS & INSIGHTS",R.style={font:{name:"Segoe UI",size:14,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.info}},alignment:{horizontal:"center",vertical:"middle"}},b++;const W=r.reduce((c,g)=>g.count>c.count?g:c,r[0]),D=r.reduce((c,g)=>g.count<c.count?g:c,r[0]),$=Math.round((W.count-D.count)/N*100);[["Metric","Value","Analysis","Recommendation"],["Peak Day",`${W.date} (${W.count} tickets)`,W.count>N*1.5?"Significant spike":"Normal peak","Monitor for patterns"],["Lowest Day",`${D.date} (${D.count} tickets)`,D.count<N*.5?"Unusual low":"Normal variation","Check for issues if unusually low"],["Variance",`${$}%`,$>50?"High volatility":"Stable pattern",$>50?"Review capacity planning":"Maintain current approach"],["Trend Direction",j>N*7?"Growing":"Stable","Week over week","Adjust resources as needed"],["Consistency",Math.abs($)<30?"Very Consistent":"Variable","Daily fluctuation","Plan for peak capacity"]].forEach((c,g)=>{c.forEach((m,h)=>{const w=o.getCell(b+g,h+1);w.value=m;let v=g===0?s.secondary:"FFFFFFFF",f=g===0?"FFFFFFFF":s.dark;g>0&&h===2&&(m.includes("spike")||m.includes("High volatility")?(v=s.warning,f="FFFFFFFF"):(m.includes("Consistent")||m.includes("Stable"))&&(v=s.success,f="FFFFFFFF")),w.style={font:{name:"Segoe UI",size:10,bold:g===0||h===0,color:{argb:f}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:v}},alignment:{horizontal:h===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),o.getRow(b+g).height=22});const y=`Weekly_Trend_Analysis_${new Date().toISOString().split("T")[0]}.xlsx`,F=await d.xlsx.writeBuffer(),x=new Blob([F],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});me.saveAs(x,y),q.success("Weekly Trend Analysis Generated!",{description:`${y} has been downloaded with comprehensive trend analysis and insights.`})},Ot=async(r,d)=>{const n=new de.Workbook;n.creator="Ticketing System - Analytics",n.created=new Date,n.company="Ticket Distribution Analysis";const u=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),l={primary:"FF2563EB",secondary:"FF1E3A8A",success:"FF059669",warning:"FFF59E0B",danger:"FFDC2626",info:"FF0891B2",light:"FFF8FAFC",dark:"FF1E293B"},s=n.addWorksheet("Ticket Distribution Analysis",{pageSetup:{paperSize:9,orientation:"portrait"}});s.columns=[{width:25},{width:15},{width:18},{width:20},{width:25}],s.mergeCells("A1:E1");const o=s.getCell("A1");o.value="TICKET DISTRIBUTION ANALYSIS REPORT",o.style={font:{name:"Segoe UI",size:18,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:l.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:l.secondary}},left:{style:"thick",color:{argb:l.secondary}},bottom:{style:"thick",color:{argb:l.secondary}},right:{style:"thick",color:{argb:l.secondary}}}},s.getRow(1).height=35,s.mergeCells("A2:C2");const z=s.getCell("A2");z.value=`Report Generated: ${u}`,z.style={font:{name:"Segoe UI",size:11,italic:!0,color:{argb:l.dark}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:l.light}},alignment:{horizontal:"left",vertical:"middle"}},s.mergeCells("D2:E2");const I=s.getCell("D2");I.value=`Total Tickets: ${d}`,I.style={font:{name:"Segoe UI",size:11,bold:!0,color:{argb:l.primary}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:l.light}},alignment:{horizontal:"right",vertical:"middle"}};let j=4;["Status","Count","Percentage","Priority Level","Action Required"].forEach((y,F)=>{const x=s.getCell(j,F+1);x.value=y,x.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:l.secondary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:"FFFFFFFF"}},left:{style:"medium",color:{argb:"FFFFFFFF"}},bottom:{style:"medium",color:{argb:"FFFFFFFF"}},right:{style:"medium",color:{argb:"FFFFFFFF"}}}}}),s.getRow(j).height=30,j++;const O={open:{label:"Open",priority:"Critical",action:"Immediate Assignment Required",color:l.danger},in_progress:{label:"In Progress",priority:"High",action:"Monitor Progress",color:l.warning},resolved:{label:"Resolved",priority:"Low",action:"Quality Check",color:l.success},closed:{label:"Closed",priority:"Completed",action:"Archive",color:l.info}};Object.entries(r).forEach(([y,F])=>{const x=Math.round(Number(F)/d*100),c=O[y]||{label:y,priority:"Unknown",action:"Review",color:l.dark};[c.label,F,`${x}%`,c.priority,c.action].forEach((m,h)=>{const w=s.getCell(j,h+1);w.value=m;let v="FFFFFFFF",f=l.dark;if(h===0&&(v=c.color,f="FFFFFFFF"),h===3)switch(m){case"Critical":v=l.danger,f="FFFFFFFF";break;case"High":v=l.warning,f="FFFFFFFF";break;case"Low":v=l.success,f="FFFFFFFF";break;case"Completed":v=l.info,f="FFFFFFFF";break}w.style={font:{name:"Segoe UI",size:11,bold:h===0,color:{argb:f}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:v}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),s.getRow(j).height=25,j++}),j+=2,s.mergeCells(`A${j}:E${j}`);const b=s.getCell(`A${j}`);b.value="WORKFLOW ANALYSIS & RECOMMENDATIONS",b.style={font:{name:"Segoe UI",size:14,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:l.info}},alignment:{horizontal:"center",vertical:"middle"}},j++;const p=Math.round(r.open/d*100),R=Math.round(r.resolved/d*100);[["Metric","Value","Status","Recommendation"],["Open Tickets Rate",`${p}%`,p>20?"High":"Normal",p>20?"Increase technical resources":"Maintain current level"],["Resolution Rate",`${R}%`,R>70?"Excellent":"Needs Improvement",R>70?"Continue best practices":"Review resolution processes"],["Workflow Efficiency",d>100?"High Volume":"Standard","Active","Monitor trends and adjust capacity"],["System Health","Operational","Good","Regular monitoring recommended"]].forEach((y,F)=>{y.forEach((x,c)=>{const g=s.getCell(j+F,c+1);g.value=x;let m=F===0?l.secondary:"FFFFFFFF",h=F===0?"FFFFFFFF":l.dark;if(F>0&&c===2)switch(x){case"High":m=l.danger,h="FFFFFFFF";break;case"Excellent":m=l.success,h="FFFFFFFF";break;case"Good":m=l.success,h="FFFFFFFF";break;case"Needs Improvement":m=l.warning,h="FFFFFFFF";break}g.style={font:{name:"Segoe UI",size:10,bold:F===0||c===0,color:{argb:h}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:m}},alignment:{horizontal:c===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),s.getRow(j+F).height=22});const D=`Ticket_Distribution_Analysis_${new Date().toISOString().split("T")[0]}.xlsx`,$=await n.xlsx.writeBuffer(),k=new Blob([$],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});me.saveAs(k,D),q.success("Ticket Distribution Analysis Generated!",{description:`${D} has been downloaded with detailed analysis and recommendations.`})},Wt=async r=>{const d=new de.Workbook;d.creator="Ticketing System - Device Management",d.created=new Date,d.company="Device Inventory Report";const n=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),u={primary:"FF2563EB",secondary:"FF1E3A8A",success:"FF059669",warning:"FFF59E0B",info:"FF0891B2",light:"FFF8FAFC",dark:"FF1E293B"},l=d.addWorksheet("Device Inventory",{pageSetup:{paperSize:9,orientation:"landscape"}});l.columns=[{width:8},{width:25},{width:18},{width:18},{width:20},{width:20},{width:15},{width:15},{width:25}],l.mergeCells("A1:H1");const s=l.getCell("A1");s.value="DEVICE INVENTORY MANAGEMENT REPORT",s.style={font:{name:"Segoe UI",size:20,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:u.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:u.secondary}},left:{style:"thick",color:{argb:u.secondary}},bottom:{style:"thick",color:{argb:u.secondary}},right:{style:"thick",color:{argb:u.secondary}}}},l.getRow(1).height=40,l.mergeCells("A2:E2");const o=l.getCell("A2");o.value=`Generated on: ${n}`,o.style={font:{name:"Segoe UI",size:12,italic:!0,color:{argb:u.dark}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:u.light}},alignment:{horizontal:"left",vertical:"middle"}},l.mergeCells("F2:H2");const z=l.getCell("F2"),I=r.length,j=r.filter(k=>k.users_count>0).length,N=new Set(r.map(k=>k.device_type)).size;z.value=`Total: ${I} | Active: ${j} | Types: ${N}`,z.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:u.primary}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:u.light}},alignment:{horizontal:"right",vertical:"middle"}};const O=["ID","Name Device","Model","Brand","System","Users","Status","Usage Level"];let b=4;O.forEach((k,y)=>{const F=l.getCell(b,y+1);F.value=k,F.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:u.secondary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:"FFFFFFFF"}},left:{style:"medium",color:{argb:"FFFFFFFF"}},bottom:{style:"medium",color:{argb:"FFFFFFFF"}},right:{style:"medium",color:{argb:"FFFFFFFF"}}}}}),l.getRow(b).height=30,b++,r.forEach((k,y)=>{const F=k.users_count===0?"Unused":k.users_count<=2?"Low Usage":k.users_count<=5?"Medium Usage":"High Usage",x=k.users_count>0?"Active":"Inactive";[k.id,k.device_type||"Unknown",k.device_name||"N/A",k.brand_name||"N/A",k.system_name||"N/A",k.users_count||0,x,F].forEach((g,m)=>{const h=l.getCell(b,m+1);h.value=g;let w=y%2===0?"FFFFFFFF":"FFF8FAFC",v=u.dark;if(m===7&&(g==="Active"?(w=u.success,v="FFFFFFFF"):(w="FFEF4444",v="FFFFFFFF")),m===8)switch(g){case"High Usage":w=u.success,v="FFFFFFFF";break;case"Medium Usage":w=u.warning,v="FFFFFFFF";break;case"Low Usage":w=u.info,v="FFFFFFFF";break;case"Unused":w="FFEF4444",v="FFFFFFFF";break}h.style={font:{name:"Segoe UI",size:10,color:{argb:v}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:w}},alignment:{horizontal:m===1?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),l.getRow(b).height=25,b++}),b+=2,l.mergeCells(`A${b}:H${b}`);const p=l.getCell(`A${b}`);p.value="INVENTORY SUMMARY",p.style={font:{name:"Segoe UI",size:14,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:u.info}},alignment:{horizontal:"center",vertical:"middle"}},b++,[["Total Devices",I,"Complete inventory count"],["Active Devices",j,`${Math.round(j/I*100)}% utilization rate`],["Inactive Devices",I-j,"Available for assignment"],["Device Types",N,"Different categories available"],["Total Users",r.reduce((k,y)=>k+y.users_count,0),"Active device users"]].forEach(k=>{k.forEach((y,F)=>{const x=l.getCell(b,F+1);x.value=y,x.style={font:{name:"Segoe UI",size:10,bold:F===0},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFFFF"}},alignment:{horizontal:F===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),b++});const W=`Device_Inventory_Report_${new Date().toISOString().split("T")[0]}.xlsx`,D=await d.xlsx.writeBuffer(),$=new Blob([D],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});me.saveAs($,W),q.success("Device Inventory Report Generated!",{description:`${W} has been downloaded with professional formatting and detailed analysis.`})},Lt=async(r,d,n)=>{const u=new de.Workbook;u.creator="Ticketing System",u.created=new Date,u.company="Professional Dashboard";const l=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),s={primary:"FF2563EB",secondary:"FF1E3A8A",success:"FF059669",warning:"FFF59E0B",danger:"FFDC2626",light:"FFF8FAFC",dark:"FF1E293B"},o=u.addWorksheet("Executive Summary",{pageSetup:{paperSize:9,orientation:"portrait"}});o.columns=[{width:35},{width:18},{width:22},{width:30}],o.mergeCells("A1:D1");const z=o.getCell("A1");z.value="EXECUTIVE DASHBOARD - TICKETING SYSTEM",z.style={font:{name:"Segoe UI",size:20,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:s.secondary}},left:{style:"thick",color:{argb:s.secondary}},bottom:{style:"thick",color:{argb:s.secondary}},right:{style:"thick",color:{argb:s.secondary}}}},o.getRow(1).height=40,o.mergeCells("A2:B2");const I=o.getCell("A2");I.value=`Generation Date: ${l}`,I.style={font:{name:"Segoe UI",size:12,italic:!0,color:{argb:s.dark}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.light}},alignment:{horizontal:"left",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}},o.mergeCells("C2:D2");const j=o.getCell("C2");j.value="PROFESSIONAL REPORT",j.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:s.primary}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.light}},alignment:{horizontal:"right",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}};let N=4;o.mergeCells(`A${N}:D${N}`);const O=o.getCell(`A${N}`);O.value="KEY PERFORMANCE METRICS",O.style={font:{name:"Segoe UI",size:16,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.secondary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:s.primary}},left:{style:"medium",color:{argb:s.primary}},bottom:{style:"medium",color:{argb:s.primary}},right:{style:"medium",color:{argb:s.primary}}}},o.getRow(N).height=30,N++,["Indicator","Value","Status","Trend"].forEach((f,U)=>{const T=o.getCell(N,U+1);T.value=f,T.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFFFFFFF"}},left:{style:"thin",color:{argb:"FFFFFFFF"}},bottom:{style:"thin",color:{argb:"FFFFFFFF"}},right:{style:"thin",color:{argb:"FFFFFFFF"}}}}}),o.getRow(N).height=25,N++;const p=[["Total Tickets",r.tickets.total,"Active","+12% vs last month"],["Open Tickets",r.tickets.open,"Critical","Requires immediate attention"],["In Progress Tickets",r.tickets.in_progress,"Processing","+8% this week"],["Resolved Tickets",r.tickets.resolved,"Completed","+15% vs target"],["Resolved Today",r.tickets.resolved_today,"Daily","Daily productivity"],["Average Time (h)",r.tickets.avg_resolution_hours,"Efficiency","-2h improvement"],["Unassigned",r.tickets.unassigned||0,"Pending","Requires assignment"]];p.forEach((f,U)=>{f.forEach((T,P)=>{const V=o.getCell(N+U,P+1);V.value=T;let _="FFFFFFFF",H=s.dark;if(P===2)switch(T){case"Critical":_=s.danger,H="FFFFFFFF";break;case"Completed":_=s.success,H="FFFFFFFF";break;case"Processing":_=s.warning,H="FFFFFFFF";break;case"Pending":_="FFFBBF24",H="FF1F2937";break;default:_="FFF1F5F9";break}V.style={font:{name:"Segoe UI",size:11,bold:P===0,color:{argb:H}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:_}},alignment:{horizontal:P===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),o.getRow(N+U).height=22}),N+=p.length+2;const R=u.addWorksheet("Tickets Analysis",{pageSetup:{paperSize:9,orientation:"landscape"}});R.columns=[{width:25},{width:15},{width:15},{width:18},{width:20}],R.mergeCells("A1:E1");const W=R.getCell("A1");W.value="DETAILED TICKETS ANALYSIS",W.style={font:{name:"Segoe UI",size:18,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:s.secondary}},left:{style:"thick",color:{argb:s.secondary}},bottom:{style:"thick",color:{argb:s.secondary}},right:{style:"thick",color:{argb:s.secondary}}}},R.getRow(1).height=35;let D=3;R.mergeCells(`A${D}:E${D}`);const $=R.getCell(`A${D}`);$.value="WEEKLY TREND ANALYSIS",$.style={font:{name:"Segoe UI",size:14,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.secondary}},alignment:{horizontal:"center",vertical:"middle"}},D++,["Week","Total Tickets","Resolved","Resolution Rate","Performance"].forEach((f,U)=>{const T=R.getCell(D,U+1);T.value=f,T.style={font:{name:"Segoe UI",size:11,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFFFFFFF"}},left:{style:"thin",color:{argb:"FFFFFFFF"}},bottom:{style:"thin",color:{argb:"FFFFFFFF"}},right:{style:"thin",color:{argb:"FFFFFFFF"}}}}}),D++,d.ticketsLastWeek.forEach((f,U)=>{const T=f.total>0?Math.round(f.resolved/f.total*100):0,P=T>=80?"Excellent":T>=60?"Good":"Needs Improvement";[`Week ${U+1}`,f.total,f.resolved,`${T}%`,P].forEach((_,H)=>{const M=R.getCell(D,H+1);M.value=_;let L="FFFFFFFF",Z=s.dark;if(H===4)switch(_){case"Excellent":L=s.success,Z="FFFFFFFF";break;case"Good":L=s.warning,Z="FFFFFFFF";break;case"Needs Improvement":L=s.danger,Z="FFFFFFFF";break}M.style={font:{name:"Segoe UI",size:10,color:{argb:Z}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:L}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),D++});const y=u.addWorksheet("Resources Summary",{pageSetup:{paperSize:9,orientation:"portrait"}});y.columns=[{width:30},{width:18},{width:20},{width:25}],y.mergeCells("A1:D1");const F=y.getCell("A1");F.value="SYSTEM RESOURCES SUMMARY",F.style={font:{name:"Segoe UI",size:18,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:s.secondary}},left:{style:"thick",color:{argb:s.secondary}},bottom:{style:"thick",color:{argb:s.secondary}},right:{style:"thick",color:{argb:s.secondary}}}},y.getRow(1).height=35;let x=3;y.mergeCells(`A${x}:D${x}`);const c=y.getCell(`A${x}`);c.value="BUILDINGS PORTFOLIO",c.style={font:{name:"Segoe UI",size:14,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.secondary}},alignment:{horizontal:"center",vertical:"middle"}},x++,["Metric","Value","Status","Observations"].forEach((f,U)=>{const T=y.getCell(x,U+1);T.value=f,T.style={font:{name:"Segoe UI",size:11,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:s.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFFFFFFF"}},left:{style:"thin",color:{argb:"FFFFFFFF"}},bottom:{style:"thin",color:{argb:"FFFFFFFF"}},right:{style:"thin",color:{argb:"FFFFFFFF"}}}}}),x++,[["Buildings",n.buildingsWithTickets.length,"Active","Complete management"],["Apartments",r.resources.apartments,"Operational","Distribution by buildings"],["Tenants/Members",r.resources.tenants,"Active","User base"],["Devices",r.resources.devices,"Monitored","Updated inventory"],["Technicians",r.resources.technicals,"Available","Active team"]].forEach(f=>{f.forEach((U,T)=>{const P=y.getCell(x,T+1);P.value=U,P.style={font:{name:"Segoe UI",size:10,bold:T===0},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFFFF"}},alignment:{horizontal:T===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),x++});const h=`Dashboard_Report_${new Date().toISOString().split("T")[0]}.xlsx`,w=await u.xlsx.writeBuffer(),v=new Blob([w],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});me.saveAs(v,h),q.success("Professional Excel Report Generated!",{description:`${h} has been downloaded with advanced styling, colors, and professional formatting.`})};function Ms({metrics:r,charts:d,lists:n,googleMapsApiKey:u}){var Ce,Ee,Se,De,Ae,Te,Re,ze,Ue;const l=pt().props,s=((Se=(Ee=(Ce=l==null?void 0:l.auth)==null?void 0:Ce.user)==null?void 0:Ee.roles)==null?void 0:Se.some(t=>t.name==="super-admin"))||!1,o=((Te=(Ae=(De=l==null?void 0:l.auth)==null?void 0:De.user)==null?void 0:Ae.roles)==null?void 0:Te.some(t=>t.name==="technical"))||!1,z=((Ue=(ze=(Re=l==null?void 0:l.auth)==null?void 0:Re.user)==null?void 0:ze.technical)==null?void 0:Ue.is_default)||!1,I=s||z,[j,N]=B.useState(!1),[O,b]=B.useState(!1),[p,R]=B.useState(null),[W,D]=B.useState(!1),$=B.useRef(null),[k,y]=B.useState({dateRange:{from:new Date(Date.now()-30*24*60*60*1e3),to:new Date},role:"",status:"",priority:""}),F=()=>{try{const t=localStorage.getItem("dashboard_notifications");if(t)return JSON.parse(t).map(i=>({...i,icon:i.iconName==="AlertCircle"?le:i.iconName==="Info"?Ze:i.iconName==="CheckCircle"?se:i.iconName==="AlertOctagon"?Pe:i.iconName==="MessageSquare"?Ve:le}))}catch(t){console.log("Error loading notifications from localStorage:",t)}return[{id:1,type:"ticket",title:"New Ticket Assigned",message:"You have been assigned ticket #TCK-2024-001 for AC repair in Apt 204",time:"2 min ago",read:!1,icon:le,iconName:"AlertCircle",color:"text-red-500 bg-red-50"},{id:2,type:"system",title:"System Update",message:"Dashboard data has been refreshed with latest information",time:"15 min ago",read:!1,icon:Ze,iconName:"Info",color:"text-blue-500 bg-blue-50"},{id:3,type:"resolution",title:"Ticket Resolved",message:"Ticket #TCK-2024-035 has been successfully resolved",time:"1 hour ago",read:!1,icon:se,iconName:"CheckCircle",color:"text-green-500 bg-green-50"},{id:4,type:"urgent",title:"Urgent Maintenance",message:"Emergency repair needed in Building A - Elevator malfunction",time:"2 hours ago",read:!0,icon:Pe,iconName:"AlertOctagon",color:"text-orange-500 bg-orange-50"},{id:5,type:"message",title:"Team Message",message:"Weekly team meeting scheduled for tomorrow at 10:00 AM",time:"1 day ago",read:!0,icon:Ve,iconName:"MessageSquare",color:"text-purple-500 bg-purple-50"}]},[x,c]=B.useState(F),[g,m]=B.useState(()=>F().filter(a=>!a.read).length),[h,w]=B.useState(()=>(console.log("Dashboard upcomingAppointments from backend:",n.upcomingAppointments),n.upcomingAppointments||[]));B.useEffect(()=>{n.upcomingAppointments&&(console.log("Updating appointments with new data:",n.upcomingAppointments),w(n.upcomingAppointments))},[n.upcomingAppointments]);const v=B.useMemo(()=>{const t=new Date,a=new Date(t.getTime()+7*24*60*60*1e3);return h.filter(i=>{const A=new Date(i.scheduled_for);return A>=t&&A<=a&&i.status==="scheduled"}).length},[h]),f=t=>{const a={scheduled:{label:"Scheduled",color:"text-blue-500 bg-blue-50",icon:K},in_progress:{label:"In Progress",color:"text-yellow-500 bg-yellow-50",icon:_t},completed:{label:"Completed",color:"text-green-500 bg-green-50",icon:se},cancelled:{label:"Cancelled",color:"text-red-500 bg-red-50",icon:ue},rescheduled:{label:"Rescheduled",color:"text-gray-500 bg-gray-50",icon:ae}};return a[t]||a.scheduled},U=t=>{const a=new Date(t);return{date:a.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),time:a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}},T=t=>{window.open(`/appointments?appointment=${t}`,"_blank")},P=()=>{window.open("/appointments","_blank")},V=t=>{D(!1),setTimeout(()=>{R(t),b(!0)},100)},_=B.useCallback(()=>{b(!1),setTimeout(()=>{R(null),document.body.classList.remove("overflow-hidden"),document.querySelectorAll("[data-radix-portal]").forEach(a=>{a.children.length===0&&a.remove()})},150)},[]);B.useEffect(()=>{const t=a=>{a.key==="Escape"&&O&&_()};if(O)return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[O,_]);const H=t=>{if(!t)return"";if(t.includes("maps.app.goo.gl"))return`https://www.google.com/maps/embed/v1/place?key=${u}&q=-10.916879,-74.883391&zoom=15`;if(t.includes("/embed"))return t;if(t.includes("google.com/maps")){const a=t.match(/@([-0-9.]+),([-0-9.]+)/);if(a)return`https://www.google.com/maps/embed/v1/view?key=${u}&center=${a[1]},${a[2]}&zoom=15`;const i=t.match(/place\/([^/]+)/);if(i)return`https://www.google.com/maps/embed/v1/place?key=${u}&q=place_id:${i[1]}`}return`https://www.google.com/maps/embed/v1/place?key=${u}&q=${encodeURIComponent(t)}`},M=t=>{var J,Y;const a=(Y=(J=t.ticket.device)==null?void 0:J.tenants)==null?void 0:Y[0],i=a==null?void 0:a.apartment,A=i==null?void 0:i.building;return{buildingName:(A==null?void 0:A.name)||"No building",unitNumber:(i==null?void 0:i.name)||"N/A",locationLink:(A==null?void 0:A.location_link)||"",building:A}},[L,Z]=B.useState(new Date),[nt,ke]=B.useState("Updated just now"),we=t=>{const i=Math.floor((new Date().getTime()-t.getTime())/(1e3*60));if(i===0)return"Updated just now";if(i===1)return"Updated 1 min ago";if(i<60)return`Updated ${i} min ago`;{const A=Math.floor(i/60);return A===1?"Updated 1 hour ago":`Updated ${A} hours ago`}},it=()=>{const t=new Date;Z(t),ke(we(t)),Qe.reload()},xe=t=>{try{const a=t.map(i=>({...i,icon:void 0,iconName:i.iconName}));localStorage.setItem("dashboard_notifications",JSON.stringify(a))}catch(a){console.log("Error saving notifications to localStorage:",a)}};B.useEffect(()=>{const t=setInterval(()=>{ke(we(L))},6e4);return()=>clearInterval(t)},[L]);const ct=t=>{c(a=>{const i=a.map(A=>A.id===t?{...A,read:!0}:A);return xe(i),i}),m(a=>Math.max(0,a-1))},dt=()=>{c(t=>{const a=t.map(i=>({...i,read:!0}));return xe(a),a}),m(0)},mt=t=>{c(i=>{const A=i.filter(J=>J.id!==t);return xe(A),A});const a=x.find(i=>i.id===t);a&&!a.read&&m(i=>Math.max(0,i-1))},xt=(t,a)=>{console.log(`Clicked on ${t}: ${a} tickets`),window.open(`/tickets?status=${t}`,"_blank")},ht=d.ticketsLastWeek.map(t=>({date:ot(new Date(t.date),"dd/MM"),tickets:t.count,average:Math.round(d.ticketsLastWeek.reduce((a,i)=>a+i.count,0)/d.ticketsLastWeek.length)}));return e.jsx(kt,{children:e.jsxs(gt,{breadcrumbs:Bt,children:["                ",e.jsx(ut,{title:"Dashboard"}),"                ",e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                        .scrollbar-hide {
                            -ms-overflow-style: none;
                            scrollbar-width: none;
                        }
                        .scrollbar-hide::-webkit-scrollbar {
                            display: none;
                        }
                        
                        /* Custom scrollbar para modales */
                        .custom-scrollbar {
                            scrollbar-width: thin;
                            scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar {
                            width: 8px;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar-track {
                            background: transparent;
                            border-radius: 4px;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar-thumb {
                            background: rgba(156, 163, 175, 0.3);
                            border-radius: 4px;
                            transition: background-color 0.2s ease;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                            background: rgba(156, 163, 175, 0.6);
                        }
                        
                        .dark .custom-scrollbar {
                            scrollbar-color: rgba(75, 85, 99, 0.5) transparent;
                        }
                        
                        .dark .custom-scrollbar::-webkit-scrollbar-thumb {
                            background: rgba(75, 85, 99, 0.3);
                        }
                        
                        .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                            background: rgba(75, 85, 99, 0.6);
                        }
                    `}}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/30 to-background",children:e.jsxs("div",{className:"container mx-auto px-8 py-16 space-y-20",children:[e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-12",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("div",{className:"h-20 w-20 rounded-3xl bg-gradient-to-br from-primary via-primary-foreground to-secondary-foreground flex items-center justify-center shadow-2xl ring-4 ring-blue-100",children:e.jsx(ge,{className:"h-10 w-10 text-white"})}),e.jsxs("div",{className:"space-y-4",children:["                                        ",e.jsx("h1",{className:"text-6xl font-black tracking-tight text-slate-900 dark:text-white",children:o&&!s?"ADK Assist Dashboard":"Dashboard"}),e.jsx("p",{className:"text-2xl text-slate-600 font-medium",children:s?"Administrative control center of the system":o&&!s?"Your technical management control center":"Your personalized management panel"})]})]}),e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full animate-pulse shadow-lg"}),e.jsx("span",{className:"text-lg font-bold text-slate-600",children:"System Online"})]}),"                                    ",e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(We,{className:"h-6 w-6 text-blue-500"}),e.jsx("span",{className:"text-lg font-bold text-slate-600",children:nt})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Oe,{className:"h-6 w-6 text-yellow-500"}),e.jsx("span",{className:"text-lg font-bold text-slate-600",children:"High Performance"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:["                                ",e.jsxs(C,{variant:"outline",size:"lg",className:"gap-4 h-14 px-8 shadow-xl text-lg",onClick:it,children:[e.jsx(lt,{className:"h-6 w-6"}),"Refresh"]}),"                                ",e.jsx(C,{variant:"outline",size:"lg",onClick:()=>{o&&!s?window.open("/appointments","_blank"):Lt(r,d,n)},className:"gap-4 h-14 px-8 shadow-xl text-lg",children:o&&!s?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-6 w-6"}),"Mis Citas"]}):e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"h-6 w-6"}),"Export"]})}),e.jsxs(_e,{open:W,onOpenChange:D,children:[e.jsx(Me,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"lg",className:"gap-4 h-14 px-8 shadow-xl text-lg relative",children:[e.jsx(K,{className:"h-6 w-6"}),"Appointments",v>0&&e.jsx(G,{className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center p-0",children:v})]})}),e.jsxs($e,{className:"w-96 max-h-96 mt-4",align:"end",children:[e.jsxs(Be,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Upcoming Appointments"}),h.length>0&&e.jsx(C,{variant:"ghost",size:"sm",onClick:P,className:"text-xs",children:"View Calendar"})]}),e.jsx(te,{}),h.length===0?e.jsxs("div",{className:"p-4 text-center text-slate-500",children:[e.jsx(K,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No upcoming appointments"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Schedule appointments from ticket details"})]}):e.jsx("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:h.filter(t=>new Date(t.scheduled_for)>=new Date).sort((t,a)=>new Date(t.scheduled_for).getTime()-new Date(a.scheduled_for).getTime()).slice(0,10).map(t=>{var J;const a=f(t.status),i=U(t.scheduled_for),A=M(t);return e.jsxs("div",{className:"group relative",children:[e.jsx(he,{className:"p-0 focus:bg-slate-50 dark:focus:bg-slate-800/50 cursor-pointer",children:e.jsxs("div",{className:"w-full p-4 flex items-center gap-4",children:[e.jsxs("div",{className:"flex-shrink-0 w-20 h-20 rounded-full border border-slate-200 dark:border-slate-700 flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:new Date(t.scheduled_for).toLocaleString("default",{weekday:"short"}).toLowerCase()}),e.jsx("span",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:new Date(t.scheduled_for).getDate()}),e.jsx("span",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:new Date(t.scheduled_for).toLocaleString("default",{month:"short"})})]}),e.jsxs("div",{className:"flex-1 p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{className:"space-y-1 mb-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:["Technical: ",t.technical.name]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[A.locationLink&&e.jsx(C,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-blue-100 dark:hover:bg-blue-900/30",onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),V(t)},children:e.jsx(pe,{className:"h-3 w-3 text-blue-600 dark:text-blue-400"})}),e.jsx(C,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-slate-100 dark:hover:bg-slate-700",onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),T(t.id)},children:e.jsx(At,{className:"h-3 w-3 text-slate-600 dark:text-slate-400"})})]})]}),e.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Member: ",((J=t.ticket.user)==null?void 0:J.name)||"No Member"]})]}),e.jsx("div",{className:"flex items-center mb-1.5",children:e.jsxs("div",{className:"flex items-center gap-1 flex-1",children:[e.jsx(pe,{className:"h-4 w-4 text-red-500"}),e.jsxs("span",{className:"text-sm font-medium text-primary-foreground hover:text-primary-foreground",children:["Building: ",A.buildingName," apartment ",A.unitNumber]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ae,{className:"h-3.5 w-3.5 text-slate-500"}),e.jsx("span",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:i.time})]}),e.jsx(G,{variant:"outline",className:`text-xs px-2 py-0.5 ${a.color} border-current`,children:a.label})]})]})]})}),e.jsx(te,{className:"my-0 last:hidden"})]},t.id)})}),e.jsx(te,{}),e.jsx(he,{className:"p-0",children:e.jsxs(C,{variant:"ghost",className:"w-full justify-center py-3 text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:P,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"View All Appointments"]})})]})]}),e.jsxs(_e,{children:[e.jsx(Me,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"lg",className:"gap-4 h-14 px-8 shadow-xl text-lg relative",children:[e.jsx(Le,{className:"h-6 w-6"}),"Notifications",g>0&&e.jsx(G,{className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-red-500 text-white text-xs flex items-center justify-center p-0",children:g})]})}),e.jsxs($e,{className:"w-96 max-h-96 mt-4 ",align:"end",children:[e.jsxs(Be,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Notifications"}),g>0&&e.jsx(C,{variant:"ghost",size:"sm",onClick:dt,className:"text-xs",children:"Mark all as read"})]}),e.jsx(te,{}),x.length===0?e.jsxs("div",{className:"p-4 text-center text-slate-500",children:[e.jsx(Le,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No notifications"})]}):e.jsx("div",{className:"max-h-80 overflow-y-auto flex flex-col gap-4",children:x.map(t=>{const a=t.icon;return e.jsx(he,{className:`p-0 focus:bg-slate-50 dark:!text-slate-100 ${t.read?"":"bg-blue-50/50 dark:bg-secondary/10"}`,children:e.jsxs("div",{className:"w-full p-4 flex items-start gap-3 dark:!text-slate-100",children:[e.jsx("div",{className:`p-2 rounded-lg ${t.color} flex-shrink-0`,children:e.jsx(a,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 space-y-1 dark:!text-slate-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:`text-sm font-semibold dark:!text-slate-100 ${t.read?"text-slate-700":"text-slate-900"}`,children:t.title}),e.jsxs("div",{className:"flex items-center gap-1 dark:!text-slate-200",children:[e.jsx("span",{className:"text-xs text-slate-500",children:t.time}),e.jsx(C,{variant:"ghost",size:"sm",onClick:i=>{i.stopPropagation(),mt(t.id)},className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(ue,{className:"h-3 w-3"})})]})]}),e.jsx("p",{className:`text-sm dark:!text-slate-100 ${t.read?"text-slate-600":"text-slate-700"}`,children:t.message}),!t.read&&e.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.jsxs(C,{variant:"outline",size:"sm",onClick:i=>{i.stopPropagation(),ct(t.id)},className:"h-7 px-3 text-xs hover:text-accent-foreground",children:[e.jsx(Rt,{className:"h-3 w-3 mr-1"}),"Mark as read"]})})]}),!t.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-1"})]})},t.id)})}),e.jsx(te,{})]})]})]})]}),e.jsxs("div",{className:"space-y-12",children:["                            ",e.jsxs("div",{className:"text-center space-y-6",children:["                                ",e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:o&&!s?"Mis Tickets":"Ticket Analytics"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:o&&!s?"Tickets asignados a ti y resumen de tu trabajo":"Real-time monitoring of workflow and performance metrics"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:["                                ",(!o||s||z)&&e.jsx(E,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-primary/10 via-background to-primary/5 overflow-hidden",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/20",children:e.jsx(fe,{className:"h-6 w-6 text-primary"})}),e.jsx(X,{className:"h-4 w-4 text-primary/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wider",children:o&&!s?"Mis Tickets Totales":"Total Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.tickets.total}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-primary/20 text-primary",children:"+12%"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last month"})]})]})]})}),"                                ",e.jsx(E,{className:`group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-destructive/10 via-background to-destructive/5 overflow-hidden cursor-pointer ${o&&!s&&r.tickets.open>0?"ring-2 ring-red-500 ring-opacity-50 animate-pulse":""}`,onClick:()=>window.open("/tickets?status=open","_blank"),children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-destructive/20",children:e.jsx(le,{className:"h-6 w-6 text-destructive"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&!s&&r.tickets.open>0&&e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsx(X,{className:"h-4 w-4 text-destructive/60 opacity-0 group-hover:opacity-100 transition-opacity"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-destructive uppercase tracking-wider",children:o&&!s?"Tickets Urgentes Míos":"Open Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.tickets.open}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${o&&!s&&r.tickets.open>0?"bg-red-500 text-white animate-pulse":"bg-destructive/20 text-destructive"}`,children:["                                                    ",o&&!s?"¡URGENTE!":"Priority"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:o&&!s?"Requiere atención inmediata":"Immediate attention"})]})]})]})}),e.jsx(E,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-secondary/10 via-background to-secondary/5 overflow-hidden cursor-pointer",onClick:()=>window.open("/tickets?status=in_progress","_blank"),children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-secondary/20",children:e.jsx(ae,{className:"h-6 w-6 text-secondary"})}),e.jsx(X,{className:"h-4 w-4 text-secondary/60 opacity-0 group-hover:opacity-100 transition-opacity"}),"                                        "]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-secondary uppercase tracking-wider",children:o&&!s?"En Proceso - Mis Tickets":"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.tickets.in_progress}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-secondary/20 text-secondary",children:"+8%"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:o&&!s?"En trabajo activo":"This week"})]})]})]})}),e.jsx(E,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-accent/10 via-background to-accent/5 overflow-hidden cursor-pointer",onClick:()=>window.open("/tickets?status=resolved","_blank"),children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-accent/20",children:e.jsx(se,{className:"h-6 w-6 text-accent"})}),e.jsx(X,{className:"h-4 w-4 text-accent/60 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-accent uppercase tracking-wider",children:o&&!s?"Mis Tickets Resueltos":"Resolved"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.tickets.resolved}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-accent/20 text-accent",children:"+15%"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:o&&!s?"Mi productividad":"vs target"})]})]})]})})]}),o&&!s&&e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"text-center space-y-4 mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold text-foreground",children:"Resumen de Hoy"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Tu actividad y próximas tareas"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(E,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 hover:shadow-lg transition-all duration-300",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:e.jsx(K,{className:"h-6 w-6 text-green-600"})}),e.jsx(G,{className:"bg-green-100 text-green-800 border-green-300",children:"Hoy"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase tracking-wider",children:"Resueltos Hoy"}),e.jsx("p",{className:"text-3xl font-bold text-green-900",children:r.tickets.resolved_today}),e.jsx("p",{className:"text-sm text-green-700",children:"¡Excelente trabajo!"})]})]})}),e.jsx(E,{className:"bg-gradient-to-br from-blue-50 to-sky-50 border-blue-200 hover:shadow-lg transition-all duration-300",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:e.jsx(ae,{className:"h-6 w-6 text-blue-600"})}),e.jsx(G,{className:"bg-blue-100 text-blue-800 border-blue-300",children:"Próximas"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wider",children:"Mis Próximas Visitas"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900",children:v}),e.jsx("p",{className:"text-sm text-blue-700",children:"Próximos 7 días"})]})]})}),e.jsx(E,{className:"bg-gradient-to-br from-purple-50 to-violet-50 border-purple-200 hover:shadow-lg transition-all duration-300",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:e.jsx(Ge,{className:"h-6 w-6 text-purple-600"})}),e.jsx(G,{className:"bg-purple-100 text-purple-800 border-purple-300",children:"Promedio"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-purple-600 uppercase tracking-wider",children:"Mi Tiempo Promedio"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-900",children:[r.tickets.avg_resolution_hours,"h"]}),e.jsx("p",{className:"text-sm text-purple-700",children:"Por ticket"})]})]})})]})]}),(!o||s||z)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(E,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-3/10 via-background to-chart-3/5 overflow-hidden",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:["                                            ",e.jsx("div",{className:"p-3 rounded-xl bg-orange-100",children:e.jsx(qe,{className:"h-6 w-6 text-orange-600"})}),I&&e.jsxs(C,{size:"sm",variant:"outline",className:"h-8 px-3 text-xs hover:bg-orange-50 border-orange-200 text-orange-700",onClick:()=>window.open("/tickets/assign-unassigned","_blank"),children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),"Assign"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-orange-600 uppercase tracking-wider",children:"Unassigned"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:r.tickets.unassigned||0}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-orange-100 text-orange-700",children:"Pending"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Requires assignment"})]})]})]})}),e.jsx(E,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-4/10 via-background to-chart-4/5 overflow-hidden",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:e.jsx(K,{className:"h-6 w-6 text-purple-600"})}),e.jsx(ie,{className:"h-4 w-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-purple-600 uppercase tracking-wider",children:"Resolved Today"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white ",children:r.tickets.resolved_today}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-purple-100 text-purple-700",children:"Today"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Daily Productivity"})]})]})]})}),e.jsx(E,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-2/10 via-background to-chart-2/5 overflow-hidden",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-indigo-100",children:e.jsx(Ge,{className:"h-6 w-6 text-indigo-600"})}),e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-green-100 text-green-700",children:"-2h"})]}),"                                        ",e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-indigo-600 uppercase tracking-wider",children:"Average Time"}),e.jsxs("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[r.tickets.avg_resolution_hours,"h"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-indigo-100 text-indigo-700",children:"Resolution"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Overall average"})]})]})]})}),e.jsx(E,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-5/10 via-background to-chart-5/5 overflow-hidden",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-teal-100",children:e.jsx(ge,{className:"h-6 w-6 text-teal-600"})}),e.jsx(ie,{className:"h-4 w-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-teal-600 uppercase tracking-wider",children:"Efficiency"}),e.jsxs("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[r.tickets.total>0?Math.round(r.tickets.resolved/r.tickets.total*100):0,"%"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-teal-100 text-teal-700",children:"Resolución"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Tasa general"})]})]})]})}),"                            "]})]}),n.unassignedTickets&&n.unassignedTickets.length>0&&e.jsxs("div",{className:"space-y-8",children:["                                ",e.jsxs("div",{className:"text-center space-y-4",children:["                                    ",e.jsx("h2",{className:"text-4xl font-bold text-chart-3",children:"Unassigned Tickets"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Recent tickets awaiting technical assignment - quick actions available"})]}),e.jsxs(E,{className:"border-0 shadow-xl bg-gradient-to-br from-slate-50 via-white to-slate-50",children:["                                    ",e.jsx(Q,{className:"border-b border-slate-100 bg-slate-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-100",children:e.jsx(qe,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx(ee,{className:"text-xl text-slate-800",children:"Latest Unassigned Tickets"}),e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Showing ",n.unassignedTickets.length," most recent unassigned tickets"]})]})]}),e.jsxs(C,{variant:"outline",size:"sm",className:"bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100",onClick:()=>window.open("/tickets","_blank"),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Bulk Assign"]})]})}),e.jsx(S,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-100",children:[e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-slate-700 text-sm",children:"Ticket"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-slate-700 text-sm",children:"Location"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-slate-700 text-sm",children:"Device"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-slate-700 text-sm",children:"Category"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-slate-700 text-sm",children:"Created"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-slate-700 text-sm",children:"Actions"})]})}),"                                                ",e.jsx("tbody",{children:n.unassignedTickets.length>0?n.unassignedTickets.map((t,a)=>e.jsx(Pt,{ticket:t,index:a,technicals:n.availableTechnicals},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-12 text-center",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(se,{className:"h-12 w-12 text-green-500 mx-auto"}),e.jsx("p",{className:"text-lg font-semibold text-slate-600",children:"All tickets are assigned!"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Great job keeping up with the workflow."})]})})})})]})})})]})]}),(!o||s||z)&&r.resources.buildings>0&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:["                                    ",e.jsxs("div",{className:"flex items-center justify-center gap-4",children:["                                        ",e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:"System Resources"}),e.jsx(G,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20 px-4 py-2 text-sm font-semibold",children:"Full Access - Admin"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Comprehensive management of buildings, apartments, users and devices"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(E,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-1/10 via-background to-chart-1/5 overflow-hidden",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-violet-100 w-fit mx-auto",children:e.jsx(re,{className:"h-8 w-8 text-violet-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-violet-600 uppercase tracking-wider",children:"Buildings"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:r.resources.buildings})]}),n.buildingsWithTickets&&n.buildingsWithTickets.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-xs font-semibold text-violet-600",children:"Buildings Overview"}),n.buildingsWithTickets.length>3&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(C,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>{const t=$.current;t&&t.scrollBy({left:-200,behavior:"smooth"})},children:e.jsx(Fe,{className:"h-3 w-3"})}),e.jsx(C,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>{const t=$.current;t&&t.scrollBy({left:200,behavior:"smooth"})},children:e.jsx(be,{className:"h-3 w-3"})})]})]}),e.jsx("div",{ref:$,className:"flex gap-2 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:n.buildingsWithTickets.map(t=>e.jsx("div",{className:"flex-shrink-0 group/building cursor-pointer",title:`${t.name} - ${t.apartments_count} apartments, ${t.tenants_count} tenants`,onClick:()=>window.open(`/buildings/${t.id}`,"_blank"),children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-violet-200 to-violet-400 flex items-center justify-center transition-transform shadow-lg",children:t.image?e.jsx("img",{src:`/storage/${t.image}`,alt:t.name,className:"w-full h-full rounded-full object-cover",onError:a=>{a.currentTarget.src="/images/default-builder-square.png"}}):e.jsx(re,{className:"h-6 w-6 text-white"})})},t.id))})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(X,{className:"h-3 w-3 text-violet-400"}),e.jsx("span",{className:"text-xs text-slate-500",children:"View management"})]})]})})}),e.jsx(E,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-2/10 via-background to-chart-2/5 overflow-hidden cursor-pointer",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-blue-100 w-fit mx-auto",children:e.jsx(Ye,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wider",children:"Apartments"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:r.resources.apartments})]}),n.buildingsWithTickets&&n.buildingsWithTickets.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-xs font-semibold text-blue-600",children:"By Building"}),n.buildingsWithTickets.length>3&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(C,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:t=>{t.stopPropagation();const a=document.getElementById("apartments-container");a&&a.scrollBy({left:-200,behavior:"smooth"})},children:e.jsx(Fe,{className:"h-3 w-3"})}),e.jsx(C,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:t=>{t.stopPropagation();const a=document.getElementById("apartments-container");a&&a.scrollBy({left:200,behavior:"smooth"})},children:e.jsx(be,{className:"h-3 w-3"})})]})]}),e.jsx("div",{id:"apartments-container",className:"flex gap-2 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:n.buildingsWithTickets.map(t=>e.jsxs("div",{className:"flex-shrink-0 group/building cursor-pointer flex flex-col items-center gap-1",title:`${t.name}: ${t.apartments_count} apartments`,onClick:a=>{a.stopPropagation(),window.open(`/buildings/${t.id}/apartments`,"_blank")},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-200 to-blue-400 flex items-center justify-center  transition-transform shadow-lg",children:t.image?e.jsx("img",{src:`/storage/${t.image}`,alt:t.name,className:"w-full h-full rounded-full object-cover",onError:a=>{a.currentTarget.src="/images/default-builder-square.png"}}):e.jsx(re,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xs font-bold text-blue-700 min-w-0 text-center",children:t.apartments_count})]},`apt-${t.id}`))})]})]})})}),e.jsx(E,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-3/10 via-background to-chart-3/5 overflow-hidden cursor-pointer",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-emerald-100 w-fit mx-auto",children:e.jsx(oe,{className:"h-8 w-8 text-emerald-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-600 uppercase tracking-wider",children:"Members"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:r.resources.tenants})]}),n.buildingsWithTickets&&n.buildingsWithTickets.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-xs font-semibold text-emerald-600",children:"By Building"}),n.buildingsWithTickets.length>3&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(C,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:t=>{t.stopPropagation();const a=document.getElementById("tenants-container");a&&a.scrollBy({left:-200,behavior:"smooth"})},children:e.jsx(Fe,{className:"h-3 w-3"})}),e.jsx(C,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:t=>{t.stopPropagation();const a=document.getElementById("tenants-container");a&&a.scrollBy({left:200,behavior:"smooth"})},children:e.jsx(be,{className:"h-3 w-3"})})]})]}),e.jsx("div",{id:"tenants-container",className:"flex gap-2 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:n.buildingsWithTickets.map(t=>e.jsxs("div",{className:"flex-shrink-0 group/building cursor-pointer flex flex-col items-center gap-1",title:`${t.name}: ${t.tenants_count} tenants`,onClick:a=>{a.stopPropagation(),window.open(`/buildings/${t.id}/tenants`,"_blank")},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-200 to-emerald-400 flex items-center justify-center  transition-transform shadow-lg",children:t.image?e.jsx("img",{src:`/storage/${t.image}`,alt:t.name,className:"w-full h-full rounded-full object-cover",onError:a=>{a.currentTarget.src="/images/default-builder-square.png"}}):e.jsx(re,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xs font-bold text-emerald-700 min-w-0 text-center",children:t.tenants_count})]},`tenant-${t.id}`))})]})]})})}),e.jsx(E,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-4/10 via-background to-chart-4/5 overflow-hidden cursor-pointer",onClick:()=>N(!0),children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-amber-100 w-fit mx-auto",children:e.jsx(ye,{className:"h-8 w-8 text-amber-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-amber-600 uppercase tracking-wider",children:"Devices"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:r.resources.devices})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ke,{className:"h-3 w-3 text-amber-400"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Click to view details"})]})]})})})]}),s&&n.topTechnicals&&n.topTechnicals.length>0&&e.jsx("div",{className:"mt-8",children:e.jsxs(E,{className:"border-0 bg-gradient-to-br from-rose-50 via-white to-rose-50 shadow-xl",children:[e.jsx(Q,{className:"border-b border-rose-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-rose-100",children:e.jsx(Dt,{className:"h-5 w-5 text-rose-600"})}),e.jsxs("div",{children:[e.jsx(ee,{className:"text-xl text-slate-800",children:"Technical Team"}),e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[n.topTechnicals.length," active technicians"]})]})]}),e.jsxs(C,{variant:"outline",size:"sm",className:"bg-rose-50 border-rose-200 text-rose-700 hover:bg-rose-100",onClick:()=>window.open("/technicals","_blank"),children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"View All"]})]})}),e.jsx(S,{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.topTechnicals.map(t=>e.jsx("div",{className:"bg-white rounded-xl p-4 shadow-lg border border-rose-100 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-rose-200 to-rose-400 flex items-center justify-center overflow-hidden",children:t.photo?e.jsx("img",{src:t.photo,alt:t.name,className:"w-full h-full object-cover"}):e.jsx(Xe,{className:"h-6 w-6 text-white"})}),t.is_default&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full border-2 border-white flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:"★"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-slate-800 text-sm truncate",children:t.name}),t.is_default&&e.jsx(G,{variant:"secondary",className:"text-xs px-1 py-0",children:"Default"})]}),e.jsxs("div",{className:"space-y-1",children:[t.email&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(zt,{className:"h-3 w-3 text-slate-400"}),e.jsx("span",{className:"text-xs text-slate-600 truncate",children:t.email})]}),t.phone&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ut,{className:"h-3 w-3 text-slate-400"}),e.jsx("span",{className:"text-xs text-slate-600",children:t.phone})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{className:"h-3 w-3 text-blue-500"}),e.jsxs("span",{className:"text-xs font-semibold text-blue-700",children:[t.tickets_count," tickets"]})]}),t.shift&&e.jsx("span",{className:"text-xs text-slate-500 capitalize",children:t.shift})]})]})]})]})},t.id))})})]})})]}),(!o||s||z)&&e.jsxs("div",{className:"space-y-16",children:["                            ",e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("h2",{className:"text-5xl font-black text-foreground",children:"Visual Analysis"}),e.jsx("p",{className:"text-2xl text-muted-foreground max-w-3xl mx-auto font-semibold",children:"Interactive charts and trends to monitor system performance"}),e.jsx("div",{className:"flex justify-center gap-6"})]}),e.jsxs("div",{className:"grid gap-20 lg:grid-cols-12",children:["                                ",e.jsx("div",{className:"lg:col-span-6",children:e.jsxs(E,{className:"h-full border-0 bg-gradient-to-br from-muted/20 via-background to-primary/5 shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-secondary/5"}),e.jsx(Q,{className:"pb-12 relative",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(ee,{className:"text-3xl font-black text-foreground",children:"Ticket Distribution"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Estado actual del sistema"})]}),e.jsxs("div",{className:"flex gap-4",children:["                                                    ",e.jsxs(C,{variant:"outline",size:"lg",onClick:()=>{const t=Object.values(d.ticketsByStatus).reduce((a,i)=>a+i,0);Ot(d.ticketsByStatus,t)},className:"h-14 w-14 p-0 hover:bg-primary/10 shadow-xl border-primary/20 hover:scale-105 transition-all duration-300",title:"Export Professional Analysis",children:["                                                        ",e.jsx(Je,{className:"h-6 w-6 text-primary"})]}),e.jsx(C,{variant:"outline",size:"lg",onClick:()=>window.open("/tickets","_blank"),className:"h-14 w-14 p-0 hover:bg-primary/10 shadow-xl border-primary/20",children:e.jsx(X,{className:"h-6 w-6 text-primary"})})]})]})}),e.jsx(S,{className:"pt-0 pb-16 relative",children:e.jsx("div",{className:"h-[500px]",children:e.jsx(je,{width:"100%",height:"100%",children:e.jsxs(bt,{children:[e.jsx(ft,{data:Object.entries(d.ticketsByStatus).map(([t,a],i)=>({name:t.replace("_"," ").toUpperCase(),value:a,color:ne[i%ne.length]})),cx:"50%",cy:"50%",outerRadius:160,innerRadius:80,paddingAngle:8,dataKey:"value",onClick:t=>xt(t.name.toLowerCase().replace(" ","_"),t.value),className:"cursor-pointer drop-shadow-2xl",children:Object.entries(d.ticketsByStatus).map((t,a)=>e.jsx(Ft,{fill:ne[a%ne.length],stroke:"#fff",strokeWidth:6,className:"hover:opacity-80 transition-all duration-500"},`cell-${a}`))}),e.jsx(ve,{formatter:t=>[`${t} tickets (${Math.round(t/Object.values(d.ticketsByStatus).reduce((a,i)=>a+i,0)*100)}%)`,"Cantidad"],labelStyle:{color:"#374151",fontWeight:"bold",fontSize:"18px"},contentStyle:{backgroundColor:"#fff",border:"none",borderRadius:"20px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.35)",padding:"20px 24px"}}),e.jsx(rt,{verticalAlign:"bottom",height:80,formatter:t=>e.jsx("span",{className:"text-lg font-black text-slate-700",children:t})})]})})})})]})}),"                                ",e.jsx("div",{className:"lg:col-span-6",children:e.jsxs(E,{className:"h-full border-0 bg-gradient-to-br from-secondary/10 via-background to-accent/5 shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/5 to-accent/5"}),e.jsx(Q,{className:"pb-12 relative",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(ee,{className:"text-3xl font-black text-foreground",children:"Weekly Trend"}),e.jsx("p",{className:"text-xl text-muted-foreground font-semibold",children:"Ticket evolution over the last 7 days"})]}),e.jsxs("div",{className:"flex gap-4",children:["                                                    ",e.jsx(C,{variant:"outline",size:"lg",onClick:()=>{const t=d.ticketsLastWeek.map(a=>({date:a.date,count:a.count}));It(t)},className:"h-14 w-14 p-0 hover:bg-secondary/10 shadow-xl border-secondary/20 hover:scale-105 transition-all duration-300",title:"Export Weekly Trend Analysis",children:e.jsx(Je,{className:"h-6 w-6 text-secondary"})})]})]})}),e.jsx(S,{className:"pt-0 pb-16 relative",children:e.jsx("div",{className:"h-[500px]",children:e.jsx(je,{width:"100%",height:"100%",children:e.jsxs(et,{data:ht,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366F1",stopOpacity:.6}),e.jsx("stop",{offset:"95%",stopColor:"#6366F1",stopOpacity:.1})]})}),e.jsx(tt,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeWidth:2}),e.jsx(st,{dataKey:"date",tick:{fontSize:16,fill:"#475569",fontWeight:"bold"},tickLine:{stroke:"#cbd5e1"},axisLine:{stroke:"#cbd5e1"}}),e.jsx(at,{tick:{fontSize:16,fill:"#475569",fontWeight:"bold"},tickLine:{stroke:"#cbd5e1"},axisLine:{stroke:"#cbd5e1"}}),e.jsx(ve,{contentStyle:{backgroundColor:"#fff",border:"none",borderRadius:"20px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.35)",padding:"20px 24px"},labelFormatter:t=>`Fecha: ${t}`,formatter:(t,a)=>[`${t} tickets`,a==="tickets"?"Daily Total":"Average"]}),e.jsx(ce,{type:"monotone",dataKey:"tickets",stroke:"#6366F1",strokeWidth:5,fill:"url(#colorGradient)",dot:{fill:"#6366F1",strokeWidth:4,r:8},activeDot:{r:10,stroke:"#6366F1",strokeWidth:4,fill:"#fff"}}),e.jsx(ce,{type:"monotone",dataKey:"average",stroke:"#94A3B8",strokeWidth:4,strokeDasharray:"10 10",fill:"none",dot:!1})]})})})})]})})]})]}),(!o||s||z)&&e.jsxs("div",{className:"space-y-6 mt-4",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Advanced Analytics"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Interactive charts and visualizations"})]}),e.jsx($t,{data:{ticketsByStatus:Object.entries(d.ticketsByStatus).map(([t,a])=>({status:t,count:a,color:t==="open"?"#ef4444":t==="in_progress"?"#f59e0b":t==="resolved"?"#10b981":"#6b7280"})),ticketsByPriority:Object.entries(d.ticketsByPriority).map(([t,a])=>({priority:t,count:a,color:t==="high"?"#dc2626":t==="medium"?"#ea580c":t==="low"?"#16a34a":"#6b7280"})),ticketsByBuilding:n.buildingsWithTickets.map(t=>({building:t.name,count:t.tickets_count})),ticketsOverTime:d.ticketsLastWeek.map((t,a)=>({month:`Day ${a+1}`,created:t.count,resolved:Math.floor(t.count*.8)})),deviceIssues:n.problematicDevices.map(t=>({device:t.device_name,count:t.tickets_count,avgResolution:24})),techniciansPerformance:n.topTechnicals.map(t=>({technician:t.name,resolved:t.tickets_count,avg_time:18}))}})]}),e.jsx("div",{className:"mt-32",children:e.jsxs(E,{className:"border-0 bg-chart-5 text-background shadow-2xl overflow-hidden relative dark:bg-white/10",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/10 dark:bg-transparent"}),e.jsx(S,{className:"p-16 relative",children:e.jsxs("div",{className:"grid gap-16 lg:grid-cols-4",children:["                                        ",e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-primary/20 w-fit mx-auto dark:bg-primary",children:e.jsx(We,{className:"h-10 w-10 text-primary dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-4xl font-black text-background",children:r.tickets.total+r.tickets.resolved_today}),e.jsx("p",{className:"text-primary/80 font-bold text-lg",children:"Total Processed"})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-primary/20 w-fit mx-auto dark:bg-primary",children:e.jsx(ie,{className:"h-10 w-10 text-primary dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-4xl font-black text-background",children:"98.5%"}),e.jsx("p",{className:"text-primary/80 font-bold text-lg",children:"Uptime"})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-accent/20 w-fit mx-auto dark:bg-primary",children:e.jsx(oe,{className:"h-10 w-10 text-accent dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-4xl font-black text-background",children:r.resources.tenants+r.resources.technicals}),e.jsx("p",{className:"text-accent/80 font-bold text-lg",children:"Active Users"})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-chart-1/20 w-fit mx-auto dark:bg-primary",children:e.jsx(Oe,{className:"h-10 w-10 text-chart-1 dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-4xl font-black text-background",children:[Math.round(r.tickets.avg_resolution_hours*.8),"h"]}),e.jsx("p",{className:"text-chart-1/80 font-bold text-lg",children:"Response Time"})]})]})]})})]})})]})}),j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in-0 duration-300",onClick:()=>N(!1),children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden border border-gray-200 dark:border-gray-700 animate-in zoom-in-95 slide-in-from-bottom-4 duration-500 ease-out",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-chart-4/10 to-chart-3/10 dark:from-chart-4/20 dark:to-chart-3/20",children:[e.jsxs("div",{className:"flex items-center gap-3 animate-in slide-in-from-left-4 duration-700 delay-200",children:[e.jsx("div",{className:"p-3 rounded-xl bg-chart-4/20 dark:bg-chart-4/30",children:e.jsx(ye,{className:"h-6 w-6 text-chart-4 dark:text-chart-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-white",children:"Device Management"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-300",children:"Complete overview of all devices in the system"})]})]}),e.jsx(C,{variant:"ghost",size:"lg",onClick:()=>N(!1),className:"rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 animate-in slide-in-from-right-4 duration-700 delay-200 transition-all hover:scale-105",children:e.jsx(ue,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] bg-white dark:bg-gray-900 scroll-smooth custom-scrollbar",children:n.allDevices&&n.allDevices.length>0?e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-700 delay-300",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(E,{className:"bg-gradient-to-br from-primary/10 to-primary/5 dark:from-primary/20 dark:to-primary/10 border-primary/20 dark:border-primary/30 dark:bg-gray-800/50 animate-in slide-in-from-left-2 duration-500 delay-400 hover:scale-105 transition-transform",children:e.jsxs(S,{className:"p-4 text-center",children:[e.jsx(Ke,{className:"h-8 w-8 text-primary dark:text-primary mx-auto mb-2"}),e.jsx("h3",{className:"font-semibold text-primary dark:text-primary",children:"Total Devices"}),e.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-white",children:n.allDevices.length})]})}),e.jsx(E,{className:"bg-gradient-to-br from-secondary/10 to-secondary/5 dark:from-secondary/20 dark:to-secondary/10 border-secondary/20 dark:border-secondary/30 dark:bg-gray-800/50 animate-in slide-in-from-bottom-2 duration-500 delay-500 hover:scale-105 transition-transform",children:e.jsxs(S,{className:"p-4 text-center",children:[e.jsx(oe,{className:"h-8 w-8 text-secondary dark:text-secondary mx-auto mb-2"}),e.jsx("h3",{className:"font-semibold text-secondary dark:text-secondary",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-white",children:n.allDevices.reduce((t,a)=>t+a.users_count,0)})]})}),e.jsx(E,{className:"bg-gradient-to-br from-accent/10 to-accent/5 dark:from-accent/20 dark:to-accent/10 border-accent/20 dark:border-accent/30 dark:bg-gray-800/50 animate-in slide-in-from-right-2 duration-500 delay-600 hover:scale-105 transition-transform",children:e.jsxs(S,{className:"p-4 text-center",children:[e.jsx(ge,{className:"h-8 w-8 text-accent dark:text-accent mx-auto mb-2"}),e.jsx("h3",{className:"font-semibold text-accent dark:text-accent",children:"Device Types"}),e.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-white",children:new Set(n.allDevices.map(t=>t.device_type)).size})]})})]}),e.jsxs(E,{className:"border-0 shadow-lg dark:bg-gray-800/50 dark:border-gray-700",children:[e.jsx(Q,{className:"pb-6 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:!bg-transparent",children:e.jsxs("div",{className:"flex items-center justify-between dark:!bg-transparent",children:[e.jsx(ee,{className:"text-xl text-foreground dark:text-white",children:"Device Inventory"}),"                                                    ",e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>Wt(n.allDevices),className:"gap-2 border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 hover:text-gray-700 dark:text-gray-300 hover:scale-105 transition-all duration-300",children:[e.jsx(He,{className:"h-4 w-4"}),"Export"]})]})}),e.jsx(S,{className:"p-0 bg-white dark:bg-gray-800/50",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:["                                                        ",e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/70",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Device"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Model"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Brand"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"System"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Users"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Status"})]})}),e.jsx("tbody",{children:n.allDevices.map((t,a)=>e.jsxs("tr",{className:`border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${a%2===0?"bg-white dark:bg-gray-800/30":"bg-gray-50 dark:bg-gray-800/50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-chart-4/20 to-chart-3/20 dark:from-chart-4/30 dark:to-chart-3/30 flex items-center justify-center",children:e.jsx(Tt,{className:"h-4 w-4 text-chart-4 dark:text-chart-4"})}),e.jsx("div",{children:e.jsxs("p",{className:"font-semibold text-foreground dark:text-white text-sm",children:["  ",t.device_type||"Unknown"]})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-foreground dark:text-white",children:t.device_type||"N/A"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-foreground dark:text-white",children:t.brand_name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-muted-foreground dark:text-gray-400",children:t.system_name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-accent dark:text-accent"}),e.jsx("span",{className:"font-semibold text-accent dark:text-accent",children:t.users_count})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(G,{variant:"outline",className:t.users_count>0?"bg-accent/10 dark:bg-accent/20 text-accent dark:text-accent border-accent/20 dark:border-accent/30":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600",children:t.users_count>0?"Active":"Unused"})})]},t.id))})]})})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ye,{className:"h-16 w-16 text-muted-foreground dark:text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-muted-foreground dark:text-gray-300 mb-2",children:"No Devices Found"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-400",children:"No device data is available at the moment."})]})})]})}),e.jsx(wt,{open:O,onOpenChange:t=>{t||_()},children:e.jsxs(Ct,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[e.jsx(Et,{children:e.jsxs(St,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5 text-blue-600"}),"Appointment Location - ",p?M(p).buildingName:""]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-4 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:p==null?void 0:p.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:p?U(p.scheduled_for).date:""})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{children:p?U(p.scheduled_for).time:""})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(Xe,{className:"h-4 w-4"}),e.jsx("span",{children:p==null?void 0:p.technical.name})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsxs("span",{children:["#",p==null?void 0:p.ticket.code]})]})]}),e.jsxs("div",{className:"flex items-start gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(Ye,{className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:p?M(p).buildingName:""}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Unit ",p?M(p).unitNumber:""," • ",p==null?void 0:p.address]})]})]})]}),e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700",children:e.jsx("iframe",{src:H(p?M(p).locationLink:""),width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"w-full h-full"})}),e.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t border-slate-200 dark:border-slate-700",children:p&&M(p).locationLink&&e.jsxs(C,{onClick:()=>{window.open(M(p).locationLink,"_blank")},className:"px-6",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Open in Google Maps"]})})]})]})})]})})}function Pt({ticket:r,index:d,technicals:n}){var O,b,p,R,W,D,$,k,y,F;const[u,l]=B.useState(!1),[s,o]=B.useState(null),z=async()=>{var x;if(!s){q.error("Please select a technician");return}l(!0);try{const c=await fetch(`/tickets/${r.id}/assign-technical`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content"))||""},body:JSON.stringify({technical_id:s})});if(c.ok){const g=await c.json();q.success(g.message||"Ticket assigned successfully!"),Qe.reload({only:["lists"]})}else if(c.status===422){const g=await c.json(),m=Object.values(g.errors||{}).flat();q.error(m.join(", ")||"Validation error")}else{const g=await c.json().catch(()=>({message:"Unknown error"}));q.error(g.message||g.error||"Failed to assign ticket")}}catch(c){q.error("Error assigning ticket"),console.error("Assignment error:",c)}finally{l(!1)}},I=x=>{const c={open:"bg-red-100 text-red-700 border-red-200",in_progress:"bg-amber-100 text-amber-700 border-amber-200",resolved:"bg-green-100 text-green-700 border-green-200",closed:"bg-gray-100 text-gray-700 border-gray-200"};return e.jsx(G,{variant:"outline",className:`${c[x]||c.open} capitalize`,children:x.replace("_"," ")})},j=x=>{const c={Hardware:"bg-blue-100 text-blue-700",Software:"bg-purple-100 text-purple-700",Network:"bg-green-100 text-green-700",Maintenance:"bg-orange-100 text-orange-700"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c[x]||"bg-gray-100 text-gray-700"}`,children:x})},N=x=>{const c=new Date(x),m=Math.floor((new Date().getTime()-c.getTime())/(1e3*60*60));return m<24?`${m}h ago`:`${Math.floor(m/24)}d ago`};return e.jsxs("tr",{className:`border-b border-slate-50 hover:bg-slate-50/50 transition-colors ${d%2===0?"bg-white":"bg-slate-25"}`,children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-slate-800 text-sm",children:r.code}),I(r.status)]}),e.jsx("p",{className:"text-sm text-slate-600 max-w-xs truncate",title:r.title,children:r.title})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-slate-800",children:((R=(p=(b=(O=r.user)==null?void 0:O.tenant)==null?void 0:b.apartment)==null?void 0:p.building)==null?void 0:R.name)||"Unknown Building"}),e.jsx("p",{className:"text-slate-600",children:(($=(D=(W=r.user)==null?void 0:W.tenant)==null?void 0:D.apartment)==null?void 0:$.name)||"Unknown Apt"})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-slate-800",children:((y=(k=r.device)==null?void 0:k.name_device)==null?void 0:y.name)||"Unknown Device"}),e.jsx("p",{className:"text-slate-600",children:((F=r.device)==null?void 0:F.name)||"N/A"})]})}),e.jsx("td",{className:"py-4 px-6",children:j(r.category)}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-slate-800",children:N(r.created_at)}),e.jsx("p",{className:"text-slate-500 text-xs",children:ot(new Date(r.created_at),"MMM dd, HH:mm")})]})}),e.jsxs("td",{className:"py-4 px-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(yt,{value:(s==null?void 0:s.toString())||"",onValueChange:x=>o(Number(x)),children:[e.jsx(jt,{className:"w-32 h-8 text-xs",children:e.jsx(vt,{placeholder:"Select tech"})}),"                        ",e.jsx(Nt,{children:n.length>0?n.map(x=>e.jsx(Ie,{value:x.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:x.name}),x.is_default&&e.jsx(G,{variant:"secondary",className:"text-xs px-1 py-0",children:"Default"})]})},x.id)):e.jsx(Ie,{value:"",disabled:!0,children:"No technicians available"})})]}),e.jsx(C,{size:"sm",variant:"outline",onClick:z,disabled:!s||u,className:"h-8 px-3 text-xs bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100 disabled:opacity-50",children:u?e.jsx(lt,{className:"h-3 w-3 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),"Assign"]})})]}),"            "]})]})}export{Ms as default};
