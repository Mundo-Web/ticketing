import{j as e}from"./ui-DOZf2yjz.js";import{r as u}from"./recharts-C_88tpBl.js";import{L as S}from"./app-DbWUqcXL.js";import{A as _}from"./app-layout-Bk39jui7.js";import{C as r,a as c,b as i,c as d}from"./card-BVEXWPsF.js";import{B as k}from"./button-DTjxYp-e.js";import{B as p}from"./badge-uKT_rvl7.js";import{C as y,a as T}from"./circle-check-big-BmNCx7OB.js";import{C as E}from"./clock-C9AFtO6q.js";import{U as f}from"./user-CpLSdjZ6.js";import{M as P}from"./map-pin-ChCBgcvg.js";import{R as A,C as B}from"./rotate-ccw-DhYnj3o6.js";import{C as I}from"./x-BHPjFQcq.js";import"./react-B1hewrmX.js";import"./utils-BJRzUxt3.js";import"./tooltip-DoMCbB_g.js";import"./check-ei1vhWUY.js";import"./createLucideIcon-BiVfa5Ur.js";import"./index-BGNDaddl.js";import"./index-D4fRSykC.js";import"./index-Be5ybv-K.js";import"./chevrons-up-down-DyCAeWvF.js";const N={scheduled:{label:"Programada",color:"bg-blue-100 text-blue-800",icon:y},in_progress:{label:"En Progreso",color:"bg-yellow-100 text-yellow-800",icon:B},completed:{label:"Completada",color:"bg-green-100 text-green-800",icon:T},cancelled:{label:"Cancelada",color:"bg-red-100 text-red-800",icon:I},rescheduled:{label:"Reagendada",color:"bg-gray-100 text-gray-800",icon:A}};function ae({appointments:l,technicals:b,currentDate:v}){const[n,C]=u.useState(new Date(v)),[o,w]=u.useState("all"),m=l.filter(s=>{const a=new Date(s.scheduled_for).toDateString()===n.toDateString(),x=o==="all"||s.status===o;return a&&x}),h=l.filter(s=>{const t=new Date(s.scheduled_for),a=new Date,x=new Date(a.getTime()+7*24*60*60*1e3);return t>=a&&t<=x&&s.status==="scheduled"}).sort((s,t)=>new Date(s.scheduled_for).getTime()-new Date(t.scheduled_for).getTime()),j=s=>new Date(s).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),g=s=>new Date(s).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),D=s=>{const t=N[s]||N.scheduled,a=t.icon;return e.jsxs(p,{className:`${t.color} border-0`,children:[e.jsx(a,{className:"w-3 h-3 mr-1"}),t.label]})};return e.jsxs(_,{breadcrumbs:[{title:"Calendar",href:"/appointments"}],children:[e.jsx(S,{title:"Appointments Calendar"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Calendario de Citas"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Gestiona todas las citas presenciales programadas"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(r,{children:[e.jsx(c,{children:e.jsxs(i,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Citas del ",g(n.toISOString())]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:o,onChange:s=>w(s.target.value),className:"px-3 py-1 border rounded-md text-sm",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"scheduled",children:"Programadas"}),e.jsx("option",{value:"in_progress",children:"En Progreso"}),e.jsx("option",{value:"completed",children:"Completadas"}),e.jsx("option",{value:"cancelled",children:"Canceladas"})]}),e.jsx("input",{type:"date",value:n.toISOString().split("T")[0],onChange:s=>C(new Date(s.target.value)),className:"px-3 py-1 border rounded-md text-sm"})]})]})}),e.jsx(d,{children:m.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(y,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No hay citas programadas para esta fecha"})]}):e.jsx("div",{className:"space-y-4",children:m.map(s=>e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Ticket #",s.ticket.code]})]}),D(s.status)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsxs("span",{children:[j(s.scheduled_for)," (",s.estimated_duration," min)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:s.technical.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:s.address})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:s.ticket.user.name})]})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-3 p-3 bg-gray-50 rounded",children:s.description}),s.member_instructions&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Instrucciones:"}),e.jsx("p",{className:"text-sm text-blue-700",children:s.member_instructions})]}),s.completion_notes&&e.jsxs("div",{className:"mt-3 p-3 bg-green-50 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Notas de finalización:"}),e.jsx("p",{className:"text-sm text-green-700",children:s.completion_notes})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(k,{variant:"outline",size:"sm",onClick:()=>window.location.href=`/tickets?ticket=${s.ticket.id}`,children:"Ver Ticket"})})]},s.id))})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(r,{children:[e.jsx(c,{children:e.jsx(i,{className:"text-lg",children:"Próximas Citas"})}),e.jsx(d,{children:h.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No hay citas próximas"}):e.jsx("div",{className:"space-y-3",children:h.slice(0,5).map(s=>e.jsxs("div",{className:"border-l-4 border-blue-500 pl-3 py-2",children:[e.jsx("p",{className:"font-medium text-sm",children:s.title}),e.jsxs("p",{className:"text-xs text-gray-600",children:[g(s.scheduled_for)," - ",j(s.scheduled_for)]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.technical.name})]},s.id))})})]}),e.jsxs(r,{children:[e.jsx(c,{children:e.jsx(i,{className:"text-lg",children:"Estadísticas"})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total hoy:"}),e.jsx("span",{className:"font-medium",children:m.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Programadas:"}),e.jsx("span",{className:"font-medium text-blue-600",children:l.filter(s=>s.status==="scheduled").length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"En progreso:"}),e.jsx("span",{className:"font-medium text-yellow-600",children:l.filter(s=>s.status==="in_progress").length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Completadas:"}),e.jsx("span",{className:"font-medium text-green-600",children:l.filter(s=>s.status==="completed").length})]})]})})]}),e.jsxs(r,{children:[e.jsx(c,{children:e.jsx(i,{className:"text-lg",children:"Técnicos Disponibles"})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-2",children:b.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:s.name}),e.jsx(p,{variant:"outline",className:"text-xs",children:s.shift})]},s.id))})})]})]})]})]})]})}export{ae as default};
