import{j as e}from"./ui-CGpGLG-4.js";import{A as Qt,D as Nt,a as yt,b as wt,e as Zt,f as _e,d as Ee}from"./app-layout-DJ6MRa_H.js";import{K as es,L as ts,t as M,S as pe}from"./app-CH5EcUsm.js";import{b as Le,A as St,C as _t,X as Et,Y as $t,T as Pe,d as Te,L as Mt,r as _,P as ss,e as as,f as rs}from"./recharts-B16uQ_Zp.js";import{C as p,a as O,b as B,c as u,d as kt,e as ls}from"./card-BbuF1Q2y.js";import{f as Rt,B as L}from"./format-CAKJ62El.js";import{B as k}from"./button-Dn6xNzVS.js";import{S as os,a as ns,b as is,c as cs,d as Ft}from"./select-npSrfne5.js";import{D as It,a as Ut,b as zt,c as Ot,e as ds}from"./dialog-ZN4shhb4.js";import{E as We,F as He}from"./FileSaver.min-BGmHM0RZ.js";import{T as he}from"./trending-up-iFJZgfSe.js";import{C as be,Z as fe}from"./zap-1HMIGlWi.js";import{A as je}from"./activity-DiIEwa5r.js";import{R as Bt,U as ms,O as xs,C as hs,W as gs}from"./wrench-DjfGOcw3.js";import{C as se,a as ee}from"./circle-check-big-DKZvEq1H.js";import{M as ve}from"./map-pin-B6MGBFhT.js";import{E as ps}from"./eye-Bhnt7WyV.js";import{C as J}from"./clock-rsHRdq3d.js";import{f as Ne,U as ae,X as $e,B as re,a as Me,c as us}from"./x-DaVkax-L.js";import{U as Ce}from"./user-plus-TUxKnim4.js";import{C as ye}from"./circle-alert-BoVUSwRZ.js";import{I as Ct}from"./info-DjRDCVbv.js";import{C as Re}from"./check-C_IBZmq_.js";import{a as Tt,T as bs,M as fs,P as js}from"./timer-DmmoSr9O.js";import{T as we}from"./triangle-alert-Dwpv9XSR.js";import{T as ce}from"./ticket-NZxvcyxK.js";import{E as Y}from"./external-link-D4kgwzSg.js";import{S as Ie}from"./search-BYwieh_P.js";import{P as Dt}from"./plus-BdgF4T8b.js";import{M as ke}from"./monitor--_KUovl-.js";import{H as le}from"./house-Csy0F4Ln.js";import{U as Ue}from"./user-B9S7Zak9.js";import{C as ze}from"./chevron-left-BEER2g75.js";import{S as Oe}from"./smartphone-DjIgDxH-.js";import{F as At}from"./file-spreadsheet-DP1B9Kxi.js";import{D as vs}from"./download-CRovyn-I.js";import{C as Ns}from"./circle-play-Dthy1u5D.js";import"./utils-DvwAYYBZ.js";import"./tooltip-B-ZChVRl.js";import"./index-BbIsR65t.js";import"./index-BsIecJEN.js";import"./index-BvZAAreS.js";import"./chevrons-up-down-DaqTssCh.js";import"./createLucideIcon-BBA9I-xQ.js";import"./react-B1hewrmX.js";const ys=({active:o,payload:c,label:l})=>{if(o&&c&&c.length){const w=c.reduce((n,i)=>n+(i.value||0),0);return e.jsx("div",{className:"bg-white dark:bg-gray-800 border-0 rounded-2xl shadow-2xl p-6 min-w-[200px]",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-b border-gray-100 dark:border-gray-700 pb-3",children:[e.jsx("p",{className:"font-bold text-lg text-gray-900 dark:text-white",children:l}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Total: ",w," tickets"]})]}),e.jsx("div",{className:"space-y-3",children:c.map((n,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shadow-md",style:{backgroundColor:n.color}}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:n.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:n.value}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1",children:["(",w>0?Math.round(n.value/w*100):0,"%)"]})]})]},i))})]})})}return null};function ws({data:o}){return e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsxs(p,{className:"border-0 bg-gradient-to-br from-primary/5 via-background to-secondary/5 shadow-2xl overflow-hidden relative lg:col-span-2",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 to-green-50/50 dark:from-blue-950/20 dark:to-green-950/20"}),e.jsxs(O,{className:"pb-8 relative",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-gradient-to-br from-blue-500 to-green-500 shadow-lg",children:e.jsx(he,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{children:[e.jsx(B,{className:"text-3xl font-black text-foreground",children:"Ticket Evolution"}),e.jsx("p",{className:"text-lg text-muted-foreground font-medium",children:"Created vs Resolved trends over time"})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-blue-50/80 dark:bg-blue-950/30 rounded-xl p-4 border border-blue-100 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full shadow-sm"}),e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Average Created"})]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:[o.ticketsOverTime.length>0?Math.round(o.ticketsOverTime.reduce((c,l)=>c+l.created,0)/o.ticketsOverTime.length):0," /day"]})]}),e.jsxs("div",{className:"bg-green-50/80 dark:bg-green-950/30 rounded-xl p-4 border border-green-100 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full shadow-sm"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Average Resolved"})]}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-2",children:[o.ticketsOverTime.length>0?Math.round(o.ticketsOverTime.reduce((c,l)=>c+l.resolved,0)/o.ticketsOverTime.length):0," /day"]})]})]})]}),e.jsx(u,{className:"pt-0 pb-8 relative",children:e.jsx("div",{className:"h-[450px] bg-gradient-to-b from-white/50 to-transparent dark:from-gray-900/50 rounded-2xl p-4",children:e.jsx(Le,{width:"100%",height:"100%",children:e.jsxs(St,{data:o.ticketsOverTime,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorCreated",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:.9}),e.jsx("stop",{offset:"50%",stopColor:"#3b82f6",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorResolved",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:.9}),e.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:.1})]}),e.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx(_t,{strokeDasharray:"2 6",stroke:"hsl(var(--muted-foreground))",opacity:.3,vertical:!1}),e.jsx(Et,{dataKey:"month",tick:{fontSize:13,fill:"hsl(var(--muted-foreground))",fontWeight:500},tickLine:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1},axisLine:{stroke:"hsl(var(--border))",strokeWidth:2},dy:10}),e.jsx($t,{tick:{fontSize:13,fill:"hsl(var(--muted-foreground))",fontWeight:500},tickLine:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1},axisLine:{stroke:"hsl(var(--border))",strokeWidth:2},dx:-10}),e.jsx(Pe,{content:e.jsx(ys,{})}),e.jsx(Te,{type:"monotone",dataKey:"created",stackId:"1",stroke:"#3b82f6",strokeWidth:4,fill:"url(#colorCreated)",name:"Created",dot:{fill:"#3b82f6",strokeWidth:3,r:6,stroke:"#ffffff",filter:"url(#glow)"},activeDot:{r:8,stroke:"#3b82f6",strokeWidth:4,fill:"#ffffff",filter:"url(#glow)",className:"animate-pulse"}}),e.jsx(Te,{type:"monotone",dataKey:"resolved",stackId:"2",stroke:"#10b981",strokeWidth:4,fill:"url(#colorResolved)",name:"Resolved",dot:{fill:"#10b981",strokeWidth:3,r:6,stroke:"#ffffff",filter:"url(#glow)"},activeDot:{r:8,stroke:"#10b981",strokeWidth:4,fill:"#ffffff",filter:"url(#glow)",className:"animate-pulse"}}),e.jsx(Mt,{verticalAlign:"top",height:50,iconType:"circle",formatter:(c,l)=>e.jsx("span",{className:"text-base font-semibold",style:{color:l.color},children:c})})]})})})})]})})}const ks=[{title:"Dashboard",href:"/dashboard"}],Fe=["#3B82F6","#EF4444","#F59E0B","#10B981","#8B5CF6","#F97316","#06B6D4","#84CC16","#EC4899","#6366F1"],Fs=async o=>{const c=new We.Workbook;c.creator="Ticketing System - Trend Analysis",c.created=new Date,c.company="Weekly Performance Report";const l=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),n=(h=>{const b=[],g=new Date;for(let v=6;v>=0;v--){const A=new Date(g);A.setDate(g.getDate()-v);const D=A.toLocaleDateString("en-US",{month:"short",day:"numeric"}),R=h.find(de=>de.date===D);b.push({date:D,count:R&&R.count||0})}return b})(o),i={primary:"FF2563EB",secondary:"FF1E3A8A",success:"FF059669",warning:"FFF59E0B",danger:"FFDC2626",info:"FF0891B2",light:"FFF8FAFC",dark:"FF1E293B"},r=c.addWorksheet("Weekly Trend Analysis",{pageSetup:{paperSize:9,orientation:"landscape"}});r.columns=[{width:15},{width:18},{width:18},{width:20},{width:25},{width:30}],r.mergeCells("A1:F1");const $=r.getCell("A1");$.value="WEEKLY PERFORMANCE TREND ANALYSIS",$.style={font:{name:"Segoe UI",size:20,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:i.secondary}},left:{style:"thick",color:{argb:i.secondary}},bottom:{style:"thick",color:{argb:i.secondary}},right:{style:"thick",color:{argb:i.secondary}}}},r.getRow(1).height=40,r.mergeCells("A2:D2");const N=r.getCell("A2");N.value=`Analysis Period: Last 7 Days | Generated: ${l}`,N.style={font:{name:"Segoe UI",size:11,italic:!0,color:{argb:i.dark}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.light}},alignment:{horizontal:"left",vertical:"middle"}},r.mergeCells("E2:F2");const m=n.reduce((h,b)=>h+(b.count||0),0),T=n.length>0?Math.round(m/n.length):0,z=r.getCell("E2");z.value=`Total: ${m} tickets | Daily Avg: ${T}`,z.style={font:{name:"Segoe UI",size:11,bold:!0,color:{argb:i.primary}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.light}},alignment:{horizontal:"right",vertical:"middle"}};let j=4;["Date","Tickets Created","Trend vs Avg","Performance","Volume Category","Action Needed"].forEach((h,b)=>{const g=r.getCell(j,b+1);g.value=h,g.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.secondary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:"FFFFFFFF"}},left:{style:"medium",color:{argb:"FFFFFFFF"}},bottom:{style:"medium",color:{argb:"FFFFFFFF"}},right:{style:"medium",color:{argb:"FFFFFFFF"}}}}}),r.getRow(j).height=30,j++,n.forEach((h,b)=>{const g=h.count||0,v=T||1,A=v>0?Math.round((g-v)/v*100):0,D=A>15?"â†— Above Average":A<-15?"â†˜ Below Average":"â†’ Normal Range",R=g>v*1.3?"High Volume":g<v*.7?"Low Volume":"Standard Volume",de=g>v*1.5?"Peak Day":g>v*1.2?"Busy Day":g<v*.8?"Light Day":"Normal Day",ge=g>v*1.5?"Monitor capacity & resources":g<v*.5?"Review for issues":"Continue monitoring";[h.date||"Unknown",g,`${A>0?"+":""}${A}% ${D}`,R,de,ge].forEach((me,W)=>{const ue=r.getCell(j,W+1);ue.value=me;let K=b%2===0?"FFFFFFFF":"FFF8FAFC",H=i.dark;if(W===2&&(A>15?(K=i.success,H="FFFFFFFF"):A<-15&&(K=i.warning,H="FFFFFFFF")),W===3)switch(me){case"High Volume":K=i.info,H="FFFFFFFF";break;case"Low Volume":K=i.warning,H="FFFFFFFF";break}if(W===4)switch(me){case"Peak Day":K=i.danger,H="FFFFFFFF";break;case"Busy Day":K=i.warning,H="FFFFFFFF";break;case"Light Day":K=i.info,H="FFFFFFFF";break}ue.style={font:{name:"Segoe UI",size:10,color:{argb:H}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:K}},alignment:{horizontal:W===0||W===5?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),r.getRow(j).height=25,j++}),j+=2,r.mergeCells(`A${j}:F${j}`);const q=r.getCell(`A${j}`);q.value="TREND ANALYSIS & INSIGHTS",q.style={font:{name:"Segoe UI",size:14,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:i.info}},alignment:{horizontal:"center",vertical:"middle"}},j++;const P=o.reduce((h,b)=>b.count>h.count?b:h,o[0]),I=o.reduce((h,b)=>b.count<h.count?b:h,o[0]),U=Math.round((P.count-I.count)/T*100);[["Metric","Value","Analysis","Recommendation"],["Peak Day",`${P.date} (${P.count} tickets)`,P.count>T*1.5?"Significant spike":"Normal peak","Monitor for patterns"],["Lowest Day",`${I.date} (${I.count} tickets)`,I.count<T*.5?"Unusual low":"Normal variation","Check for issues if unusually low"],["Variance",`${U}%`,U>50?"High volatility":"Stable pattern",U>50?"Review capacity planning":"Maintain current approach"],["Trend Direction",m>T*7?"Growing":"Stable","Week over week","Adjust resources as needed"],["Consistency",Math.abs(U)<30?"Very Consistent":"Variable","Daily fluctuation","Plan for peak capacity"]].forEach((h,b)=>{h.forEach((g,v)=>{const A=r.getCell(j+b,v+1);A.value=g;let D=b===0?i.secondary:"FFFFFFFF",R=b===0?"FFFFFFFF":i.dark;b>0&&v===2&&(g.includes("spike")||g.includes("High volatility")?(D=i.warning,R="FFFFFFFF"):(g.includes("Consistent")||g.includes("Stable"))&&(D=i.success,R="FFFFFFFF")),A.style={font:{name:"Segoe UI",size:10,bold:b===0||v===0,color:{argb:R}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:D}},alignment:{horizontal:v===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),r.getRow(j+b).height=22});const x=`Weekly_Trend_Analysis_${new Date().toISOString().split("T")[0]}.xlsx`,C=await c.xlsx.writeBuffer(),y=new Blob([C],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});He.saveAs(y,x),M.success("Weekly Trend Analysis Generated!",{description:`${x} has been downloaded with comprehensive trend analysis and insights.`})},Cs=async(o,c)=>{const l=new We.Workbook;l.creator="Ticketing System - Analytics",l.created=new Date,l.company="Ticket Distribution Analysis";const w=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),n={primary:"FF2563EB",secondary:"FF1E3A8A",success:"FF059669",warning:"FFF59E0B",danger:"FFDC2626",info:"FF0891B2",light:"FFF8FAFC",dark:"FF1E293B"},i=l.addWorksheet("Ticket Distribution Analysis",{pageSetup:{paperSize:9,orientation:"portrait"}});i.columns=[{width:25},{width:15},{width:18},{width:20},{width:25}],i.mergeCells("A1:E1");const r=i.getCell("A1");r.value="TICKET DISTRIBUTION ANALYSIS REPORT",r.style={font:{name:"Segoe UI",size:18,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:n.secondary}},left:{style:"thick",color:{argb:n.secondary}},bottom:{style:"thick",color:{argb:n.secondary}},right:{style:"thick",color:{argb:n.secondary}}}},i.getRow(1).height=35,i.mergeCells("A2:C2");const $=i.getCell("A2");$.value=`Report Generated: ${w}`,$.style={font:{name:"Segoe UI",size:11,italic:!0,color:{argb:n.dark}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.light}},alignment:{horizontal:"left",vertical:"middle"}},i.mergeCells("D2:E2");const N=i.getCell("D2");N.value=`Total Tickets: ${c}`,N.style={font:{name:"Segoe UI",size:11,bold:!0,color:{argb:n.primary}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.light}},alignment:{horizontal:"right",vertical:"middle"}};let m=4;["Status","Count","Percentage","Priority Level","Action Required"].forEach((x,C)=>{const y=i.getCell(m,C+1);y.value=x,y.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.secondary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:"FFFFFFFF"}},left:{style:"medium",color:{argb:"FFFFFFFF"}},bottom:{style:"medium",color:{argb:"FFFFFFFF"}},right:{style:"medium",color:{argb:"FFFFFFFF"}}}}}),i.getRow(m).height=30,m++;const z={open:{label:"Open",priority:"Critical",action:"Immediate Assignment Required",color:n.danger},in_progress:{label:"In Progress",priority:"High",action:"Monitor Progress",color:n.warning},resolved:{label:"Resolved",priority:"Low",action:"Quality Check",color:n.success},closed:{label:"Closed",priority:"Completed",action:"Archive",color:n.info}};Object.entries(o).forEach(([x,C])=>{const y=Math.round(Number(C)/c*100),h=z[x]||{label:x,priority:"Unknown",action:"Review",color:n.dark};[h.label,C,`${y}%`,h.priority,h.action].forEach((g,v)=>{const A=i.getCell(m,v+1);A.value=g;let D="FFFFFFFF",R=n.dark;if(v===0&&(D=h.color,R="FFFFFFFF"),v===3)switch(g){case"Critical":D=n.danger,R="FFFFFFFF";break;case"High":D=n.warning,R="FFFFFFFF";break;case"Low":D=n.success,R="FFFFFFFF";break;case"Completed":D=n.info,R="FFFFFFFF";break}A.style={font:{name:"Segoe UI",size:11,bold:v===0,color:{argb:R}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:D}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),i.getRow(m).height=25,m++}),m+=2,i.mergeCells(`A${m}:E${m}`);const j=i.getCell(`A${m}`);j.value="WORKFLOW ANALYSIS & RECOMMENDATIONS",j.style={font:{name:"Segoe UI",size:14,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:n.info}},alignment:{horizontal:"center",vertical:"middle"}},m++;const V=Math.round(o.open/c*100),q=Math.round(o.resolved/c*100);[["Metric","Value","Status","Recommendation"],["Open Tickets Rate",`${V}%`,V>20?"High":"Normal",V>20?"Increase technical resources":"Maintain current level"],["Resolution Rate",`${q}%`,q>70?"Excellent":"Needs Improvement",q>70?"Continue best practices":"Review resolution processes"],["Workflow Efficiency",c>100?"High Volume":"Standard","Active","Monitor trends and adjust capacity"],["System Health","Operational","Good","Regular monitoring recommended"]].forEach((x,C)=>{x.forEach((y,h)=>{const b=i.getCell(m+C,h+1);b.value=y;let g=C===0?n.secondary:"FFFFFFFF",v=C===0?"FFFFFFFF":n.dark;if(C>0&&h===2)switch(y){case"High":g=n.danger,v="FFFFFFFF";break;case"Excellent":g=n.success,v="FFFFFFFF";break;case"Good":g=n.success,v="FFFFFFFF";break;case"Needs Improvement":g=n.warning,v="FFFFFFFF";break}b.style={font:{name:"Segoe UI",size:10,bold:C===0||h===0,color:{argb:v}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:g}},alignment:{horizontal:h===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),i.getRow(m+C).height=22});const I=`Ticket_Distribution_Analysis_${new Date().toISOString().split("T")[0]}.xlsx`,U=await l.xlsx.writeBuffer(),F=new Blob([U],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});He.saveAs(F,I),M.success("Ticket Distribution Analysis Generated!",{description:`${I} has been downloaded with detailed analysis and recommendations.`})},Ts=async o=>{const c=new We.Workbook;c.creator="Ticketing System - Device Management",c.created=new Date,c.company="Device Inventory Report";const l=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),w={primary:"FF2563EB",secondary:"FF1E3A8A",success:"FF059669",warning:"FFF59E0B",info:"FF0891B2",light:"FFF8FAFC",dark:"FF1E293B"},n=c.addWorksheet("Device Inventory",{pageSetup:{paperSize:9,orientation:"landscape"}});n.columns=[{width:8},{width:25},{width:18},{width:18},{width:20},{width:20},{width:15},{width:15},{width:25}],n.mergeCells("A1:H1");const i=n.getCell("A1");i.value="DEVICE INVENTORY MANAGEMENT REPORT",i.style={font:{name:"Segoe UI",size:20,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:w.primary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thick",color:{argb:w.secondary}},left:{style:"thick",color:{argb:w.secondary}},bottom:{style:"thick",color:{argb:w.secondary}},right:{style:"thick",color:{argb:w.secondary}}}},n.getRow(1).height=40,n.mergeCells("A2:E2");const r=n.getCell("A2");r.value=`Generated on: ${l}`,r.style={font:{name:"Segoe UI",size:12,italic:!0,color:{argb:w.dark}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:w.light}},alignment:{horizontal:"left",vertical:"middle"}},n.mergeCells("F2:H2");const $=n.getCell("F2"),N=o.length,m=o.filter(F=>F.users_count>0).length,T=new Set(o.map(F=>F.device_type)).size;$.value=`Total: ${N} | Active: ${m} | Types: ${T}`,$.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:w.primary}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:w.light}},alignment:{horizontal:"right",vertical:"middle"}};const z=["ID","Name Device","Model","Brand","System","Users","Status","Usage Level"];let j=4;z.forEach((F,x)=>{const C=n.getCell(j,x+1);C.value=F,C.style={font:{name:"Segoe UI",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:w.secondary}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:"FFFFFFFF"}},left:{style:"medium",color:{argb:"FFFFFFFF"}},bottom:{style:"medium",color:{argb:"FFFFFFFF"}},right:{style:"medium",color:{argb:"FFFFFFFF"}}}}}),n.getRow(j).height=30,j++,o.forEach((F,x)=>{const C=F.users_count===0?"Unused":F.users_count<=2?"Low Usage":F.users_count<=5?"Medium Usage":"High Usage",y=F.users_count>0?"Active":"Inactive";[F.id,F.device_type||"Unknown",F.device_name||"N/A",F.brand_name||"N/A",F.system_name||"N/A",F.users_count||0,y,C].forEach((b,g)=>{const v=n.getCell(j,g+1);v.value=b;let A=x%2===0?"FFFFFFFF":"FFF8FAFC",D=w.dark;if(g===7&&(b==="Active"?(A=w.success,D="FFFFFFFF"):(A="FFEF4444",D="FFFFFFFF")),g===8)switch(b){case"High Usage":A=w.success,D="FFFFFFFF";break;case"Medium Usage":A=w.warning,D="FFFFFFFF";break;case"Low Usage":A=w.info,D="FFFFFFFF";break;case"Unused":A="FFEF4444",D="FFFFFFFF";break}v.style={font:{name:"Segoe UI",size:10,color:{argb:D}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:A}},alignment:{horizontal:g===1?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),n.getRow(j).height=25,j++}),j+=2,n.mergeCells(`A${j}:H${j}`);const V=n.getCell(`A${j}`);V.value="INVENTORY SUMMARY",V.style={font:{name:"Segoe UI",size:14,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:w.info}},alignment:{horizontal:"center",vertical:"middle"}},j++,[["Total Devices",N,"Complete inventory count"],["Active Devices",m,`${Math.round(m/N*100)}% utilization rate`],["Inactive Devices",N-m,"Available for assignment"],["Device Types",T,"Different categories available"],["Total Users",o.reduce((F,x)=>F+x.users_count,0),"Active device users"]].forEach(F=>{F.forEach((x,C)=>{const y=n.getCell(j,C+1);y.value=x,y.style={font:{name:"Segoe UI",size:10,bold:C===0},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFFFF"}},alignment:{horizontal:C===0?"left":"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FFE2E8F0"}},left:{style:"thin",color:{argb:"FFE2E8F0"}},bottom:{style:"thin",color:{argb:"FFE2E8F0"}},right:{style:"thin",color:{argb:"FFE2E8F0"}}}}}),j++});const P=`Device_Inventory_Report_${new Date().toISOString().split("T")[0]}.xlsx`,I=await c.xlsx.writeBuffer(),U=new Blob([I],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});He.saveAs(U,P),M.success("Device Inventory Report Generated!",{description:`${P} has been downloaded with professional formatting and detailed analysis.`})},Be=({isOpen:o,onClose:c,tickets:l,title:w})=>{const n=r=>new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),i=r=>({open:"bg-red-100 text-red-800 border border-red-200",in_progress:"bg-blue-100 text-blue-800 border border-blue-200",resolved:"bg-green-100 text-green-800 border border-green-200",closed:"bg-gray-100 text-gray-800 border border-gray-200",cancelled:"bg-red-100 text-red-800 border border-red-200",reopened:"bg-purple-100 text-purple-800 border border-purple-200"})[r]||"bg-gray-100 text-gray-800";return e.jsx(It,{open:o,onOpenChange:c,children:e.jsxs(Ut,{className:"max-w-6xl max-h-[90vh] overflow-hidden",children:[e.jsxs(zt,{children:[e.jsx(Ot,{className:"text-2xl font-bold",children:w}),e.jsxs(ds,{className:"text-lg",children:[l.length," ticket",l.length!==1?"s":""," found"]})]}),e.jsx("div",{className:"overflow-y-auto custom-scrollbar",style:{maxHeight:"calc(90vh - 200px)"},children:l.length>0?e.jsx("div",{className:"space-y-4",children:l.map(r=>{var $;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm font-mono text-blue-600 bg-blue-50 px-2 py-1 rounded",children:["#",r.code]}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${i(r.status)}`,children:r.status.toUpperCase().replace("_"," ")})]}),e.jsx("div",{className:"text-xs text-gray-500",children:n(r.created_at)})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3 line-clamp-2",children:r.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[r.user&&e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-400 to-blue-400 flex items-center justify-center text-white text-sm font-bold",children:(($=r.user.name)==null?void 0:$.substring(0,1))||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-purple-900 truncate",children:r.user.name}),r.user.email&&e.jsx("p",{className:"text-xs text-purple-700 truncate",children:r.user.email})]})]})}),r.device&&e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-green-400 to-emerald-400 flex items-center justify-center text-white",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-green-900 truncate",children:r.device.name_device.name||"Device"}),r.device.apartment&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),e.jsxs("p",{className:"text-xs text-green-700 truncate",children:[r.device.apartment.name,r.device.apartment.building&&` - ${r.device.apartment.building.name}`]})]})]})]})})]}),e.jsx("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",children:e.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:["ID: ",r.id]})})]},r.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No tickets found"}),e.jsx("p",{className:"text-gray-500",children:"There are no tickets in this category at the moment."})]})})]})})};function va({metrics:o,charts:c,lists:l,googleMapsApiKey:w,technicalInstructions:n=[],currentTechnical:i=null}){var et,tt,st,at,rt,lt,ot,nt,it,ct,dt,mt,xt,ht,gt,pt,ut,bt,ft,jt,vt;const r=es().props;console.log("PageProps structure:",r),console.log("Auth user:",(et=r==null?void 0:r.auth)==null?void 0:et.user),console.log("Roles array:",(st=(tt=r==null?void 0:r.auth)==null?void 0:tt.user)==null?void 0:st.roles),console.log("First role:",(lt=(rt=(at=r==null?void 0:r.auth)==null?void 0:at.user)==null?void 0:rt.roles)==null?void 0:lt[0]);const $=((nt=(ot=r==null?void 0:r.auth)==null?void 0:ot.user)==null?void 0:nt.roles)||[],N=$.some(t=>typeof t=="string"?t==="super-admin":t.name==="super-admin")||!1,m=$.some(t=>typeof t=="string"?t==="technical":t.name==="technical")||!1,T=((dt=(ct=(it=r==null?void 0:r.auth)==null?void 0:it.user)==null?void 0:ct.technical)==null?void 0:dt.is_default)||!1,z=$.some(t=>typeof t=="string"?t==="doorman":t.name==="doorman")||!1,j=$.some(t=>typeof t=="string"?t==="owner":t.name==="owner")||!1,V=$.some(t=>typeof t=="string"?t==="tenant":t.name==="tenant")||!1,q=N||T,[P,I]=_.useState(!1),[U,F]=_.useState(!1),[x,C]=_.useState(null),[y,h]=_.useState(!1),b=_.useRef(null),[g,v]=_.useState(!1),[A,D]=_.useState(!1),[R,de]=_.useState(!1),[ge,Ve]=_.useState([]),me=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});console.log("Dashboard Props - technicalInstructions:",n),console.log("Is Technical:",m),console.log("User Roles:",(xt=(mt=r==null?void 0:r.auth)==null?void 0:mt.user)==null?void 0:xt.roles);const[W,ue]=_.useState(n||[]),K=async t=>{var s;try{await fetch(route("dashboard.mark-instruction-read"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({instruction_index:t})}),ue(a=>a.map((d,f)=>f===t?{...d,read:!0}:d)),M.success("Instruction marked as read")}catch(a){console.error("Error marking instruction as read:",a),M.error("Failed to mark instruction as read")}},[H,oe]=_.useState([]),[xe,ne]=_.useState(0),qe=async()=>{try{console.log("🔔 Dashboard: Fetching notifications...");const t=await fetch("/notifications/api");if(t.ok){const s=await t.json();if(console.log("🔔 Dashboard: Notifications response:",s),s.success){const a=s.notifications||[],d=s.unread_count||0;console.log("🔔 Dashboard: Setting notifications:",a.length),console.log("🔔 Dashboard: Setting unread count:",d),oe(a),ne(d)}else console.error("🔔 Dashboard: API returned success=false:",s),oe([]),ne(0)}else console.error("🔔 Dashboard: Error loading notifications:",t.status),oe([]),ne(0)}catch(t){console.error("🔔 Dashboard: Error fetching notifications:",t),oe([]),ne(0)}},Ge=async t=>{try{console.log("🔔 Marking notification as read:",t),pe.post(`/notifications/${t}/read`,{},{onSuccess:()=>{oe(s=>s.map(a=>a.id===t?{...a,read_at:new Date().toISOString()}:a)),ne(s=>Math.max(0,s-1)),console.log("🔔 Notification marked as read successfully"),M.success("Notification marked as read")},onError:s=>{console.error("🔔 Error marking notification as read:",s),M.error("Failed to mark notification as read")}})}catch(s){console.error("🔔 Error marking notification as read:",s),M.error("Network error occurred")}},Lt=async()=>{try{const t=H.filter(a=>!a.read_at).map(a=>a.id);if(console.log("🔔 Marking all notifications as read:",t.length,"notifications"),t.length===0){M.info("No unread notifications to mark");return}const s=t.map(a=>new Promise((d,f)=>{pe.post(`/notifications/${a}/read`,{},{onSuccess:()=>d(),onError:()=>f(new Error(`Failed to mark notification ${a} as read`))})}));await Promise.all(s),oe(a=>a.map(d=>({...d,read_at:d.read_at||new Date().toISOString()}))),ne(0),console.log("🔔 All notifications marked as read successfully"),M.success(`${t.length} notifications marked as read`)}catch(t){console.error("🔔 Error marking all notifications as read:",t),M.error("Failed to mark all notifications as read")}},Pt=async t=>{try{pe.delete(`/notifications/${t}`,{onSuccess:()=>{oe(a=>a.filter(d=>d.id!==t)),H.find(a=>a.id===t&&!a.read_at)&&ne(a=>Math.max(0,a-1)),M.success("Notification deleted")},onError:s=>{console.error("Error deleting notification:",s),M.error("Failed to delete notification")}})}catch(s){console.error("Error deleting notification:",s),M.error("Network error occurred")}};_.useEffect(()=>{qe();const t=setInterval(qe,3e4);return()=>clearInterval(t)},[]);const[Q,Ye]=_.useState(()=>{var t,s,a,d;if(console.log("=== INITIAL APPOINTMENT DEBUG ==="),console.log("Dashboard upcomingAppointments from backend:",l.upcomingAppointments),console.log("User email from pageProps:",(s=(t=r==null?void 0:r.auth)==null?void 0:t.user)==null?void 0:s.email),console.log("Current technical from props:",i),console.log("User roles:",(d=(a=r==null?void 0:r.auth)==null?void 0:a.user)==null?void 0:d.roles),console.log("Is technical user:",m),console.log("Is default technical:",T),l.upcomingAppointments&&l.upcomingAppointments.length>0){if(console.log("Total appointments received:",l.upcomingAppointments.length),console.log("First appointment details:",l.upcomingAppointments[0]),console.log("All appointment technical assignments:",l.upcomingAppointments.map(f=>{var S,X;return{id:f.id,title:f.title,scheduled_for:f.scheduled_for,technical_id:(S=f.technical)==null?void 0:S.id,technical_name:(X=f.technical)==null?void 0:X.name,status:f.status}})),m&&!T&&i){const f=l.upcomingAppointments.filter(S=>S.technical&&S.technical.id===i.id);return console.log("Filtered appointments for technical:",f.length),console.log("My appointments details:",f),console.log("=== END INITIAL APPOINTMENT DEBUG ==="),f}console.log("=== END INITIAL APPOINTMENT DEBUG ===")}else console.log("No appointments in initial props"),console.log("=== END INITIAL APPOINTMENT DEBUG ===");return l.upcomingAppointments||[]});_.useEffect(()=>{if(l.upcomingAppointments)if(console.log("Updating appointments with new data:",l.upcomingAppointments),m&&!T&&i){const t=l.upcomingAppointments.filter(s=>s.technical&&s.technical.id===i.id);console.log("Filtered appointments for technical on update:",t.length),Ye(t)}else Ye(l.upcomingAppointments)},[l.upcomingAppointments,m,T,i]);const Ke=_.useMemo(()=>{if(!Q||Q.length===0)return console.log("No appointments available in state"),0;console.log("Total appointments in state:",Q.length),console.log("All appointments:",Q);const t=new Date;t.setHours(0,0,0,0);const s=new Date(t);s.setDate(t.getDate()+2),s.setHours(23,59,59,999),console.log("Date range for appointments:",{today:t.toISOString(),threeDaysLater:s.toISOString()});const a=Q.filter(d=>{console.log("Processing appointment:",d);const f=d.scheduled_for||d.scheduled_at||d.date||"";console.log("Date field found:",f);const S=new Date(f);if(console.log("Parsed date:",S.toISOString()),isNaN(S.getTime()))return console.log("Invalid date, skipping"),!1;const X=S>=t&&S<=s,Z=d.status!=="canceled"&&d.status!=="cancelled",E=d.status==="in_progress"&&S.toDateString()===t.toDateString(),te=(X||E)&&Z;return console.log("Is in range:",X,"Is not canceled:",Z,"Is in progress today:",E,"Should include:",te),te});return console.log("Filtered appointments count:",a.length),console.log("Filtered appointments:",a),a.length},[Q]),Wt=t=>{const s={scheduled:{label:"Scheduled",color:"text-blue-500 bg-blue-50",icon:se},in_progress:{label:"In Progress",color:"text-yellow-500 bg-yellow-50",icon:Ns},completed:{label:"Completed",color:"text-green-500 bg-green-50",icon:ee},cancelled:{label:"Cancelled",color:"text-red-500 bg-red-50",icon:$e},rescheduled:{label:"Rescheduled",color:"text-gray-500 bg-gray-50",icon:J}};return s[t]||s.scheduled},De=t=>{const s=new Date(t);return{date:s.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),time:s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}},Ht=t=>{window.open(`/appointments?appointment=${t}`,"_blank")},Xe=()=>{window.open("/appointments","_blank")},Vt=t=>{h(!1),setTimeout(()=>{C(t),F(!0)},100)},Ae=_.useCallback(()=>{F(!1),setTimeout(()=>{C(null),document.body.classList.remove("overflow-hidden"),document.querySelectorAll("[data-radix-portal]").forEach(s=>{s.children.length===0&&s.remove()})},150)},[]);_.useEffect(()=>{const t=s=>{s.key==="Escape"&&U&&Ae()};if(U)return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[U,Ae]);const qt=t=>{if(!t)return"";if(t.includes("maps.app.goo.gl"))return`https://www.google.com/maps/embed/v1/place?key=${w}&q=-10.916879,-74.883391&zoom=15`;if(t.includes("/embed"))return t;if(t.includes("google.com/maps")){const s=t.match(/@([-0-9.]+),([-0-9.]+)/);if(s)return`https://www.google.com/maps/embed/v1/view?key=${w}&center=${s[1]},${s[2]}&zoom=15`;const a=t.match(/place\/([^/]+)/);if(a)return`https://www.google.com/maps/embed/v1/place?key=${w}&q=place_id:${a[1]}`}return`https://www.google.com/maps/embed/v1/place?key=${w}&q=${encodeURIComponent(t)}`},ie=t=>{var f,S;const s=(S=(f=t.ticket.device)==null?void 0:f.tenants)==null?void 0:S[0],a=s==null?void 0:s.apartment,d=a==null?void 0:a.building;return{buildingName:(d==null?void 0:d.name)||"No building",unitNumber:(a==null?void 0:a.name)||"N/A",locationLink:(d==null?void 0:d.location_link)||"",building:d}},[Je,Gt]=_.useState(new Date),[Yt,Qe]=_.useState("Updated just now"),Ze=t=>{const a=Math.floor((new Date().getTime()-t.getTime())/(1e3*60));if(a===0)return"Updated just now";if(a===1)return"Updated 1 min ago";if(a<60)return`Updated ${a} min ago`;{const d=Math.floor(a/60);return d===1?"Updated 1 hour ago":`Updated ${d} hours ago`}},Kt=()=>{const t=new Date;Gt(t),Qe(Ze(t)),pe.reload()},Se=async t=>{try{const s=await fetch(`/api/tickets?status=${t}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const a=await s.json();Ve(a.tickets||[]),t==="open"?v(!0):t==="in_progress"?D(!0):t==="resolved"&&de(!0)}catch(s){console.error("Error fetching tickets:",s),M.error("Failed to load tickets. Please try again.")}};_.useEffect(()=>{const t=setInterval(()=>{Qe(Ze(Je))},6e4);return()=>clearInterval(t)},[Je]);const Xt=(t,s)=>{console.log(`Clicked on ${t}: ${s} tickets`),window.open(`/tickets?status=${t}`,"_blank")},Jt=c.ticketsLastWeek.map(t=>({date:Rt(new Date(t.date),"dd/MM"),tickets:t.count,average:Math.round(c.ticketsLastWeek.reduce((s,a)=>s+a.count,0)/c.ticketsLastWeek.length)}));return e.jsxs(Qt,{breadcrumbs:ks,children:["                ",e.jsx(ts,{title:"Dashboard"}),"                ",e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                        .scrollbar-hide {
                            -ms-overflow-style: none;
                            scrollbar-width: none;
                        }
                        .scrollbar-hide::-webkit-scrollbar {
                            display: none;
                        }
                        
                        /* Custom scrollbar para modales */
                        .custom-scrollbar {
                            scrollbar-width: thin;
                            scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar {
                            width: 8px;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar-track {
                            background: transparent;
                            border-radius: 4px;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar-thumb {
                            background: rgba(156, 163, 175, 0.3);
                            border-radius: 4px;
                            transition: background-color 0.2s ease;
                        }
                        
                        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                            background: rgba(156, 163, 175, 0.6);
                        }
                        
                        .dark .custom-scrollbar {
                            scrollbar-color: rgba(75, 85, 99, 0.5) transparent;
                        }
                        
                        .dark .custom-scrollbar::-webkit-scrollbar-thumb {
                            background: rgba(75, 85, 99, 0.3);
                        }
                        
                        .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                            background: rgba(75, 85, 99, 0.6);
                        }
                    `}}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/30 to-background",children:e.jsxs("div",{className:"mx-auto px-4 py-16 space-y-20",children:[e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-12",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("div",{className:"h-20 w-20 rounded-3xl bg-gradient-to-br from-primary via-primary-foreground to-secondary-foreground flex items-center justify-center shadow-2xl ring-4 ring-blue-100",children:e.jsx(be,{className:"h-10 w-10 text-white"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-6xl font-black tracking-tight text-slate-900 dark:text-white",children:m&&!N?"ADK Assist Dashboard":"Dashboard"}),e.jsx("p",{className:"text-2xl text-slate-600 font-medium",children:N?"Administrative control center of the system":m&&!N?"Your technical management control center":"Your personalized management panel"})]})]}),e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full animate-pulse shadow-lg"}),e.jsx("span",{className:"text-lg font-bold text-slate-600",children:"System Online"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(je,{className:"h-6 w-6 text-blue-500"}),e.jsx("span",{className:"text-lg font-bold text-slate-600",children:Yt})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(fe,{className:"h-6 w-6 text-yellow-500"}),e.jsx("span",{className:"text-lg font-bold text-slate-600",children:"High Performance"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[e.jsx(k,{variant:"outline",size:"lg",className:"gap-4 h-14 px-4 shadow-xl",onClick:Kt,children:e.jsx(Bt,{className:"h-6 w-6"})}),e.jsxs(Nt,{open:y,onOpenChange:h,children:[e.jsx(yt,{asChild:!0,children:e.jsxs(k,{variant:"outline",size:"lg",className:"gap-4 h-14 px-4 shadow-xl relative",children:[e.jsx(se,{className:"h-6 w-6"}),Ke>0&&e.jsx(L,{className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center p-0",children:Ke})]})}),e.jsxs(wt,{className:"w-96 max-h-96 mt-4",align:"end",children:[e.jsxs(Zt,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-semibold",children:"All Appointments"}),Q.length>0&&e.jsx(k,{variant:"ghost",size:"sm",onClick:Xe,className:"text-xs",children:"View Calendar"})]}),e.jsx(_e,{}),Q.length===0?e.jsxs("div",{className:"p-4 text-center text-slate-500",children:[e.jsx(se,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No appointments found"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Schedule appointments from ticket details"})]}):e.jsx("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:Q.sort((t,s)=>new Date(t.scheduled_for).getTime()-new Date(s.scheduled_for).getTime()).map(t=>{var te;const s=Wt(t.status),a=De(t.scheduled_for),d=ie(t),f=new Date(t.scheduled_for),S=new Date,X=f.toDateString()===S.toDateString(),Z=(()=>{const G=new Date;return G.setDate(G.getDate()-1),f.toDateString()===G.toDateString()&&f.getHours()>=18})(),E=X||Z;return e.jsxs("div",{className:"group relative",children:[e.jsx(Ee,{className:`p-0 focus:bg-slate-50 dark:focus:bg-slate-800/50 cursor-pointer ${E?"border-2 border-red-500 rounded-lg my-1 bg-red-50/50":""}`,children:e.jsxs("div",{className:`w-full p-4 flex items-center gap-4 ${E?"bg-red-50 rounded-lg border border-red-200":""}`,children:[e.jsxs("div",{className:`flex-shrink-0 w-20 h-20 rounded-full border ${E?"border-red-400 bg-red-100":"border-slate-200 dark:border-slate-700"} flex flex-col items-center justify-center text-center`,children:[e.jsx("span",{className:`text-sm font-medium ${E?"text-red-600":"text-slate-500 dark:text-slate-400"}`,children:new Date(t.scheduled_for).toLocaleString("default",{weekday:"short"}).toLowerCase()}),e.jsx("span",{className:`text-2xl font-bold ${E?"text-red-700":"text-slate-900 dark:text-slate-100"}`,children:new Date(t.scheduled_for).getDate()}),e.jsx("span",{className:`text-xs font-medium ${E?"text-red-600":"text-slate-500 dark:text-slate-400"}`,children:new Date(t.scheduled_for).toLocaleString("default",{month:"short"})})]}),e.jsxs("div",{className:`flex-1 p-3 ${E?"bg-white border-red-200":"bg-white dark:bg-slate-800"} rounded-lg border ${E?"border-red-200":"border-slate-200 dark:border-slate-700"} shadow-sm`,children:[e.jsxs("div",{className:"space-y-1 mb-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsxs("span",{className:`text-sm font-medium ${E?"text-red-800":"text-slate-900 dark:text-slate-100"}`,children:["Technical: ",t.technical.name]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[d.locationLink&&e.jsx(k,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-blue-100 dark:hover:bg-blue-900/30",onClick:G=>{G.preventDefault(),G.stopPropagation(),Vt(t)},children:e.jsx(ve,{className:"h-3 w-3 text-blue-600 dark:text-blue-400"})}),e.jsx(k,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-slate-100 dark:hover:bg-slate-700",onClick:G=>{G.preventDefault(),G.stopPropagation(),Ht(t.id)},children:e.jsx(ps,{className:"h-3 w-3 text-slate-600 dark:text-slate-400"})})]})]}),e.jsxs("div",{className:`text-sm ${E?"text-red-700":"text-slate-700 dark:text-slate-300"}`,children:["Member: ",((te=t.ticket.user)==null?void 0:te.name)||"No Member"]})]}),e.jsx("div",{className:"flex items-center mb-1.5",children:e.jsxs("div",{className:"flex items-center gap-1 flex-1",children:[e.jsx(ve,{className:`h-4 w-4 ${E?"text-red-600":"text-red-500"}`}),e.jsxs("span",{className:`text-sm font-medium ${E?"text-red-800":"text-primary-foreground"} hover:text-primary-foreground`,children:["Building: ",d.buildingName," apartment ",d.unitNumber]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(J,{className:`h-3.5 w-3.5 ${E?"text-red-600":"text-slate-500"}`}),e.jsx("span",{className:`text-xs font-medium ${E?"text-red-600":"text-slate-500 dark:text-slate-400"}`,children:a.time})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[E&&e.jsx(L,{className:"text-xs px-2 py-0.5 bg-red-500 text-white ",children:Z?"Urgent!":"Today!"}),e.jsx(L,{variant:"outline",className:`text-xs px-2 py-0.5 ${s.color} border-current`,children:s.label})]})]})]})]})}),e.jsx(_e,{className:"my-0 last:hidden"})]},t.id)})}),e.jsx(_e,{}),e.jsx(Ee,{className:"p-0",children:e.jsxs(k,{variant:"ghost",className:"w-full justify-center py-3 text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:Xe,children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"View All Appointments"]})})]})]}),e.jsxs(Nt,{children:[e.jsx(yt,{asChild:!0,children:e.jsxs(k,{variant:"outline",size:"lg",className:"gap-4 h-14 px-4 shadow-xl relative hover:shadow-2xl transition-all duration-300 hover:scale-105",children:[e.jsx(Ne,{className:"h-6 w-6"}),xe>0&&e.jsx(L,{className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-gradient-to-r from-red-500 to-orange-500 text-white text-xs flex items-center justify-center p-0 notification-badge-pulse border-2 border-white shadow-lg",children:xe>99?"99+":xe})]})}),e.jsxs(wt,{className:"w-[420px] max-h-[520px] mt-4 notification-dropdown shadow-2xl border-0",align:"end",children:[e.jsx("div",{className:" px-4 py-2 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between text-primary-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),e.jsx("span",{className:"text-lg font-bold ",children:"Notifications"}),xe>0&&e.jsxs(L,{className:"bg-primary/20 text-secondary text-xs px-2 py-1 notification-badge-pulse",children:[xe," new"]})]}),xe>0&&e.jsx(k,{variant:"ghost",size:"sm",onClick:Lt,className:"text-white bg-primary hover:bg-primary text-xs font-medium",children:"Mark all read"})]})}),H.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:e.jsx(Ne,{className:"h-10 w-10 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"All caught up!"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No new notifications at the moment"})]}):e.jsx("div",{className:"max-h-[400px] overflow-y-auto notification-scrollbar",children:e.jsx("div",{className:"p-2 space-y-1",children:H.map(t=>{const s=t.data.icon==="user-plus"?Ce:t.data.icon==="clipboard-check"?ee:t.data.icon==="user-check"?ms:t.data.icon==="users"?ae:t.data.icon==="check-circle"?ee:t.data.icon==="alert-circle"?ye:t.data.icon==="info"?Ct:Ne,a=(()=>{const S=new Date,X=new Date(t.created_at),Z=S.getTime()-X.getTime(),E=Math.floor(Z/6e4),te=Math.floor(Z/36e5),G=Math.floor(Z/864e5);return E<1?"Just now":E<60?`${E}m ago`:te<24?`${te}h ago`:G<7?`${G}d ago`:X.toLocaleDateString("es-ES",{day:"2-digit",month:"short"})})(),f=(()=>{switch(t.data.color){case"green":return{icon:"text-emerald-600 bg-gradient-to-r from-emerald-50 to-green-50",border:"border-emerald-200",accent:"text-emerald-600"};case"blue":return{icon:"text-blue-600 bg-gradient-to-r from-blue-50 to-cyan-50",border:"border-blue-200",accent:"text-blue-600"};case"red":return{icon:"text-red-600 bg-gradient-to-r from-red-50 to-pink-50",border:"border-red-200",accent:"text-red-600"};case"purple":return{icon:"text-purple-600 bg-gradient-to-r from-purple-50 to-violet-50",border:"border-purple-200",accent:"text-purple-600"};default:return{icon:"text-gray-600 bg-gradient-to-r from-gray-50 to-slate-50",border:"border-gray-200",accent:"text-gray-600"}}})();return e.jsx(Ee,{className:`p-0 cursor-pointer group transition-all duration-200 rounded-xl overflow-hidden notification-item ${t.read_at?"hover:bg-gradient-to-r hover:from-gray-50 hover:to-slate-50":"bg-gradient-to-r from-blue-50/80 to-purple-50/80 border border-blue-200/50 shadow-sm notification-unread"}`,onClick:()=>{t.read_at||Ge(t.id)},children:e.jsxs("div",{className:"w-full p-4 flex items-start gap-4",children:[e.jsxs("div",{className:`relative p-3 rounded-xl ${f.icon} shadow-sm group-hover:shadow-md transition-shadow`,children:[e.jsx(s,{className:"h-5 w-5"}),!t.read_at&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"flex-1 space-y-2 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{className:`text-sm font-bold leading-tight ${t.read_at?"text-gray-700":"text-gray-900"}`,children:t.data.title}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:a}),e.jsx(k,{variant:"ghost",size:"sm",onClick:S=>{S.stopPropagation(),Pt(t.id)},className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 hover:bg-red-100 hover:text-red-600 transition-all",children:e.jsx($e,{className:"h-3 w-3"})})]})]}),e.jsx("p",{className:`text-sm leading-relaxed ${t.read_at?"text-gray-600":"text-gray-800"}`,children:t.data.message}),t.data.type==="ticket_assigned"&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.data.ticket_code&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-semibold bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-800 border border-blue-200",children:[e.jsx("span",{className:"mr-1",children:"🎫"}),t.data.ticket_code]}),t.data.assigned_to&&t.data.assigned_to_id&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-semibold bg-gradient-to-r from-emerald-100 to-green-100 text-emerald-800 border border-emerald-200",children:[e.jsx("span",{className:"mr-1",children:"👨‍💼"}),t.data.assigned_to]})]}),t.data.assigned_by&&t.data.assigned_by_id&&e.jsxs("div",{className:"text-xs text-gray-500 bg-gray-50 rounded-lg p-2 border border-gray-200",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Assigned by:"})," ",t.data.assigned_by,e.jsxs("span",{className:"ml-1 text-gray-400",children:["(ID: ",t.data.assigned_by_id,")"]})]})]}),!t.read_at&&e.jsx("div",{className:"flex items-center gap-2 mt-3 pt-2 border-t border-gray-100",children:e.jsxs(k,{variant:"outline",size:"sm",onClick:S=>{S.stopPropagation(),Ge(t.id)},className:"h-8 px-3 text-xs font-medium hover:bg-green-50 hover:text-green-700 hover:border-green-300 transition-all",children:[e.jsx(Re,{className:"h-3 w-3 mr-1.5"}),"Mark read"]})})]})]})},t.id)})})})]})]})]})]}),console.log("Rendering instructions section - isTechnical:",m,"currentInstructions:",W),m&&W.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("h2",{className:"text-3xl font-bold text-foreground flex items-center justify-center gap-3",children:[e.jsx(Tt,{className:"h-8 w-8 text-blue-500"}),"Instructions from Management"]}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Important instructions and guidelines from your supervisors"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex gap-6 overflow-x-auto pb-4 scrollbar-hide snap-x snap-mandatory",children:W.slice(0,5).map((t,s)=>{const a={low:"from-blue-500/10 to-blue-600/5 border-blue-200 text-blue-700",normal:"from-gray-500/10 to-gray-600/5 border-gray-200 text-gray-700",high:"from-orange-500/10 to-orange-600/5 border-orange-200 text-orange-700",urgent:"from-red-500/10 to-red-600/5 border-red-200 text-red-700"},f={low:Ct,normal:Tt,high:we,urgent:xs}[t.priority];return e.jsx(p,{className:`flex-shrink-0 w-80 transition-all duration-300 hover:shadow-lg border-l-4 bg-gradient-to-r ${a[t.priority]} snap-start`,children:e.jsx(u,{className:"p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${t.priority==="urgent"?"bg-red-100":"bg-white/50"}`,children:e.jsx(f,{className:`h-4 w-4 ${t.priority==="urgent"?"text-red-600":"text-current"}`})}),e.jsx(L,{variant:"outline",className:`font-semibold uppercase text-xs ${t.priority==="urgent"?"border-red-500 text-red-700 bg-red-50":""}`,children:t.priority})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>K(s),className:"h-8 w-8 p-0 hover:bg-white/20",children:e.jsx(Re,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:["From: ",e.jsx("strong",{className:"text-foreground",children:t.from})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.sent_at).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:"max-h-32 overflow-y-auto custom-scrollbar",children:e.jsx("p",{className:"text-foreground leading-relaxed text-sm",children:t.instruction})})]})})},s)})}),W.length>1&&e.jsx("div",{className:"flex justify-center mt-4 gap-2",children:W.slice(0,5).map((t,s)=>e.jsx("div",{className:"w-2 h-2 rounded-full bg-muted-foreground/30"},s))})]}),W.filter(t=>!t.read).length===0&&e.jsx(p,{className:"max-w-md mx-auto",children:e.jsxs(u,{className:"p-8 text-center",children:[e.jsx(ee,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"All caught up!"}),e.jsx("p",{className:"text-muted-foreground",children:"You have no pending instructions."})]})})]}),e.jsxs("div",{className:"space-y-12",children:["                            ",e.jsxs("div",{className:"text-center space-y-6",children:["                                ",e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:m&&!N?"My Tickets":z?"Building Tickets":"Ticket Analytics"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:m&&!N?"Tickets assigned to you and your work summary":z?"Monitor tickets for your building residents":"Real-time monitoring of workflow and performance metrics"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:["                                ",(!m||N||T)&&e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-primary/10 via-background to-primary/5 overflow-hidden",children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/20",children:e.jsx(ce,{className:"h-6 w-6 text-primary"})}),e.jsx(Y,{className:"h-4 w-4 text-primary/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wider",children:m&&!N?"Mis Tickets Totales":"Total Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.tickets.total}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-primary/20 text-primary",children:"+12%"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last month"})]})]})]})}),"                                ",e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-destructive/10 via-background to-destructive/5 overflow-hidden cursor-pointer animate-pulse duration-1000",onClick:()=>Se("open"),children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-destructive/20",children:e.jsx(ye,{className:"h-6 w-6 text-destructive"})}),e.jsx(Ie,{className:"h-4 w-4 text-destructive/60 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-destructive uppercase tracking-wider",children:m&&!N?"Assigned Tickets":"Open Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.tickets.open}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-destructive/20 text-destructive",children:m&&!N?"Active":"Priority"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:m&&!N?"Your assignments":"Immediate attention"})]})]})]})}),e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-secondary/10 via-background to-secondary/5 overflow-hidden cursor-pointer",onClick:()=>Se("in_progress"),children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-secondary/20",children:e.jsx(J,{className:"h-6 w-6 text-secondary"})}),e.jsx(Ie,{className:"h-4 w-4 text-secondary/60 opacity-0 group-hover:opacity-100 transition-opacity"}),"                                        "]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-secondary uppercase tracking-wider",children:m&&!N?"In Progress - My Tickets":"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.tickets.in_progress}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-secondary/20 text-secondary",children:"+8%"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:m&&!N?"Active work":"This week"})]})]})]})}),e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-accent/10 via-background to-accent/5 overflow-hidden cursor-pointer",onClick:()=>Se("resolved"),children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-accent/20",children:e.jsx(ee,{className:"h-6 w-6 text-accent"})}),e.jsx(Ie,{className:"h-4 w-4 text-accent/60 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-accent uppercase tracking-wider",children:m&&!N?"My Resolved Tickets":"Resolved"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.tickets.resolved}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-accent/20 text-accent",children:"+15%"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:m&&!N?"My productivity":"vs target"})]})]})]})}),m&&!N&&!T&&e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-green-50 via-background to-green-100 overflow-hidden cursor-pointer",onClick:()=>window.open("/appointments","_blank"),children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:e.jsx(hs,{className:"h-6 w-6 text-green-600"})}),e.jsx(Y,{className:"h-4 w-4 text-green-600/60 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase tracking-wider",children:"Upcoming Appointments"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.technical.upcoming_visits}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-green-100 text-green-700",children:"Scheduled"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"go to calendar"})]})]})]})})]}),(!m||N||T)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-3/10 via-background to-chart-3/5 overflow-hidden",children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-orange-100",children:e.jsx(we,{className:"h-6 w-6 text-orange-600"})}),q&&e.jsxs(k,{size:"sm",variant:"outline",className:"h-8 px-3 text-xs hover:bg-orange-50 border-orange-200 text-orange-700",onClick:()=>window.open("/tickets/assign-unassigned","_blank"),children:[e.jsx(Ce,{className:"h-3 w-3 mr-1"}),"Assign"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-orange-600 uppercase tracking-wider",children:"Unassigned"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:o.tickets.unassigned||0}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-orange-100 text-orange-700",children:"Pending"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Requires assignment"})]})]})]})}),j||z?e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-3/10 via-background to-chart-3/5 overflow-hidden",children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:e.jsx(Dt,{className:"h-6 w-6 text-green-600"})}),e.jsx(he,{className:"h-4 w-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase tracking-wider",children:"Created Today"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:o.tickets.created_today||0}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-green-100 text-green-700",children:"New"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Daily intake"})]})]})]})}):e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-4/10 via-background to-chart-4/5 overflow-hidden",children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:e.jsx(se,{className:"h-6 w-6 text-purple-600"})}),e.jsx(he,{className:"h-4 w-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-purple-600 uppercase tracking-wider",children:"Resolved Today"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:o.tickets.resolved_today}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-purple-100 text-purple-700",children:"Today"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Daily Productivity"})]})]})]})}),j||z?e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-4/10 via-background to-chart-4/5 overflow-hidden",children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-purple-100",children:e.jsx(se,{className:"h-6 w-6 text-purple-600"})}),e.jsx(he,{className:"h-4 w-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-purple-600 uppercase tracking-wider",children:"Resolved Today"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:o.tickets.resolved_today}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-purple-100 text-purple-700",children:"Today"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Daily Productivity"})]})]})]})}):e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-2/10 via-background to-chart-2/5 overflow-hidden",children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-indigo-100",children:e.jsx(bs,{className:"h-6 w-6 text-indigo-600"})}),e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-green-100 text-green-700",children:"-2h"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-indigo-600 uppercase tracking-wider",children:"Average Time"}),e.jsxs("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[o.tickets.avg_resolution_hours,"h"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-indigo-100 text-indigo-700",children:"Resolution"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Overall average"})]})]})]})}),e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-5/10 via-background to-chart-5/5 overflow-hidden",children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-teal-100",children:e.jsx(be,{className:"h-6 w-6 text-teal-600"})}),e.jsx(he,{className:"h-4 w-4 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-teal-600 uppercase tracking-wider",children:"Efficiency"}),e.jsxs("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[o.tickets.total>0?Math.round(o.tickets.resolved/o.tickets.total*100):0,"%"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-teal-100 text-teal-700",children:"Resolution"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Tasa general"})]})]})]})}),"                            "]})]}),l.unassignedTickets&&l.unassignedTickets.length>0&&e.jsxs("div",{className:"space-y-12",children:[e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-orange-100 to-orange-50 rounded-full shadow-lg",children:[e.jsx(we,{className:"h-6 w-6 text-orange-600"}),e.jsx("span",{className:"text-sm font-bold text-orange-700 uppercase tracking-wider",children:"Immediate Action Required"})]}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-br from-orange-600 to-orange-800 bg-clip-text text-transparent",children:"Unassigned Tickets"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"Critical tickets awaiting technical assignment - streamlined management for maximum efficiency"})]}),e.jsxs(p,{className:"group border-0 shadow-2xl bg-gradient-to-br from-white via-slate-50/30 to-orange-50/20 backdrop-blur-sm transition-all duration-500 hover:shadow-3xl hover:-translate-y-1 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-200/30 via-transparent to-orange-200/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsx(O,{className:"relative border-b border-gradient-to-r from-orange-200/50 via-slate-200/30 to-orange-200/50 bg-gradient-to-r from-orange-50/50 via-white to-slate-50/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-orange-100 to-orange-200 shadow-lg group-hover:shadow-xl transition-all duration-300",children:e.jsx(we,{className:"h-6 w-6 text-orange-700"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:e.jsx("span",{className:"text-xs font-bold text-white",children:l.unassignedTickets.length})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(B,{className:"text-2xl font-bold text-slate-800 group-hover:text-orange-700 transition-colors",children:"Critical Unassigned Queue"}),e.jsxs("p",{className:"text-sm text-slate-600 font-medium",children:["Managing ",l.unassignedTickets.length," urgent ticket",l.unassignedTickets.length!==1?"s":""," requiring immediate technical assignment"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"px-3 py-2 bg-gradient-to-r from-orange-100 to-orange-200 rounded-lg border border-orange-300",children:e.jsx("span",{className:"text-sm font-bold text-orange-700",children:"Priority: High"})}),e.jsxs(k,{variant:"outline",size:"lg",className:"bg-gradient-to-r from-orange-100 to-orange-200 border-orange-300 text-orange-700 hover:from-orange-200 hover:to-orange-300 hover:border-orange-400 font-semibold shadow-lg hover:shadow-xl transition-all duration-300 group",onClick:()=>window.open("/tickets","_blank"),children:[e.jsx(Ce,{className:"h-5 w-5 mr-2"}),"Bulk Assignment Portal",e.jsx(Y,{className:"h-4 w-4 ml-2 opacity-0 group-hover:opacity-100 transition-opacity"})]})]})]})}),e.jsxs(u,{className:"relative p-0 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-100 via-transparent to-slate-100 animate-pulse duration-3000"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-orange-400 via-red-500 to-orange-400 animate-pulse"})]}),e.jsx("div",{className:"relative overflow-x-auto custom-scrollbar",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-100/50 via-orange-50/30 to-slate-100/50 sticky top-0 z-10",children:e.jsxs("tr",{className:"border-b-2 border-orange-200/50",children:[e.jsx("th",{className:"text-left py-6 px-8 font-bold text-slate-800 text-sm uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4 text-orange-600"}),"Ticket Details"]})}),e.jsx("th",{className:"text-left py-6 px-8 font-bold text-slate-800 text-sm uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4 text-orange-600"}),"Location"]})}),e.jsx("th",{className:"text-left py-6 px-8 font-bold text-slate-800 text-sm uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4 text-orange-600"}),"Device"]})}),e.jsx("th",{className:"text-left py-6 px-8 font-bold text-slate-800 text-sm uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4 text-orange-600"}),"Category"]})}),e.jsx("th",{className:"text-left py-6 px-8 font-bold text-slate-800 text-sm uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-orange-600"}),"Created"]})}),e.jsx("th",{className:"text-center py-6 px-8 font-bold text-slate-800 text-sm uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4 text-orange-600"}),"Quick Actions"]})})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100/50",children:l.unassignedTickets.length>0?l.unassignedTickets.map((t,s)=>e.jsx(Ds,{ticket:t,index:s,technicals:l.availableTechnicals},t.id)):e.jsx("tr",{className:"relative group",children:e.jsxs("td",{colSpan:6,className:"relative py-20 text-center overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-50 via-green-25 to-teal-50 opacity-80"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-green-100/30 to-transparent"}),e.jsx("div",{className:"absolute top-4 left-4 w-3 h-3 bg-green-400 rounded-full animate-ping opacity-60"}),e.jsx("div",{className:"absolute top-8 right-8 w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("div",{className:"absolute bottom-6 left-1/3 w-4 h-4 bg-teal-400 rounded-full animate-bounce opacity-40"}),e.jsxs("div",{className:"relative z-10 space-y-6",children:[e.jsxs("div",{className:"relative inline-flex",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400 to-emerald-600 rounded-full blur-lg opacity-30 animate-pulse"}),e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(ee,{className:"h-20 w-20 text-green-500 drop-shadow-lg animate-bounce"}),e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-br from-green-400 to-emerald-600 rounded-full flex items-center justify-center shadow-xl animate-pulse",children:e.jsx(Re,{className:"h-4 w-4 text-white font-bold"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-2xl font-black text-green-800 tracking-tight",children:"🎉 Outstanding Performance!"}),e.jsx("p",{className:"text-lg font-bold text-green-700",children:"All tickets successfully assigned to technical team"}),e.jsx("p",{className:"text-sm text-green-600 max-w-lg mx-auto leading-relaxed font-medium",children:"Exceptional workflow management - every support request has been efficiently distributed to qualified technicians. The system is running at optimal efficiency."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse shadow-lg"}),e.jsx("span",{className:"text-xs text-green-700 font-bold uppercase tracking-wider",children:"System Optimized"})]}),e.jsx("div",{className:"w-1 h-1 bg-green-400 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"100% Efficiency"})]}),e.jsx("div",{className:"w-1 h-1 bg-green-400 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"Team Active"})]})]}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full text-white shadow-xl mt-6",children:[e.jsx(ee,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-bold uppercase tracking-wider",children:"Perfect Assignment Rate"}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})]})]})]})})})]})})]})]})]}),(z||j)&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:j?"Owner Dashboard":"Doorman Dashboard"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Building management overview and resident ticket monitoring"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(p,{className:"group col-span-1 border-0 shadow-xl bg-gradient-to-br from-slate-50/50 via-background to-slate-100/50 backdrop-blur-sm transition-all duration-500 hover:shadow-2xl hover:-translate-y-2",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-100/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"}),e.jsx(O,{className:"relative border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-background pb-6",children:e.jsxs(B,{className:"flex items-center gap-3 text-xl",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-slate-200 to-slate-300 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:e.jsx(le,{className:"h-6 w-6 text-slate-700"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Tickets by Apartment"}),e.jsx("p",{className:"text-sm text-muted-foreground font-normal",children:"Building unit distribution"})]})]})}),e.jsx(u,{className:"relative p-6",children:e.jsxs("div",{className:"space-y-4",children:[o.building&&o.building.tickets_by_apartment&&Object.entries(o.building.tickets_by_apartment).slice(0,6).map(([t,s],a)=>{const d=typeof s=="object"&&s!==null?s.count||0:s||0,f=typeof s=="object"&&s!==null&&s.apartment_name||t,S=typeof s=="object"&&s!==null?s.floor:null;return e.jsxs("div",{className:"group/item flex items-center justify-between p-5 bg-gradient-to-r from-white/80 via-white/70 to-white/80 rounded-xl hover:from-white/95 hover:via-white/90 hover:to-white/95 transition-all duration-300 shadow-sm hover:shadow-xl border border-slate-200/50 hover:border-slate-300/70 cursor-pointer transform hover:-translate-y-1",style:{animationDelay:`${a*100}ms`},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative w-14 h-14 rounded-xl bg-gradient-to-br from-primary/20 via-primary/15 to-primary/10 flex items-center justify-center shadow-lg group-hover/item:shadow-xl transition-all duration-300 group-hover/item:scale-110",children:[e.jsx(le,{className:"w-7 h-7 text-primary transition-transform duration-300 group-hover/item:scale-110"}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-primary/10 to-transparent opacity-0 group-hover/item:opacity-100 transition-opacity duration-300"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-lg text-slate-900 group-hover/item:text-primary transition-colors duration-300",children:f}),e.jsxs("p",{className:"text-sm text-slate-600 group-hover/item:text-slate-700 transition-colors duration-300 flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),S?`Floor ${S} • Unit`:"Apartment unit"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-3xl font-black text-slate-900 group-hover/item:text-primary transition-colors duration-300",children:d}),e.jsx("p",{className:"text-xs text-slate-600 uppercase tracking-widest font-bold group-hover/item:text-slate-700 transition-colors duration-300",children:"tickets"})]})]},t)}),(!((ht=o.building)!=null&&ht.tickets_by_apartment)||Object.keys(o.building.tickets_by_apartment).length===0)&&e.jsxs("div",{className:"text-center py-16 text-slate-500",children:[e.jsx("div",{className:"relative mx-auto mb-8 w-24 h-24 rounded-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center shadow-lg",children:e.jsx(le,{className:"w-12 h-12 opacity-40"})}),e.jsx("p",{className:"text-xl font-bold mb-2",children:"No apartment data available"}),e.jsx("p",{className:"text-sm",children:"Apartment ticket breakdown will appear here"})]})]})})]}),e.jsxs(p,{className:"group col-span-1 border-0 shadow-xl bg-gradient-to-br from-emerald-50/50 via-background to-emerald-100/50 backdrop-blur-sm transition-all duration-500 hover:shadow-2xl hover:-translate-y-2",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-100/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"}),e.jsx(O,{className:"relative border-b border-emerald-200/50 bg-gradient-to-r from-emerald-50 to-background pb-6",children:e.jsxs(B,{className:"flex items-center gap-3 text-xl",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-emerald-200 to-emerald-300 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:e.jsx(re,{className:"h-6 w-6 text-emerald-700"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Building Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground font-normal",children:"Resource statistics"})]})]})}),e.jsx(u,{className:"relative p-6",children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("div",{className:"group/stat bg-gradient-to-br from-blue-50 via-blue-100/90 to-blue-200/80 p-6 rounded-xl border border-blue-200/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-200/70 group-hover/stat:bg-blue-300/80 transition-colors duration-300",children:e.jsx(re,{className:"w-5 h-5 text-blue-700"})}),e.jsx("span",{className:"text-sm font-bold text-blue-700 uppercase tracking-widest",children:"Apartments"})]}),e.jsx("p",{className:"text-4xl font-black text-blue-700 group-hover/stat:text-blue-800 transition-colors duration-300",children:((gt=o.resources)==null?void 0:gt.apartments)||0})]}),e.jsxs("div",{className:"group/stat bg-gradient-to-br from-green-50 via-green-100/90 to-green-200/80 p-6 rounded-xl border border-green-200/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-200/70 group-hover/stat:bg-green-300/80 transition-colors duration-300",children:e.jsx(ae,{className:"w-5 h-5 text-green-700"})}),e.jsx("span",{className:"text-sm font-bold text-green-700 uppercase tracking-widest",children:"Tenants"})]}),e.jsx("p",{className:"text-4xl font-black text-green-700 group-hover/stat:text-green-800 transition-colors duration-300",children:((pt=o.resources)==null?void 0:pt.tenants)||0})]}),e.jsxs("div",{className:"group/stat bg-gradient-to-br from-purple-50 via-purple-100/90 to-purple-200/80 p-6 rounded-xl border border-purple-200/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-200/70 group-hover/stat:bg-purple-300/80 transition-colors duration-300",children:e.jsx(ke,{className:"w-5 h-5 text-purple-700"})}),e.jsx("span",{className:"text-sm font-bold text-purple-700 uppercase tracking-widest",children:"Devices"})]}),e.jsx("p",{className:"text-4xl font-black text-purple-700 group-hover/stat:text-purple-800 transition-colors duration-300",children:((ut=o.resources)==null?void 0:ut.devices)||0})]}),e.jsxs("div",{className:"group/stat bg-gradient-to-br from-orange-50 via-orange-100/90 to-orange-200/80 p-6 rounded-xl border border-orange-200/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-200/70 group-hover/stat:bg-orange-300/80 transition-colors duration-300",children:e.jsx(J,{className:"w-5 h-5 text-orange-700"})}),e.jsx("span",{className:"text-sm font-bold text-orange-700 uppercase tracking-widest",children:"Avg Time"})]}),e.jsxs("p",{className:"text-4xl font-black text-orange-700 group-hover/stat:text-orange-800 transition-colors duration-300",children:[o.tickets.avg_resolution_hours||0,"h"]})]})]})})})]})]}),e.jsx("div",{className:"grid grid-cols-1  gap-8",children:e.jsxs(p,{className:"group col-span-2 border-0 shadow-xl bg-gradient-to-br from-slate-50/50 via-background to-slate-100/50 backdrop-blur-sm transition-all duration-500 hover:shadow-2xl hover:-translate-y-2",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-100/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"}),e.jsx(O,{className:"relative border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-background pb-6",children:e.jsxs(B,{className:"flex items-center gap-3 text-xl",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-slate-200 to-slate-300 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:e.jsx(J,{className:"h-6 w-6 text-slate-700"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Recent Ticket Activity"}),e.jsx("p",{className:"text-sm text-muted-foreground font-normal",children:"Latest service requests"})]})]})}),e.jsx(u,{className:"relative p-6",children:e.jsxs("div",{className:"space-y-4",children:[l.recentTickets&&l.recentTickets.slice(0,5).map((t,s)=>{var a,d,f;return e.jsxs("div",{className:"group/ticket flex items-center justify-between p-5 bg-gradient-to-r from-white/80 via-white/70 to-white/80 rounded-xl hover:from-white/95 hover:via-white/90 hover:to-white/95 transition-all duration-300 cursor-pointer shadow-sm hover:shadow-xl border border-slate-200/50 hover:border-slate-300/70 transform hover:-translate-y-1",onClick:()=>window.open(`/tickets/${t.id}`,"_blank"),style:{animationDelay:`${s*100}ms`},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-5 h-5 rounded-full shadow-lg transition-all duration-300 group-hover/ticket:scale-125 ${t.status==="open"?"bg-gradient-to-br from-blue-400 to-blue-600":t.status==="in_progress"?"bg-gradient-to-br from-yellow-400 to-yellow-600":t.status==="resolved"?"bg-gradient-to-br from-green-400 to-green-600":"bg-gradient-to-br from-gray-400 to-gray-600"}`}),e.jsx("div",{className:`absolute inset-0 rounded-full animate-pulse ${t.status==="open"?"bg-blue-400":t.status==="in_progress"?"bg-yellow-400":t.status==="resolved"?"bg-green-400":"bg-gray-400"} opacity-30`})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-lg text-slate-900 truncate max-w-sm group-hover/ticket:text-primary transition-colors duration-300",children:t.title}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-600 group-hover/ticket:text-slate-700 transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:((a=t.user)==null?void 0:a.name)||"Unknown"})]}),e.jsx("span",{children:"•"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:((f=(d=t.device)==null?void 0:d.apartment)==null?void 0:f.name)||"No apt"})]})]})]})]}),e.jsxs("div",{className:"text-right flex flex-col items-end gap-2",children:[e.jsx(L,{variant:t.status==="open"?"default":t.status==="in_progress"?"secondary":t.status==="resolved"?"default":"outline",className:`font-bold px-3 py-1 transition-all duration-300 group-hover/ticket:scale-105 ${t.status==="open"?"bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800 border-blue-300 shadow-lg":""} ${t.status==="in_progress"?"bg-gradient-to-r from-yellow-100 to-yellow-200 text-yellow-800 border-yellow-300 shadow-lg":""} ${t.status==="resolved"?"bg-gradient-to-r from-green-100 to-green-200 text-green-800 border-green-300 shadow-lg":""}`,children:t.status}),e.jsx("div",{className:"opacity-0 group-hover/ticket:opacity-100 transition-opacity duration-300",children:e.jsx(Y,{className:"w-4 h-4 text-slate-400"})})]})]},t.id)}),(!l.recentTickets||l.recentTickets.length===0)&&e.jsxs("div",{className:"text-center py-16 text-slate-500",children:[e.jsx("div",{className:"relative mx-auto mb-8 w-24 h-24 rounded-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center shadow-lg",children:e.jsx(J,{className:"w-12 h-12 opacity-40"})}),e.jsx("p",{className:"text-xl font-bold mb-2",children:"No recent activity"}),e.jsx("p",{className:"text-sm",children:"Recent tickets will appear here"})]})]})})]})})]}),V&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:"Tenant Dashboard"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Monitor your tickets and service requests"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-blue-50 via-background to-blue-100 overflow-hidden",children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-blue-100",children:e.jsx(ye,{className:"h-6 w-6 text-blue-600"})}),e.jsx(Y,{className:"h-4 w-4 text-blue-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?status=open","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wider",children:"Open Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.tickets.open||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting service"})]})]})}),e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-yellow-50 via-background to-yellow-100 overflow-hidden",children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-yellow-100",children:e.jsx(J,{className:"h-6 w-6 text-yellow-600"})}),e.jsx(Y,{className:"h-4 w-4 text-yellow-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?status=in_progress","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-600 uppercase tracking-wider",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.tickets.in_progress||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Being worked on"})]})]})}),e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-green-50 via-background to-green-100 overflow-hidden",children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-100",children:e.jsx(ee,{className:"h-6 w-6 text-green-600"})}),e.jsx(Y,{className:"h-4 w-4 text-green-600/60 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>window.open("/tickets?status=resolved","_blank")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase tracking-wider",children:"Resolved"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.tickets.resolved||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed tickets"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(p,{className:"col-span-1",children:[e.jsxs(O,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5 text-primary"}),"My Recent Tickets"]}),e.jsx(kt,{children:"View the status of your recent service requests"})]}),e.jsx(u,{children:e.jsx("div",{className:"space-y-3",children:l.recentTickets&&l.recentTickets.length>0?l.recentTickets.slice(0,5).map(t=>{var s,a;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors cursor-pointer",onClick:()=>window.open(`/tickets/${t.id}`,"_blank"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${t.status==="open"?"bg-blue-500":t.status==="in_progress"?"bg-yellow-500":t.status==="resolved"?"bg-green-500":"bg-gray-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 truncate max-w-xs",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx("span",{children:me(t.created_at)}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:((a=(s=t.device)==null?void 0:s.apartment)==null?void 0:a.name)||"No apt"})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx(L,{variant:t.status==="open"?"default":t.status==="in_progress"?"secondary":t.status==="resolved"?"default":"outline",className:`
                                                                ${t.status==="open"?"bg-blue-100 text-blue-700":""}
                                                                ${t.status==="in_progress"?"bg-yellow-100 text-yellow-700":""}
                                                                ${t.status==="resolved"?"bg-green-100 text-green-700":""}
                                                            `,children:t.status})})]},t.id)}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(ce,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No tickets found"}),e.jsx(k,{className:"mt-4",variant:"outline",onClick:()=>window.open("/tickets/create","_blank"),children:"Create a New Ticket"})]})})}),e.jsx(ls,{className:"flex justify-center border-t pt-4",children:e.jsx(k,{variant:"outline",size:"sm",className:"w-full sm:w-auto",onClick:()=>window.open("/tickets","_blank"),children:"View All Tickets"})})]}),e.jsxs(p,{className:"col-span-1",children:[e.jsxs(O,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5 text-primary"}),"My Apartment"]}),e.jsx(kt,{children:"Your apartment details and upcoming appointments"})]}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[(jt=(ft=(bt=r==null?void 0:r.auth)==null?void 0:bt.user)==null?void 0:ft.tenant)!=null&&jt.apartment?e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/20 flex items-center justify-center",children:e.jsx(re,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:r.auth.user.tenant.apartment.name}),e.jsx("p",{className:"text-sm text-slate-600",children:((vt=r.auth.user.tenant.apartment.building)==null?void 0:vt.name)||"Building"})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(le,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No apartment information found"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Upcoming Appointments"}),l.upcomingAppointments&&l.upcomingAppointments.filter(t=>{var s,a,d,f;return((a=(s=t.ticket)==null?void 0:s.user)==null?void 0:a.email)===((f=(d=r==null?void 0:r.auth)==null?void 0:d.user)==null?void 0:f.email)}).length>0?e.jsx("div",{className:"space-y-2",children:l.upcomingAppointments.filter(t=>{var s,a,d,f;return((a=(s=t.ticket)==null?void 0:s.user)==null?void 0:a.email)===((f=(d=r==null?void 0:r.auth)==null?void 0:d.user)==null?void 0:f.email)}).slice(0,2).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors cursor-pointer",onClick:()=>window.open(`/appointments/${t.id}`,"_blank"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(se,{className:"w-4 h-4 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:t.title}),e.jsx("p",{className:"text-xs text-slate-600",children:me(t.scheduled_at||t.scheduled_for)})]})]}),e.jsx(L,{className:"bg-blue-100 text-blue-700",children:"Scheduled"})]},t.id))}):e.jsx("div",{className:"p-3 bg-slate-50 rounded-lg text-center",children:e.jsx("p",{className:"text-sm text-slate-600",children:"No upcoming appointments"})})]})]})})]})]}),e.jsxs(p,{children:[e.jsx(O,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-primary"}),"Quick Actions"]})}),e.jsx(u,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(k,{className:"flex items-center gap-2 h-12",onClick:()=>window.open("/tickets/create","_blank"),children:[e.jsx(Dt,{className:"w-4 h-4"}),"Create Service Request"]}),e.jsxs(k,{variant:"outline",className:"flex items-center gap-2 h-12",onClick:()=>window.open("/tickets","_blank"),children:[e.jsx(ce,{className:"w-4 h-4"}),"View My Tickets"]}),e.jsxs(k,{variant:"outline",className:"flex items-center gap-2 h-12",onClick:()=>window.open("/profile","_blank"),children:[e.jsx(Ue,{className:"w-4 h-4"}),"Update Profile"]})]})})]})]}),(N||T)&&o.resources.buildings>0&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:["                                    ",e.jsxs("div",{className:"flex items-center justify-center gap-4",children:["                                        ",e.jsx("h2",{className:"text-4xl font-bold text-foreground",children:"System Resources"}),e.jsx(L,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20 px-4 py-2 text-sm font-semibold",children:"Full Access - Admin"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Comprehensive management of buildings, apartments, users and devices"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-1/10 via-background to-chart-1/5 overflow-hidden",children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-violet-100 w-fit mx-auto",children:e.jsx(re,{className:"h-8 w-8 text-violet-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-violet-600 uppercase tracking-wider",children:"Buildings"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:o.resources.buildings})]}),l.buildingsWithTickets&&l.buildingsWithTickets.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-xs font-semibold text-violet-600",children:"Buildings Overview"}),l.buildingsWithTickets.length>3&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(k,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>{const t=b.current;t&&t.scrollBy({left:-200,behavior:"smooth"})},children:e.jsx(ze,{className:"h-3 w-3"})}),e.jsx(k,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>{const t=b.current;t&&t.scrollBy({left:200,behavior:"smooth"})},children:e.jsx(Me,{className:"h-3 w-3"})})]})]}),e.jsx("div",{ref:b,className:"flex gap-2 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:l.buildingsWithTickets.map(t=>e.jsx("div",{className:"flex-shrink-0 group/building cursor-pointer",title:`${t.name} - ${t.apartments_count} apartments, ${t.tenants_count} tenants`,onClick:()=>window.open(`/buildings/${t.id}`,"_blank"),children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-violet-200 to-violet-400 flex items-center justify-center transition-transform shadow-lg",children:t.image?e.jsx("img",{src:`/storage/${t.image}`,alt:t.name,className:"w-full h-full rounded-full object-cover",onError:s=>{s.currentTarget.src="/images/default-builder-square.png"}}):e.jsx(re,{className:"h-6 w-6 text-white"})})},t.id))})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Y,{className:"h-3 w-3 text-violet-400"}),e.jsx("span",{className:"text-xs text-slate-500",children:"View management"})]})]})})}),e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-2/10 via-background to-chart-2/5 overflow-hidden cursor-pointer",children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-blue-100 w-fit mx-auto",children:e.jsx(le,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase tracking-wider",children:"Apartments"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:o.resources.apartments})]}),l.buildingsWithTickets&&l.buildingsWithTickets.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-xs font-semibold text-blue-600",children:"By Building"}),l.buildingsWithTickets.length>3&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(k,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:t=>{t.stopPropagation();const s=document.getElementById("apartments-container");s&&s.scrollBy({left:-200,behavior:"smooth"})},children:e.jsx(ze,{className:"h-3 w-3"})}),e.jsx(k,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:t=>{t.stopPropagation();const s=document.getElementById("apartments-container");s&&s.scrollBy({left:200,behavior:"smooth"})},children:e.jsx(Me,{className:"h-3 w-3"})})]})]}),e.jsx("div",{id:"apartments-container",className:"flex gap-2 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:l.buildingsWithTickets.map(t=>e.jsxs("div",{className:"flex-shrink-0 group/building cursor-pointer flex flex-col items-center gap-1",title:`${t.name}: ${t.apartments_count} apartments`,onClick:s=>{s.stopPropagation(),window.open(`/buildings/${t.id}/apartments`,"_blank")},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-200 to-blue-400 flex items-center justify-center  transition-transform shadow-lg",children:t.image?e.jsx("img",{src:`/storage/${t.image}`,alt:t.name,className:"w-full h-full rounded-full object-cover",onError:s=>{s.currentTarget.src="/images/default-builder-square.png"}}):e.jsx(re,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xs font-bold text-blue-700 min-w-0 text-center",children:t.apartments_count})]},`apt-${t.id}`))})]})]})})}),e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-3/10 via-background to-chart-3/5 overflow-hidden cursor-pointer",children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-emerald-100 w-fit mx-auto",children:e.jsx(ae,{className:"h-8 w-8 text-emerald-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-600 uppercase tracking-wider",children:"Members"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:o.resources.tenants})]}),l.buildingsWithTickets&&l.buildingsWithTickets.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-xs font-semibold text-emerald-600",children:"By Building"}),l.buildingsWithTickets.length>3&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(k,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:t=>{t.stopPropagation();const s=document.getElementById("tenants-container");s&&s.scrollBy({left:-200,behavior:"smooth"})},children:e.jsx(ze,{className:"h-3 w-3"})}),e.jsx(k,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:t=>{t.stopPropagation();const s=document.getElementById("tenants-container");s&&s.scrollBy({left:200,behavior:"smooth"})},children:e.jsx(Me,{className:"h-3 w-3"})})]})]}),e.jsx("div",{id:"tenants-container",className:"flex gap-2 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:l.buildingsWithTickets.map(t=>e.jsxs("div",{className:"flex-shrink-0 group/building cursor-pointer flex flex-col items-center gap-1",title:`${t.name}: ${t.tenants_count} tenants`,onClick:s=>{s.stopPropagation(),window.open(`/buildings/${t.id}/tenants`,"_blank")},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-200 to-emerald-400 flex items-center justify-center  transition-transform shadow-lg",children:t.image?e.jsx("img",{src:`/storage/${t.image}`,alt:t.name,className:"w-full h-full rounded-full object-cover",onError:s=>{s.currentTarget.src="/images/default-builder-square.png"}}):e.jsx(re,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xs font-bold text-emerald-700 min-w-0 text-center",children:t.tenants_count})]},`tenant-${t.id}`))})]})]})})}),e.jsx(p,{className:"group transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 bg-gradient-to-br from-chart-4/10 via-background to-chart-4/5 overflow-hidden cursor-pointer",onClick:()=>I(!0),children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-amber-100 w-fit mx-auto",children:e.jsx(Oe,{className:"h-8 w-8 text-amber-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-amber-600 uppercase tracking-wider",children:"Devices"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:o.resources.devices})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ke,{className:"h-3 w-3 text-amber-400"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Click to view details"})]})]})})})]}),N&&l.topTechnicals&&l.topTechnicals.length>0&&e.jsx("div",{className:"mt-12",children:e.jsxs(p,{className:"border-0 bg-gradient-to-br from-rose-50/50 via-background to-rose-100/50 shadow-2xl backdrop-blur-sm",children:[e.jsx(O,{className:"border-b border-rose-200/50 bg-gradient-to-r from-rose-50/70 to-background pb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-rose-200 to-rose-300 shadow-lg",children:e.jsx(gs,{className:"h-6 w-6 text-rose-700"})}),e.jsxs("div",{children:[e.jsx(B,{className:"text-2xl font-bold text-slate-800",children:"Technical Team Directory"}),e.jsxs("p",{className:"text-sm text-slate-600 mt-2 font-medium",children:[l.topTechnicals.length," active technicians managing operations"]})]})]}),e.jsxs(k,{variant:"outline",size:"lg",className:"bg-gradient-to-r from-rose-100 to-rose-200 border-rose-300 text-rose-700 hover:from-rose-200 hover:to-rose-300 font-semibold px-6",onClick:()=>window.open("/technicals","_blank"),children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Manage Team"]})]})}),e.jsx(u,{className:"p-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.topTechnicals.map(t=>e.jsxs("div",{className:"group relative bg-gradient-to-br from-white to-rose-50/30 rounded-2xl p-6 shadow-lg border border-rose-200/50 hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 hover:border-rose-300/70",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-rose-100/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl"}),e.jsxs("div",{className:"relative space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative shrink-0",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-rose-300 to-rose-500 flex items-center justify-center overflow-hidden shadow-lg ring-2 ring-white",children:t.photo?e.jsx("img",{src:`/storage/${t.photo}`,alt:t.name,className:"w-full h-full object-cover"}):e.jsx(Ue,{className:"h-8 w-8 text-white"})}),t.is_default===!0&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-full border-3 border-white flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-xs font-bold text-white",children:"⭐"})})]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h4",{className:"font-bold text-slate-900 text-base truncate",children:t.name}),t.is_default===!0&&e.jsx(L,{variant:"secondary",className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 border-yellow-200 font-semibold",children:"Default Tech"})]}),e.jsxs("div",{className:"space-y-2",children:[t.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4 text-slate-500 shrink-0"}),e.jsx("span",{className:"text-sm text-slate-700 truncate font-medium",children:t.email})]}),t.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500 shrink-0"}),e.jsx("span",{className:"text-sm text-slate-700 font-medium",children:t.phone})]})]})]})]}),e.jsxs("div",{className:"space-y-3 pt-2 border-t border-rose-200/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 rounded-lg bg-blue-100",children:e.jsx(ce,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("span",{className:"text-sm font-bold text-blue-700",children:[t.tickets_count||0," Active Tickets"]})]}),t.shift&&e.jsxs(L,{variant:"outline",className:"text-xs px-2 py-1 bg-slate-100 text-slate-700 border-slate-300 capitalize font-medium",children:[t.shift," Shift"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-600 font-medium",children:"Workload"}),e.jsx("span",{className:"text-slate-700 font-bold",children:t.tickets_count>10?"High":t.tickets_count>5?"Medium":t.tickets_count>0?"Low":"Available"})]}),e.jsx("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 rounded-full ${t.tickets_count>10?"bg-gradient-to-r from-red-400 to-red-500":t.tickets_count>5?"bg-gradient-to-r from-yellow-400 to-yellow-500":t.tickets_count>0?"bg-gradient-to-r from-green-400 to-green-500":"bg-gradient-to-r from-blue-400 to-blue-500"}`,style:{width:`${Math.min((t.tickets_count||0)/15*100,100)}%`}})})]})]})]})]},t.id))})})]})})]}),(!m||N||T)&&e.jsxs("div",{className:"space-y-16",children:["                            ",e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("h2",{className:"text-5xl font-black text-foreground",children:"Visual Analysis"}),e.jsx("p",{className:"text-2xl text-muted-foreground max-w-3xl mx-auto font-semibold",children:"Interactive charts and trends to monitor system performance"}),e.jsx("div",{className:"flex justify-center gap-6"})]}),e.jsxs("div",{className:"grid gap-20 lg:grid-cols-12",children:["                                ",e.jsx("div",{className:"lg:col-span-6",children:e.jsxs(p,{className:"h-full border-0 bg-gradient-to-br from-muted/20 via-background to-primary/5 shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-secondary/5"}),e.jsx(O,{className:"pb-12 relative",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(B,{className:"text-3xl font-black text-foreground",children:"Ticket Distribution"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Estado actual del sistema"})]}),e.jsxs("div",{className:"flex gap-4",children:["                                                    ",e.jsxs(k,{variant:"outline",size:"lg",onClick:()=>{const t=Object.values(c.ticketsByStatus).reduce((s,a)=>s+a,0);Cs(c.ticketsByStatus,t)},className:"h-14 w-14 p-0 hover:bg-primary/10 shadow-xl border-primary/20 hover:scale-105 transition-all duration-300",title:"Export Professional Analysis",children:["                                                        ",e.jsx(At,{className:"h-6 w-6 text-primary"})]}),e.jsx(k,{variant:"outline",size:"lg",onClick:()=>window.open("/tickets","_blank"),className:"h-14 w-14 p-0 hover:bg-primary/10 shadow-xl border-primary/20",children:e.jsx(Y,{className:"h-6 w-6 text-primary"})})]})]})}),e.jsx(u,{className:"pt-0 pb-16 relative",children:e.jsx("div",{className:"h-[500px]",children:e.jsx(Le,{width:"100%",height:"100%",children:e.jsxs(ss,{children:[e.jsx(as,{data:Object.entries(c.ticketsByStatus).map(([t,s],a)=>({name:t.replace("_"," ").toUpperCase(),value:s,color:Fe[a%Fe.length]})),cx:"50%",cy:"50%",outerRadius:160,innerRadius:80,paddingAngle:8,dataKey:"value",onClick:t=>Xt(t.name.toLowerCase().replace(" ","_"),t.value),className:"cursor-pointer drop-shadow-2xl",children:Object.entries(c.ticketsByStatus).map((t,s)=>e.jsx(rs,{fill:Fe[s%Fe.length],stroke:"#fff",strokeWidth:6,className:"hover:opacity-80 transition-all duration-500"},`cell-${s}`))}),e.jsx(Pe,{formatter:t=>[`${t} tickets (${Math.round(t/Object.values(c.ticketsByStatus).reduce((s,a)=>s+a,0)*100)}%)`,"Cantidad"],labelStyle:{color:"#374151",fontWeight:"bold",fontSize:"18px"},contentStyle:{backgroundColor:"#fff",border:"none",borderRadius:"20px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.35)",padding:"20px 24px"}}),e.jsx(Mt,{verticalAlign:"bottom",height:80,formatter:t=>e.jsx("span",{className:"text-lg font-black text-slate-700",children:t})})]})})})})]})}),"                                ",e.jsx("div",{className:"lg:col-span-6",children:e.jsxs(p,{className:"h-full border-0 bg-gradient-to-br from-secondary/10 via-background to-accent/5 shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/5 to-accent/5"}),e.jsx(O,{className:"pb-12 relative",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(B,{className:"text-3xl font-black text-foreground",children:"Weekly Trend"}),e.jsx("p",{className:"text-xl text-muted-foreground font-semibold",children:"Ticket evolution over the last 7 days"})]}),e.jsxs("div",{className:"flex gap-4",children:["                                                    ",e.jsx(k,{variant:"outline",size:"lg",onClick:()=>{const t=c.ticketsLastWeek.map(s=>({date:s.date,count:s.count}));Fs(t)},className:"h-14 w-14 p-0 hover:bg-secondary/10 shadow-xl border-secondary/20 hover:scale-105 transition-all duration-300",title:"Export Weekly Trend Analysis",children:e.jsx(At,{className:"h-6 w-6 text-secondary"})})]})]})}),e.jsx(u,{className:"pt-0 pb-16 relative",children:e.jsx("div",{className:"h-[500px]",children:e.jsx(Le,{width:"100%",height:"100%",children:e.jsxs(St,{data:Jt,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366F1",stopOpacity:.6}),e.jsx("stop",{offset:"95%",stopColor:"#6366F1",stopOpacity:.1})]})}),e.jsx(_t,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeWidth:2}),e.jsx(Et,{dataKey:"date",tick:{fontSize:16,fill:"#475569",fontWeight:"bold"},tickLine:{stroke:"#cbd5e1"},axisLine:{stroke:"#cbd5e1"}}),e.jsx($t,{tick:{fontSize:16,fill:"#475569",fontWeight:"bold"},tickLine:{stroke:"#cbd5e1"},axisLine:{stroke:"#cbd5e1"}}),e.jsx(Pe,{contentStyle:{backgroundColor:"#fff",border:"none",borderRadius:"20px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.35)",padding:"20px 24px"},labelFormatter:t=>`Fecha: ${t}`,formatter:(t,s)=>[`${t} tickets`,s==="tickets"?"Daily Total":"Average"]}),e.jsx(Te,{type:"monotone",dataKey:"tickets",stroke:"#6366F1",strokeWidth:5,fill:"url(#colorGradient)",dot:{fill:"#6366F1",strokeWidth:4,r:8},activeDot:{r:10,stroke:"#6366F1",strokeWidth:4,fill:"#fff"}}),e.jsx(Te,{type:"monotone",dataKey:"average",stroke:"#94A3B8",strokeWidth:4,strokeDasharray:"10 10",fill:"none",dot:!1})]})})})})]})})]})]}),(N||T)&&c.technicalAnalysis&&c.technicalAnalysis.length>0&&e.jsxs("div",{className:"space-y-8 mt-4",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-blue-100 to-indigo-50 rounded-full shadow-lg",children:[e.jsx(be,{className:"h-6 w-6 text-blue-600"}),e.jsx("span",{className:"text-sm font-bold text-blue-700 uppercase tracking-wider",children:"Performance Analytics"})]}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-br from-blue-600 to-indigo-800 bg-clip-text text-transparent",children:"Technical Team Analysis"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"Comprehensive performance metrics and efficiency analysis for technical staff"})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[e.jsxs(p,{className:"group border-0 shadow-xl bg-gradient-to-br from-white via-blue-50/30 to-indigo-50/20 backdrop-blur-sm transition-all duration-500 hover:shadow-2xl overflow-hidden",children:[e.jsx(O,{className:"pb-6 border-b border-blue-100/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-red-100 group-hover:bg-red-200 transition-colors",children:e.jsx(ye,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx(B,{className:"text-xl font-bold text-red-700",children:"Open Tickets"}),e.jsx("p",{className:"text-sm text-red-600/80",children:"Count"})]})]})}),e.jsx(u,{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"relative h-80 bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"absolute left-0 top-4 bottom-4 w-20 flex flex-col justify-between",children:c.technicalAnalysis.slice(0,5).reverse().map(t=>e.jsx("div",{className:"text-xs font-medium text-gray-700 text-right pr-2",children:t.name},t.id))}),e.jsxs("div",{className:"ml-24 mr-8 h-full relative",children:[e.jsx("div",{className:"absolute inset-0 flex",children:[0,20,40,60,80].map(t=>e.jsx("div",{className:"flex-1 border-l border-gray-200"},t))}),e.jsx("div",{className:"relative h-full flex flex-col justify-between py-2",children:c.technicalAnalysis.slice(0,5).reverse().map(t=>{const s=Math.max(...c.technicalAnalysis.map(d=>d.tickets_open)),a=s>0?t.tickets_open/s*100:0;return e.jsx("div",{className:"flex items-center h-8",children:e.jsx("div",{className:"h-6 bg-gradient-to-r from-red-400 to-red-500 rounded-r transition-all duration-1000 ease-out flex items-center justify-end pr-2",style:{width:`${a}%`},children:e.jsx("span",{className:"text-xs font-bold text-white",children:t.tickets_open})})},t.id)})})]}),e.jsx("div",{className:"absolute bottom-0 left-24 right-8 flex justify-between border-t border-gray-300 pt-1",children:[0,10,20,30,40,50,60,70].map(t=>e.jsx("span",{className:"text-xs text-gray-600",children:t},t))})]})})})]}),e.jsxs(p,{className:"group border-0 shadow-xl bg-gradient-to-br from-white via-blue-50/30 to-indigo-50/20 backdrop-blur-sm transition-all duration-500 hover:shadow-2xl overflow-hidden",children:[e.jsx(O,{className:"pb-6 border-b border-blue-100/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-yellow-100 group-hover:bg-yellow-200 transition-colors",children:e.jsx(J,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx(B,{className:"text-xl font-bold text-yellow-700",children:"In Progress Tickets"}),e.jsx("p",{className:"text-sm text-yellow-600/80",children:"Count"})]})]})}),e.jsx(u,{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"relative h-80 bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"absolute left-0 top-4 bottom-4 w-20 flex flex-col justify-between",children:c.technicalAnalysis.slice(0,5).reverse().map(t=>e.jsx("div",{className:"text-xs font-medium text-gray-700 text-right pr-2",children:t.name},t.id))}),e.jsxs("div",{className:"ml-24 mr-8 h-full relative",children:[e.jsx("div",{className:"absolute inset-0 flex",children:[0,20,40,60,80].map(t=>e.jsx("div",{className:"flex-1 border-l border-gray-200"},t))}),e.jsx("div",{className:"relative h-full flex flex-col justify-between py-2",children:c.technicalAnalysis.slice(0,5).reverse().map(t=>{const s=Math.max(...c.technicalAnalysis.map(d=>d.tickets_in_progress)),a=s>0?t.tickets_in_progress/s*100:0;return e.jsx("div",{className:"flex items-center h-8",children:e.jsx("div",{className:"h-6 bg-gradient-to-r from-yellow-400 to-yellow-500 rounded-r transition-all duration-1000 ease-out flex items-center justify-end pr-2",style:{width:`${a}%`},children:e.jsx("span",{className:"text-xs font-bold text-white",children:t.tickets_in_progress})})},t.id)})})]}),e.jsx("div",{className:"absolute bottom-0 left-24 right-8 flex justify-between border-t border-gray-300 pt-1",children:[0,10,20,30,40,50,60,70].map(t=>e.jsx("span",{className:"text-xs text-gray-600",children:t},t))})]})})})]}),e.jsxs(p,{className:"group border-0 shadow-xl bg-gradient-to-br from-white via-blue-50/30 to-indigo-50/20 backdrop-blur-sm transition-all duration-500 hover:shadow-2xl overflow-hidden",children:[e.jsx(O,{className:"pb-6 border-b border-blue-100/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-100 group-hover:bg-green-200 transition-colors",children:e.jsx(ee,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx(B,{className:"text-xl font-bold text-green-700",children:"Resolved Tickets"}),e.jsx("p",{className:"text-sm text-green-600/80",children:"Count"})]})]})}),e.jsx(u,{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"relative h-80 bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"absolute left-0 top-4 bottom-4 w-20 flex flex-col justify-between",children:c.technicalAnalysis.slice(0,5).reverse().map(t=>e.jsx("div",{className:"text-xs font-medium text-gray-700 text-right pr-2",children:t.name},t.id))}),e.jsxs("div",{className:"ml-24 mr-8 h-full relative",children:[e.jsx("div",{className:"absolute inset-0 flex",children:[0,20,40,60,80].map(t=>e.jsx("div",{className:"flex-1 border-l border-gray-200"},t))}),e.jsx("div",{className:"relative h-full flex flex-col justify-between py-2",children:c.technicalAnalysis.slice(0,5).reverse().map(t=>{const s=Math.max(...c.technicalAnalysis.map(d=>d.tickets_resolved)),a=s>0?t.tickets_resolved/s*100:0;return e.jsx("div",{className:"flex items-center h-8",children:e.jsx("div",{className:"h-6 bg-gradient-to-r from-green-400 to-green-500 rounded-r transition-all duration-1000 ease-out flex items-center justify-end pr-2",style:{width:`${a}%`},children:e.jsx("span",{className:"text-xs font-bold text-white",children:t.tickets_resolved})})},t.id)})})]}),e.jsx("div",{className:"absolute bottom-0 left-24 right-8 flex justify-between border-t border-gray-300 pt-1",children:[0,10,20,30,40,50,60,70].map(t=>e.jsx("span",{className:"text-xs text-gray-600",children:t},t))})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(p,{className:"bg-gradient-to-br from-red-50 to-red-100 border-red-200",children:e.jsxs(u,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-red-700",children:c.technicalAnalysis.reduce((t,s)=>t+s.tickets_open,0)}),e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Open"})]})}),e.jsx(p,{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200",children:e.jsxs(u,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-700",children:c.technicalAnalysis.reduce((t,s)=>t+s.tickets_in_progress,0)}),e.jsx("div",{className:"text-sm text-yellow-600 font-medium",children:"Total In Progress"})]})}),e.jsx(p,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:e.jsxs(u,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-700",children:c.technicalAnalysis.reduce((t,s)=>t+s.tickets_resolved,0)}),e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Resolved"})]})}),e.jsx(p,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:e.jsxs(u,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-700",children:c.technicalAnalysis.reduce((t,s)=>t+s.total_tickets,0)}),e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Tickets"})]})})]})]}),(!m||N||T)&&e.jsxs("div",{className:"space-y-6 mt-4",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Advanced Analytics"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Interactive charts and visualizations"})]}),e.jsx(ws,{data:{ticketsByStatus:Object.entries(c.ticketsByStatus).map(([t,s])=>({status:t,count:s,color:t==="open"?"#ef4444":t==="in_progress"?"#f59e0b":t==="resolved"?"#10b981":"#6b7280"})),ticketsByPriority:Object.entries(c.ticketsByPriority).map(([t,s])=>({priority:t,count:s,color:t==="high"?"#dc2626":t==="medium"?"#ea580c":t==="low"?"#16a34a":"#6b7280"})),ticketsByBuilding:l.buildingsWithTickets.map(t=>({building:t.name,count:t.tickets_count})),ticketsOverTime:c.ticketsLastWeek.map((t,s)=>({month:`Day ${s+1}`,created:t.count,resolved:Math.floor(t.count*.8)})),deviceIssues:l.problematicDevices.map(t=>({device:t.device_name,count:t.tickets_count,avgResolution:24})),techniciansPerformance:l.topTechnicals.map(t=>({technician:t.name,resolved:t.tickets_count,avg_time:18}))}})]}),(T||N)&&e.jsx("div",{className:"mt-32",children:e.jsxs(p,{className:"border-0 bg-chart-5 text-background shadow-2xl overflow-hidden relative dark:bg-white/10",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/10 dark:bg-transparent"}),e.jsx(u,{className:"p-16 relative",children:e.jsxs("div",{className:"grid gap-16 lg:grid-cols-4",children:["                                        ",e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-primary/20 w-fit mx-auto dark:bg-primary",children:e.jsx(je,{className:"h-10 w-10 text-primary dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-4xl font-black text-background",children:o.tickets.total+o.tickets.resolved_today}),e.jsx("p",{className:"text-primary/80 font-bold text-lg",children:"Total Processed"})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-primary/20 w-fit mx-auto dark:bg-primary",children:e.jsx(he,{className:"h-10 w-10 text-primary dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-4xl font-black text-background",children:"98.5%"}),e.jsx("p",{className:"text-primary/80 font-bold text-lg",children:"Uptime"})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-accent/20 w-fit mx-auto dark:bg-primary",children:e.jsx(ae,{className:"h-10 w-10 text-accent dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-4xl font-black text-background",children:o.resources.tenants+o.resources.technicals}),e.jsx("p",{className:"text-accent/80 font-bold text-lg",children:"Active Users"})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-6 rounded-3xl bg-chart-1/20 w-fit mx-auto dark:bg-primary",children:e.jsx(fe,{className:"h-10 w-10 text-chart-1 dark:text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-4xl font-black text-background",children:[Math.round(o.tickets.avg_resolution_hours*.8),"h"]}),e.jsx("p",{className:"text-chart-1/80 font-bold text-lg",children:"Response Time"})]})]})]})})]})})]})}),P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in-0 duration-300",onClick:()=>I(!1),children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden border border-gray-200 dark:border-gray-700 animate-in zoom-in-95 slide-in-from-bottom-4 duration-500 ease-out",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-chart-4/10 to-chart-3/10 dark:from-chart-4/20 dark:to-chart-3/20",children:[e.jsxs("div",{className:"flex items-center gap-3 animate-in slide-in-from-left-4 duration-700 delay-200",children:[e.jsx("div",{className:"p-3 rounded-xl bg-chart-4/20 dark:bg-chart-4/30",children:e.jsx(Oe,{className:"h-6 w-6 text-chart-4 dark:text-chart-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-white",children:"Device Management"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-300",children:"Complete overview of all devices in the system"})]})]}),e.jsx(k,{variant:"ghost",size:"lg",onClick:()=>I(!1),className:"rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 animate-in slide-in-from-right-4 duration-700 delay-200 transition-all hover:scale-105",children:e.jsx($e,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] bg-white dark:bg-gray-900 scroll-smooth custom-scrollbar",children:l.allDevices&&l.allDevices.length>0?e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-700 delay-300",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(p,{className:"bg-gradient-to-br from-primary/10 to-primary/5 dark:from-primary/20 dark:to-primary/10 border-primary/20 dark:border-primary/30 dark:bg-gray-800/50 animate-in slide-in-from-left-2 duration-500 delay-400 hover:scale-105 transition-transform",children:e.jsxs(u,{className:"p-4 text-center",children:[e.jsx(ke,{className:"h-8 w-8 text-primary dark:text-primary mx-auto mb-2"}),e.jsx("h3",{className:"font-semibold text-primary dark:text-primary",children:"Total Devices"}),e.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-white",children:l.allDevices.length})]})}),e.jsx(p,{className:"bg-gradient-to-br from-secondary/10 to-secondary/5 dark:from-secondary/20 dark:to-secondary/10 border-secondary/20 dark:border-secondary/30 dark:bg-gray-800/50 animate-in slide-in-from-bottom-2 duration-500 delay-500 hover:scale-105 transition-transform",children:e.jsxs(u,{className:"p-4 text-center",children:[e.jsx(ae,{className:"h-8 w-8 text-secondary dark:text-secondary mx-auto mb-2"}),e.jsx("h3",{className:"font-semibold text-secondary dark:text-secondary",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-white",children:l.allDevices.reduce((t,s)=>t+s.users_count,0)})]})}),e.jsx(p,{className:"bg-gradient-to-br from-accent/10 to-accent/5 dark:from-accent/20 dark:to-accent/10 border-accent/20 dark:border-accent/30 dark:bg-gray-800/50 animate-in slide-in-from-right-2 duration-500 delay-600 hover:scale-105 transition-transform",children:e.jsxs(u,{className:"p-4 text-center",children:[e.jsx(be,{className:"h-8 w-8 text-accent dark:text-accent mx-auto mb-2"}),e.jsx("h3",{className:"font-semibold text-accent dark:text-accent",children:"Device Types"}),e.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-white",children:new Set(l.allDevices.map(t=>t.device_type)).size})]})})]}),e.jsxs(p,{className:"border-0 shadow-lg dark:bg-gray-800/50 dark:border-gray-700",children:[e.jsx(O,{className:"pb-6 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:!bg-transparent",children:e.jsxs("div",{className:"flex items-center justify-between dark:!bg-transparent",children:[e.jsx(B,{className:"text-xl text-foreground dark:text-white",children:"Device Inventory"}),"                                                    ",e.jsxs(k,{variant:"outline",size:"sm",onClick:()=>Ts(l.allDevices),className:"gap-2 border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 hover:text-gray-700 dark:text-gray-300 hover:scale-105 transition-all duration-300",children:[e.jsx(vs,{className:"h-4 w-4"}),"Export"]})]})}),e.jsx(u,{className:"p-0 bg-white dark:bg-gray-800/50",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:["                                                        ",e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/70",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Device"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Model"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Brand"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"System"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Users"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600 dark:text-gray-300 text-sm",children:"Status"})]})}),e.jsx("tbody",{children:l.allDevices.map((t,s)=>e.jsxs("tr",{className:`border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${s%2===0?"bg-white dark:bg-gray-800/30":"bg-gray-50 dark:bg-gray-800/50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-chart-4/20 to-chart-3/20 dark:from-chart-4/30 dark:to-chart-3/30 flex items-center justify-center",children:e.jsx(us,{className:"h-4 w-4 text-chart-4 dark:text-chart-4"})}),e.jsx("div",{children:e.jsxs("p",{className:"font-semibold text-foreground dark:text-white text-sm",children:["  ",t.device_type||"Unknown"]})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-foreground dark:text-white",children:t.device_type||"N/A"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-foreground dark:text-white",children:t.brand_name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-muted-foreground dark:text-gray-400",children:t.system_name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4 text-accent dark:text-accent"}),e.jsx("span",{className:"font-semibold text-accent dark:text-accent",children:t.users_count})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(L,{variant:"outline",className:t.users_count>0?"bg-accent/10 dark:bg-accent/20 text-accent dark:text-accent border-accent/20 dark:border-accent/30":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600",children:t.users_count>0?"Active":"Unused"})})]},t.id))})]})})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Oe,{className:"h-16 w-16 text-muted-foreground dark:text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-muted-foreground dark:text-gray-300 mb-2",children:"No Devices Found"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-400",children:"No device data is available at the moment."})]})})]})}),e.jsx(It,{open:U,onOpenChange:t=>{t||Ae()},children:e.jsxs(Ut,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[e.jsx(zt,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-blue-600"}),"Appointment Location - ",x?ie(x).buildingName:""]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-4 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:x==null?void 0:x.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{children:x?De(x.scheduled_for).date:""})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{children:x?De(x.scheduled_for).time:""})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{children:x==null?void 0:x.technical.name})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsxs("span",{children:["#",x==null?void 0:x.ticket.code]})]})]}),e.jsxs("div",{className:"flex items-start gap-2 text-slate-600 dark:text-slate-300",children:[e.jsx(le,{className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x?ie(x).buildingName:""}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Unit ",x?ie(x).unitNumber:""," â€¢ ",x==null?void 0:x.address]})]})]})]}),e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700",children:e.jsx("iframe",{src:qt(x?ie(x).locationLink:""),width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"w-full h-full"})}),e.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t border-slate-200 dark:border-slate-700",children:x&&ie(x).locationLink&&e.jsxs(k,{onClick:()=>{window.open(ie(x).locationLink,"_blank")},className:"px-6",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Open in Google Maps"]})})]})]})}),e.jsx(Be,{isOpen:g,onClose:()=>v(!1),tickets:ge,title:"Open Tickets"}),e.jsx(Be,{isOpen:A,onClose:()=>D(!1),tickets:ge,title:"In Progress Tickets"}),e.jsx(Be,{isOpen:R,onClose:()=>de(!1),tickets:ge,title:"Resolved Tickets"})]})}function Ds({ticket:o,index:c,technicals:l}){var z,j,V,q,P,I,U,F,x,C;const[w,n]=_.useState(!1),[i,r]=_.useState(null),$=async()=>{var y;if(!i){M.error("Please select a technician");return}n(!0);try{const h=await fetch(`/tickets/${o.id}/assign-technical`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((y=document.querySelector('meta[name="csrf-token"]'))==null?void 0:y.getAttribute("content"))||""},body:JSON.stringify({technical_id:i})});if(h.ok){const b=await h.json();M.success(b.message||"Ticket assigned successfully!"),pe.reload({only:["lists"]})}else if(h.status===422){const b=await h.json(),g=Object.values(b.errors||{}).flat();M.error(g.join(", ")||"Validation error")}else{const b=await h.json().catch(()=>({message:"Unknown error"}));M.error(b.message||b.error||"Failed to assign ticket")}}catch(h){M.error("Error assigning ticket"),console.error("Assignment error:",h)}finally{n(!1)}},N=y=>{const h={open:"bg-red-100 text-red-700 border-red-200",in_progress:"bg-amber-100 text-amber-700 border-amber-200",resolved:"bg-green-100 text-green-700 border-green-200",closed:"bg-gray-100 text-gray-700 border-gray-200"};return e.jsx(L,{variant:"outline",className:`${h[y]||h.open} capitalize`,children:y.replace("_"," ")})},m=y=>{const h={Hardware:"bg-blue-100 text-blue-700",Software:"bg-purple-100 text-purple-700",Network:"bg-green-100 text-green-700",Maintenance:"bg-orange-100 text-orange-700"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h[y]||"bg-gray-100 text-gray-700"}`,children:y})},T=y=>{const h=new Date(y),g=Math.floor((new Date().getTime()-h.getTime())/(1e3*60*60));return g<24?`${g}h ago`:`${Math.floor(g/24)}d ago`};return e.jsxs("tr",{className:`border-b border-slate-50 hover:bg-slate-50/50 transition-colors ${c%2===0?"bg-white":"bg-slate-25"}`,children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-slate-800 text-sm",children:o.code}),N(o.status)]}),e.jsx("p",{className:"text-sm text-slate-600 max-w-xs truncate",title:o.title,children:o.title})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-slate-800",children:((q=(V=(j=(z=o.user)==null?void 0:z.tenant)==null?void 0:j.apartment)==null?void 0:V.building)==null?void 0:q.name)||"Unknown Building"}),e.jsx("p",{className:"text-slate-600",children:((U=(I=(P=o.user)==null?void 0:P.tenant)==null?void 0:I.apartment)==null?void 0:U.name)||"Unknown Apt"})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-slate-800",children:((x=(F=o.device)==null?void 0:F.name_device)==null?void 0:x.name)||"Unknown Device"}),e.jsx("p",{className:"text-slate-600",children:((C=o.device)==null?void 0:C.name)||"N/A"})]})}),e.jsx("td",{className:"py-4 px-6",children:m(o.category)}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-slate-800",children:T(o.created_at)}),e.jsx("p",{className:"text-slate-500 text-xs",children:Rt(new Date(o.created_at),"MMM dd, HH:mm")})]})}),e.jsxs("td",{className:"py-4 px-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(os,{value:(i==null?void 0:i.toString())||"",onValueChange:y=>r(Number(y)),children:[e.jsx(ns,{className:"w-32 h-8 text-xs",children:e.jsx(is,{placeholder:"Select tech"})}),"                        ",e.jsx(cs,{children:l.length>0?l.map(y=>e.jsx(Ft,{value:y.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:y.name}),y.is_default&&e.jsx(L,{variant:"secondary",className:"text-xs px-1 py-0",children:"Default"})]})},y.id)):e.jsx(Ft,{value:"",disabled:!0,children:"No technicians available"})})]}),e.jsx(k,{size:"sm",variant:"outline",onClick:$,disabled:!i||w,className:"h-8 px-3 text-xs bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100 disabled:opacity-50",children:w?e.jsx(Bt,{className:"h-3 w-3 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"h-3 w-3 mr-1"}),"Assign"]})})]}),"            "]})]})}export{va as default};
